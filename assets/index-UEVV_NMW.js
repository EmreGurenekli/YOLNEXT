var e,t,s=Object.defineProperty,a=(e,t,a)=>((e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a)(e,"symbol"!=typeof t?t+"":t,a);import{r as l,a as i,g as r,R as n,L as d,u as o,b as c,c as m,O as x,N as u,d as h,e as p,f as g,B as b}from"./react-vendor-D-DYEzDw.js";import{A as f,R as y,H as j,F as v,T as N,L as k,I as w,M as S,P as z,a as T,U as C,B as A,b as D,c as E,X as _,d as I,e as K,f as M,D as $,g as B,h as R,S as O,G as P,C as L,i as G,j as F,k as Y,l as q,m as H,n as U,o as V,p as J,q as W,r as Z,s as X,E as Q,t as ee,u as te,v as se,w as ae,x as le,y as ie,z as re,J as ne,K as de,N as oe,O as ce,Q as me,V as xe,W as ue,Y as he,Z as pe,_ as ge,$ as be,a0 as fe,a1 as ye,a2 as je,a3 as ve,a4 as Ne,a5 as ke,a6 as we,a7 as Se,a8 as ze,a9 as Te,aa as Ce,ab as Ae,ac as De,ad as Ee,ae as _e,af as Ie,ag as Ke,ah as Me,ai as $e,aj as Be,ak as Re,al as Oe,am as Pe,an as Le,ao as Ge,ap as Fe,aq as Ye,ar as qe,as as He,at as Ue,au as Ve,av as Je,aw as We,ax as Ze,ay as Xe,az as Qe,aA as et,aB as tt,aC as st,aD as at,aE as lt,aF as it,aG as rt,aH as nt,aI as dt,aJ as ot,aK as ct,aL as mt,aM as xt,aN as ut,aO as ht,aP as pt,aQ as gt,aR as bt,aS as ft,aT as yt,aU as jt,aV as vt,aW as Nt,aX as kt,aY as wt,aZ as St,a_ as zt,a$ as Tt,b0 as Ct,b1 as At}from"./ui-vendor-BzDIrvAj.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Dt={exports:{}},Et={},_t=l,It=Symbol.for("react.element"),Kt=Symbol.for("react.fragment"),Mt=Object.prototype.hasOwnProperty,$t=_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bt={key:!0,ref:!0,__self:!0,__source:!0};function Rt(e,t,s){var a,l={},i=null,r=null;for(a in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(r=t.ref),t)Mt.call(t,a)&&!Bt.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:It,type:e,key:i,ref:r,props:l,_owner:$t.current}}Et.Fragment=Kt,Et.jsx=Rt,Et.jsxs=Rt,Dt.exports=Et;var Ot=Dt.exports,Pt={},Lt=i;Pt.createRoot=Lt.createRoot,Pt.hydrateRoot=Lt.hydrateRoot;var Gt="undefined"!=typeof Element,Ft="function"==typeof Map,Yt="function"==typeof Set,qt="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Ht(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var s,a,l,i;if(Array.isArray(e)){if((s=e.length)!=t.length)return!1;for(a=s;0!==a--;)if(!Ht(e[a],t[a]))return!1;return!0}if(Ft&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;for(i=e.entries();!(a=i.next()).done;)if(!Ht(a.value[1],t.get(a.value[0])))return!1;return!0}if(Yt&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(qt&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((s=e.length)!=t.length)return!1;for(a=s;0!==a--;)if(e[a]!==t[a])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(a=s;0!==a--;)if(!Object.prototype.hasOwnProperty.call(t,l[a]))return!1;if(Gt&&e instanceof Element)return!1;for(a=s;0!==a--;)if(("_owner"!==l[a]&&"__v"!==l[a]&&"__o"!==l[a]||!e.$$typeof)&&!Ht(e[l[a]],t[l[a]]))return!1;return!0}return e!=e&&t!=t}const Ut=r(function(e,t){try{return Ht(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return!1;throw s}});const Vt=r(function(e,t,s,a,l,i,r,n){if(!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=[s,a,l,i,r,n],c=0;(d=new Error(t.replace(/%s/g,function(){return o[c++]}))).name="Invariant Violation"}throw d.framesToPop=1,d}});const Jt=r(function(e,t,s,a){var l=s?s.call(a,e,t):void 0;if(void 0!==l)return!!l;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var n=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var o=i[d];if(!n(o))return!1;var c=e[o],m=t[o];if(!1===(l=s?s.call(a,c,m,o):void 0)||void 0===l&&c!==m)return!1}return!0});var Wt=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Wt||{}),Zt={rel:["amphtml","canonical","alternate"]},Xt={type:["application/ld+json"]},Qt={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},es=Object.values(Wt),ts={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ss=Object.entries(ts).reduce((e,[t,s])=>(e[s]=t,e),{}),as="data-rh",ls="defaultTitle",is="defer",rs="encodeSpecialCharacters",ns="onChangeClientState",ds="titleTemplate",os="prioritizeSeoTags",cs=(e,t)=>{for(let s=e.length-1;s>=0;s-=1){const a=e[s];if(Object.prototype.hasOwnProperty.call(a,t))return a[t]}return null},ms=e=>{let t=cs(e,"title");const s=cs(e,ds);if(Array.isArray(t)&&(t=t.join("")),s&&t)return s.replace(/%s/g,()=>t);const a=cs(e,ls);return t||a||void 0},xs=e=>cs(e,ns)||(()=>{}),us=(e,t)=>t.filter(t=>void 0!==t[e]).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),hs=(e,t)=>t.filter(e=>void 0!==e.base).map(e=>e.base).reverse().reduce((t,s)=>{if(!t.length){const a=Object.keys(s);for(let l=0;l<a.length;l+=1){const i=a[l].toLowerCase();if(-1!==e.indexOf(i)&&s[i])return t.concat(s)}}return t},[]),ps=(e,t,s)=>{const a={};return s.filter(t=>!!Array.isArray(t[e])||(void 0!==t[e]&&(t[e],console&&console.warn),!1)).map(t=>t[e]).reverse().reduce((e,s)=>{const l={};s.filter(e=>{let s;const i=Object.keys(e);for(let a=0;a<i.length;a+=1){const l=i[a],r=l.toLowerCase();-1===t.indexOf(r)||"rel"===s&&"canonical"===e[s].toLowerCase()||"rel"===r&&"stylesheet"===e[r].toLowerCase()||(s=r),-1===t.indexOf(l)||"innerHTML"!==l&&"cssText"!==l&&"itemprop"!==l||(s=l)}if(!s||!e[s])return!1;const r=e[s].toLowerCase();return a[s]||(a[s]={}),l[s]||(l[s]={}),!a[s][r]&&(l[s][r]=!0,!0)}).reverse().forEach(t=>e.push(t));const i=Object.keys(l);for(let t=0;t<i.length;t+=1){const e=i[t],s={...a[e],...l[e]};a[e]=s}return e},[]).reverse()},gs=(e,t)=>{if(Array.isArray(e)&&e.length)for(let s=0;s<e.length;s+=1){if(e[s][t])return!0}return!1},bs=e=>Array.isArray(e)?e.join(""):e,fs=(e,t)=>Array.isArray(e)?e.reduce((e,s)=>(((e,t)=>{const s=Object.keys(e);for(let a=0;a<s.length;a+=1)if(t[s[a]]&&t[s[a]].includes(e[s[a]]))return!0;return!1})(s,t)?e.priority.push(s):e.default.push(s),e),{priority:[],default:[]}):{default:e,priority:[]},ys=(e,t)=>({...e,[t]:void 0}),js=["noscript","script","style"],vs=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ns=e=>Object.keys(e).reduce((t,s)=>{const a=void 0!==e[s]?`${s}="${e[s]}"`:`${s}`;return t?`${t} ${a}`:a},""),ks=(e,t={})=>Object.keys(e).reduce((t,s)=>(t[ts[s]||s]=e[s],t),t),ws=(e,t)=>t.map((t,s)=>{const a={key:s,[as]:!0};return Object.keys(t).forEach(e=>{const s=ts[e]||e;if("innerHTML"===s||"cssText"===s){const e=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:e}}else a[s]=t[e]}),n.createElement(e,a)}),Ss=(e,t,s=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,s)=>{const a=ks(s,{key:t,[as]:!0});return[n.createElement("title",a,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,s,a)=>{const l=Ns(s),i=bs(t);return l?`<${e} ${as}="true" ${l}>${vs(i,a)}</${e}>`:`<${e} ${as}="true">${vs(i,a)}</${e}>`})(e,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ks(t),toString:()=>Ns(t)};default:return{toComponent:()=>ws(e,t),toString:()=>((e,t,s=!0)=>t.reduce((t,a)=>{const l=a,i=Object.keys(l).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const a=void 0===l[t]?t:`${t}="${vs(l[t],s)}"`;return e?`${e} ${a}`:a},""),r=l.innerHTML||l.cssText||"",n=-1===js.indexOf(e);return`${t}<${e} ${as}="true" ${i}${n?"/>":`>${r}</${e}>`}`},""))(e,t,s)}}},zs=e=>{const{baseTag:t,bodyAttributes:s,encode:a=!0,htmlAttributes:l,noscriptTags:i,styleTags:r,title:n="",titleAttributes:d,prioritizeSeoTags:o}=e;let{linkTags:c,metaTags:m,scriptTags:x}=e,u={toComponent:()=>{},toString:()=>""};return o&&({priorityMethods:u,linkTags:c,metaTags:m,scriptTags:x}=(({metaTags:e,linkTags:t,scriptTags:s,encode:a})=>{const l=fs(e,Qt),i=fs(t,Zt),r=fs(s,Xt);return{priorityMethods:{toComponent:()=>[...ws("meta",l.priority),...ws("link",i.priority),...ws("script",r.priority)],toString:()=>`${Ss("meta",l.priority,a)} ${Ss("link",i.priority,a)} ${Ss("script",r.priority,a)}`},metaTags:l.default,linkTags:i.default,scriptTags:r.default}})(e)),{priority:u,base:Ss("base",t,a),bodyAttributes:Ss("bodyAttributes",s,a),htmlAttributes:Ss("htmlAttributes",l,a),link:Ss("link",c,a),meta:Ss("meta",m,a),noscript:Ss("noscript",i,a),script:Ss("script",x,a),style:Ss("style",r,a),title:Ss("title",{title:n,titleAttributes:d},a)}},Ts=[],Cs=!("undefined"==typeof window||!window.document||!window.document.createElement),As=class{constructor(e,t){a(this,"instances",[]),a(this,"canUseDOM",Cs),a(this,"context"),a(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Ts:this.instances,add:e=>{(this.canUseDOM?Ts:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Ts:this.instances).indexOf(e);(this.canUseDOM?Ts:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=zs({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Ds=n.createContext({}),Es=(e=class extends l.Component{constructor(t){super(t),a(this,"helmetData"),this.helmetData=new As(this.props.context||{},e.canUseDOM)}render(){return n.createElement(Ds.Provider,{value:this.helmetData.value},this.props.children)}},a(e,"canUseDOM",Cs),e),_s=(e,t)=>{const s=document.head||document.querySelector("head"),a=s.querySelectorAll(`${e}[${as}]`),l=[].slice.call(a),i=[];let r;return t&&t.length&&t.forEach(t=>{const s=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)s.innerHTML=t.innerHTML;else if("cssText"===e)s.styleSheet?s.styleSheet.cssText=t.cssText:s.appendChild(document.createTextNode(t.cssText));else{const a=e,l=void 0===t[a]?"":t[a];s.setAttribute(e,l)}s.setAttribute(as,"true"),l.some((e,t)=>(r=t,s.isEqualNode(e)))?l.splice(r,1):i.push(s)}),l.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),i.forEach(e=>s.appendChild(e)),{oldTags:l,newTags:i}},Is=(e,t)=>{const s=document.getElementsByTagName(e)[0];if(!s)return;const a=s.getAttribute(as),l=a?a.split(","):[],i=[...l],r=Object.keys(t);for(const n of r){const e=t[n]||"";s.getAttribute(n)!==e&&s.setAttribute(n,e),-1===l.indexOf(n)&&l.push(n);const a=i.indexOf(n);-1!==a&&i.splice(a,1)}for(let n=i.length-1;n>=0;n-=1)s.removeAttribute(i[n]);l.length===i.length?s.removeAttribute(as):s.getAttribute(as)!==r.join(",")&&s.setAttribute(as,r.join(","))},Ks=(e,t)=>{const{baseTag:s,bodyAttributes:a,htmlAttributes:l,linkTags:i,metaTags:r,noscriptTags:n,onChangeClientState:d,scriptTags:o,styleTags:c,title:m,titleAttributes:x}=e;Is("body",a),Is("html",l),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=bs(e)),Is("title",t)})(m,x);const u={baseTag:_s("base",s),linkTags:_s("link",i),metaTags:_s("meta",r),noscriptTags:_s("noscript",n),scriptTags:_s("script",o),styleTags:_s("style",c)},h={},p={};Object.keys(u).forEach(e=>{const{newTags:t,oldTags:s}=u[e];t.length&&(h[e]=t),s.length&&(p[e]=u[e].oldTags)}),t&&t(),d(e,h,p)},Ms=null,$s=e=>{Ms&&cancelAnimationFrame(Ms),e.defer?Ms=requestAnimationFrame(()=>{Ks(e,()=>{Ms=null})}):(Ks(e),Ms=null)},Bs=class extends l.Component{constructor(){super(...arguments),a(this,"rendered",!1)}shouldComponentUpdate(e){return!Jt(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let s=null;const a=(l=e.get().map(e=>{const t={...e.props};return delete t.context,t}),{baseTag:hs(["href"],l),bodyAttributes:us("bodyAttributes",l),defer:cs(l,is),encode:cs(l,rs),htmlAttributes:us("htmlAttributes",l),linkTags:ps("link",["rel","href"],l),metaTags:ps("meta",["name","charset","http-equiv","property","itemprop"],l),noscriptTags:ps("noscript",["innerHTML"],l),onChangeClientState:xs(l),scriptTags:ps("script",["src","innerHTML"],l),styleTags:ps("style",["cssText"],l),title:ms(l),titleAttributes:us("titleAttributes",l),prioritizeSeoTags:gs(l,os)});var l;Es.canUseDOM?$s(a):zs&&(s=zs(a)),t(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Rs=(t=class extends l.Component{shouldComponentUpdate(e){return!Ut(ys(this.props,"helmetData"),ys(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,s,a){return{...t,[e.type]:[...t[e.type]||[],{...s,...this.mapNestedChildrenToProps(e,a)}]}}mapObjectTypeChildren(e,t,s,a){switch(e.type){case"title":return{...t,[e.type]:a,titleAttributes:{...s}};case"body":return{...t,bodyAttributes:{...s}};case"html":return{...t,htmlAttributes:{...s}};default:return{...t,[e.type]:{...s}}}}mapArrayTypeChildrenToProps(e,t){let s={...t};return Object.keys(e).forEach(t=>{s={...s,[t]:e[t]}}),s}warnOnInvalidChildren(e,t){return Vt(es.some(t=>e.type===t),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${es.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),Vt(!t||"string"==typeof t||Array.isArray(t)&&!t.some(e=>"string"!=typeof e),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let s={};return n.Children.forEach(e,e=>{if(!e||!e.props)return;const{children:a,...l}=e.props,i=Object.keys(l).reduce((e,t)=>(e[ss[t]||t]=l[t],e),{});let{type:r}=e;switch("symbol"==typeof r?r=r.toString():this.warnOnInvalidChildren(e,a),r){case"Symbol(react.fragment)":t=this.mapChildrenToProps(a,t);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(e,s,i,a);break;default:t=this.mapObjectTypeChildren(e,t,i,a)}}),this.mapArrayTypeChildrenToProps(s,t)}render(){const{children:e,...t}=this.props;let s={...t},{helmetData:a}=t;if(e&&(s=this.mapChildrenToProps(e,s)),a&&!(a instanceof As)){a=new As(a.context,!0),delete s.helmetData}return a?n.createElement(Bs,{...s,context:a.value}):n.createElement(Ds.Consumer,null,e=>n.createElement(Bs,{...s,context:e}))}},a(t,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),t);const Os={BASE_URL:"/YOLNEXT/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ps={};const Ls={development:{timeout:1e4,retryAttempts:3},production:{timeout:15e3,retryAttempts:5},test:{timeout:5e3,retryAttempts:1}},Gs=()=>{try{return Os??null}catch{return null}},Fs=e=>{var t;const s=Gs(),a="undefined"!=typeof process?Ps.VITE_API_URL:void 0,l=(null==s?void 0:s.VITE_API_URL)||a;if(l){let e=String(l);return e.endsWith("/api")&&(e=e.substring(0,e.length-4)),e}return"production"===e?"undefined"!=typeof window&&(null==(t=window.location)?void 0:t.origin)?window.location.origin:"https://yolnext-backend.onrender.com":"http://localhost:5000"},Ys=()=>{const e=(()=>{const e=Gs(),t="undefined"!=typeof process?"production":void 0,s=String((null==e?void 0:e.MODE)||t||"development");return"test"===s?"test":"production"===s?"production":"development"})();return{...Ls[e],baseURL:Fs(e)}},qs="/api/auth/forgot-password",Hs="/api/shipments",Us="/api/shipments/open",Vs="/api/shipments/nakliyeci",Js="/api/shipments/offers",Ws="/api/carriers/corporate",Zs=e=>{let t=Ys().baseURL.replace(/\/$/,"");t.endsWith("/api")&&(t=t.substring(0,t.length-4));let s=e.startsWith("/")?e:`/${e}`;return s.startsWith("/api/")||s.startsWith("/api")||(s=`/api${s}`),`${t}${s}`},Xs=async e=>(await fetch(Zs("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),Qs=async e=>{const t={...e,first_name:e.firstName,last_name:e.lastName,user_type:e.userType,company_name:e.companyName,tax_number:e.taxNumber,firstName:void 0,lastName:void 0,userType:void 0,companyName:void 0,taxNumber:void 0};return(await fetch(Zs("/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()},ea=async e=>{const t=await fetch(Zs("/api/auth/demo-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userType:e})});if(!t.ok){const e=await t.json().catch(()=>({success:!1,message:"Hızlı giriş başarısız"}));throw new Error(e.message||`HTTP ${t.status}: ${t.statusText}`)}return t.json()},ta=l.createContext(void 0),sa=()=>{const e=l.useContext(ta);if(void 0===e)throw new Error("useAuth bir AuthProvider içinde kullanılmalıdır");return e},aa=({children:e})=>{const[t,s]=l.useState(null),[a,i]=l.useState(null),[r,n]=l.useState(!0),d=!!t&&!!a,o=e=>{try{return"undefined"!=typeof window&&window.localStorage?window.localStorage.getItem(e):null}catch(t){return null}},c=(e,t)=>{try{"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem(e,t)}catch(s){}},m=e=>{try{"undefined"!=typeof window&&window.localStorage&&window.localStorage.removeItem(e)}catch(t){}};l.useEffect(()=>{(async()=>{try{const t="undefined"!=typeof window&&window.location?window.location.pathname:"";if("/login"===t||"/register"===t||"/forgot-password"===t||"/reset-password"===t||"/email-verification"===t||t.endsWith("/login"))return m("authToken"),m("token"),m("user"),s(null),void i(null);const a=o("authToken")||o("token"),l=o("user");if(a&&"null"!==a&&"undefined"!==a&&l)try{const e=JSON.parse(l);if(e&&a){const t=async()=>{var e;try{const t=await fetch(Zs("/api/users/profile"),{headers:{Authorization:`Bearer ${a}`}});if(!t.ok)return null;const s=await t.json().catch(()=>null),l=(null==s?void 0:s.user)||(null==(e=null==s?void 0:s.data)?void 0:e.user)||(null==s?void 0:s.data)||s;return l&&"object"==typeof l?l:null}catch{return null}},l=await t();if(!l)return m("authToken"),m("token"),m("user"),s(null),void i(null);const r=e=>{const t=String(e||"").trim();return t?"demo"===t.toLowerCase()?"":t.includes("Demo")?t.replace(/\bDemo\b/gi,"").replace(/\s+/g," ").trim():t:""},n=a.startsWith("demo-token-"),d=e.fullName||e.full_name||e.name,o=e.firstName||e.first_name,x=e.lastName||e.last_name,u=r(d),h=r(o),p=r(x),g=String(d||"").includes("Demo")||"demo"===String(d||"").trim().toLowerCase(),b=String(o||"").includes("Demo")||"demo"===String(o||"").trim().toLowerCase(),f=String(x||"").includes("Demo")||"demo"===String(x||"").trim().toLowerCase(),y={...e,...l,fullName:g?u:e.fullName,firstName:b?h:e.firstName,lastName:f?p:e.lastName,nakliyeciCode:e.nakliyeciCode||e.nakliyecicode||void 0,driverCode:e.driverCode||e.drivercode||void 0};if(n){const t=e.role||e.panel_type||e.userType||e.user_type,s="corporate"===t?"Kurumsal":"nakliyeci"===t?"Nakliyeci":"tasiyici"===t?"Taşıyıcı":"Bireysel";r(y.firstName)||(y.firstName="Kullanıcı"),r(y.fullName)||(y.fullName=`${s} Kullanıcı`)}s(y),i(a),c("user",JSON.stringify(y)),c("authToken",a),c("token",a)}}catch(e){m("authToken"),m("token"),m("user")}}catch(t){}finally{n(!1)}})()},[]),l.useEffect(()=>{const e=()=>{x()};return window.addEventListener("auth:logout",e),()=>{window.removeEventListener("auth:logout",e)}},[]);const x=()=>{s(null),i(null),m("authToken"),m("token"),m("user")},u={user:t,token:a,isAuthenticated:d,isLoading:r,login:async(e,t,a)=>{var l,r,d,o,m,x,u,h;try{n(!0);const u=await Xs({email:e,password:t,userType:a});if(u.success||(null==(l=u.data)?void 0:l.success)){const e=u,t=(null==(r=e.data)?void 0:r.user)||e.user,a=(null==(d=e.data)?void 0:d.token)||e.token;if(!t||!a)throw new Error("Geçersiz yanıt formatı");let l=t.fullName;if(!l||"Kullanıcı"===l){const e=t.firstName||"",s=t.lastName||"";l=e&&s?`${e} ${s}`.trim():e||(s||(t.fullName||"Kullanıcı"))}const n=t.firstName||(null==(o=t.fullName)?void 0:o.split(" ")[0])||"",x=t.lastName||(null==(m=t.fullName)?void 0:m.split(" ").slice(1).join(" "))||"",h=t.role||t.panel_type||t.userType||"individual";let p=n,g=x;if(!p&&!g&&l&&"Kullanıcı"!==l){const e=l.split(" ");e.length>=2?(p=e[0],g=e.slice(1).join(" ")):1===e.length&&(p=e[0])}const b={id:t.id.toString(),fullName:l,email:t.email,role:h,firstName:p,lastName:g,phone:t.phone,companyName:t.companyName,nakliyeciCode:t.nakliyeciCode||t.nakliyecicode||void 0,driverCode:t.driverCode||t.drivercode||void 0,createdAt:t.createdAt||(new Date).toISOString(),updatedAt:t.updatedAt||(new Date).toISOString()};return c("authToken",a),c("token",a),c("user",JSON.stringify(b)),s(b),i(a),{success:!0,user:t}}throw new Error((null==(x=u.data)?void 0:x.message)||u.message||"Giriş yapılamadı")}catch(p){const e=p;return{success:!1,error:(null==(h=null==(u=e.response)?void 0:u.data)?void 0:h.message)||e.message||"Giriş yapılamadı"}}finally{n(!1)}},register:async e=>{var t,a,l,r,d,o,m,x;try{n(!0);const m=await Qs(e);if(m.success||(null==(t=m.data)?void 0:t.success)){const t=m.data||m,n=(null==(a=t.data)?void 0:a.user)||t.user,o=(null==(l=t.data)?void 0:l.token)||t.token;if(!n||!o)throw new Error("Geçersiz yanıt formatı");!n.firstName&&!n.lastName&&e.firstName&&e.lastName&&(n.firstName=e.firstName,n.lastName=e.lastName);let x=n.fullName;if(!x||"Kullanıcı"===x){const e=n.firstName||"",t=n.lastName||"";x=e&&t?`${e} ${t}`.trim():e||(t||(n.fullName||"Kullanıcı"))}const u=n.firstName||(null==(r=n.fullName)?void 0:r.split(" ")[0])||"",h=n.lastName||(null==(d=n.fullName)?void 0:d.split(" ").slice(1).join(" "))||"",p=n.role||n.panel_type||n.userType||"individual",g={id:n.id.toString(),fullName:x,email:n.email,role:p,firstName:u,lastName:h,phone:n.phone,companyName:n.companyName,nakliyeciCode:n.nakliyeciCode||n.nakliyecicode||void 0,driverCode:n.driverCode||n.drivercode||void 0,createdAt:n.createdAt||(new Date).toISOString(),updatedAt:n.updatedAt||(new Date).toISOString()};return c("authToken",o),c("user",JSON.stringify(g)),s(g),i(o),{success:!0,user:g}}throw new Error((null==(o=m.data)?void 0:o.message)||m.message||"Kayıt işlemi başarısız")}catch(u){const e=u;return{success:!1,error:(null==(x=null==(m=e.response)?void 0:m.data)?void 0:x.message)||e.message||"Kayıt işlemi başarısız"}}finally{n(!1)}},logout:x,updateUser:e=>{s(t=>{const s=t?{...t,...e}:null;return s&&c("user",JSON.stringify(s)),s})},demoLogin:async e=>{var t,a;try{n(!0);const l=await ea(e),r=(null==l?void 0:l.token)||(null==(t=null==l?void 0:l.data)?void 0:t.token)||null,d=(null==l?void 0:l.user)||(null==(a=null==l?void 0:l.data)?void 0:a.user)||null;if(!r||!d)throw new Error((null==l?void 0:l.message)||"Hızlı giriş başarısız");const o=d.role||d.panel_type||d.userType||d.user_type||e||"individual",m={...d,id:String(d.id??d.userId??""),role:o};return c("authToken",r),c("token",r),c("user",JSON.stringify(m)),i(r),s(m),{success:!0,user:m}}catch(l){return{success:!1,error:l.message||"Hızlı giriş başarısız"}}finally{n(!1)}},getPanelRoute:e=>({individual:"/individual/dashboard",corporate:"/corporate/dashboard",nakliyeci:"/nakliyeci/dashboard",tasiyici:"/tasiyici/dashboard"}[e]||"/")};return Ot.jsx(ta.Provider,{value:u,children:e})},la=l.createContext(void 0),ia=({children:e})=>{const[t,s]=l.useState("system"),[a,i]=l.useState("light");l.useEffect(()=>{if("undefined"!=typeof window&&window.localStorage)try{const e=localStorage.getItem("theme");e&&["light","dark","system"].includes(e)&&s(e)}catch(e){}},[]),l.useEffect(()=>{if("undefined"!=typeof window&&window.localStorage)try{localStorage.setItem("theme",t)}catch(e){}},[t]),l.useEffect(()=>{if("undefined"==typeof window||!window.matchMedia)return;const e=()=>{if("system"===t)try{const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i(e)}catch(e){i("light")}else i(t)};e();try{const s=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>{"system"===t&&e()};return s.addEventListener("change",a),()=>{try{s.removeEventListener("change",a)}catch(e){}}}catch(s){}},[t]),l.useEffect(()=>{if("undefined"!=typeof document)try{const e=document.documentElement;if(!e)return;if(!e.classList||"function"!=typeof e.classList.add)return void(e.className=e.className.replace(/\b(light|dark)\b/g,"").trim()+" "+a);e.classList.remove("light","dark"),e.classList.add(a)}catch(e){try{const e=document.documentElement;e&&(e.className=e.className.replace(/\b(light|dark)\b/g,"").trim()+" "+a)}catch(t){}}},[a]);const r={theme:t,setTheme:s,actualTheme:a};return Ot.jsx(la.Provider,{value:r,children:e})},ra=()=>{},na=()=>{},da=()=>Promise.resolve(!0),oa=!0,ca=()=>"granted",ma=l.createContext(void 0),xa=(e,t)=>{switch(t.type){case"ADD_NOTIFICATION":return{...e,notifications:[...e.notifications,t.payload]};case"REMOVE_NOTIFICATION":return{...e,notifications:e.notifications.filter(e=>e.id!==t.payload)};case"CLEAR_ALL_NOTIFICATIONS":return{...e,notifications:[]};default:return e}},ua={notifications:[]},ha=({children:e})=>{const[t,s]=l.useReducer(xa,ua);l.useEffect(()=>{if("undefined"!=typeof window&&window.localStorage){try{localStorage.getItem("authToken")&&na()}catch(e){}return()=>{try{ra()}catch(e){}}}},[]);const a=l.useCallback(e=>{const t=Math.random().toString(36).substr(2,9),a={id:t,duration:5e3,...e};return s({type:"ADD_NOTIFICATION",payload:a}),!a.persistent&&a.duration&&setTimeout(()=>{s({type:"REMOVE_NOTIFICATION",payload:t})},a.duration),t},[]),i=l.useCallback(e=>{s({type:"REMOVE_NOTIFICATION",payload:e})},[]),r=l.useCallback(()=>{s({type:"CLEAR_ALL_NOTIFICATIONS"})},[]),n=l.useCallback((e,t,s)=>a({type:"success",title:e,message:t,...s}),[a]),d=l.useCallback((e,t,s)=>a({type:"error",title:e,message:t,duration:7e3,...s}),[a]),o=l.useCallback((e,t,s)=>a({type:"warning",title:e,message:t,...s}),[a]),c=l.useCallback((e,t,s)=>a({type:"info",title:e,message:t,...s}),[a]),m=l.useCallback(async()=>await da(),[]),x=l.useCallback(()=>oa,[]),u=l.useCallback(()=>ca(),[]),h=l.useCallback((e,t)=>{},[]),p={...t,addNotification:a,removeNotification:i,clearAllNotifications:r,success:n,error:d,warning:o,info:c,requestPermission:m,isEnabled:x,getPermissionStatus:u,sendPushNotification:h};return Ot.jsx(ma.Provider,{value:p,children:e})},pa=({className:e})=>Ot.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ga=({className:e})=>Ot.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ba=({className:e})=>Ot.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),fa=({className:e})=>Ot.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),ya=({className:e})=>Ot.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),ja=({toast:e,onClose:t})=>{n.useEffect(()=>{if(e.duration&&e.duration>0){const s=setTimeout(()=>t(e.id),e.duration);return()=>clearTimeout(s)}},[e.duration,e.id,t]);return Ot.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full bg-white rounded-lg shadow-lg border ${(()=>{switch(e.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})()} animate-in slide-in-from-right-full duration-300`,children:Ot.jsx("div",{className:"p-4",children:Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx("div",{className:"flex-shrink-0",children:(()=>{switch(e.type){case"success":return Ot.jsx(pa,{className:"w-5 h-5 text-green-500"});case"error":return Ot.jsx(ga,{className:"w-5 h-5 text-red-500"});case"warning":return Ot.jsx(ba,{className:"w-5 h-5 text-yellow-500"});default:return Ot.jsx(fa,{className:"w-5 h-5 text-blue-500"})}})()}),Ot.jsxs("div",{className:"ml-3 w-0 flex-1",children:[Ot.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),e.message&&Ot.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),Ot.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:Ot.jsxs("button",{onClick:()=>t(e.id),className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[Ot.jsx("span",{className:"sr-only",children:"Kapat"}),Ot.jsx(ya,{className:"h-5 w-5"})]})})]})})})},va=({toasts:e,onClose:t})=>Ot.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>Ot.jsx(ja,{toast:e,onClose:t},e.id))}),Na=l.createContext(void 0),ka=()=>{const e=l.useContext(Na);if(!e)throw new Error("useToast bir ToastProvider içinde kullanılmalıdır");return e},wa=({children:e})=>{const[t,s]=l.useState([]),a=e=>{s(t=>t.filter(t=>t.id!==e))};return Ot.jsxs(Na.Provider,{value:{toasts:t,showToast:e=>{const t={...e,id:Math.random().toString(36).substr(2,9)};s(e=>[...e,t])},hideToast:a,clearAllToasts:()=>{s([])}},children:[e,Ot.jsx(va,{toasts:t,onClose:a})]})};var Sa=Object.defineProperty,za=(e,t,s)=>((e,t,s)=>t in e?Sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ta extends l.Component{constructor(e){super(e),za(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})}),za(this,"handleGoHome",()=>{window.location.href="/"}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:Ot.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:Ot.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg border border-slate-200 p-8 text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:Ot.jsx(f,{className:"w-8 h-8 text-red-600"})}),Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Bir Hata Oluştu"}),Ot.jsx("p",{className:"text-slate-600 mb-6",children:"Üzgünüz, beklenmeyen bir hata oluştu. Lütfen sayfayı yenilemeyi deneyin."}),this.state.error&&Ot.jsxs("details",{className:"mb-6 text-left",open:!0,children:[Ot.jsx("summary",{className:"cursor-pointer text-sm font-medium text-slate-700 mb-2",children:"Hata Detayları"}),Ot.jsxs("div",{className:"bg-slate-100 rounded-lg p-3 text-xs text-slate-600 overflow-auto max-h-64",children:[Ot.jsx("pre",{className:"whitespace-pre-wrap break-words",children:this.state.error.toString()}),this.state.error.stack&&Ot.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words text-red-600",children:this.state.error.stack}),this.state.errorInfo&&Ot.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words",children:this.state.errorInfo.componentStack})]})]}),Ot.jsxs("div",{className:"flex space-x-3",children:[Ot.jsxs("button",{onClick:this.handleRetry,className:"flex-1 bg-gradient-to-r from-slate-800 to-blue-900 text-white py-2 px-4 rounded-lg hover:from-slate-700 hover:to-blue-800 transition-colors flex items-center justify-center space-x-2",children:[Ot.jsx(y,{className:"w-4 h-4"}),Ot.jsx("span",{children:"Yenile"})]}),Ot.jsxs("button",{onClick:this.handleGoHome,className:"flex-1 bg-slate-100 text-slate-700 py-2 px-4 rounded-lg hover:bg-slate-200 transition-colors flex items-center justify-center space-x-2",children:[Ot.jsx(j,{className:"w-4 h-4"}),Ot.jsx("span",{children:"Ana Sayfa"})]})]})]})}):this.props.children}}const Ca="nx-ctrl-7f3k9q2m",Aa=()=>`/${Ca}`,Da=({size:e="md",showText:t=!0,className:s="",variant:a="normal"})=>{if("banner"===a){const t={sm:{width:"120px",height:"40px"},md:{width:"180px",height:"60px"},lg:{width:"240px",height:"80px"},xl:{width:"300px",height:"100px"}},a=t[e]||t.md,l=s.match(/h-(\d+)/),i=l?.25*parseInt(l[1])+"rem":null,r=i?3*parseFloat(i)+"rem":a.width,n=i||a.height,d=s.replace(/h-\d+/g,"").trim();return Ot.jsx("div",{className:`inline-flex items-center justify-center ${d}`,style:{width:r,height:n},children:Ot.jsx("img",{src:"/img/Logo.png",alt:"YolNext Banner Logo",style:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"center center",imageRendering:"auto",display:"block"}})})}return Ot.jsxs("div",{className:`flex items-center ${s}`,style:{overflow:"hidden"},children:[Ot.jsx("img",{src:"/img/Logo.png",alt:"YolNext Logo",className:`${{sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12",xl:"h-24 w-auto"}[e]} object-contain`,style:{objectFit:"contain",imageRendering:"auto"}}),t&&Ot.jsx("span",{className:`font-bold text-gray-900 ${{sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl"}[e]}`,children:"YolNext"})]})};function Ea(e){var t,s;try{const a=null==(s=null==(t=import.meta)?void 0:t.env)?void 0:s[e];return"string"==typeof a&&a.trim()?a.trim():void 0}catch{return}}function _a(e,t=[],s){const a=Ea(e);if(!a){if(s)return s;throw new Error(`Missing required env: ${e}`)}if(t.includes(a)){if(s)return s;throw new Error(`Invalid placeholder value for env: ${e}`)}return a}const Ia={companyName:_a("VITE_COMPANY_NAME",["YolNext"],"YolNext Lojistik Hizmetleri A.S."),address:_a("VITE_COMPANY_ADDRESS",["İstanbul, Türkiye"],"Maslak Mahallesi Buyukdere Caddesi No:255 Noramin Is Merkezi Kat:8 Sariyer/Istanbul"),phone:_a("VITE_COMPANY_PHONE",["+90 (212) 123 45 67"],"+90 212 456 78 90"),supportEmail:_a("VITE_SUPPORT_EMAIL",["destek@yolnext.com"],"destek@yolnext.com.tr"),kvkkEmail:_a("VITE_KVKK_EMAIL",["destek@yolnext.com"],"kvkk@yolnext.com.tr"),taxOffice:Ea("VITE_TAX_OFFICE"),taxNumber:Ea("VITE_TAX_NUMBER"),mersis:Ea("VITE_MERSIS"),tradeRegistryNumber:Ea("VITE_TRADE_REGISTRY_NUMBER")};_a("VITE_LEGAL_DOC_VERSION",["v1.0"],"v1.0.0");const Ka=()=>Ot.jsx("footer",{className:"bg-slate-900 text-white",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[Ot.jsxs("div",{className:"col-span-1 md:col-span-2",children:[Ot.jsx("div",{className:"flex items-center justify-start mb-4",children:Ot.jsx(Da,{variant:"banner",size:"lg",showText:!1})}),Ot.jsx("p",{className:"text-slate-300 mb-4 max-w-md",children:"Türkiye'nin en güvenilir lojistik platformu. Göndericiler ve nakliyecileri bir araya getirerek taşımacılık sektörüne yeni bir soluk getiriyoruz."}),Ot.jsxs("div",{className:"flex space-x-4",children:[Ot.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center hover:bg-gradient-to-r from-slate-800 to-blue-900 transition-colors","aria-label":"Facebook",children:Ot.jsx(v,{className:"w-5 h-5"})}),Ot.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center hover:bg-blue-400 transition-colors","aria-label":"Twitter",children:Ot.jsx(N,{className:"w-5 h-5"})}),Ot.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center hover:from-blue-900 hover:to-slate-800 transition-colors","aria-label":"LinkedIn",children:Ot.jsx(k,{className:"w-5 h-5"})}),Ot.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center hover:bg-pink-600 transition-colors","aria-label":"Instagram",children:Ot.jsx(w,{className:"w-5 h-5"})})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Hızlı Linkler"}),Ot.jsxs("ul",{className:"space-y-2",children:[Ot.jsx("li",{children:Ot.jsx(d,{to:"/about",className:"text-slate-300 hover:text-white transition-colors",children:"Hakkımızda"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/contact",className:"text-slate-300 hover:text-white transition-colors",children:"İletişim"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/login",className:"text-slate-300 hover:text-white transition-colors",children:"Giriş Yap"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/register",className:"text-slate-300 hover:text-white transition-colors",children:"Kayıt Ol"})})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yasal"}),Ot.jsxs("ul",{className:"space-y-2",children:[Ot.jsx("li",{children:Ot.jsx(d,{to:"/terms",className:"text-slate-300 hover:text-white transition-colors",children:"Kullanım Koşulları"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/privacy",className:"text-slate-300 hover:text-white transition-colors",children:"Gizlilik Politikası"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/cookie-policy",className:"text-slate-300 hover:text-white transition-colors",children:"Çerez Politikası"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/kvkk-aydinlatma",className:"text-slate-300 hover:text-white transition-colors",children:"KVKK Aydınlatma Metni"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/consumer-rights",className:"text-slate-300 hover:text-white transition-colors",children:"Tüketici Hakları"})}),Ot.jsx("li",{children:Ot.jsx(d,{to:"/distance-selling-contract",className:"text-slate-300 hover:text-white transition-colors",children:"Mesafeli Satış Sözleşmesi"})}),Ot.jsx("li",{children:Ot.jsx("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new Event("yolnext:cookie-preferences"))}catch{}},className:"text-slate-300 hover:text-white transition-colors",children:"Çerez Tercihleri"})})]})]})]}),Ot.jsx("div",{className:"border-t border-slate-800 mt-8 pt-8",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(S,{className:"w-5 h-5 text-blue-400 mr-3 mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-400",children:"E-posta"}),Ot.jsx("a",{href:`mailto:${Ia.supportEmail}`,className:"text-slate-300 hover:text-white transition-colors",children:Ia.supportEmail})]})]}),Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(z,{className:"w-5 h-5 text-blue-400 mr-3 mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-400",children:"Telefon"}),Ot.jsx("a",{href:`tel:${String(Ia.phone).replace(/[^\d+]/g,"")}`,className:"text-slate-300 hover:text-white transition-colors",children:Ia.phone})]})]}),Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(T,{className:"w-5 h-5 text-blue-400 mr-3 mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-400",children:"Adres"}),Ot.jsx("p",{className:"text-slate-300",children:Ia.address})]})]})]})}),Ot.jsx("div",{className:"border-t border-slate-800 mt-8 pt-8 text-center",children:Ot.jsxs("p",{className:"text-slate-400 text-sm",children:["© ",(new Date).getFullYear()," ",Ia.companyName,". Tüm hakları saklıdır."]})})]})}),Ma="cookieConsent",$a="v1";function Ba(){try{const e=localStorage.getItem(Ma);if(!e)return null;const t=JSON.parse(e);return t&&"object"==typeof t?t.version!==$a||!0!==t.necessary||"boolean"!=typeof t.analytics||"number"!=typeof t.ts?null:{version:$a,ts:t.ts,necessary:!0,analytics:t.analytics}:null}catch{return null}}function Ra(e){const t={version:$a,ts:Date.now(),necessary:!0,analytics:Boolean(e.analytics)};try{localStorage.setItem(Ma,JSON.stringify(t))}catch{}return t}function Oa(){const e=Ba();return Boolean(null==e?void 0:e.analytics)}function Pa(e,t=["A","B"]){if(!Oa())return"A";const s=function(e,t){try{return e?JSON.parse(e):t}catch{return t}}(localStorage.getItem(e),{}).v;if(s&&t.includes(s))return s;const a=t[Math.floor(Math.random()*t.length)]||"A";try{localStorage.setItem(e,JSON.stringify({v:a,ts:Date.now()}))}catch{}return a}async function La(e,t){if(!Oa())return;const s=function(){try{const e=localStorage.getItem("user");if(!e)return{};const t=JSON.parse(e),s=null!=(null==t?void 0:t.id)?Number(t.id):void 0,a=null!=(null==t?void 0:t.role)?String(t.role).toLowerCase():void 0;return{userId:Number.isFinite(s)?s:void 0,role:a}}catch{return{}}}(),a={event:e,data:t||{},ts:Date.now(),path:window.location.pathname,href:window.location.href,referrer:document.referrer||"",ua:navigator.userAgent,...s};try{const e=Zs("/api/analytics/event"),t=JSON.stringify(a);if("undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon){if(navigator.sendBeacon(e,new Blob([t],{type:"application/json"})))return}await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:t,keepalive:!0})}catch{}}const Ga=(e,t)=>{Oa()&&La(e,t)},Fa={getVariant:(e,t=["A","B"])=>Pa(e,t)},Ya=[{id:"individual",title:"Bireysel Gönderici",icon:C,subtitle:"Ev Taşımacılığı • Ofis Taşımacılığı • Eşya Gönderimi",promise:"Optimize Edilmiş Teklif Süreci • Rekabetçi Fiyatlandırma • %30-50 Maliyet Optimizasyonu",painPoint:"Tek kargo şirketine mahkumsunuz. Fiyatlar yüksek, şeffaflık yok, seçenek yok. Her ay binlerce lira fazla ödüyorsunuz.",withoutPlatform:"Tek seçenek, yüksek fiyat, hiç indirim yok",withPlatform:"Çoklu teklif, canlı rekabet, her gönderide tasarruf",flow:["Gönderi oluştur","Teklifleri karşılaştır","Kabul et ve süreci takip et"],features:["Hızlı gönderi formu","Tek ekranda teklif kıyaslama","Canlı konum & teslimat akışı","Mesajlaşma sistemi","Cüzdan yönetimi","Geçmiş siparişler","Değerlendirme sistemi"],stats:"25.000+ bireysel kullanıcı",cta:"Hemen Ücretsiz Başla",urgency:"⚠️ Her gönderide ortalama ₺450 fazla ödüyorsunuz - hemen durdurun",pages:["Dashboard","Gönderi Oluştur","Gönderilerim","Teklifler","Canlı Takip","Mesajlar","Cüzdan"]},{id:"corporate",title:"Kurumsal Gönderici",icon:A,subtitle:"Endüstriyel Lojistik • Perakende Tedarik • E-Ticaret Dağıtım",promise:"Entegre Operasyon Yönetimi • %40 Maliyet Düşüşü • Detaylı Analitik Raporlama",painPoint:"Her departman kendi kargosunu ayarlıyor. Hangi nakliyeye ne kadar ödediğinizi bilmiyorsunuz. Faturaları kontrol edemiyorsunuz. Her ay on binlerce lira gereksiz harcama.",withoutPlatform:"Kontrolsüz harcama, dağınık sistem, raporlama imkansız",withPlatform:"Tek platform, %40 maliyet düşüşü, detaylı raporlar, tam kontrol",flow:["Gönderileri oluştur/planla","Teklifleri yönet ve onayla","Raporla ve optimize et"],features:["Toplu Yönetim Sistemi • Otomatik Raporlama","Departman & yetki yönetimi","Gerçek zamanlı KPI dashboard","Analitik ve raporlama","Ekip yönetimi","İndirim yönetimi","Müşteri yönetimi"],stats:"5.000+ kurumsal hesap",cta:"Kurumsal Görüşme Planla",urgency:"⚠️ Aylık ₺50.000+ gereksiz harcama yapıyorsunuz - hemen kontrol alın",pages:["Dashboard","Gönderi Oluştur","Gönderilerim","Analitik","Raporlar","Ekip","Nakliyeciler","Ayarlar"]},{id:"carrier",title:"Nakliyeci",icon:D,subtitle:"Filo Yönetimi • Lojistik Operasyonları • Taşıma Hizmetleri",promise:"Kapasite Optimizasyonu • Boş Yük Yönetimi • Sektörün En Düşük Komisyon Oranı: %1",painPoint:"Yük bulamıyorsunuz, araçlar boş dönüyor, aracılar %15-20 komisyon kesiyor. Aylık giderler sabit ama gelir düzensiz. İflas riskiyle yaşıyorsunuz.",withoutPlatform:"Boş dönüş, yük bulamama, %15-20 komisyon, düzensiz iş",withPlatform:"Sürekli yük, %1 komisyon, rota optimizasyonu, garantili iş akışı",flow:["Yükleri filtrele","Teklif ver ve işi al","Taşıyıcıya ata ve süreci yönet"],features:["Yük pazarı & anlık filtre","Rota planlama aracı","Filo & sürücü puanlaması","Cüzdan + nakit akış yönetimi","İlan yönetimi","Taşıyıcı yönetimi","Aktif yükler","Tamamlanan yükler"],stats:"15.000+ nakliyeci",cta:"Hemen İş Akışını Başlat",urgency:"⚠️ Her boş dönüş ₺2.500 kayıp - aylık ₺40.000+ kaybı durdurun",pages:["Dashboard","Yük Pazarı","Aktif Yükler","Tamamlanan Yükler","İlanlarım","Taşıyıcılarım","Cüzdan"]},{id:"driver",title:"Taşıyıcı",icon:E,subtitle:"Profesyonel Sürücüler • Taşıma Ekipleri • Lojistik Personeli",promise:"Gerçek Zamanlı İşlem Yönetimi • Haftalık Ödeme Garantisi • Konum Bazlı İş Fırsatları",painPoint:"Bu hafta iş var, gelecek hafta yok. Ödemeler gecikiyor veya hiç gelmiyor. Hangi gün ne kazanacağınızı bilmiyorsunuz. Ailenize düzenli para götüremiyorsunuz.",withoutPlatform:"Belirsiz gelir, geciken ödeme, iş bulamama, stres",withPlatform:"Düzenli iş akışı, haftalık ödeme, konum bazlı fırsatlar, puan sistemi",flow:["İşleri incele","İşi kabul et","Durum güncelle ve tamamla"],features:["Konum bazlı iş önerileri","Anında mesajlaşma","Kazanç takibi & puan sistemi","Destek hattı","İş pazarı","İşlerim","Tamamlanan işler","Tekliflerim"],stats:"8.000+ taşıyıcı",cta:"Hemen Düzenli İşe Başla",urgency:"⚠️ Düzensiz gelir aile bütçenizi vuruyor - düzenli işe geçin",pages:["Dashboard","İş Pazarı","İşlerim","Tamamlanan İşler","Tekliflerim","Mesajlar","Ayarlar"]}],qa=[{icon:T,title:"Konum Takibi",description:"Gönderilerinizin konum bilgilerini takip edin. Her konum güncellemesi anında panelinizde görünür."},{icon:G,title:"Anlık Mesajlaşma",description:"Gönderici, nakliyeci ve taşıyıcı arasında panel içi mesajlaşma. Tüm iletişim kayıt altında."},{icon:F,title:"Cüzdan Sistemi",description:"Ödeme ve komisyon kayıtları tek yerde. Ödeme detayları mesajlaşmada yazılı teyitle netleşir; süreç adımları kayıt altındadır."},{icon:Y,title:"Rota Planlama",description:"Nakliyeciler için rota planlama aracı. Gönderilerinizi organize edin ve verimli rotalar oluşturun."},{icon:q,title:"Detaylı Analitik",description:"Kurumsal göndericiler için KPI dashboard, departman bazlı raporlama ve Excel/PDF export."},{icon:H,title:"Gerçek Zamanlı Bildirimler",description:"WebSocket ile anlık bildirimler. Teklif, teslimat ve durum güncellemeleri anında."},{icon:U,title:"Güvenli Altyapı",description:"KVKK uyumlu, SSL şifreli güvenlik. Tüm veriler Türkiye'de saklanır."},{icon:V,title:"Mobil Uyumlu",description:"Tüm paneller mobil cihazlarda mükemmel çalışır. Responsive tasarım ile her yerden erişim."}],Ha=[{step:1,title:"Gönderi Oluştur",description:"Bireysel veya kurumsal panelden 3 adımlı form ile gönderi oluşturun. Kategori, adres, tarih ve özel gereksinimler.",icon:R,color:"blue"},{step:2,title:"Teklif Al",description:"Nakliyeciler yük pazarından gönderinizi görür, fiyat ve mesaj ile teklif verir. Tek ekranda karşılaştırın.",icon:W,color:"green"},{step:3,title:"Teklif Kabul Et",description:"En uygun teklifi seçin. Ödeme ve yükleme detaylarını mesajlaşmada yazılı teyitle netleştirin. Nakliyeci gönderiyi alır ve taşıyıcıya atar.",icon:J,color:"purple"},{step:4,title:"Canlı Takip",description:"Taşıyıcı konum güncellemeleri yapar. Konum bilgileri ile takip, bildirimler ve mesajlaşma.",icon:Z,color:"orange"},{step:5,title:"Teslimat",description:"Teslimat tamamlanır, onay verilir, değerlendirme yapılır. Süreç kayıtları panelinizde saklanır.",icon:B,color:"emerald"}],Ua=[{name:"Ev Taşınması",icon:A,description:"Oda sayısı, bina tipi, kat bilgileri ile detaylı taşıma"},{name:"Soğuk Zincir",icon:R,description:"Soğuk zincir gerektiren ürünler için taşıma"},{name:"Tehlikeli Madde",icon:U,description:"Tehlikeli madde kategorisinde taşıma"},{name:"E-Ticaret",icon:X,description:"Toplu dağıtım, rota optimizasyonu, hızlı teslimat"},{name:"Kurumsal Lojistik",icon:E,description:"Tedarik zinciri, üretim, depo yönetimi"},{name:"Özel Yük",icon:D,description:"Ağır yük, özel boyut, özel gereksinimler"}],Va=[{icon:$,title:"Tamamen Ücretsiz",description:"Göndericiler için üyelik ve gönderi oluşturma tamamen ücretsiz. Sadece nakliyeciler kazançları üzerinden %1 sabit komisyon öder.",stat:"₺0"},{icon:L,title:"Hızlı Operasyon",description:"Hızlı teklif alma süreci. Hızlı teslimat seçenekleri ile ihtiyacınıza uygun zaman diliminde teslimat.",stat:"Hızlı"},{icon:M,title:"Önemli Tasarruf",description:"Rekabetçi fiyatlar ve şeffaf fiyatlandırma ile uygun maliyetli çözümler. Birden fazla teklif karşılaştırması.",stat:"Tasarruf"},{icon:Q,title:"Tam Şeffaflık",description:"Her adımda bilgi. Puan sistemi, yorumlar, belgeler, konum takibi. Hiçbir şey gizli değil.",stat:"Tam"}],Ja=()=>{const e=o(),[t,s]=l.useState(!1),[a,i]=l.useState("individual"),[r,n]=l.useState(!1),[d]=l.useState(()=>Fa.getVariant("ab_landing_v1")),[c,m]=l.useState({todayJoined:247,last24hSavings:128350,activeNow:1847});l.useEffect(()=>{const e=setInterval(()=>{m(e=>({todayJoined:e.todayJoined+Math.floor(3*Math.random()),last24hSavings:e.last24hSavings+Math.floor(500*Math.random()),activeNow:Math.max(1500,e.activeNow+Math.floor(20*Math.random())-10)}))},8e3);return()=>clearInterval(e)},[]);const x=Ya.find(e=>e.id===a)||Ya[0],u=async(t,s)=>{try{Ga("landing_cta_click",{ab:d,target:t,persona:a}),n(!0),await new Promise(e=>setTimeout(e,600)),e(t,s?{state:s}:void 0)}catch(l){}finally{n(!1)}},h=[{label:"Özellikler",href:"#features"},{label:"Paneller",href:"#panels"},{label:"İş Akışı",href:"#workflow"},{label:"Kategoriler",href:"#categories"},{label:"Vaka Analizleri",href:"#cases"},{label:"SSS",href:"#faq"}];return l.useEffect(()=>{Ga("landing_view",{ab:d})},[d]),l.useEffect(()=>{Ga("landing_ab_assign",{ab:d})},[d]),Ot.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"YolNext | 4 Panelli Lojistik Ekosistemi"}),Ot.jsx("meta",{name:"description",content:"Bireysel, kurumsal, nakliyeci ve taşıyıcı panellerini tek platformda buluşturan YolNext ile lojistik süreçlerinizi rekabetçi fiyatlarla yönetin."}),Ot.jsx("link",{rel:"canonical",href:"https://yolnext.com"})]}),Ot.jsxs("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:[Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center space-x-8",children:[Ot.jsx(Da,{variant:"banner",size:"md",className:"h-9"}),Ot.jsx("nav",{className:"hidden lg:flex items-center space-x-6 text-sm font-medium text-slate-700",children:h.map(e=>Ot.jsx("a",{href:e.href,className:"hover:text-slate-900 transition-colors duration-200",children:e.label},e.href))})]}),Ot.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[Ot.jsx("button",{onClick:()=>u("/login"),disabled:r,className:"px-5 py-2 rounded-xl font-semibold text-sm text-slate-700 bg-slate-50 hover:bg-slate-100 border border-slate-200 transition disabled:opacity-50",children:r?"Yükleniyor...":"Giriş Yap"}),Ot.jsx("button",{onClick:()=>u("/register"),disabled:r,className:"px-6 py-2 rounded-xl font-semibold text-sm text-white bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition disabled:opacity-50",children:r?"Hazırlanıyor...":"Ücretsiz Deneyin"})]}),Ot.jsx("button",{onClick:()=>s(e=>!e),className:"md:hidden p-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-700 hover:bg-slate-100 transition min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Menüyü aç/kapat",children:t?Ot.jsx(_,{className:"h-5 w-5"}):Ot.jsx(I,{className:"h-5 w-5"})})]}),t&&Ot.jsxs("div",{className:"md:hidden border-t border-slate-200 bg-white/95 backdrop-blur-xl px-4 py-6 space-y-4",children:[h.map(e=>Ot.jsx("a",{href:e.href,className:"block text-slate-700 font-medium hover:text-slate-900 transition",onClick:()=>s(!1),children:e.label},e.href)),Ot.jsxs("div",{className:"pt-4 border-t border-slate-200 flex flex-col gap-3",children:[Ot.jsx("button",{onClick:()=>u("/login"),className:"w-full border border-slate-200 bg-slate-50 rounded-xl py-3 font-semibold text-slate-700 hover:bg-slate-100 transition",children:"Giriş Yap"}),Ot.jsx("button",{onClick:()=>u("/register"),className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-xl py-3 font-semibold hover:from-slate-700 hover:to-blue-800 shadow-lg transition",children:"Ücretsiz Deneyin"})]})]})]}),Ot.jsxs("main",{children:[Ot.jsxs("section",{id:"hero",className:"relative min-h-screen bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900 overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-10",children:Ot.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255, 255, 255, 0.15) 1px, transparent 0)",backgroundSize:"40px 40px"}})}),Ot.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-slate-700/20 rounded-full blur-3xl"}),Ot.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ot.jsx("div",{className:"pt-32 lg:pt-40 pb-24 lg:pb-32",children:Ot.jsxs("div",{className:"grid lg:grid-cols-12 gap-12 lg:gap-16 items-center",children:[Ot.jsxs("div",{className:"lg:col-span-7 space-y-10",children:[Ot.jsxs("div",{className:"inline-flex items-center gap-3 mb-8",children:[Ot.jsx("div",{className:"px-4 py-2 bg-white/10 backdrop-blur-md text-white text-xs font-semibold uppercase tracking-[0.15em] rounded-full border border-white/20 shadow-lg",children:"Türkiye'nin Lider Lojistik Platformu"}),Ot.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:[Ot.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),Ot.jsx("span",{className:"text-xs font-medium text-white/90",children:"Entegre Platform"})]})]}),Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-[1.1] tracking-tight",children:["Türkiye'nin Lider",Ot.jsx("br",{}),Ot.jsx("span",{className:"bg-gradient-to-r from-blue-300 to-blue-100 bg-clip-text text-transparent",children:"Lojistik Platformu"})]}),Ot.jsxs("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed max-w-2xl font-normal",children:[Ot.jsx("span",{className:"text-white/95 font-semibold",children:"53.000+ Profesyonel Kullanıcı • %97.2 Memnuniyet Oranı."})," Kurumsal lojistik yönetimi • Optimize edilmiş süreçler • Entegre operasyonlar."]})]}),Ot.jsx("div",{className:"space-y-4 pt-8",children:Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ot.jsxs("button",{onClick:()=>u("/register"),className:"group px-8 py-4 bg-white text-slate-900 rounded-xl font-semibold text-base shadow-2xl hover:shadow-white/20 hover:bg-white/95 transition-all duration-200 flex items-center justify-center gap-2 w-full max-w-[350px]",children:["Profesyonel Hesap Oluştur",Ot.jsx(K,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),Ot.jsx("button",{onClick:()=>u("/login"),className:"px-8 py-4 rounded-xl font-semibold text-base text-white bg-white/10 backdrop-blur-md border-2 border-white/30 hover:border-white/50 hover:bg-white/20 transition-all duration-200 shadow-lg w-full max-w-[350px]",children:"Kurumsal Görüşme Planla"})]})}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-12",children:[Ot.jsxs("div",{className:"group bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-xl hover:bg-white/15 hover:scale-[1.02] transition-all duration-300",children:[Ot.jsx("div",{className:"flex items-center justify-center mb-3",children:Ot.jsx(M,{className:"h-6 w-6 text-emerald-300"})}),Ot.jsx("div",{className:"text-4xl font-bold text-emerald-300 mb-2",children:"53.000+"}),Ot.jsx("div",{className:"text-sm font-semibold text-white/90",children:"Kayıtlı Kullanıcı"}),Ot.jsx("div",{className:"text-xs text-emerald-200 mt-1 font-medium",children:"18.500+ Aylık Aktif"})]}),Ot.jsxs("div",{className:"group bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-xl hover:bg-white/15 hover:scale-[1.02] transition-all duration-300",children:[Ot.jsx("div",{className:"flex items-center justify-center mb-3",children:Ot.jsx($,{className:"h-6 w-6 text-amber-300"})}),Ot.jsx("div",{className:"text-4xl font-bold text-amber-300 mb-2",children:"%35"}),Ot.jsx("div",{className:"text-sm font-semibold text-white/90",children:"Ortalama Tasarruf"}),Ot.jsx("div",{className:"text-xs text-amber-200 mt-1 font-medium",children:"Kullanıcı Başına"})]}),Ot.jsxs("div",{className:"group bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-xl hover:bg-white/15 hover:scale-[1.02] transition-all duration-300",children:[Ot.jsx("div",{className:"flex items-center justify-center mb-3",children:Ot.jsx(B,{className:"h-6 w-6 text-blue-300"})}),Ot.jsx("div",{className:"text-4xl font-bold text-blue-300 mb-2",children:"%97.2"}),Ot.jsx("div",{className:"text-sm font-semibold text-white/90",children:"Memnuniyet Oranı"}),Ot.jsx("div",{className:"text-xs text-blue-200 mt-1 font-medium",children:"5 Yıldız Ortalama"})]})]})]}),Ot.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 border border-white/20 shadow-2xl hover:bg-white/15 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/30 shadow-lg",children:Ot.jsx(C,{className:"h-8 w-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-white/80 uppercase tracking-wider mb-1",children:"Toplam Aktif"}),Ot.jsx("div",{className:"text-sm font-medium text-white/90",children:"Kullanıcı Sayısı"})]})]}),Ot.jsx("div",{className:"text-7xl font-bold text-white mb-4",children:"Büyüyen"}),Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-2.5 h-2.5 bg-blue-400 rounded-full animate-pulse"}),Ot.jsx("span",{className:"text-sm font-medium text-white/90",children:"Aktif topluluk"})]}),Ot.jsx("span",{className:"text-white/50",children:"•"}),Ot.jsx("span",{className:"text-sm text-white/70",children:"Her geçen gün büyüyor"})]}),Ot.jsx("div",{className:"pt-4 border-t border-white/20",children:Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsx("span",{className:"text-white/70",children:"Yeni kullanıcılar"}),Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"Sürekli katılıyor"})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-xl p-6 border border-white/20 shadow-xl hover:bg-white/15 hover:scale-[1.02] transition-all duration-300",children:[Ot.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mb-4 border border-white/30",children:Ot.jsx(R,{className:"h-6 w-6 text-white"})}),Ot.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"Artıyor"}),Ot.jsx("div",{className:"text-xs font-semibold text-white/80 uppercase tracking-wide mb-1",children:"Teslimat"}),Ot.jsx("div",{className:"text-xs text-white/60",children:"Başarılı işlemler"}),Ot.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:Ot.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[Ot.jsx(M,{className:"h-3 w-3 text-blue-300"}),Ot.jsx("span",{className:"text-blue-300 font-medium",children:"Büyüyen platform"})]})})]}),Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-xl p-6 border border-white/20 shadow-xl hover:bg-white/15 hover:scale-[1.02] transition-all duration-300",children:[Ot.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mb-4 border border-white/30",children:Ot.jsx(O,{className:"h-6 w-6 text-white fill-white"})}),Ot.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:"Yüksek"}),Ot.jsx("div",{className:"text-xs font-semibold text-white/80 uppercase tracking-wide mb-1",children:"Memnuniyet"}),Ot.jsx("div",{className:"text-xs text-white/60",children:"Kullanıcı puanı"}),Ot.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:Ot.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[Ot.jsx(O,{className:"h-3 w-3 text-amber-300 fill-amber-300"}),Ot.jsx("span",{className:"text-amber-300 font-medium",children:"Yüksek puan"})]})})]})]}),Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-xl p-6 border border-white/20 shadow-xl",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-lg flex items-center justify-center border border-white/30",children:Ot.jsx(P,{className:"h-7 w-7 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-3xl font-bold text-white",children:"81"}),Ot.jsx("div",{className:"text-xs font-semibold text-white/80 uppercase tracking-wide",children:"İl Kapsamı"})]})]}),Ot.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/20",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[Ot.jsx(T,{className:"h-4 w-4 text-blue-300"}),Ot.jsx("span",{className:"font-medium text-white/90",children:"Tüm Türkiye"})]}),Ot.jsx("span",{className:"text-xs text-white/60",children:"900+ İlçe"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[Ot.jsx(E,{className:"h-4 w-4 text-blue-300"}),Ot.jsx("span",{className:"font-medium text-white/90",children:"Kesintisiz Hizmet"})]}),Ot.jsx("span",{className:"text-xs text-white/60",children:"%99.9 Uptime"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[Ot.jsx(L,{className:"h-4 w-4 text-blue-300"}),Ot.jsx("span",{className:"font-medium text-white/90",children:"0.5 Saniye Yanıt"})]}),Ot.jsx("span",{className:"text-xs text-white/60",children:"Anında Teklif"})]})]})]})]})]})})})]}),Ot.jsx("section",{id:"features",className:"bg-white py-24",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-blue-600 mb-4 md:text-xs",children:"Platform Özellikleri"}),Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Entegre Lojistik Platformu"}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Modern teknoloji ile donatılmış platformumuz, tüm lojistik ihtiyaçlarınızı tek yerden yönetmenizi sağlar."})]}),Ot.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:qa.map((e,t)=>Ot.jsxs("div",{className:"group rounded-3xl border border-slate-200 bg-white p-6 hover:-translate-y-2 hover:shadow-xl transition-all duration-300",children:[Ot.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:Ot.jsx(e.icon,{className:"h-7 w-7 text-white"})}),Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e.title}),Ot.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:e.description})]},t))})]})}),Ot.jsx("section",{id:"panels",className:"bg-gradient-to-b from-white to-slate-50 py-24",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-blue-600 mb-4 md:text-xs",children:"4 Panel"}),Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Pazar Lideri • Sektör Standardı"}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Bireysel gönderici, kurumsal şirket, nakliyeci veya taşıyıcı - herkes için optimize edilmiş panel."})]}),Ot.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-12",children:Ya.map(e=>{const t=a===e.id;return Ot.jsxs("button",{onClick:()=>{Ga("landing_persona_select",{ab:d,persona:e.id}),i(e.id)},className:"rounded-3xl border p-6 text-left transition-all w-full max-w-[320px] mx-auto "+(t?"border-blue-600 bg-blue-50 shadow-lg scale-105":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-md"),children:[Ot.jsx("div",{className:"mb-4 flex h-12 w-12 items-center justify-center rounded-2xl transition-colors "+(t?"bg-gradient-to-r from-slate-800 to-blue-900":"bg-slate-100"),children:Ot.jsx(e.icon,{className:"h-6 w-6 "+(t?"text-white":"text-slate-900")})}),Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] mb-2 md:text-xs "+(t?"text-blue-600":"text-slate-500"),children:e.subtitle}),Ot.jsx("h3",{className:"text-xl font-bold mb-2 text-slate-900",children:e.title}),Ot.jsx("p",{className:"text-sm mb-4 "+(t?"text-slate-700":"text-slate-600"),children:e.promise}),Ot.jsx("p",{className:`text-sm font-semibold ${t?"text-blue-600":"text-slate-500"} md:text-xs`,children:e.stats})]},e.id)})}),Ot.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-xl",children:[Ot.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6 mb-8",children:[Ot.jsxs("div",{className:"space-y-2 flex-1",children:[Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-slate-500 md:text-xs",children:"Seçili Panel"}),Ot.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:x.title}),Ot.jsx("p",{className:"text-sm text-slate-600",children:x.stats}),x.urgency&&Ot.jsx("p",{className:"text-sm font-semibold text-red-600 mt-2",children:x.urgency})]}),Ot.jsxs("button",{onClick:()=>u("/register",{userType:x.id}),className:"inline-flex items-center gap-2 rounded-2xl bg-gradient-to-r from-slate-800 to-blue-900 text-white px-8 py-4 font-bold text-base shadow-xl hover:from-slate-700 hover:to-blue-800 hover:scale-105 transition-all",children:[x.cta,Ot.jsx(K,{className:"h-5 w-5"})]})]}),x.painPoint&&Ot.jsxs("div",{className:"mb-8 grid md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"rounded-2xl border-2 border-red-200 bg-red-50 p-6",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ot.jsx(_,{className:"h-5 w-5 text-red-600"}),Ot.jsx("h4",{className:"font-bold text-red-900",children:"Platform Olmadan"})]}),Ot.jsx("p",{className:"text-sm text-red-800 font-medium leading-relaxed",children:x.withoutPlatform}),Ot.jsx("p",{className:"text-sm text-red-700 mt-3 italic md:text-xs",children:x.painPoint})]}),Ot.jsxs("div",{className:"rounded-2xl border-2 border-emerald-200 bg-emerald-50 p-6",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ot.jsx(J,{className:"h-5 w-5 text-emerald-600"}),Ot.jsx("h4",{className:"font-bold text-emerald-900",children:"Platform İle"})]}),Ot.jsx("p",{className:"text-sm text-emerald-800 font-medium leading-relaxed",children:x.withPlatform}),Ot.jsx("p",{className:"text-sm text-emerald-700 mt-3 font-semibold md:text-xs",children:x.promise})]})]}),Array.isArray(x.flow)&&x.flow.length>0&&Ot.jsxs("div",{className:"mb-6",children:[Ot.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-4",children:"Bu panelde ne yaparsınız?"}),Ot.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:x.flow.map((e,t)=>Ot.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[Ot.jsx("div",{className:"h-8 w-8 rounded-xl bg-blue-50 text-blue-700 flex items-center justify-center text-sm font-bold border border-blue-200",children:t+1}),Ot.jsx("p",{className:"text-sm text-slate-700 font-semibold leading-relaxed",children:e})]},t))})]}),Ot.jsxs("div",{className:"mb-6",children:[Ot.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-4",children:"Platform Özellikleri"}),Ot.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:x.features.map((e,t)=>Ot.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-4 hover:bg-white hover:shadow-md transition",children:[Ot.jsx(J,{className:"h-5 w-5 text-emerald-600 flex-shrink-0 mt-0.5"}),Ot.jsx("p",{className:"text-sm text-slate-700 font-medium",children:e})]},t))})]}),Ot.jsxs("div",{className:"pt-6 border-t border-slate-200",children:[Ot.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Panel Sayfaları:"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:x.pages.map((e,t)=>Ot.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-xs font-medium border border-blue-200",children:e},t))})]})]})]})}),Ot.jsx("section",{id:"workflow",className:"bg-slate-900 py-24 text-white",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-blue-300 mb-4 md:text-xs",children:"İş Akışı"}),Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"5 Adımda Tamamlanan Süreç"}),Ot.jsx("p",{className:"text-lg text-white/70",children:"Gönderi oluşturmadan teslimata kadar tüm süreç tek platformda, şeffaf ve hızlı."})]}),Ot.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-5",children:Ha.map((e,t)=>Ot.jsxs("div",{className:"relative",children:[t<Ha.length-1&&Ot.jsx("div",{className:"hidden lg:block absolute top-12 left-full w-full h-0.5 bg-white/20 -z-10",style:{width:"calc(100% - 3rem)"}}),Ot.jsxs("div",{className:"rounded-3xl border border-white/15 bg-white/5 p-6 backdrop-blur hover:bg-white/10 hover:-translate-y-2 transition-all duration-300",children:[Ot.jsx("div",{className:"mb-4 flex h-14 w-14 items-center justify-center rounded-2xl text-white text-xl font-bold shadow-lg "+("blue"===e.color?"bg-gradient-to-r from-slate-800 to-blue-900":"green"===e.color?"bg-green-600":"purple"===e.color?"bg-purple-600":"orange"===e.color?"bg-orange-600":"bg-emerald-600"),children:e.step}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),Ot.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:e.description})]})]},t))})]})}),Ot.jsx("section",{id:"categories",className:"bg-white py-24",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-blue-600 mb-4 md:text-xs",children:"Kategoriler"}),Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Her Tür Gönderi İçin Çözüm"}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Ev taşınmasından soğuk zincire, tehlikeli maddelerden e-ticarete kadar tüm kategoriler."})]}),Ot.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Ua.map((e,t)=>Ot.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 hover:-translate-y-2 hover:shadow-xl transition-all duration-300",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center mb-4",children:Ot.jsx(e.icon,{className:"h-6 w-6 text-white"})}),Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e.name}),Ot.jsx("p",{className:"text-sm text-slate-600",children:e.description})]},t))})]})}),Ot.jsx("section",{className:"bg-white py-24",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-16",children:[Ot.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.4em] text-blue-600 mb-4 md:text-xs",children:"Pazar Liderliği"}),Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Türkiye'nin #1 Lojistik Ekosistemi"}),Ot.jsx("p",{className:"text-lg text-slate-600 mb-8",children:"Rakiplerimizden 10x daha büyük ağ, %78 daha düşük maliyetler, %97.2 müşteri memnuniyeti."}),Ot.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-2xl border-2 border-emerald-200 p-6 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[Ot.jsx(B,{className:"h-8 w-8 text-emerald-600"}),Ot.jsx("span",{className:"text-2xl font-bold text-emerald-900",children:"TÜRKİYE'NİN LİDERİ"}),Ot.jsx(B,{className:"h-8 w-8 text-emerald-600"})]}),Ot.jsx("p",{className:"text-emerald-800 font-semibold",children:"🏆 53.000+ Aktif Kullanıcı • 🏆 Aylık ₺2.8M Tasarruf • 🏆 %97.2 Müşteri Memnuniyeti • 🏆 81 İlde Hizmet"})]})]}),Ot.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:Va.map((e,t)=>Ot.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-8 hover:-translate-y-2 hover:shadow-xl transition-all duration-300 text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Ot.jsx(e.icon,{className:"h-8 w-8 text-white"})}),Ot.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:e.stat}),Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:e.title}),Ot.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:e.description})]},t))})]})}),Ot.jsx("section",{className:"bg-slate-900 py-16 text-white",children:Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ot.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Türkiye'nin En Güvenilir Lojistik Platformu"}),Ot.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[Ot.jsxs("div",{className:"p-4",children:[Ot.jsx(U,{className:"h-8 w-8 text-blue-300 mx-auto mb-3"}),Ot.jsx("h3",{className:"font-bold mb-2",children:"KVKK Uyumlu"}),Ot.jsx("p",{className:"text-sm text-white/70",children:"Verileriniz güvende"})]}),Ot.jsxs("div",{className:"p-4",children:[Ot.jsx(J,{className:"h-8 w-8 text-emerald-300 mx-auto mb-3"}),Ot.jsx("h3",{className:"font-bold mb-2",children:"53.000+ Kullanıcı"}),Ot.jsx("p",{className:"text-sm text-white/70",children:"Güvenilir topluluk"})]}),Ot.jsxs("div",{className:"p-4",children:[Ot.jsx(B,{className:"h-8 w-8 text-amber-300 mx-auto mb-3"}),Ot.jsx("h3",{className:"font-bold mb-2",children:"%97.2 Memnuniyet"}),Ot.jsx("p",{className:"text-sm text-white/70",children:"Yüksek puan"})]})]})]})}),Ot.jsx("section",{className:"bg-white py-16",children:Ot.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-8",children:"Türkiye'nin Lider Şirketleri Güveniyor"}),Ot.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-2xl p-6 mb-8 border border-blue-200",children:[Ot.jsxs("p",{className:"text-sm text-slate-700 font-semibold mb-4 text-center",children:["Türkiye'nin köklü şirketlerinden KOBİ'lere, ",Ot.jsx("span",{className:"text-blue-700 font-bold",children:"5.000+ Kurumsal Firma • 50+ Büyük Ölçekli Şirket"})," YolNext'e güveniyor:"]}),Ot.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-4",children:[Ot.jsx("div",{className:"bg-white rounded-lg p-3 h-14 flex items-center justify-center shadow-sm border border-slate-200",children:Ot.jsx("span",{className:"font-bold text-slate-800 text-xs",children:"KOÇTAŞ"})}),Ot.jsx("div",{className:"bg-white rounded-lg p-3 h-14 flex items-center justify-center shadow-sm border border-slate-200",children:Ot.jsx("span",{className:"font-bold text-slate-800 text-xs",children:"MİGROS"})}),Ot.jsx("div",{className:"bg-white rounded-lg p-3 h-14 flex items-center justify-center shadow-sm border border-slate-200",children:Ot.jsx("span",{className:"font-bold text-slate-800 text-xs",children:"BİM"})}),Ot.jsx("div",{className:"bg-white rounded-lg p-3 h-14 flex items-center justify-center shadow-sm border border-slate-200",children:Ot.jsx("span",{className:"font-bold text-slate-800 text-xs",children:"VESTEL"})}),Ot.jsx("div",{className:"bg-white rounded-lg p-3 h-14 flex items-center justify-center shadow-sm border border-slate-200",children:Ot.jsx("span",{className:"font-bold text-slate-800 text-xs",children:"ÜLKER"})})]})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[Ot.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[Ot.jsx("div",{className:"flex justify-start mb-3",children:[...Array(5)].map((e,t)=>Ot.jsx(O,{className:"h-4 w-4 fill-amber-400 text-amber-400"},t))}),Ot.jsx("blockquote",{className:"text-sm text-slate-700 mb-4 font-medium",children:"\"3 yıldır kullanıyoruz. Aylık lojistik bütçemiz 180.000 TL'den 98.000 TL'ye düştü. Entegre operasyon yönetimi sayesinde kontrol bizde artık.\""}),Ot.jsxs("div",{className:"text-sm text-slate-600 md:text-xs",children:[Ot.jsx("p",{className:"font-semibold",children:"Ayşe Kaya - Lojistik Müdürü"}),Ot.jsx("p",{children:"Kaya Mobilya / İstanbul"})]})]}),Ot.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200",children:[Ot.jsx("div",{className:"flex justify-start mb-3",children:[...Array(5)].map((e,t)=>Ot.jsx(O,{className:"h-4 w-4 fill-amber-400 text-amber-400"},t))}),Ot.jsx("blockquote",{className:"text-sm text-slate-700 mb-4 font-medium",children:'"Kapasite optimizasyonu sayesinde boş dönüş diye bir şey kalmadı. Her gün platform üzerinden yük buluyorum. Aylık kazancım 3 katına çıktı."'}),Ot.jsxs("div",{className:"text-sm text-slate-600 md:text-xs",children:[Ot.jsx("p",{className:"font-semibold",children:"Mehmet Özkan - Nakliyeci"}),Ot.jsx("p",{children:"Özkan Nakliyat / Ankara"})]})]})]})]})}),Ot.jsx("section",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 py-24 text-white",children:Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-8 mb-12",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[Ot.jsx(U,{className:"h-8 w-8 text-emerald-300"}),Ot.jsx("h3",{className:"text-2xl font-bold text-white",children:"%100 Risksiz Deneme"}),Ot.jsx(U,{className:"h-8 w-8 text-emerald-300"})]}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[Ot.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[Ot.jsx(J,{className:"h-6 w-6 text-emerald-300 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-bold text-white mb-2",children:"Ücretsiz Başlangıç"}),Ot.jsx("p",{className:"text-sm text-white/80",children:"Kredi kartı, taahhüt veya gizli ücret yok. %100 ücretsiz kayıt ve profesyonel kullanım."})]}),Ot.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[Ot.jsx(B,{className:"h-6 w-6 text-emerald-300 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-bold text-white mb-2",children:"Anında İptal"}),Ot.jsx("p",{className:"text-sm text-white/80",children:"İstediğiniz zaman tek tıkla hesabınızı kapatabilirsiniz. Hiçbir soru sorulmaz."})]}),Ot.jsxs("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[Ot.jsx(ee,{className:"h-6 w-6 text-emerald-300 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-bold text-white mb-2",children:"7/24 Destek"}),Ot.jsx("p",{className:"text-sm text-white/80",children:"Profesyonel Destek Ekibi • Öncelikli Müşteri Hizmetleri • Canlı chat, telefon, e-posta."})]})]}),Ot.jsx("div",{className:"bg-emerald-500/20 border border-emerald-400/30 rounded-xl p-4",children:Ot.jsxs("p",{className:"text-emerald-200 font-semibold text-lg",children:["🛡️ ",Ot.jsx("span",{className:"font-bold",children:"GÜVENCE:"})," Verileriniz KVKK ve ISO 27001 Standartlarında korunur. End-to-End Şifreleme. Banka Düzeyinde Güvenlik."]})})]}),Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Daha Ne Kadar Bekleyeceksiniz?"}),Ot.jsxs("p",{className:"text-xl text-red-200 mb-4 leading-relaxed",children:[Ot.jsx("span",{className:"text-red-300 font-bold",children:"❌ Platform kullanmıyorsanız:"})," Her ay binlerce lira kaybediyorsunuz. Rakipleriniz sizi geçiyor. İşiniz zorlaşıyor."]}),Ot.jsxs("p",{className:"text-lg text-emerald-200 mb-6 font-semibold",children:[Ot.jsx("span",{className:"text-emerald-300 font-bold",children:"✅ Platform kullananlar:"})," %40 daha az ödüyor, sürekli iş buluyor, düzenli kazanıyor. İşleri büyüyor."]}),Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-5 mb-8",children:[Ot.jsx("p",{className:"text-lg text-white font-bold mb-2",children:"SON 24 SAAT:"}),Ot.jsxs("p",{className:"text-base text-white/90",children:["✓ ",Ot.jsx("span",{className:"font-bold text-emerald-300",children:"247 kişi"})," kayıt oldu ve ilk gönderisini yaptı",Ot.jsx("br",{}),"✓ ",Ot.jsx("span",{className:"font-bold text-amber-300",children:"₺128,350"})," toplam tasarruf edildi",Ot.jsx("br",{}),"✓ ",Ot.jsx("span",{className:"font-bold text-blue-300",children:"1.847 kullanıcı"})," şu anda aktif"]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[Ot.jsxs("button",{onClick:()=>u("/register"),className:"group bg-white text-slate-900 px-10 py-5 rounded-xl font-bold text-lg shadow-2xl hover:bg-slate-100 hover:scale-[1.02] hover:shadow-3xl transition-all duration-300 flex items-center gap-2 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-100 to-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),Ot.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Profesyonel Hesap Oluştur",Ot.jsx(K,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform duration-200"})]})]}),Ot.jsxs("button",{onClick:()=>u("/contact"),className:"group px-10 py-5 rounded-xl font-bold text-lg text-white border-2 border-white/30 hover:border-white/50 hover:bg-white/10 hover:scale-[1.02] transition-all duration-300 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),Ot.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Demo Talep Et",Ot.jsx(A,{className:"h-5 w-5"})]})]})]}),Ot.jsxs("div",{className:"flex flex-wrap justify-center gap-8 mt-12 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(J,{className:"h-5 w-5 text-emerald-400"}),Ot.jsx("span",{children:"Kayıt Ücretsiz"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(U,{className:"h-5 w-5 text-blue-400"}),Ot.jsx("span",{children:"Kredi Kartı Gerekmez"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(L,{className:"h-5 w-5 text-cyan-400"}),Ot.jsx("span",{children:"2 Dakikada Kayıt Ol"})]})]})]})}),Ot.jsx("section",{className:"bg-slate-50 py-16",children:Ot.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-8",children:"3 Adımda Başla"}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3 text-center",children:[Ot.jsxs("div",{className:"p-4",children:[Ot.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),Ot.jsx("h3",{className:"font-bold mb-1",children:"Kayıt Ol"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"2 dakikada ücretsiz"})]}),Ot.jsxs("div",{className:"p-4",children:[Ot.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),Ot.jsx("h3",{className:"font-bold mb-1",children:"Profil Tamamla"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Hızlı onay"})]}),Ot.jsxs("div",{className:"p-4",children:[Ot.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),Ot.jsx("h3",{className:"font-bold mb-1",children:"Hemen Başla"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"İlk işlemi yap"})]})]})]})}),Ot.jsx("section",{className:"bg-white py-16",children:Ot.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsx("div",{className:"text-center mb-8",children:Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Sık Sorulanlar"})}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 hover:bg-white hover:shadow-md transition",children:[Ot.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"💰 Gerçekten ücretsiz mi? Hiç ücret yok mu?"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Evet, %100 ücretsiz. Göndericiler hiçbir ücret ödemiyor. Nakliyeciler sadece başarılı işlerden %1 komisyon veriyor (sektörde en düşük). Kredi kartı, taahhüt, gizli ücret yok."})]}),Ot.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 hover:bg-white hover:shadow-md transition",children:[Ot.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"⏱️ Ne kadar sürede başlarım?"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"2 dakikada kayıt ol, profil tamamla, hemen kullanmaya başla. TC kimlik veya vergi levhası yeterli. Hiçbir evrak işi yok."})]}),Ot.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 hover:bg-white hover:shadow-md transition",children:[Ot.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"🛡️ Paramı alır mıyım? Dolandırılır mıyım?"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"KVKK uyumlu, SSL şifreli, ISO 27001 güvenlik. Tüm veriler Türkiye'de. 53.000+ kullanıcı güveniyor. Ödeme detayları yazılı teyitle netleşir, süreç kayıt altında."})]})]})]})})]}),Ot.jsx(Ka,{})]})};function Wa(){const[e,t]=l.useState({email:"",password:""}),[s,a]=l.useState(!1),[i,r]=l.useState(!1),[n,c]=l.useState(""),m=o(),{login:x,demoLogin:u,getPanelRoute:h}=sa(),[p]=l.useState(()=>Fa.getVariant("ab_landing_v1"));l.useEffect(()=>{Ga("login_view",{ab:p})},[p]);const g=e=>{const{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))},b=[{value:"individual",label:"Bireysel Gönderici",icon:Ot.jsx(C,{className:"w-6 h-6"})},{value:"corporate",label:"Kurumsal Gönderici",icon:Ot.jsx(A,{className:"w-6 h-6"})},{value:"nakliyeci",label:"Nakliyeci",icon:Ot.jsx(E,{className:"w-6 h-6"})},{value:"tasiyici",label:"Taşıyıcı",icon:Ot.jsx(R,{className:"w-6 h-6"})}];return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Giriş Yap - YolNext | Tamamen Ücretsiz Lojistik Platformu"}),Ot.jsx("meta",{name:"description",content:"YolNext platformuna giriş yapın. %0 üyelik ücreti, sadece nakliyeci %1 komisyon öder. 4 kullanıcı tipi, 81 il kapsamı."}),Ot.jsx("meta",{name:"keywords",content:"giriş yap, login, lojistik, kargo, ücretsiz, YolNext"})]}),Ot.jsxs("div",{className:"min-h-screen flex",children:[Ot.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12 text-white",children:[Ot.jsx("div",{className:"flex items-center justify-start mb-8",children:Ot.jsx(Da,{variant:"banner",size:"lg",className:"h-12"})}),Ot.jsx("h1",{className:"text-4xl font-bold mb-6 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Modern Lojistik Platformu"}),Ot.jsxs("p",{className:"text-xl text-slate-200 mb-8 leading-relaxed",children:["4 farklı kullanıcı tipi için özel tasarlanmış, 81 ilde hizmet veren",Ot.jsx("br",{}),Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"tamamen ücretsiz"})," ","lojistik platformu."]}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 mb-8",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"TAMAMEN ÜCRETSİZ"}),Ot.jsxs("div",{className:"text-white/90 text-lg",children:[Ot.jsx("span",{className:"font-bold",children:"%0 üyelik ücreti"})," •",Ot.jsx("span",{className:"font-bold",children:"%0 gönderi ücreti"})," •",Ot.jsx("span",{className:"font-bold",children:"%0 gizli ücret"})]}),Ot.jsx("div",{className:"text-white/80 text-sm mt-2",children:"Sadece nakliyeci %1 komisyon öder, diğer her şey ücretsiz!"})]})}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(J,{className:"w-6 h-6 text-green-400"}),Ot.jsx("span",{className:"text-slate-200",children:"53.000+ Kullanıcı"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(U,{className:"w-6 h-6 text-blue-400"}),Ot.jsx("span",{className:"text-slate-200",children:"Yüksek Memnuniyet"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(L,{className:"w-6 h-6 text-yellow-400"}),Ot.jsx("span",{className:"text-slate-200",children:"Hızlı Teslimat"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(P,{className:"w-6 h-6 text-green-400"}),Ot.jsx("span",{className:"text-slate-200",children:"81 İl Kapsamı"})]})]})]})]}),Ot.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center px-8 py-12 bg-white",children:Ot.jsxs("div",{className:"w-full max-w-md",children:[Ot.jsx("div",{className:"lg:hidden flex items-center justify-center mb-8",children:Ot.jsx(Da,{variant:"banner",size:"md",className:"h-10"})}),Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Hoş Geldiniz"}),Ot.jsx("p",{className:"text-gray-600",children:"Hesabınıza giriş yapın veya hızlı giriş seçeneklerini kullanın"})]}),Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"mb-8",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hızlı Giriş (Demo)"}),Ot.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(e=>Ot.jsxs("button",{"data-testid":`demo-${e.value}`,onClick:()=>(async e=>{r(!0),c("");const t=setTimeout(()=>{r(!1),c("Hızlı giriş işlemi zaman aşımına uğradı. Lütfen tekrar deneyin.")},1e4);try{const s=await u(e);if(s.success){clearTimeout(t),Ga("demo_login_complete",{ab:p,userType:e});const s={individual:"/individual/dashboard",corporate:"/corporate/dashboard",nakliyeci:"/nakliyeci/dashboard",tasiyici:"/tasiyici/dashboard"}[e]||"/individual/dashboard";setTimeout(()=>{m(s,{replace:!0})},100)}else{clearTimeout(t),Ga("login_error",{ab:p,userType:e,reason:"demo_failed"});const a=(null==s?void 0:s.error)||"Hızlı giriş başarısız";c(a)}}catch(s){clearTimeout(t),Ga("login_error",{ab:p,userType:e,reason:"demo_exception"});const a=(null==s?void 0:s.message)||"Bilinmeyen bir hata oluştu";c(`Hızlı giriş yapılırken bir hata oluştu: ${a}`)}finally{clearTimeout(t),r(!1)}})(e.value),disabled:i,className:"p-4 rounded-xl border-2 border-gray-200 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed text-white transition-all duration-300 hover:shadow-lg",children:[Ot.jsx("div",{className:"flex items-center justify-center mb-2",children:e.icon}),Ot.jsx("div",{className:"text-sm font-semibold",children:e.label})]},e.value))})]}),Ot.jsxs("div",{className:"relative mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 flex items-center",children:Ot.jsx("div",{className:"w-full border-t border-gray-300"})}),Ot.jsx("div",{className:"relative flex justify-center text-sm",children:Ot.jsx("span",{className:"px-4 bg-white text-gray-500",children:"veya"})})]})]}),Ot.jsxs("form",{onSubmit:async t=>{var s,a;if(t.preventDefault(),c(""),!e.email.trim())return void c("E-posta adresi gereklidir");if(!e.email.includes("@")||!e.email.includes("."))return void c("Geçerli bir e-posta adresi giriniz");if(!e.password.trim())return void c("Şifre gereklidir");if(e.password.length<8)return void c("Şifre en az 8 karakter olmalıdır");r(!0);const l=setTimeout(()=>{r(!1),c("Giriş işlemi zaman aşımına uğradı. Lütfen tekrar deneyin.")},1e4);try{const t=await x(e.email,e.password);if(t.success){clearTimeout(l),Ga("login_complete",{ab:p});const e=(null==(s=null==t?void 0:t.user)?void 0:s.role)||(null==(a=null==t?void 0:t.user)?void 0:a.panel_type)||"individual",i=h(e);m(i)}else clearTimeout(l),Ga("login_error",{ab:p,reason:"invalid_credentials"}),c("E-posta veya şifre hatalı")}catch(i){clearTimeout(l),Ga("login_error",{ab:p,reason:"exception"}),c("Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.")}finally{clearTimeout(l),r(!1)}},className:"space-y-6",children:[n&&Ot.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5"}),n]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Ot.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"email",autoFocus:!0,value:e.email,onChange:g,className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ornek@email.com"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Ot.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,autoComplete:"current-password",value:e.password,onChange:g,className:"w-full pl-10 pr-12 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"En az 8 karakter"}),Ot.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?Ot.jsx(ae,{className:"w-5 h-5"}):Ot.jsx(Q,{className:"w-5 h-5"})})]})]}),Ot.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white py-3 px-4 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?Ot.jsxs("div",{className:"flex items-center justify-center",children:[Ot.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Giriş yapılıyor..."]}):Ot.jsxs("div",{className:"flex items-center justify-center",children:["Giriş Yap",Ot.jsx(K,{className:"ml-2 w-5 h-5"})]})}),Ot.jsx("div",{className:"text-center mt-4",children:Ot.jsx(d,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Şifremi Unuttum"})})]}),Ot.jsxs("div",{className:"mt-6 text-center",children:[Ot.jsxs("p",{className:"text-gray-600",children:["Hesabınız yok mu?"," ",Ot.jsx(d,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Hemen kayıt olun"})]}),!1]})]})})]})]})}const Za=()=>{const e=o(),{register:t}=sa(),[s,a]=l.useState(!1),[i]=l.useState(()=>Fa.getVariant("ab_landing_v1")),[r,n]=l.useState(""),[c,m]=l.useState("pending"),[x,u]=l.useState(""),[h,p]=l.useState(""),[g,b]=l.useState(!1),[f,y]=l.useState(null),[j,v]=l.useState(null),[N,k]=l.useState(!1),[w,S]=l.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",userType:"individual",companyName:"",taxNumber:"",companyAddress:"",companyPhone:"",licenseNumber:"",vehicleCount:"",serviceAreas:"",address:"",city:"",district:"",birthDate:"",acceptTerms:!1,acceptPrivacy:!1,acceptCookies:!1,acceptKVKK:!1});l.useEffect(()=>{Ga("register_view",{ab:i,userType:w.userType})},[i]);const z=e=>{const{name:t,value:s,type:a}=e.target,l=e.target.checked;if(S(e=>({...e,[t]:"checkbox"===a?l:s})),"email"===t&&s){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?n(""):n("Geçersiz e-posta formatı")}if("phone"===t&&s){let e=s.replace(/\D/g,"");e.startsWith("90")&&(e=e.slice(2)),e.startsWith("0")&&(e=e.slice(1)),10===e.length&&e.startsWith("5")?n(""):n("Geçersiz telefon numarası formatı")}"taxNumber"===t&&s&&(10===s.length&&/^\d{10}$/.test(s)?n(""):n("Geçersiz vergi numarası formatı"))},T=async e=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return n("Geçersiz e-posta formatı"),!1;try{const t=await fetch(Zs("/api/auth/verify/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!t.ok)return n(""),!0;const s=await t.json();return s.message&&(s.message.includes("daha önce kayıt olunmuş")||s.message.includes("already registered"))?(n("Bu e-posta adresi ile daha önce kayıt olunmuş. Lütfen farklı bir e-posta adresi kullanın."),!1):s.message&&(s.message.includes("Geçersiz e-posta formatı")||s.message.includes("Invalid email format"))?(n("Geçersiz e-posta formatı"),!1):s.requiresCode?(b(!0),y("email"),u("E-posta adresinize doğrulama kodu gönderildi"),!1):!0===s.isValid||!0===s.success?(n(""),!0):s.message?(n(s.message||"E-posta doğrulama başarısız"),!1):(n(""),!0)}catch(t){return n(""),!0}},D=async()=>{m("verifying"),u("Evraklar doğrulanıyor...");try{const e=[];return await T(w.email)||e.push("Geçersiz e-posta formatı"),await(async e=>{let t=String(e||"").replace(/\D/g,"");if(t.startsWith("90")&&(t=t.slice(2)),t.startsWith("0")&&(t=t.slice(1)),10!==t.length||!t.startsWith("5"))return n("Geçersiz telefon numarası formatı"),!1;try{const e=await fetch(Zs("/api/auth/verify/phone"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:t})});if(!e.ok)return n("Telefon doğrulama hatası"),!1;const s=await e.json();return s.message&&(s.message.includes("daha önce kayıt olunmuş")||s.message.includes("already registered"))?(n("Bu telefon numarası ile daha önce kayıt olunmuş. Lütfen farklı bir telefon numarası kullanın."),!1):s.message&&(s.message.includes("Geçersiz telefon numarası formatı")||s.message.includes("Invalid phone format"))?(n("Geçersiz telefon numarası formatı"),!1):s.requiresCode?(b(!0),y("phone"),u("Telefon numaranıza SMS doğrulama kodu gönderildi"),!1):!0===s.isValid?(n(""),!0):(n(s.message||"Telefon doğrulama başarısız"),!1)}catch(s){return n("Telefon doğrulama hatası"),!1}})(w.phone)||e.push("Geçersiz telefon numarası formatı"),"corporate"!==w.userType&&"nakliyeci"!==w.userType||await(async e=>{if(10!==e.length||!/^\d{10}$/.test(e))return!1;try{const t=await fetch(Zs("/api/auth/verify/tax-number"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taxNumber:e,companyName:w.companyName})}),s=await t.json();if(s.isValid&&s.companyInfo)return u(`✅ Doğrulandı: ${s.companyInfo.unvan} - ${s.companyInfo.adres}`),!0;if(s.verificationDetails){const{maliye:e,ticaret:t}=s.verificationDetails;return e&&t&&u(`❌ Doğrulama başarısız: Maliye: ${e.found?"✅":"❌"}, Ticaret: ${t.active?"✅":"❌"}`),!1}return s.isValid||!1}catch(t){return!0}})(w.taxNumber)||e.push("Geçersiz vergi numarası"),e.length>0?(m("rejected"),u(`Doğrulama hatası: ${e.join(", ")}`),!1):(m("verified"),u("Tüm evraklar doğrulandı!"),!0)}catch(e){return m("rejected"),u("Doğrulama sırasında hata oluştu"),!1}},_=()=>{const e=(e=>{const t=["firstName","lastName","email","phone","password","confirmPassword"];switch(e){case"individual":return[...t,"address","city","district","birthDate"];case"corporate":return[...t,"companyName","taxNumber","companyAddress","companyPhone"];case"nakliyeci":return[...t,"companyName","taxNumber","companyAddress","companyPhone","licenseNumber","vehicleCount","serviceAreas","city"];case"tasiyici":return[...t,"address","city"];default:return t}})(w.userType).filter(e=>!w[e]);return e.length>0?(n(`Lütfen tüm gerekli alanları doldurun: ${e.join(", ")}`),!1):w.password!==w.confirmPassword?(n("Şifreler eşleşmiyor"),!1):w.password.length<6?(n("Şifre en az 6 karakter olmalıdır"),!1):w.acceptTerms?w.acceptPrivacy?w.acceptKVKK?!("individual"===w.userType&&w.birthDate&&!(e=>{if(!e)return!1;const t=new Date(e),s=new Date,a=s.getFullYear()-t.getFullYear(),l=s.getMonth()-t.getMonth();return l<0||0===l&&s.getDate()<t.getDate()?a-1>=18:a>=18})(w.birthDate))||(n("Platformu kullanmak için 18 yaşında veya daha büyük olmalısınız"),!1):(n("KVKK Aydınlatma Metni'ni okudum ve anladım onayını vermelisiniz"),!1):(n("Gizlilik Politikasını kabul etmelisiniz"),!1):(n("Kullanım Koşullarını kabul etmelisiniz"),!1)};return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Kayıt Ol - YolNext | Tamamen Ücretsiz Lojistik Platformu"}),Ot.jsx("meta",{name:"description",content:"YolNext platformuna ücretsiz kayıt olun. %0 üyelik ücreti, sadece nakliyeci %1 komisyon öder. 4 kullanıcı tipi, 81 il kapsamı."}),Ot.jsx("meta",{name:"keywords",content:"kayıt ol, register, lojistik, kargo, ücretsiz, YolNext"})]}),Ot.jsxs("div",{className:"min-h-screen flex",children:[Ot.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12 text-white",children:[Ot.jsx("div",{className:"flex items-center justify-start mb-8",children:Ot.jsx(Da,{variant:"banner",size:"lg",className:"h-12"})}),Ot.jsx("h1",{className:"text-4xl font-bold mb-6 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"YolNext Ailesine Katılın"}),Ot.jsxs("p",{className:"text-xl text-slate-200 mb-8 leading-relaxed",children:["4 farklı kullanıcı tipi için özel tasarlanmış, 81 ilde hizmet veren",Ot.jsx("br",{}),Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"tamamen ücretsiz"})," ","lojistik platformu."]}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 mb-8",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"TAMAMEN ÜCRETSİZ"}),Ot.jsxs("div",{className:"text-white/90 text-lg",children:[Ot.jsx("span",{className:"font-bold",children:"%0 üyelik ücreti"})," •",Ot.jsx("span",{className:"font-bold",children:"%0 gönderi ücreti"})," •",Ot.jsx("span",{className:"font-bold",children:"%0 gizli ücret"})]}),Ot.jsx("div",{className:"text-white/80 text-sm mt-2",children:"Sadece nakliyeci %1 komisyon öder, diğer her şey ücretsiz!"})]})}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(J,{className:"w-6 h-6 text-green-400"}),Ot.jsx("span",{className:"text-slate-200",children:"30,550+ Kullanıcı"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(U,{className:"w-6 h-6 text-blue-400"}),Ot.jsx("span",{className:"text-slate-200",children:"%99.9 Memnuniyet"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(L,{className:"w-6 h-6 text-yellow-400"}),Ot.jsx("span",{className:"text-slate-200",children:"2 Gün Teslimat"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(P,{className:"w-6 h-6 text-green-400"}),Ot.jsx("span",{className:"text-slate-200",children:"81 İl Kapsamı"})]})]})]})]}),Ot.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center px-8 py-12 bg-white",children:Ot.jsxs("div",{className:"w-full max-w-md",children:[Ot.jsx("div",{className:"lg:hidden flex items-center justify-center mb-8",children:Ot.jsx(Da,{variant:"banner",size:"md",className:"h-10"})}),Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Hesap Oluştur"}),Ot.jsx("p",{className:"text-gray-600",children:"YolNext platformuna ücretsiz katılın"})]}),Ot.jsxs("form",{onSubmit:async s=>{var l,r;s.preventDefault(),a(!0),n(""),m("pending");const d=setTimeout(()=>{a(!1),n("Kayıt işlemi zaman aşımına uğradı. Lütfen tekrar deneyin."),m("rejected")},3e4);try{const s=document.querySelector('input[name="city"]'),o=document.querySelector('input[name="district"]');if(s&&s.value&&!w.city&&S(e=>({...e,city:s.value})),o&&o.value&&!w.district&&S(e=>({...e,district:o.value})),w.email){if(!(await T(w.email)))return clearTimeout(d),void a(!1)}if(!_())return clearTimeout(d),void a(!1);if(!(await D()))return clearTimeout(d),void a(!1);const c={...w,userType:w.userType},m=await t(c);if(m.success&&m.user){clearTimeout(d),Ga("signup_complete",{ab:i,userType:w.userType,userId:null==(l=m.user)?void 0:l.id});try{const e=(null==(r=m.user)?void 0:r.id)?String(m.user.id):"",t=String(w.userType||"individual").toLowerCase();e&&localStorage.setItem(`onboardingPending:${e}:${t}`,"true")}catch{}if("tasiyici"===w.userType&&m.user.driverCode)v(m.user.driverCode),k(!0);else switch(w.userType){case"individual":default:e("/individual/dashboard");break;case"corporate":e("/corporate/dashboard");break;case"nakliyeci":e("/nakliyeci/dashboard");break;case"tasiyici":e("/tasiyici/dashboard")}}else clearTimeout(d),Ga("signup_error",{ab:i,userType:w.userType,reason:m.error||"register_failed"}),n(m.error||"Kayıt başarısız")}catch(o){clearTimeout(d),Ga("signup_error",{ab:i,userType:w.userType,reason:"exception"}),n("Kayıt başarısız. Lütfen tekrar deneyin.")}finally{clearTimeout(d),a(!1)}},className:"space-y-6",children:[r&&Ot.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:r}),"pending"!==c&&Ot.jsxs("div",{className:"px-4 py-3 rounded-lg text-sm flex items-center gap-2 "+("verified"===c?"bg-green-50 border border-green-200 text-green-700":"verifying"===c?"bg-blue-50 border border-blue-200 text-blue-700":"bg-red-50 border border-red-200 text-red-700"),children:["verified"===c&&Ot.jsx(J,{className:"w-5 h-5"}),"verifying"===c&&Ot.jsx(le,{className:"w-5 h-5 animate-spin"}),"rejected"===c&&Ot.jsx(ie,{className:"w-5 h-5"}),x]}),g&&Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ot.jsxs("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:["email"===f?"E-posta":"SMS"," Doğrulama Kodu"]}),Ot.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"email"===f?`${w.email} adresine gönderilen 6 haneli kodu girin`:`${w.phone} numarasına gönderilen 6 haneli kodu girin`}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx("label",{htmlFor:"verificationCode",className:"sr-only",children:"Doğrulama Kodu"}),Ot.jsx("input",{id:"verificationCode",type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"123456","aria-label":"Doğrulama Kodu",className:"flex-1 px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:6}),Ot.jsx("button",{type:"button",onClick:async()=>{if(!h||!f)return!1;try{const e=Zs("email"===f?"/api/auth/verify/email/verify-code":"/api/auth/verify/phone/verify-code"),t="email"===f?{email:w.email,code:h}:{phone:w.phone,code:h},s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();return a.isValid?(b(!1),y(null),p(""),m("verified"),u(("email"===f?"E-posta":"Telefon")+" doğrulandı!"),!0):(n(a.error||"Geçersiz doğrulama kodu"),!1)}catch(e){return n("Kod doğrulama sırasında hata oluştu"),!1}},disabled:6!==h.length,className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:from-blue-900 hover:to-slate-800",children:"Doğrula"})]}),Ot.jsx("button",{type:"button",onClick:()=>{b(!1),y(null),p("")},className:"mt-2 text-xs text-blue-600 hover:text-blue-800",children:"İptal"})]}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Kullanıcı Tipi"}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ot.jsxs("button",{type:"button",onClick:()=>S(e=>({...e,userType:"individual"})),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg transition-colors text-sm font-medium "+("individual"===w.userType?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[Ot.jsx(C,{className:"w-4 h-4"}),"Bireysel"]}),Ot.jsxs("button",{type:"button",onClick:()=>S(e=>({...e,userType:"corporate"})),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg transition-colors text-sm font-medium "+("corporate"===w.userType?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[Ot.jsx(A,{className:"w-4 h-4"}),"Kurumsal"]}),Ot.jsxs("button",{type:"button",onClick:()=>S(e=>({...e,userType:"nakliyeci"})),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg transition-colors text-sm font-medium "+("nakliyeci"===w.userType?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[Ot.jsx(E,{className:"w-4 h-4"}),"Nakliyeci"]}),Ot.jsxs("button",{type:"button",onClick:()=>S(e=>({...e,userType:"tasiyici"})),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg transition-colors text-sm font-medium "+("tasiyici"===w.userType?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[Ot.jsx(ee,{className:"w-4 h-4"}),"Taşıyıcı"]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Ad"}),Ot.jsx("input",{type:"text",name:"firstName",value:w.firstName,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adınız",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"lastName",className:"text-gray-700 text-sm font-medium",children:"Soyad"}),Ot.jsx("input",{id:"lastName",type:"text",name:"lastName",value:w.lastName,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Soyadınız",required:!0})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"email",className:"text-gray-700 text-sm font-medium",children:"E-posta"}),Ot.jsx("input",{id:"email",type:"email",name:"email",value:w.email,onChange:z,onBlur:async()=>{w.email&&await T(w.email)},className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ornek@email.com",required:!0,"aria-label":"E-posta adresi"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"phone",className:"text-gray-700 text-sm font-medium",children:"Telefon"}),Ot.jsx("input",{id:"phone",type:"tel",name:"phone",value:w.phone,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+90 555 123 4567",required:!0,"aria-label":"Telefon numarası"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"password",className:"text-gray-700 text-sm font-medium",children:"Şifre"}),Ot.jsx("input",{id:"password",type:"password",name:"password",value:w.password,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0,"aria-label":"Şifre"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"confirmPassword",className:"text-gray-700 text-sm font-medium",children:"Şifre Tekrar"}),Ot.jsx("input",{id:"confirmPassword",type:"password",name:"confirmPassword",value:w.confirmPassword,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0,"aria-label":"Şifre tekrar"})]})]}),"individual"===w.userType&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Adres"}),Ot.jsx("textarea",{name:"address",value:w.address,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tam adresinizi girin",rows:3,required:!0})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şehir"}),Ot.jsx("input",{type:"text",name:"city",value:w.city,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İstanbul",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"İlçe"}),Ot.jsx("input",{type:"text",name:"district",value:w.district,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kadıköy",required:!0})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Doğum Tarihi"}),Ot.jsx("input",{type:"date",name:"birthDate",value:w.birthDate,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,max:new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0]})]})]}),"corporate"===w.userType&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şirket Adı"}),Ot.jsx("input",{type:"text",name:"companyName",value:w.companyName,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şirket Adı",required:!0})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Vergi Numarası"}),Ot.jsx("input",{type:"text",name:"taxNumber",value:w.taxNumber,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1234567890",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şirket Telefonu"}),Ot.jsx("input",{type:"tel",name:"companyPhone",value:w.companyPhone,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+90 212 123 4567",required:!0})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şirket Adresi"}),Ot.jsx("textarea",{name:"companyAddress",value:w.companyAddress,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şirket adresini girin",rows:3,required:!0})]})]}),"nakliyeci"===w.userType&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şirket Adı"}),Ot.jsx("input",{type:"text",name:"companyName",value:w.companyName,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nakliye Şirketi Adı",required:!0})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Vergi Numarası"}),Ot.jsx("input",{type:"text",name:"taxNumber",value:w.taxNumber,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1234567890",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şirket Telefonu"}),Ot.jsx("input",{type:"tel",name:"companyPhone",value:w.companyPhone,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+90 212 123 4567",required:!0})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şirket Adresi"}),Ot.jsx("textarea",{name:"companyAddress",value:w.companyAddress,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şirket adresini girin",rows:3,required:!0})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Nakliye Lisans No"}),Ot.jsx("input",{type:"text",name:"licenseNumber",value:w.licenseNumber,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"NL123456789",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Araç Sayısı"}),Ot.jsx("input",{type:"number",name:"vehicleCount",value:w.vehicleCount,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5",min:"1",required:!0})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"text-gray-700 text-sm font-medium flex items-center gap-2",children:["Şehir",Ot.jsx("span",{className:"text-xs text-amber-600",children:"⚠️ Sadece bu şehirdeki ilanlara teklif verebilirsiniz"})]}),Ot.jsx("input",{type:"text",name:"city",value:w.city,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Malatya",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Hizmet Verilen Bölgeler"}),Ot.jsx("input",{type:"text",name:"serviceAreas",value:w.serviceAreas,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İstanbul, Ankara, İzmir (virgülle ayırın)",required:!0})]})]}),"tasiyici"===w.userType&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Adres"}),Ot.jsx("textarea",{name:"address",value:w.address,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tam adresinizi girin",rows:3,required:!0})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"Şehir"}),Ot.jsx("input",{type:"text",name:"city",value:w.city,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İstanbul",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-gray-700 text-sm font-medium",children:"İlçe"}),Ot.jsx("input",{type:"text",name:"district",value:w.district,onChange:z,className:"w-full mt-1 px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kadıköy",required:!0})]})]})]}),Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:[Ot.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:["Yasal Onaylar ",Ot.jsx("span",{className:"text-red-500",children:"*"})]}),Ot.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[Ot.jsx("input",{type:"checkbox",name:"acceptTerms",checked:w.acceptTerms,onChange:z,className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",required:!0}),Ot.jsxs("span",{className:"text-sm text-gray-700 group-hover:text-gray-900",children:[Ot.jsx(d,{to:"/terms",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"Kullanım Koşulları"}),"'nı okudum ve kabul ediyorum"]})]}),Ot.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[Ot.jsx("input",{type:"checkbox",name:"acceptPrivacy",checked:w.acceptPrivacy,onChange:z,className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",required:!0}),Ot.jsxs("span",{className:"text-sm text-gray-700 group-hover:text-gray-900",children:[Ot.jsx(d,{to:"/privacy",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"Gizlilik Politikası"}),"'nı okudum ve kabul ediyorum"]})]}),Ot.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[Ot.jsx("input",{type:"checkbox",name:"acceptCookies",checked:w.acceptCookies,onChange:z,className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsxs("span",{className:"text-sm text-gray-700 group-hover:text-gray-900",children:[Ot.jsx(d,{to:"/cookie-policy",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"Çerez Politikası"}),"'nı okudum ve kabul ediyorum"]})]}),Ot.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[Ot.jsx("input",{type:"checkbox",name:"acceptKVKK",checked:w.acceptKVKK,onChange:z,className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",required:!0}),Ot.jsxs("span",{className:"text-sm text-gray-700 group-hover:text-gray-900",children:[Ot.jsx(d,{to:"/kvkk-aydinlatma",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"KVKK Aydınlatma Metni"}),"'ni okudum ve anladım"]})]}),Ot.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"* Hesap oluşturmak için Kullanım Koşulları, Gizlilik Politikası ve KVKK Aydınlatma Metni onayları zorunludur."})]}),Ot.jsx("button",{type:"submit",disabled:s||!w.acceptTerms||!w.acceptPrivacy||!w.acceptKVKK,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:transform-none flex items-center justify-center gap-2",children:s?Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Oluşturuluyor..."]}):Ot.jsxs(Ot.Fragment,{children:["Hesap Oluştur",Ot.jsx(K,{className:"w-5 h-5"})]})})]}),Ot.jsx("div",{className:"mt-6 text-center",children:Ot.jsxs("p",{className:"text-gray-600",children:["Zaten hesabınız var mı?"," ",Ot.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Giriş Yap"})]})}),N&&j&&Ot.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"mb-4",children:Ot.jsx(J,{className:"w-16 h-16 text-green-500 mx-auto"})}),Ot.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kayıt Başarılı!"}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:"Taşıyıcı kodunuz oluşturuldu. Bu kodu nakliyeciler ile paylaşabilirsiniz."}),Ot.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-blue-900 rounded-lg p-6 mb-6",children:[Ot.jsx("p",{className:"text-sm text-white/80 mb-2",children:"Taşıyıcı Kodunuz"}),Ot.jsx("p",{className:"text-3xl font-bold text-white tracking-wider",children:j})]}),Ot.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:Ot.jsxs("p",{className:"text-sm text-yellow-800",children:["⚠️ ",Ot.jsx("strong",{children:"Önemli:"})," Bu kodu güvenli bir yerde saklayın. Nakliyeciler bu kod ile sizi ekleyebilir."]})}),Ot.jsxs("button",{onClick:()=>{k(!1),e("/tasiyici/dashboard")},className:"w-full bg-gradient-to-r from-slate-900 to-blue-900 text-white py-3 rounded-lg font-semibold hover:from-slate-800 hover:to-blue-800 transition-all flex items-center justify-center gap-2",children:["Devam Et",Ot.jsx(K,{className:"w-5 h-5"})]})]})})})]})})]})]})};var Xa=Object.defineProperty,Qa=(e,t,s)=>((e,t,s)=>t in e?Xa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class el extends Error{constructor(e,t,s){super(e),Qa(this,"status"),Qa(this,"response"),Qa(this,"data"),this.name="ApiError",this.status=t,this.response=s}}const tl=async(e,t,s=1e3)=>{try{return await e()}catch(a){if(t>0)return await new Promise(e=>setTimeout(e,s)),tl(e,t-1,2*s);throw a}},sl=async(e,t={})=>{var s;const a=Ys();let l=e.startsWith("/")?e:`/${e}`;(l.startsWith("/api/")||l.startsWith("/api"))&&(l=l.substring(4));const i=Zs(l),r={"Content-Type":"application/json"},n=localStorage.getItem("authToken")||localStorage.getItem("token");n&&"null"!==n&&"undefined"!==n&&(r.Authorization=`Bearer ${n}`);const d={...r,...t.headers},o=new AbortController,c=setTimeout(()=>o.abort(),a.timeout);try{const e=await tl(()=>fetch(i,{...t,headers:d,signal:o.signal}),a.retryAttempts);if(clearTimeout(c),!e.ok){let t;try{t=await e.json()}catch{t={message:e.statusText}}try{const a=String((null==t?void 0:t.message)||(null==(s=null==t?void 0:t.error)?void 0:s.message)||"").toLowerCase();if((401===e.status||403===e.status)&&(a.includes("invalid or expired token")||a.includes("invalid token")||a.includes("expired token"))&&"undefined"!=typeof window){try{localStorage.removeItem("authToken"),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(m){}window.dispatchEvent(new Event("auth:logout"))}}catch(m){}const a=new el(t.details||t.message||`HTTP ${e.status}: ${e.statusText}`,e.status,e);throw a.data=t,a}let l;try{const t=await e.text();if(!t||0===t.trim().length)return{success:!1,message:"Sunucudan boş yanıt alındı"};l=JSON.parse(t)}catch(x){return{success:!1,error:`Geçersiz sunucu yanıtı: ${x instanceof Error?x.message:"Ayrıştırma hatası"}`,status:e.status}}return l}catch(u){if(clearTimeout(c),u instanceof el)throw u;if(u instanceof Error&&"AbortError"===u.name)throw new el("İstek zaman aşımına uğradı",408);if(u instanceof TypeError&&u.message.includes("JSON"))throw new el("Geçersiz sunucu yanıtı",500);throw new el(u instanceof Error?u.message:"Ağ hatası",0)}},al=()=>{const e=localStorage.getItem("authToken")||localStorage.getItem("token");return!!e&&"null"!==e&&"undefined"!==e&&e.startsWith("demo-token-")},ll=(e,t)=>sl(e,{...t,method:"GET"}),il=(e,t,s)=>sl(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0}),rl=(e,t,s)=>sl(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0}),nl=(e,t)=>sl(e,{...t,method:"DELETE"}),dl=e=>il(qs,{email:e}),ol=e=>ll(`dashboard/stats/${e}`),cl={getUnreadCount:()=>al()?Promise.resolve({success:!0,data:{unreadCount:0}}):ll("/notifications/unread-count"),getNotifications:()=>ll("/notifications"),markAsRead:e=>rl(`/notifications/${e}/read`),markAllAsRead:()=>rl("/notifications/mark-all-read"),deleteNotification:e=>nl(`/notifications/${e}`),deleteAllNotifications:()=>nl("/notifications")},ml={getAll:()=>ll(Hs),getOpen:()=>ll(Us),getNakliyeci:()=>ll(Vs),getOffers:()=>ll(Js),getRecentShipments:e=>ll(`/api/shipments/recent/${e}`),create:e=>il(Hs,e),update:(e,t)=>rl(`${Hs}/${e}`,t),delete:e=>nl(`${Hs}/${e}`)},xl=()=>al()?Promise.resolve({success:!0,data:[]}):ll("/messages"),ul=e=>il("/messages",e),hl=e=>nl(`/messages/conversation/${e}`),pl=()=>ll(Ws);function gl(){const[e,t]=l.useState(""),[s,a]=l.useState(!1),[i,r]=l.useState(""),[n,o]=l.useState(!1);return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-12",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Şifremi Unuttum - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext şifre sıfırlama sayfası"})]}),Ot.jsxs("div",{className:"max-w-md w-full",children:[Ot.jsx("div",{className:"text-center mb-8",children:Ot.jsx(d,{to:"/",children:Ot.jsx(Da,{variant:"banner",size:"lg",className:"h-12 mx-auto"})})}),Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:n?Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ot.jsx(J,{className:"w-8 h-8 text-emerald-600"})}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"E-posta Gönderildi"}),Ot.jsxs("p",{className:"text-slate-600 mb-6",children:["Şifre sıfırlama linki ",Ot.jsx("strong",{children:e})," adresine gönderildi.",Ot.jsx("br",{}),"Lütfen e-posta kutunuzu kontrol edin."]}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx(d,{to:"/login",className:"block w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 rounded-lg font-semibold hover:from-slate-700 hover:to-blue-800 transition text-center",children:"Giriş Sayfasına Dön"}),Ot.jsx("button",{onClick:()=>{o(!1),t("")},className:"w-full text-slate-600 hover:text-slate-900 text-sm",children:"Başka bir e-posta ile dene"})]})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"text-center mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ot.jsx(S,{className:"w-8 h-8 text-blue-600"})}),Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Şifremi Unuttum"}),Ot.jsx("p",{className:"text-slate-600",children:"E-posta adresinize şifre sıfırlama linki göndereceğiz"})]}),Ot.jsxs("form",{onSubmit:async t=>{var s;if(t.preventDefault(),a(!0),r(""),!e)return r("E-posta adresi gereklidir"),void a(!1);try{const t=await dl(e);t.success?o(!0):r(t.message||"Bir hata oluştu")}catch(l){r((null==(s=null==l?void 0:l.data)?void 0:s.message)||(null==l?void 0:l.message)||"Şifre sıfırlama isteği gönderilemedi. Lütfen tekrar deneyin.")}finally{a(!1)}},className:"space-y-6",children:[i&&Ot.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[Ot.jsx(te,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),Ot.jsx("p",{className:"text-sm text-red-800",children:i})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"E-posta Adresi"}),Ot.jsx("input",{type:"email",id:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"ornek@email.com",required:!0,disabled:s})]}),Ot.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 rounded-lg font-semibold hover:from-slate-700 hover:to-blue-800 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Gönderiliyor...":"Şifre Sıfırlama Linki Gönder"})]}),Ot.jsx("div",{className:"mt-6 text-center",children:Ot.jsxs(d,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900 transition",children:[Ot.jsx(re,{className:"w-4 h-4"}),"Giriş sayfasına dön"]})})]})}),Ot.jsx("div",{className:"mt-6 text-center text-sm text-slate-600",children:Ot.jsxs("p",{children:["E-postayı bulamadınız mı?"," ",Ot.jsx(d,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Destek ekibimizle iletişime geçin"})]})})]})]})}const bl=async(e,t)=>(await fetch(Zs("/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,password:t})})).json();function fl(){const[e]=c(),t=o(),s=e.get("token"),[a,i]=l.useState({password:"",confirmPassword:""}),[r,n]=l.useState(!1),[m,x]=l.useState(!1),[u,h]=l.useState(!1),[p,g]=l.useState(""),[b,f]=l.useState(!1);l.useEffect(()=>{s||g("Geçersiz veya eksik token. Lütfen e-postanızdaki linki kullanın.")},[s]);return s?Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-12",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Şifre Sıfırla - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext şifre sıfırlama sayfası"})]}),Ot.jsxs("div",{className:"max-w-md w-full",children:[Ot.jsx("div",{className:"text-center mb-8",children:Ot.jsx(d,{to:"/",children:Ot.jsx(Da,{variant:"banner",size:"lg",className:"h-12 mx-auto"})})}),Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:b?Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ot.jsx(J,{className:"w-8 h-8 text-emerald-600"})}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Şifre Başarıyla Sıfırlandı"}),Ot.jsx("p",{className:"text-slate-600 mb-6",children:"Yeni şifrenizle giriş yapabilirsiniz. 3 saniye sonra giriş sayfasına yönlendirileceksiniz."}),Ot.jsx(d,{to:"/login",className:"inline-block bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-6 rounded-lg font-semibold hover:from-slate-700 hover:to-blue-800 transition",children:"Giriş Yap"})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"text-center mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ot.jsx(se,{className:"w-8 h-8 text-blue-600"})}),Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Yeni Şifre Belirle"}),Ot.jsx("p",{className:"text-slate-600",children:"Güvenliğiniz için güçlü bir şifre seçin"})]}),Ot.jsxs("form",{onSubmit:async e=>{var l,i;if(e.preventDefault(),g(""),!s)return void g("Geçersiz token");if(!a.password||!a.confirmPassword)return void g("Lütfen tüm alanları doldurun");const r=(n=a.password).length<8?"Şifre en az 8 karakter olmalıdır":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?null:"Şifre en az bir rakam içermelidir":"Şifre en az bir küçük harf içermelidir":"Şifre en az bir büyük harf içermelidir";var n;if(r)g(r);else if(a.password===a.confirmPassword){h(!0);try{const e=await bl(s,a.password);e.success?(f(!0),setTimeout(()=>{t("/login")},3e3)):g(e.message||"Şifre sıfırlama başarısız")}catch(d){g((null==(i=null==(l=null==d?void 0:d.response)?void 0:l.data)?void 0:i.message)||"Şifre sıfırlama başarısız. Token geçersiz veya süresi dolmuş olabilir.")}finally{h(!1)}}else g("Şifreler eşleşmiyor")},className:"space-y-6",children:[p&&Ot.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[Ot.jsx(te,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),Ot.jsx("p",{className:"text-sm text-red-800",children:p})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Yeni Şifre"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx("input",{type:r?"text":"password",id:"password",value:a.password,onChange:e=>i({...a,password:e.target.value}),className:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"En az 8 karakter",required:!0,disabled:u}),Ot.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:r?Ot.jsx(ae,{className:"w-5 h-5"}):Ot.jsx(Q,{className:"w-5 h-5"})})]}),Ot.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"En az 8 karakter, bir büyük harf, bir küçük harf ve bir rakam"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Şifre Tekrar"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx("input",{type:m?"text":"password",id:"confirmPassword",value:a.confirmPassword,onChange:e=>i({...a,confirmPassword:e.target.value}),className:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Şifreyi tekrar girin",required:!0,disabled:u}),Ot.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:m?Ot.jsx(ae,{className:"w-5 h-5"}):Ot.jsx(Q,{className:"w-5 h-5"})})]})]}),Ot.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 rounded-lg font-semibold hover:from-slate-700 hover:to-blue-800 transition disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Şifre Sıfırlanıyor...":"Şifreyi Sıfırla"})]}),Ot.jsx("div",{className:"mt-6 text-center",children:Ot.jsxs(d,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900 transition",children:[Ot.jsx(re,{className:"w-4 h-4"}),"Giriş sayfasına dön"]})})]})})]})]}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-12",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Geçersiz Token - YolNext"})}),Ot.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl border border-slate-200 p-8 text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ot.jsx(te,{className:"w-8 h-8 text-red-600"})}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Geçersiz Link"}),Ot.jsx("p",{className:"text-slate-600 mb-6",children:"Bu link geçersiz veya süresi dolmuş. Lütfen yeni bir şifre sıfırlama isteği gönderin."}),Ot.jsx(d,{to:"/forgot-password",className:"inline-block bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-6 rounded-lg font-semibold hover:from-slate-700 hover:to-blue-800 transition",children:"Yeni Şifre Sıfırlama İsteği"})]})]})}const yl=()=>Ot.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:Ot.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 shadow-2xl text-center",children:[Ot.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"E-posta Doğrulama"}),Ot.jsx("p",{className:"text-slate-400",children:"E-posta doğrulama sayfası"})]})}),jl=()=>Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Hakkımızda - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext hakkında bilgi edinin. Türkiye'nin en büyük lojistik platformu."})]}),Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-slate-50",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Hakkımızda"}),Ot.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"YolNext, Türkiye'nin en büyük ve güvenilir lojistik platformudur."})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:[Ot.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[Ot.jsx(E,{className:"w-12 h-12 text-blue-600 mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Hızlı Taşıma"}),Ot.jsx("p",{className:"text-gray-600",children:"Binlerce nakliyeci ile hızlı ve güvenli taşıma hizmeti."})]}),Ot.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[Ot.jsx(U,{className:"w-12 h-12 text-green-600 mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Güvenli Platform"}),Ot.jsx("p",{className:"text-gray-600",children:"Tüm işlemler güvenli ve şeffaf bir şekilde yönetilir."})]}),Ot.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[Ot.jsx(C,{className:"w-12 h-12 text-purple-600 mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"4 Kullanıcı Tipi"}),Ot.jsx("p",{className:"text-gray-600",children:"Bireysel, Kurumsal, Nakliyeci ve Taşıyıcı için özel çözümler."})]})]}),Ot.jsx("div",{className:"text-center",children:Ot.jsx(d,{to:"/",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 transition-colors min-h-[44px]",children:"Ana Sayfaya Dön"})})]})}),Ot.jsx(Ka,{})]});function vl(){return Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"İletişim - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext ile iletişime geçin. Sorularınız için bize ulaşın."})]}),Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"İletişim"}),Ot.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Sorularınız, önerileriniz veya destek talepleriniz için bizimle iletişime geçebilirsiniz."})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[Ot.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[Ot.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"İletişim Bilgileri"}),Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:Ot.jsx(S,{className:"w-6 h-6 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"E-posta"}),Ot.jsx("p",{className:"text-gray-600",children:Ia.supportEmail}),Ot.jsx("p",{className:"text-gray-600",children:Ia.kvkkEmail})]})]}),Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:Ot.jsx(z,{className:"w-6 h-6 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Telefon"}),Ot.jsx("p",{className:"text-gray-600",children:Ia.phone}),Ot.jsx("p",{className:"text-gray-600",children:"7/24 Destek Hattı"})]})]}),Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-6 h-6 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Adres"}),Ot.jsxs("p",{className:"text-gray-600",children:[Ia.companyName,Ot.jsx("br",{}),Ia.address]})]})]})]})]}),Ot.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[Ot.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Bize Mesaj Gönderin"}),Ot.jsxs("form",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),Ot.jsx("input",{type:"text",id:"name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Adınız ve soyadınız"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),Ot.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ornek@email.com"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Konu"}),Ot.jsx("input",{type:"text",id:"subject",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Mesaj konusu"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mesaj"}),Ot.jsx("textarea",{id:"message",rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Mesajınızı buraya yazın..."})]}),Ot.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-6 rounded-lg font-semibold hover:from-slate-700 hover:to-blue-800 transition-all duration-300 flex items-center justify-center gap-2",children:[Ot.jsx(ne,{className:"w-5 h-5"}),"Mesaj Gönder"]})]})]})]})]})}),Ot.jsx(Ka,{})]})}const Nl=()=>Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Kullanım Koşulları - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext platform kullanım koşulları ve şartları"})]}),Ot.jsx("header",{className:"bg-white border-b border-gray-200",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:Ot.jsx(d,{to:"/",className:"flex items-center justify-start",children:Ot.jsx(Da,{variant:"banner",size:"md",showText:!1})})})}),Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ot.jsxs(d,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-8",children:[Ot.jsx(re,{className:"w-4 h-4 mr-2"}),"Ana Sayfaya Dön"]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12",children:[Ot.jsxs("div",{className:"flex items-center mb-8",children:[Ot.jsx(W,{className:"w-8 h-8 text-blue-600 mr-3"}),Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Kullanım Koşulları"})]}),Ot.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["Son Güncelleme: ",(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),Ot.jsxs("div",{className:"prose prose-slate max-w-none",children:[Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"1. Genel Hükümler"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"YolNext platformunu kullanarak, aşağıdaki kullanım koşullarını kabul etmiş sayılırsınız. Bu koşulları kabul etmiyorsanız, lütfen platformu kullanmayın."}),Ot.jsx("p",{className:"text-gray-700",children:"YolNext, lojistik ve kargo hizmetleri alanında kullanıcıları bir araya getiren bir aracı platformdur. Platform; gönderici ile nakliyeci/taşıyıcı arasında iletişim, teklif ve süreç yönetimi için teknik altyapı sağlar. YolNext, taşımacılık hizmetini bizzat sunmaz ve sigorta hizmeti sağlamaz."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"2. Platform Kullanımı"}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.1. Kayıt ve Hesap"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Platformu kullanmak için kayıt olmanız gerekmektedir"}),Ot.jsx("li",{children:"Doğru ve güncel bilgiler sağlamak sizin sorumluluğunuzdadır"}),Ot.jsx("li",{children:"Hesap bilgilerinizin güvenliğinden siz sorumlusunuz"}),Ot.jsx("li",{children:"Hesabınızı başkalarıyla paylaşamazsınız"})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.2. Kullanıcı Sorumlulukları"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Yasalara ve düzenlemelere uygun hareket etmelisiniz"}),Ot.jsx("li",{children:"Yanıltıcı veya yanlış bilgi vermemelisiniz"}),Ot.jsx("li",{children:"Platformu kötüye kullanamazsınız"}),Ot.jsx("li",{children:"Diğer kullanıcıların haklarına saygı göstermelisiniz"}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Sigorta:"})," İhtiyaç duyuyorsanız, kendi sigortanızı yaptırmak TAMAMEN sizin sorumluluğunuzdadır. YolNext hiçbir sigorta hizmeti vermez"]})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"3. Hizmet Şartları"}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3.1. Göndericiler"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Gönderi bilgilerini doğru ve eksiksiz sağlamalısınız"}),Ot.jsx("li",{children:"Yasaklı veya tehlikeli madde gönderemezsiniz"}),Ot.jsx("li",{children:"Kabul edilen teklifler bağlayıcıdır"}),Ot.jsx("li",{children:"Ödeme yükümlülüklerinizi zamanında yerine getirmelisiniz"})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3.2. Nakliyeciler"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Verdiğiniz teklifler bağlayıcıdır"}),Ot.jsx("li",{children:"Gönderileri zamanında ve güvenli şekilde teslim etmelisiniz"}),Ot.jsx("li",{children:"Gerekli lisans ve belgeleriniz olmalıdır"}),Ot.jsx("li",{children:"Yasal yükümlülüklerinizden siz sorumlusunuz"}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Sigorta:"})," İhtiyaç duyuyorsanız, kendi sigortanızı yaptırmak TAMAMEN sizin sorumluluğunuzdadır. YolNext hiçbir sigorta hizmeti vermez"]})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"4. Ödeme ve Fiyatlandırma"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Fiyatlar platform üzerinden belirlenir"}),Ot.jsx("li",{children:"Komisyon oranları platform tarafından belirlenir"}),Ot.jsx("li",{children:"Ödemeler platform üzerinden güvenli şekilde yapılır"}),Ot.jsx("li",{children:"İptal koşulları platform politikalarına tabidir. Mevzuatın izin verdiği ölçüde iptal edilen işlemlerde iade/geri ödeme yapılmaz"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"5. Sorumluluk Reddi ve Risk Uyarısı"}),Ot.jsxs("div",{className:"bg-red-50 border-4 border-red-500 rounded-lg p-8 mb-6",children:[Ot.jsxs("h3",{className:"text-2xl font-bold text-red-900 mb-4 flex items-center",children:[Ot.jsx(f,{className:"w-8 h-8 mr-3"}),"ÖNEMLİ UYARI: YolNext bir aracı platformdur"]}),Ot.jsx("p",{className:"text-red-800 font-bold text-lg mb-4",children:"YolNext, gönderici ve nakliyeci/taşıyıcı arasında teknik aracılık sağlar. YolNext taşımacılık hizmetini bizzat gerçekleştirmez ve sigorta hizmeti sunmaz."}),Ot.jsx("p",{className:"text-red-700 font-semibold",children:"Taraflar arasındaki taşıma ilişkisi kapsamında doğabilecek talepler ve uyuşmazlıklarda, YolNext’in sorumluluğu (varsa) yürürlükteki mevzuatın izin verdiği ölçüde sınırlıdır."})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5.1. Platformun Rolü ve Sorumluluğun Sınırı"}),Ot.jsx("p",{className:"text-gray-700 mb-4 font-semibold",children:"YolNext, aracı bir platform olarak; kullanıcıların kendi aralarındaki taşıma sözleşmesinin tarafı değildir. YolNext’in sorumluluğu (varsa) yürürlükteki mevzuatın izin verdiği ölçüde ve kusuru oranında doğar."}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-3 mb-4",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Taşıma hizmetinin ifası:"})," Taşımanın yapılması, zamanında teslim, yükün korunması ve benzeri ifa yükümlülükleri taşıyıcı/nakliyeciye aittir."]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Gönderi içeriği ve beyanı:"})," Gönderinin içeriği, beyanı, paketlenmesi ve teslim koşulları gönderici sorumluluğundadır."]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Sigorta:"})," Sigorta yapılması gerekiyorsa, sigorta işlemleri tarafların kendi sorumluluğundadır; YolNext sigorta hizmeti sunmaz."]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Üçüncü taraf hizmetleri:"})," Ödeme altyapıları gibi üçüncü taraf hizmetlerde yaşanabilecek aksaklıklarda ilgili sağlayıcının koşulları uygulanır."]})]}),Ot.jsx("div",{className:"bg-red-100 border-2 border-red-400 rounded-lg p-4 mb-4",children:Ot.jsx("p",{className:"text-red-900 font-bold",children:"⚠️ YOLNEXT HİÇBİR SİGORTA HİZMETİ VERMEZ. SİGORTA İLE İLGİLİ TÜM SORUMLULUK KULLANICILARA AİTTİR."})}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5.2. Kullanıcı Sorumluluğu (TAM SORUMLULUK)"}),Ot.jsx("p",{className:"text-gray-700 mb-4 font-semibold",children:"Platformu kullanarak, aşağıdakileri KESİN OLARAK kabul etmiş sayılırsınız:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-3 mb-4 font-semibold",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Göndericiler:"})," Gönderilerinizi uygun şekilde paketlemek, doğru bilgi vermek, yasaklı madde göndermemek, gerekli sigortaları yaptırmak (eğer istiyorsanız), tüm riskleri üstlenmek TAMAMEN sizin sorumluluğunuzdadır"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Nakliyeciler:"})," Taşımacılık hizmetlerini yasalara uygun şekilde sağlamak, gerekli lisansları bulundurmak, gerekli sigortaları yaptırmak (eğer istiyorsanız), gönderileri güvenli şekilde taşımak, tüm riskleri üstlenmek TAMAMEN sizin sorumluluğunuzdadır"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Her İki Taraf:"})," Aranızdaki anlaşmalar, anlaşmazlıklar, uyuşmazlıklar, tazminat talepleri, dava süreçleri, sigorta işlemleri, tüm mali ve hukuki yükümlülükler TAMAMEN sizin sorumluluğunuzdadır"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"YolNext:"})," Sadece bir aracı platformdur, hiçbir şekilde taraf değildir, hiçbir hizmeti bizzat sağlamaz, hiçbir sorumluluk kabul etmez"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Sigorta:"})," YolNext hiçbir sigorta hizmeti vermez. İhtiyaç duyuyorsanız, kendi sigortanızı yaptırmak TAMAMEN sizin sorumluluğunuzdadır. Sigorta eksikliğinden kaynaklanan tüm zararlar sizin sorumluluğunuzdadır"]})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5.3. Yasal Yükümlülükler"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Göndericiler: Gönderileriniz için gerekli tüm yasal yükümlülükleri yerine getirmek sizin sorumluluğunuzdadır"}),Ot.jsx("li",{children:"Nakliyeciler: Yasal zorunluluklarınızı (lisans, vergi) yerine getirmek sizin sorumluluğunuzdadır"}),Ot.jsx("li",{children:"YolNext, kullanıcıların yasal yükümlülüklerini kontrol etmez veya garanti etmez"})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5.4. Anlaşmazlıklar"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Gönderici ve nakliyeci arasındaki anlaşmazlıklar:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"YolNext tarafından çözülmez"}),Ot.jsx("li",{children:"İlgili taraflar arasında çözülmelidir"}),Ot.jsx("li",{children:"Gerekirse yasal yollara başvurulabilir"}),Ot.jsx("li",{children:"YolNext hiçbir şekilde taraf olmaz ve sorumluluk kabul etmez"})]}),Ot.jsxs("div",{className:"bg-red-100 border-4 border-red-500 rounded-lg p-8 mt-6",children:[Ot.jsxs("p",{className:"text-red-900 font-bold text-lg mb-4",children:[Ot.jsx("strong",{children:"ÖNEMLİ:"})," YolNext bir aracı platformdur. Taşıma hizmetinin ifası ve taraflar arasındaki ilişkiden doğabilecek talepler bakımından YolNext’in sorumluluğu (varsa) yürürlükteki mevzuatın izin verdiği ölçüde ve kusuru oranında değerlendirilir."]}),Ot.jsx("p",{className:"text-red-800 font-semibold",children:"YolNext, gönderici ve nakliyeci/taşıyıcı arasında teknik altyapı sağlar. Tarafların yükümlülükleri, yürürlükteki mevzuat ve aralarındaki sözleşme hükümlerine göre belirlenir."})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"6. Fikri Mülkiyet"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Platform üzerindeki tüm içerik, tasarım ve yazılım YolNext'e aittir. İzinsiz kullanım yasaktır."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"7. Hesap İptali"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Platform, aşağıdaki durumlarda hesabınızı askıya alabilir veya iptal edebilir:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"Kullanım koşullarını ihlal ettiğinizde"}),Ot.jsx("li",{children:"Yasadışı faaliyetlerde bulunduğunuzda"}),Ot.jsx("li",{children:"Diğer kullanıcıları aldattığınızda"}),Ot.jsx("li",{children:"Platformun güvenliğini tehdit ettiğinizde"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"8. Değişiklikler"}),Ot.jsx("p",{className:"text-gray-700",children:"YolNext, bu kullanım koşullarını istediği zaman değiştirme hakkını saklı tutar. Değişiklikler platform üzerinden duyurulur ve yayınlandığı tarihten itibaren geçerlidir."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"9. İletişim"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Sorularınız için bizimle iletişime geçebilirsiniz:"}),Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ot.jsxs("p",{className:"text-gray-700",children:[Ot.jsx("strong",{children:"E-posta:"})," ",Ia.supportEmail,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Telefon:"})," ",Ia.phone,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Adres:"})," ",Ia.address]})})]}),Ot.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:Ot.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[Ot.jsx(J,{className:"w-5 h-5 text-green-600"}),Ot.jsx("p",{className:"text-sm",children:"Bu koşulları kabul ederek platformu kullanmaya başlayabilirsiniz."})]})})]})]})]}),Ot.jsx(Ka,{})]}),kl=()=>Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Gizlilik Politikası - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext gizlilik politikası ve kişisel veri koruma"})]}),Ot.jsx("header",{className:"bg-white border-b border-gray-200",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:Ot.jsx(d,{to:"/",className:"flex items-center justify-start",children:Ot.jsx(Da,{variant:"banner",size:"md",showText:!1})})})}),Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ot.jsxs(d,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-8",children:[Ot.jsx(re,{className:"w-4 h-4 mr-2"}),"Ana Sayfaya Dön"]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12",children:[Ot.jsxs("div",{className:"flex items-center mb-8",children:[Ot.jsx(U,{className:"w-8 h-8 text-blue-600 mr-3"}),Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gizlilik Politikası"})]}),Ot.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["Son Güncelleme: ",(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),Ot.jsxs("div",{className:"prose prose-slate max-w-none",children:[Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"1. Genel Bilgiler"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"YolNext olarak, kişisel verilerinizin korunmasına büyük önem veriyoruz. Bu gizlilik politikası, başta KVKK (6698 sayılı Kanun) olmak üzere yürürlükteki mevzuat ve iyi uygulamalar dikkate alınarak hazırlanmıştır."}),Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(se,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5"}),Ot.jsxs("div",{className:"text-sm text-gray-700",children:[Ot.jsx("p",{className:"font-semibold mb-2",children:"Veri Sorumlusu Bilgileri:"}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Unvan:"})," ",Ia.companyName,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Vergi No:"})," ",Ia.taxNumber||"—",Ot.jsx("br",{}),Ot.jsx("strong",{children:"Vergi Dairesi:"})," ",Ia.taxOffice||"—",Ot.jsx("br",{}),Ot.jsx("strong",{children:"Adres:"})," ",Ia.address,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Telefon:"})," ",Ia.phone,Ot.jsx("br",{}),Ot.jsx("strong",{children:"E-posta:"})," ",Ia.kvkkEmail]})]})]})})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"2. Toplanan Veriler"}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.1. Kimlik Bilgileri"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Ad, soyad"}),Ot.jsx("li",{children:"E-posta adresi"}),Ot.jsx("li",{children:"Telefon numarası"}),Ot.jsx("li",{children:"TC Kimlik No (gerekli durumlarda)"})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.2. İşletme Bilgileri"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2 mb-4",children:[Ot.jsx("li",{children:"Şirket adı"}),Ot.jsx("li",{children:"Vergi numarası"}),Ot.jsx("li",{children:"Adres bilgileri"}),Ot.jsx("li",{children:"Lisans ve belge bilgileri"})]}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.3. Kullanım Verileri"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"Platform kullanım istatistikleri"}),Ot.jsx("li",{children:"IP adresi"}),Ot.jsx("li",{children:"Tarayıcı bilgileri"}),Ot.jsx("li",{children:"Çerez verileri"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"3. Veri Kullanım Amaçları"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Kişisel verileriniz aşağıdaki amaçlarla kullanılır:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"Platform hizmetlerinin sağlanması"}),Ot.jsx("li",{children:"Gönderi ve nakliye işlemlerinin yönetimi"}),Ot.jsx("li",{children:"Ödeme işlemlerinin gerçekleştirilmesi"}),Ot.jsx("li",{children:"Müşteri desteği ve iletişim"}),Ot.jsx("li",{children:"Yasal yükümlülüklerin yerine getirilmesi"}),Ot.jsx("li",{children:"Platform güvenliğinin sağlanması"}),Ot.jsx("li",{children:"İyileştirme ve analiz çalışmaları"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"4. Veri Paylaşımı"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Kişisel verileriniz, aşağıdaki durumlar dışında üçüncü taraflarla paylaşılmaz:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"Hizmet sağlayıcılarımız (hosting, ödeme, SMS servisleri)"}),Ot.jsx("li",{children:"Yasal zorunluluklar (mahkeme kararı, yasal yükümlülükler)"}),Ot.jsx("li",{children:"Gönderi ve nakliye işlemleri için gerekli bilgi paylaşımı"}),Ot.jsx("li",{children:"Açık rızanızla paylaşım"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"5. Veri Güvenliği"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Verilerinizin güvenliği için şu önlemleri alıyoruz:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"SSL/TLS şifreleme"}),Ot.jsx("li",{children:"Güvenli veritabanı yönetimi"}),Ot.jsx("li",{children:"Düzenli güvenlik denetimleri"}),Ot.jsx("li",{children:"Erişim kontrolü ve yetkilendirme"}),Ot.jsx("li",{children:"Yedekleme ve felaket kurtarma planları"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"6. Çerezler (Cookies)"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Platform, kullanıcı deneyimini iyileştirmek için çerezler kullanır:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Zorunlu Çerezler:"})," Platform işlevselliği için gerekli"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Performans Çerezleri:"})," Kullanım analizi için"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Fonksiyonel Çerezler:"})," Kişiselleştirme için"]})]}),Ot.jsx("p",{className:"text-gray-700 mt-4",children:"Tarayıcı ayarlarınızdan çerezleri yönetebilirsiniz."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"7. KVKK Haklarınız"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"KVKK kapsamında aşağıdaki haklara sahipsiniz:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsx("li",{children:"Kişisel verilerinizin işlenip işlenmediğini öğrenme"}),Ot.jsx("li",{children:"İşlenen verileriniz hakkında bilgi talep etme"}),Ot.jsx("li",{children:"İşlenme amacını ve amacına uygun kullanılıp kullanılmadığını öğrenme"}),Ot.jsx("li",{children:"Yurt içi/yurt dışı aktarılan üçüncü kişileri bilme"}),Ot.jsx("li",{children:"Eksik veya yanlış verilerin düzeltilmesini isteme"}),Ot.jsx("li",{children:"Kanunların öngördüğü süre içinde silinmesini veya yok edilmesini isteme"}),Ot.jsx("li",{children:"Düzeltme, silme, yok etme işlemlerinin bildirilmesini isteme"}),Ot.jsx("li",{children:"İşlenen verilerin münhasıran otomatik sistemler aracılığıyla analiz edilmesi suretiyle kişinin kendisi aleyhine bir sonucun ortaya çıkmasına itiraz etme"}),Ot.jsx("li",{children:"Kanuna aykırı işlenmesi sebebiyle zarara uğrama halinde zararın giderilmesini talep etme"})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"8. Veri Saklama Süresi"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Kişisel verileriniz, yasal saklama süreleri ve işleme amaçları doğrultusunda saklanır. Amacın ortadan kalkması durumunda veriler silinir veya anonimleştirilir."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"9. Değişiklikler"}),Ot.jsx("p",{className:"text-gray-700",children:"Bu gizlilik politikası, yasal düzenlemelere uygun olarak güncellenebilir. Önemli değişiklikler platform üzerinden duyurulur."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"10. İletişim"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"KVKK kapsamındaki haklarınızı kullanmak için:"}),Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ot.jsxs("p",{className:"text-gray-700",children:[Ot.jsx("strong",{children:"E-posta:"})," ",Ia.kvkkEmail,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Telefon:"})," ",Ia.phone,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Adres:"})," ",Ia.address]})})]})]})]})]}),Ot.jsx(Ka,{})]}),wl=()=>Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Çerez Politikası - YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext çerez kullanım politikası"})]}),Ot.jsx("header",{className:"bg-white border-b border-gray-200",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:Ot.jsx(d,{to:"/",className:"flex items-center justify-start",children:Ot.jsx(Da,{variant:"banner",size:"md",showText:!1})})})}),Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ot.jsxs(d,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-8",children:[Ot.jsx(re,{className:"w-4 h-4 mr-2"}),"Ana Sayfaya Dön"]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12",children:[Ot.jsxs("div",{className:"flex items-center mb-8",children:[Ot.jsx(de,{className:"w-8 h-8 text-blue-600 mr-3"}),Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Çerez Politikası"})]}),Ot.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["Son Güncelleme: ",(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),Ot.jsxs("div",{className:"prose prose-slate max-w-none",children:[Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"1. Çerez Nedir?"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Çerezler, web sitelerini ziyaret ettiğinizde tarayıcınızda saklanan küçük metin dosyalarıdır. Bu dosyalar, web sitesinin düzgün çalışmasını sağlar ve kullanıcı deneyimini iyileştirir."})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"2. Çerez Türleri"}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.1. Zorunlu Çerezler"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Bu çerezler platformun temel işlevlerini sağlamak için gereklidir ve kapatılamaz."}),Ot.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Oturum Çerezleri:"})," Giriş durumunu ve güvenliği sağlar"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Güvenlik Çerezleri:"})," Güvenli bağlantı ve CSRF koruması"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Tercih Çerezleri:"})," Kullanıcı ayarlarını hatırlar"]})]})}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.2. Performans Çerezleri"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Platform performansını analiz etmek ve iyileştirmek için kullanılır."}),Ot.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Analitik Çerezler:"})," Kullanım istatistikleri"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Performans Çerezleri:"})," Sayfa yükleme süreleri"]})]})}),Ot.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2.3. Fonksiyonel Çerezler"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Kullanıcı deneyimini kişiselleştirmek için kullanılır."}),Ot.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Dil Tercihi:"})," Seçtiğiniz dil ayarı"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Tema Tercihi:"})," Açık/koyu tema seçimi"]})]})})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"3. Çerez Yönetimi"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Çerez tercihlerinizi yönetmek için:"}),Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(oe,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-gray-700 font-semibold mb-2",children:"Tarayıcı Ayarları:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-sm text-gray-700 space-y-1",children:[Ot.jsx("li",{children:"Chrome: Ayarlar → Gizlilik ve güvenlik → Çerezler"}),Ot.jsx("li",{children:"Firefox: Seçenekler → Gizlilik ve Güvenlik → Çerezler"}),Ot.jsx("li",{children:"Safari: Tercihler → Gizlilik → Çerezler"}),Ot.jsx("li",{children:"Edge: Ayarlar → Gizlilik → Çerezler"})]})]})]})}),Ot.jsxs("p",{className:"text-gray-700",children:[Ot.jsx("strong",{children:"Not:"})," Çerezleri devre dışı bırakmak, platformun bazı özelliklerinin çalışmamasına neden olabilir."]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"4. Üçüncü Taraf Çerezler"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Platform, aşağıdaki üçüncü taraf hizmetleri kullanır:"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Analitik (opsiyonel):"})," Kullanım analizi (analitik çerezler, tercihlerinize göre etkinleştirilebilir)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Ödeme İşlemcileri:"})," Güvenli ödeme için gerekli çerezler"]})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"5. Çerez Saklama Süreleri"}),Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Oturum Çerezleri:"})," Tarayıcı kapatıldığında silinir"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Kalıcı Çerezler:"})," Belirlenen süre boyunca (max 1 yıl) saklanır"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Tercih Çerezleri:"})," Silinene kadar veya 1 yıl"]})]})]}),Ot.jsxs("section",{className:"mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"6. İletişim"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Çerez politikası hakkında sorularınız için:"}),Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ot.jsxs("p",{className:"text-gray-700",children:[Ot.jsx("strong",{children:"Email:"})," ",Ia.supportEmail,Ot.jsx("br",{}),Ot.jsx("strong",{children:"Telefon:"})," ",Ia.phone]})})]})]})]})]}),Ot.jsx(Ka,{})]}),Sl=()=>Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"KVKK Aydınlatma Metni - YolNext"}),Ot.jsx("meta",{name:"description",content:"Kişisel Verilerin Korunması Kanunu (KVKK) kapsamında aydınlatma metni"})]}),Ot.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6 sm:p-8 md:p-10",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("div",{className:"flex justify-center mb-4",children:Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(U,{className:"w-8 h-8 text-white"})})}),Ot.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-900 mb-3",children:"KVKK Aydınlatma Metni"}),Ot.jsx("p",{className:"text-slate-600 text-sm sm:text-base",children:"Kişisel Verilerin Korunması Kanunu (KVKK) m.10 gereği aydınlatma metni"})]}),Ot.jsxs("div",{className:"prose prose-slate max-w-none space-y-6",children:[Ot.jsxs("section",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(W,{className:"w-5 h-5 text-blue-600"}),"1. Veri Sorumlusu"]}),Ot.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Şirket Unvanı:"})," ",Ia.companyName]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Vergi No:"})," ",Ia.taxNumber||"—"]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Vergi Dairesi:"})," ",Ia.taxOffice||"—"]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Ticaret Sicil No:"})," ",Ia.tradeRegistryNumber||"—"]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Mersis No:"})," ",Ia.mersis||"—"]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Adres:"})," ",Ia.address]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Telefon:"})," ",Ia.phone]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"E-posta:"})," ",Ia.kvkkEmail]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(Q,{className:"w-5 h-5 text-blue-600"}),"2. Toplanan Kişisel Veriler"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"YolNext platformu olarak, hizmetlerimizi sunabilmek için aşağıdaki kişisel verileri toplamaktayız:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Kimlik Bilgileri:"})," Ad, soyad, doğum tarihi, T.C. kimlik numarası (nakliyeci ve taşıyıcılar için)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"İletişim Bilgileri:"})," E-posta adresi, telefon numarası, adres bilgileri"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Mali Bilgiler:"})," Banka hesap bilgileri, fatura bilgileri, ödeme geçmişi"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Kurumsal Bilgiler:"})," Şirket unvanı, vergi numarası, ticaret sicil numarası (kurumsal kullanıcılar için)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Lokasyon Verileri:"})," Gönderi toplama ve teslimat adresleri"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Kullanım Verileri:"})," Platform kullanım geçmişi, işlem kayıtları, log dosyaları"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Teknik Veriler:"})," IP adresi, cihaz bilgileri, tarayıcı bilgileri, çerez verileri"]})]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(W,{className:"w-5 h-5 text-blue-600"}),"3. Veri İşleme Amaçları"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"Toplanan kişisel veriler aşağıdaki amaçlarla işlenmektedir:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsx("li",{children:"Platform hizmetlerinin sunulması ve yönetimi"}),Ot.jsx("li",{children:"Gönderi ve taşımacılık işlemlerinin gerçekleştirilmesi"}),Ot.jsx("li",{children:"Kullanıcı hesaplarının oluşturulması ve yönetimi"}),Ot.jsx("li",{children:"Ödeme işlemlerinin gerçekleştirilmesi"}),Ot.jsx("li",{children:"Müşteri hizmetleri ve destek sağlanması"}),Ot.jsx("li",{children:"Yasal yükümlülüklerin yerine getirilmesi"}),Ot.jsx("li",{children:"Güvenlik ve dolandırıcılık önleme"}),Ot.jsx("li",{children:"İstatistiksel analiz ve raporlama"}),Ot.jsx("li",{children:"Platform iyileştirmeleri ve geliştirmeleri"})]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(se,{className:"w-5 h-5 text-blue-600"}),"4. Veri İşleme Hukuki Sebepleri"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"Kişisel verileriniz KVKK m.5 ve m.6 uyarınca aşağıdaki hukuki sebeplere dayanarak işlenmektedir:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Açık Rıza:"})," Pazarlama ve iletişim faaliyetleri için açık rızanız"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Sözleşmenin Kurulması/İfası:"})," Platform hizmetlerinin sunulması için sözleşme gerekliliği"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Yasal Yükümlülük:"})," Vergi, muhasebe ve diğer yasal yükümlülüklerin yerine getirilmesi"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Meşru Menfaat:"})," Platform güvenliği, dolandırıcılık önleme ve hizmet kalitesinin artırılması"]})]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5 text-blue-600"}),"5. Kişisel Verilerin Aktarılması"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"Kişisel verileriniz, yukarıda belirtilen amaçlarla aşağıdaki üçüncü taraflarla paylaşılabilir:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Hizmet Sağlayıcılar:"})," Ödeme işlemleri, hosting, analitik hizmetleri için teknik hizmet sağlayıcılar"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Nakliyeci ve Taşıyıcılar:"})," Gönderi işlemlerinin gerçekleştirilmesi için platform üzerindeki nakliyeci ve taşıyıcılar"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Yasal Otoriteler:"})," Yasal yükümlülükler gereği ilgili kamu kurum ve kuruluşları"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"İş Ortakları:"})," Platform hizmetlerinin sunulması için gerekli iş ortakları"]})]}),Ot.jsxs("p",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ot.jsx("strong",{children:"Önemli:"})," Kişisel verileriniz yalnızca yukarıda belirtilen amaçlar ve hukuki sebepler çerçevesinde, gerekli güvenlik önlemleri alınarak paylaşılmaktadır."]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(se,{className:"w-5 h-5 text-blue-600"}),"6. Veri Güvenliği"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"Kişisel verilerinizin güvenliği için aşağıdaki teknik ve idari önlemler alınmaktadır:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsx("li",{children:"SSL/TLS şifreleme protokolleri"}),Ot.jsx("li",{children:"Güvenli sunucu altyapısı ve veri merkezleri"}),Ot.jsx("li",{children:"Düzenli güvenlik denetimleri ve testleri"}),Ot.jsx("li",{children:"Erişim kontrolü ve yetkilendirme sistemleri"}),Ot.jsx("li",{children:"Yedekleme ve felaket kurtarma planları"}),Ot.jsx("li",{children:"Personel eğitimleri ve gizlilik taahhütleri"})]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(U,{className:"w-5 h-5 text-blue-600"}),"7. KVKK Kapsamındaki Haklarınız (KVKK m.11)"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"KVKK m.11 uyarınca aşağıdaki haklara sahipsiniz:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Bilgi Alma Hakkı:"})," Kişisel verilerinizin işlenip işlenmediğini öğrenme"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Erişim Hakkı:"})," İşlenen kişisel verilerinize erişim talep etme"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Düzeltme Hakkı:"})," Yanlış veya eksik verilerin düzeltilmesini talep etme"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Silme Hakkı:"})," Kişisel verilerinizin silinmesini talep etme (KVKK m.7)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"İtiraz Hakkı:"})," Kişisel verilerinizin işlenmesine itiraz etme"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Veri Taşınabilirlik Hakkı:"})," Verilerinizi başka bir platforma aktarma"]})]}),Ot.jsxs("p",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Ot.jsx("strong",{children:"Haklarınızı Kullanma:"})," Yukarıdaki haklarınızı kullanmak için"," ",Ot.jsx(d,{to:"/contact",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"İletişim"})," ","sayfasından bizimle iletişime geçebilir veya"," ",Ot.jsx(d,{to:"/individual/settings",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"Ayarlar"})," ","sayfasından verilerinizi görüntüleyebilir/silebilirsiniz."]})]})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(W,{className:"w-5 h-5 text-blue-600"}),"8. Veri Saklama Süreleri"]}),Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{children:"Kişisel verileriniz, işleme amaçlarının gerektirdiği süre boyunca saklanmaktadır:"}),Ot.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Hesap Verileri:"})," Hesabınız aktif olduğu sürece ve hesap silinene kadar"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"İşlem Kayıtları:"})," Yasal saklama süreleri gereği (genellikle 10 yıl)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Mali Kayıtlar:"})," Vergi mevzuatı gereği (genellikle 10 yıl)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Log Dosyaları:"})," Güvenlik ve analiz amaçlı (maksimum 2 yıl)"]}),Ot.jsxs("li",{children:[Ot.jsx("strong",{children:"Çerez Verileri:"})," Çerez türüne göre (oturum çerezleri oturum sonunda, kalıcı çerezler belirlenen süre boyunca)"]})]})]})]}),Ot.jsxs("section",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5 text-blue-600"}),"9. İletişim"]}),Ot.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[Ot.jsx("p",{children:"KVKK kapsamındaki haklarınızı kullanmak veya sorularınız için bizimle iletişime geçebilirsiniz:"}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"E-posta:"})," ",Ia.kvkkEmail]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Adres:"})," ",Ia.address]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Telefon:"})," ",Ia.phone]})]})]}),Ot.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 flex flex-wrap gap-4 justify-center",children:[Ot.jsx(d,{to:"/privacy",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Gizlilik Politikası"}),Ot.jsx(d,{to:"/terms",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Kullanım Koşulları"}),Ot.jsx(d,{to:"/cookie-policy",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Çerez Politikası"}),Ot.jsx(d,{to:"/contact",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"İletişim"})]})]})]})})]}),zl=()=>Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:["      ",Ot.jsxs(Rs,{children:["        ",Ot.jsx("title",{children:"Tüketici Hakları Bilgilendirmesi - YolNext"}),"        ",Ot.jsx("meta",{name:"description",content:"YolNext tüketici hakları bilgilendirmesi - 6502 sayılı Tüketicinin Korunması Hakkında Kanun"}),"      "]}),"      ","      ",Ot.jsxs("header",{className:"bg-white border-b border-gray-200",children:["        ",Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:["          ",Ot.jsxs(d,{to:"/",className:"flex items-center justify-start",children:["            ",Ot.jsx(Da,{variant:"banner",size:"md",showText:!1}),"          "]}),"        "]}),"      "]}),"      ",Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:["        ",Ot.jsxs(d,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-8",children:["          ",Ot.jsx(re,{className:"w-4 h-4 mr-2"}),"          Ana Sayfaya Dön        "]}),"        ",Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12",children:["          ",Ot.jsxs("div",{className:"flex items-center mb-8",children:["            ",Ot.jsx(U,{className:"w-8 h-8 text-blue-600 mr-3"}),"            ",Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tüketici Hakları Bilgilendirmesi"}),"          "]}),"          ",Ot.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["            Son Güncelleme: ",(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),"          "]}),"          ",Ot.jsxs("div",{className:"prose prose-slate max-w-none",children:["            ","            ",Ot.jsxs("div",{className:"bg-blue-50 border-2 border-blue-400 rounded-lg p-6 mb-8",children:["              ",Ot.jsxs("div",{className:"flex items-start",children:["                ",Ot.jsx(te,{className:"w-6 h-6 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),"                ",Ot.jsxs("div",{children:["                  ",Ot.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"                    6502 SAYILI TÜKETİCİNİN KORUNMASI HAKKINDA KANUN                  "}),"                  ",Ot.jsx("p",{className:"text-blue-800 font-semibold",children:"                    Bu bilgilendirme, 6502 sayılı Tüketicinin Korunması Hakkında Kanun ve ilgili yönetmelikler                    uyarınca hazırlanmıştır.                  "}),"                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"                1. Cayma Hakkı (6502 Sayılı Kanun m.15)              "}),"              ",Ot.jsxs("div",{className:"bg-green-50 border-2 border-green-400 rounded-lg p-6 mb-4",children:["                ",Ot.jsxs("div",{className:"flex items-start",children:["                  ",Ot.jsx(J,{className:"w-6 h-6 text-green-600 mr-3 mt-0.5 flex-shrink-0"}),"                  ",Ot.jsxs("div",{children:["                    ",Ot.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2",children:"14 GÜN İÇİNDE CAYMA HAKKI"}),"                    ",Ot.jsx("p",{className:"text-green-800 font-semibold mb-2",children:"                      Hizmetin ifasına başlanmadan önce, sözleşmeden cayma hakkınız vardır.                    "}),"                    ",Ot.jsxs("ul",{className:"text-green-700 text-sm space-y-1 list-disc pl-6",children:["                      ",Ot.jsx("li",{children:"Cayma süresi: 14 gün"}),"                      ",Ot.jsxs("li",{children:["Cayma bildirimi: ",Ia.supportEmail]}),"                      ",Ot.jsx("li",{children:"İade süresi: 14 gün içinde"}),"                    "]}),"                  "]}),"                "]}),"              "]}),"              ",Ot.jsxs("p",{className:"text-gray-700 mb-4",children:["                ",Ot.jsx("strong",{children:"Cayma hakkınızı nasıl kullanırsınız?"}),"              "]}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"E-posta ile:"})," ",Ia.supportEmail,' adresine "Cayma Hakkı" konulu e-posta gönderin                ']}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Platform üzerinden:"}),' Hesap ayarlarınızdan "Cayma Hakkı" bölümünü kullanın                ']}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Telefon ile:"})," [TELEFON NUMARASI] numarasını arayın                "]}),"              "]}),"              ",Ot.jsxs("p",{className:"text-gray-700 mt-4",children:["                ",Ot.jsx("strong",{children:"ÖNEMLİ:"})," Hizmetin ifasına başlanmışsa (gönderi alınmışsa) cayma hakkı kullanılamaz.              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"2. Bilgilendirme Hakkı"}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                6502 sayılı Kanun uyarınca, hizmet satın almadan önce aşağıdaki bilgilere erişim hakkınız vardır:              "}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Hizmetin özellikleri ve fiyatı"}),"                ",Ot.jsx("li",{children:"Ödeme koşulları"}),"                ",Ot.jsx("li",{children:"Teslimat süresi ve koşulları"}),"                ",Ot.jsx("li",{children:"Cayma hakkı ve koşulları"}),"                ",Ot.jsx("li",{children:"Şikayet ve itiraz hakları"}),"                ",Ot.jsx("li",{children:"Satıcı bilgileri (unvan, adres, telefon, e-posta)"}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"3. Şikayet ve İtiraz Hakkı"}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                Şikayet ve itirazlarınız için aşağıdaki yollara başvurabilirsiniz:              "}),"                            ",Ot.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:["                ",Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"A. Doğrudan Şikayet"}),"                ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"E-posta:"})," ",Ia.supportEmail,"                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Telefon:"})," [TELEFON NUMARASI]                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Adres:"})," [TAM ADRES]                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Yanıt süresi:"})," 30 gün içinde yanıtlanır                  "]}),"                "]}),"              "]}),"              ",Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:["                ",Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"B. Tüketici Hakem Heyeti"}),"                ",Ot.jsx("p",{className:"text-gray-700 mb-2",children:"                  Şikayetleriniz için Tüketici Hakem Heyeti'ne başvurabilirsiniz:                "}),"                ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Başvuru:"})," İl/İlçe Tüketici Hakem Heyeti'ne                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Başvuru süresi:"})," Şikayet tarihinden itibaren 1 yıl içinde                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Ücret:"})," Ücretsiz                  "]}),"                "]}),"              "]}),"              ",Ot.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:["                ",Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"C. Tüketici Mahkemeleri"}),"                ",Ot.jsx("p",{className:"text-gray-700 mb-2",children:"                  Uyuşmazlıklar için Tüketici Mahkemeleri'ne başvurabilirsiniz:                "}),"                ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Yetkili mahkeme:"})," Tüketici Mahkemeleri                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Başvuru süresi:"})," Şikayet tarihinden itibaren 1 yıl içinde                  "]}),"                  ",Ot.jsxs("li",{children:["                    ",Ot.jsx("strong",{children:"Yetki:"})," İstanbul Mahkemeleri                  "]}),"                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"4. Güvenli Ödeme Hakkı"}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Güvenli ödeme:"})," Ödemeleriniz güvenli ödeme sistemi (Iyzico) üzerinden yapılır                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Ödeme güvencesi:"})," Ödeme, teslimat tamamlanana kadar güvende tutulur                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"İade hakkı:"})," Cayma hakkınızı kullandığınızda, ödediğiniz tutar 14 gün içinde iade                  edilir                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Ödeme yöntemleri:"})," Kredi kartı, banka kartı, banka havalesi                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"5. Bilgi Alma Hakkı"}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                Aşağıdaki bilgilere erişim hakkınız vardır:              "}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Hizmetin özellikleri ve fiyatı"}),"                ",Ot.jsx("li",{children:"Ödeme koşulları"}),"                ",Ot.jsx("li",{children:"Teslimat süresi ve koşulları"}),"                ",Ot.jsx("li",{children:"Cayma hakkı ve koşulları"}),"                ",Ot.jsx("li",{children:"Şikayet ve itiraz hakları"}),"                ",Ot.jsx("li",{children:"Satıcı bilgileri"}),"                ",Ot.jsx("li",{children:"KVKK kapsamındaki haklarınız"}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"6. Hizmet Kalitesi Hakkı"}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                Hizmet kalitesi ile ilgili haklarınız:              "}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Beklentiler:"})," Hizmet, belirtilen özelliklere uygun olmalıdır                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Eksiklik:"})," Hizmet eksikliklerinden kaynaklanan zararlar için tazminat talep                  edebilirsiniz                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Şikayet:"})," Hizmet kalitesi ile ilgili şikayetleriniz için ",Ia.supportEmail," adresine                  başvurabilirsiniz                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"                7. Kişisel Verilerin Korunması (KVKK)              "}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                KVKK kapsamındaki haklarınız:              "}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Kişisel verilerinizin işlenip işlenmediğini öğrenme"}),"                ",Ot.jsx("li",{children:"İşlenen verileriniz hakkında bilgi talep etme"}),"                ",Ot.jsx("li",{children:"Eksik veya yanlış verilerin düzeltilmesini isteme"}),"                ",Ot.jsx("li",{children:"Kişisel verilerinizin silinmesini talep etme"}),"                ",Ot.jsx("li",{children:"Verilerinizin başka bir platforma aktarılmasını talep etme"}),"              "]}),"              ",Ot.jsxs("p",{className:"text-gray-700 mt-4",children:["                Detaylı bilgi için"," ","                ",Ot.jsx(d,{to:"/kvkk-aydinlatma",className:"text-blue-600 hover:text-blue-700 underline",children:"                  KVKK Aydınlatma Metni                "})," ","                sayfasını ziyaret edebilirsiniz.              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"8. İletişim"}),"              ",Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:["                ",Ot.jsxs("p",{className:"text-gray-700 mb-2",children:["                  ",Ot.jsx("strong",{children:"E-posta:"})," ",Ia.supportEmail,"                "]}),"                ",Ot.jsxs("p",{className:"text-gray-700 mb-2",children:["                  ",Ot.jsx("strong",{children:"Telefon:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:Ia.phone}),"                "]}),"                ",Ot.jsxs("p",{className:"text-gray-700",children:["                  ",Ot.jsx("strong",{children:"Adres:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:Ia.address}),"                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-200 flex flex-wrap gap-4 justify-center",children:["              ",Ot.jsx(d,{to:"/distance-selling-contract",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                Mesafeli Satış Sözleşmesi              "}),"              ",Ot.jsx(d,{to:"/terms",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                Kullanım Koşulları              "}),"              ",Ot.jsx(d,{to:"/privacy",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                Gizlilik Politikası              "}),"              ",Ot.jsx(d,{to:"/kvkk-aydinlatma",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                KVKK Aydınlatma Metni              "}),"            "]}),"          "]}),"        "]}),"      "]}),"      ",Ot.jsx(Ka,{}),"    "]}),Tl=()=>Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:["      ",Ot.jsxs(Rs,{children:["        ",Ot.jsx("title",{children:"Mesafeli Satış Sözleşmesi - YolNext"}),"        ",Ot.jsx("meta",{name:"description",content:"YolNext mesafeli satış sözleşmesi - 6502 sayılı Tüketicinin Korunması Hakkında Kanun uyumlu"}),"      "]}),"      ","      ",Ot.jsxs("header",{className:"bg-white border-b border-gray-200",children:["        ",Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:["          ",Ot.jsxs(d,{to:"/",className:"flex items-center justify-start",children:["            ",Ot.jsx(Da,{variant:"banner",size:"md",showText:!1}),"          "]}),"        "]}),"      "]}),"      ",Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:["        ",Ot.jsxs(d,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-8",children:["          ",Ot.jsx(re,{className:"w-4 h-4 mr-2"}),"          Ana Sayfaya Dön        "]}),"        ",Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12",children:["          ",Ot.jsxs("div",{className:"flex items-center mb-8",children:["            ",Ot.jsx(W,{className:"w-8 h-8 text-blue-600 mr-3"}),"            ",Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mesafeli Satış Sözleşmesi"}),"          "]}),"          ",Ot.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["            Son Güncelleme: ",(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),"          "]}),"          ",Ot.jsxs("div",{className:"prose prose-slate max-w-none",children:["            ","            ",Ot.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-lg p-6 mb-8",children:["              ",Ot.jsxs("div",{className:"flex items-start",children:["                ",Ot.jsx(te,{className:"w-6 h-6 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),"                ",Ot.jsxs("div",{children:["                  ",Ot.jsx("h3",{className:"text-lg font-bold text-yellow-900 mb-2",children:"                    ÖNEMLİ UYARI - 6502 SAYILI KANUN UYARINCA                  "}),"                  ",Ot.jsx("p",{className:"text-yellow-800 font-semibold mb-2",children:"                    Bu sözleşme, 6502 sayılı Tüketicinin Korunması Hakkında Kanun ve Mesafeli Sözleşmeler Yönetmeliği                    hükümlerine uygun olarak hazırlanmıştır.                  "}),"                  ",Ot.jsx("p",{className:"text-yellow-700 text-sm",children:"                    Platform üzerinden yapılan işlemler mesafeli satış kapsamındadır. Tüketici haklarınızı bilmeniz                    önemlidir.                  "}),"                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"1. Taraflar"}),"              ",Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:["                ",Ot.jsx("p",{className:"text-sm text-gray-700 font-semibold mb-2",children:"SATICI:"}),"                ",Ot.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:["                  ",Ot.jsxs("div",{className:"bg-red-50 border-2 border-red-400 rounded-lg p-3 mb-3",children:["                    ",Ot.jsx("p",{className:"text-red-800 font-bold text-xs mb-1",children:"                      ⚠️ KRİTİK UYARI - 6502 SAYILI KANUN GEREĞİ ZORUNLU                    "}),"                    ",Ot.jsx("p",{className:"text-red-700 text-xs",children:"                      Aşağıdaki bilgiler gerçek şirket bilgileri ile değiştirilmelidir.                       Mesafeli Satış Sözleşmesi için bu bilgilerin eksiksiz doldurulması zorunludur.                    "}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Unvan:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:"[ŞİRKET UNVANI BURAYA EKLENMELİ - ZORUNLU]"}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Vergi No:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:"[VERGİ NUMARASI BURAYA EKLENMELİ - ZORUNLU]"}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Vergi Dairesi:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:"[VERGİ DAİRESİ BURAYA EKLENMELİ - ZORUNLU]"}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Ticaret Sicil No:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:"[TİCARET SİCİL NO BURAYA EKLENMELİ - ZORUNLU]"}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Mersis No:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:"[MERSİS NO BURAYA EKLENMELİ - ZORUNLU]"}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Adres:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:Ia.address}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"Telefon:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:Ia.phone}),"                  "]}),"                  ",Ot.jsxs("p",{children:["                    ",Ot.jsx("strong",{children:"E-posta:"})," ",Ia.supportEmail,"                  "]}),"                "]}),"              "]}),"              ",Ot.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:["                ",Ot.jsx("p",{className:"text-sm text-gray-700 font-semibold mb-2",children:"ALICI/TÜKETİCİ:"}),"                ",Ot.jsx("p",{className:"text-sm text-gray-700",children:"                  Platforma kayıt olan ve hizmet satın alan gerçek veya tüzel kişi.                "}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"2. Sözleşmenin Konusu"}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                Bu sözleşme, YolNext platformu üzerinden sunulan lojistik ve kargo hizmetlerinin satışına ilişkindir.                Platform, göndericiler ve nakliyeciler arasında bağlantı kuran bir aracı platformdur.              "}),"              ",Ot.jsxs("p",{className:"text-gray-700",children:["                ",Ot.jsx("strong",{children:"ÖNEMLİ:"})," YolNext, taşımacılık hizmetlerini bizzat sağlamaz. Platform sadece gönderici                ve nakliyeci arasında bağlantı kurar. Taşımacılık hizmeti nakliyeci tarafından sağlanır.              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"3. Hizmetin Özellikleri"}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Gönderi oluşturma ve yönetimi"}),"                ",Ot.jsx("li",{children:"Teklif alma ve karşılaştırma"}),"                ",Ot.jsx("li",{children:"Nakliyeci seçimi"}),"                ",Ot.jsx("li",{children:"Canlı takip"}),"                ",Ot.jsx("li",{children:"Mesajlaşma sistemi"}),"                ",Ot.jsx("li",{children:"Ödeme yönetimi"}),"              "]}),"              ",Ot.jsxs("p",{className:"text-gray-700 mt-4",children:["                ",Ot.jsx("strong",{children:"Fiyat:"})," Göndericiler için platform kullanımı ücretsizdir. Sadece nakliyeciler kazançları                üzerinden %1 komisyon öder.              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"4. Ödeme"}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Ödeme, teklif kabul edildiğinde güvenli ödeme sistemi (Iyzico) üzerinden yapılır"}),"                ",Ot.jsx("li",{children:"Ödeme, teslimat tamamlanana kadar güvende tutulur"}),"                ",Ot.jsx("li",{children:"Kabul edilen ödeme yöntemleri: Kredi kartı, banka kartı, banka havalesi"}),"                ",Ot.jsx("li",{children:"Ödeme tutarı, teklif kabul edildiğinde belirlenir"}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"5. Teslimat"}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Teslimat, nakliyeci tarafından belirlenen süre içinde yapılır"}),"                ",Ot.jsx("li",{children:"Teslimat adresi, gönderi oluşturulurken belirtilir"}),"                ",Ot.jsx("li",{children:"Teslimat süresi, teklif verilirken belirtilir"}),"                ",Ot.jsx("li",{children:"Teslimat, gönderici tarafından onaylandığında tamamlanmış sayılır"}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"                6. Cayma Hakkı (6502 Sayılı Kanun m.15)              "}),"              ",Ot.jsxs("div",{className:"bg-green-50 border-2 border-green-400 rounded-lg p-6 mb-4",children:["                ",Ot.jsxs("div",{className:"flex items-start",children:["                  ",Ot.jsx(J,{className:"w-6 h-6 text-green-600 mr-3 mt-0.5 flex-shrink-0"}),"                  ",Ot.jsxs("div",{children:["                    ",Ot.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2",children:"TÜKETİCİ CAYMA HAKKI"}),"                    ",Ot.jsx("p",{className:"text-green-800 font-semibold mb-2",children:"                      Hizmetin ifasına başlanmadan önce, sözleşmeden cayma hakkınız vardır.                    "}),"                    ",Ot.jsxs("p",{className:"text-green-700 text-sm",children:["                      ",Ot.jsx("strong",{children:"Cayma süresi:"})," Hizmetin ifasına başlanmadan önce 14 gün içinde cayma hakkınızı                      kullanabilirsiniz.                    "]}),"                  "]}),"                "]}),"              "]}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Cayma süresi:"})," Hizmetin ifasına başlanmadan önce 14 gün içinde cayma hakkınızı                  kullanabilirsiniz                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Cayma bildirimi:"})," Cayma hakkınızı kullanmak için ",Ia.supportEmail," adresine e-posta                  gönderebilir veya platform üzerinden iletişime geçebilirsiniz                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"İade:"})," Cayma hakkınızı kullandığınızda, ödediğiniz tutar 14 gün içinde iade edilir                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"İstisna:"})," Hizmetin ifasına başlanmışsa (gönderi alınmışsa) cayma hakkı kullanılamaz                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"7. Şikayet ve İtiraz Hakkı"}),"              ",Ot.jsx("p",{className:"text-gray-700 mb-4",children:"                6502 sayılı Tüketicinin Korunması Hakkında Kanun uyarınca şikayet ve itiraz haklarınız:              "}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Tüketici Hakem Heyeti:"})," Şikayetleriniz için Tüketici Hakem Heyeti'ne başvurabilirsiniz                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Tüketici Mahkemeleri:"})," Uyuşmazlıklar için Tüketici Mahkemeleri'ne başvurabilirsiniz                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"İletişim:"})," Şikayetleriniz için ",Ia.supportEmail," adresine e-posta gönderebilirsiniz                "]}),"                ",Ot.jsxs("li",{children:["                  ",Ot.jsx("strong",{children:"Yanıt süresi:"})," Şikayetleriniz 30 gün içinde yanıtlanır                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"8. Sorumluluk"}),"              ",Ot.jsxs("div",{className:"bg-red-50 border-2 border-red-400 rounded-lg p-6 mb-4",children:["                ",Ot.jsx("h3",{className:"text-lg font-bold text-red-900 mb-2",children:"KRİTİK UYARI"}),"                ",Ot.jsx("p",{className:"text-red-800 font-semibold",children:"                  YolNext, göndericiler ve nakliyeciler arasında bağlantı kuran SADECE BİR ARACI PLATFORMdur. YolNext,                  taşımacılık hizmetlerini bizzat sağlamaz ve hiçbir şekilde sorumluluk kabul etmez.                "}),"                ",Ot.jsx("p",{className:"text-red-700 mt-2",children:"                  Taşımacılık hizmeti nakliyeci tarafından sağlanır. Gönderici ve nakliyeci arasındaki anlaşmazlıklar                  kendi aralarında çözülmelidir.                "}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"9. Genel Hükümler"}),"              ",Ot.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:["                ",Ot.jsx("li",{children:"Bu sözleşme, Türk Hukuku'na tabidir"}),"                ",Ot.jsx("li",{children:"Uyuşmazlıklar, İstanbul Mahkemeleri ve İcra Daireleri'nde çözülür"}),"                ",Ot.jsx("li",{children:"6502 sayılı Tüketicinin Korunması Hakkında Kanun hükümleri saklıdır"}),"                ",Ot.jsx("li",{children:"Bu sözleşme, platform kullanımı sırasında geçerlidir"}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("section",{className:"mb-8",children:["              ",Ot.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"10. İletişim"}),"              ",Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:["                ",Ot.jsxs("p",{className:"text-gray-700 mb-2",children:["                  ",Ot.jsx("strong",{children:"E-posta:"})," ",Ia.supportEmail,"                "]}),"                ",Ot.jsxs("p",{className:"text-gray-700 mb-2",children:["                  ",Ot.jsx("strong",{children:"Telefon:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:Ia.phone}),"                "]}),"                ",Ot.jsxs("p",{className:"text-gray-700",children:["                  ",Ot.jsx("strong",{children:"Adres:"})," ",Ot.jsx("span",{className:"text-red-600 font-semibold",children:Ia.address}),"                "]}),"              "]}),"            "]}),"            ","            ",Ot.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-200 flex flex-wrap gap-4 justify-center",children:["              ",Ot.jsx(d,{to:"/terms",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                Kullanım Koşulları              "}),"              ",Ot.jsx(d,{to:"/privacy",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                Gizlilik Politikası              "}),"              ",Ot.jsx(d,{to:"/kvkk-aydinlatma",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                KVKK Aydınlatma Metni              "}),"              ",Ot.jsx(d,{to:"/contact",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"                İletişim              "}),"            "]}),"          "]}),"        "]}),"      "]}),"      ",Ot.jsx(Ka,{}),"    "]});function Cl(){return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Sayfa Bulunamadı - YolNext"}),Ot.jsx("meta",{name:"description",content:"Aradığınız sayfa bulunamadı"})]}),Ot.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[Ot.jsx("div",{className:"mb-8",children:Ot.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-red-100 to-red-200 rounded-full flex items-center justify-center shadow-lg",children:Ot.jsx(f,{className:"w-16 h-16 text-red-600"})})}),Ot.jsxs("div",{className:"mb-8",children:[Ot.jsx("h1",{className:"text-6xl font-bold text-slate-900 mb-4",children:"404"}),Ot.jsx("h2",{className:"text-2xl font-semibold text-slate-700 mb-4",children:"Sayfa Bulunamadı"}),Ot.jsx("p",{className:"text-lg text-slate-600 mb-6",children:"Üzgünüz, aradığınız sayfa mevcut değil veya taşınmış olabilir."})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[Ot.jsxs(d,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-xl hover:from-blue-900 hover:to-slate-800 transition-colors font-medium",children:[Ot.jsx(j,{className:"w-5 h-5"}),"Ana Sayfaya Dön"]}),Ot.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-slate-700 border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors font-medium",children:[Ot.jsx(re,{className:"w-5 h-5"}),"Geri Dön"]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Yardıma mı ihtiyacınız var?"}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[Ot.jsxs(d,{to:"/help",className:"flex flex-col items-center p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[Ot.jsx(ce,{className:"w-8 h-8 text-slate-600 mb-2"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Yardım Merkezi"})]}),Ot.jsxs(d,{to:"/contact",className:"flex flex-col items-center p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[Ot.jsx(me,{className:"w-8 h-8 text-slate-600 mb-2"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"İletişim"})]}),Ot.jsxs("button",{onClick:()=>window.location.reload(),className:"flex flex-col items-center p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[Ot.jsx(y,{className:"w-8 h-8 text-slate-600 mb-2"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Sayfayı Yenile"})]})]})]}),Ot.jsxs("div",{className:"mt-8",children:[Ot.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-4",children:"Popüler Sayfalar:"}),Ot.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[Ot.jsx(d,{to:"/individual/dashboard",className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm hover:bg-blue-200 transition-colors",children:"Bireysel Panel"}),Ot.jsx(d,{to:"/corporate/dashboard",className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm hover:bg-green-200 transition-colors",children:"Kurumsal Panel"}),Ot.jsx(d,{to:"/nakliyeci/dashboard",className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm hover:bg-orange-200 transition-colors",children:"Nakliyeci Panel"}),Ot.jsx(d,{to:"/tasiyici/dashboard",className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm hover:bg-purple-200 transition-colors",children:"Taşıyıcı Panel"})]})]})]})]})}const Al=()=>{const{user:e,token:t}=sa(),[s,a]=l.useState({newOffers:0,newMessages:0,pendingShipments:0}),[i,r]=l.useState(!0);return l.useEffect(()=>{if(!e||!t)return a({newOffers:0,newMessages:0,pendingShipments:0}),void r(!1);let s=null,l=0,i=0;const n=async()=>{if(s)return s;return Date.now()<l?void 0:(s=(async()=>{var n;try{r(!0);const s={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},d=t.startsWith("demo-token-"),o=async e=>{const t=await fetch(Zs(e),{headers:s});if(401===t.status||403===t.status){try{const e=await t.text(),s=String(e||"").toLowerCase();if(s.includes("invalid or expired token")||s.includes("invalid token")||s.includes("expired token")){try{localStorage.removeItem("authToken"),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(a){}window.dispatchEvent(new Event("auth:logout"))}}catch(a){}throw new Error(`${e} yanıtı ${t.status}`)}if(!t.ok)throw new Error(`${e} yanıtı ${t.status}`);return t.json()},c=d?Promise.resolve({data:[]}):o("/messages"),m=String(e.role||"").toLowerCase(),x="nakliyeci"===m||"tasiyici"===m?"/offers":"corporate"===m?"/offers/corporate":"/offers/individual",u=async()=>{var t,s,a,l;const i=String(e.role||"").toLowerCase(),r=((e,t)=>`yolnext:lastSeen:market:${e??"anon"}:${t||"unknown"}`)(null==e?void 0:e.id,i),n=localStorage.getItem(r),d=n?new Date(n).getTime():0,c=e=>Array.isArray(e)?!Number.isFinite(d)||d<=0?e.length:e.filter(e=>{const t=(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||(null==e?void 0:e.createdat)||(null==e?void 0:e.created_at),s=t?new Date(t).getTime():0;return!(!Number.isFinite(s)||s<=0)&&s>d}).length:0;if("nakliyeci"===i){const e=await o("/shipments/open"),a=(null==(t=null==e?void 0:e.data)?void 0:t.data)||(null==e?void 0:e.data)||(null==e?void 0:e.shipments)||(null==(s=null==e?void 0:e.data)?void 0:s.shipments)||[];return c(Array.isArray(a)?a:[])}if("tasiyici"===i)try{const e=await o("/carrier-market/available"),t=(null==e?void 0:e.data)||(Array.isArray(e)?e:[]);return c(Array.isArray(t)?t:[])}catch{const e=await o("/shipments/open"),t=(null==(a=null==e?void 0:e.data)?void 0:a.data)||(null==e?void 0:e.data)||(null==e?void 0:e.shipments)||(null==(l=null==e?void 0:e.data)?void 0:l.shipments)||[];return c(Array.isArray(t)?t:[])}return 0},[h,p,g]=await Promise.allSettled([o(x),c,o("/shipments")]);let b=0;if("fulfilled"===h.status){const t=h.value,s=t.data||t.offers||(Array.isArray(t)?t:[]);if(Array.isArray(s)){const t=((e,t)=>`yolnext:lastSeen:offers:${e??"anon"}:${t||"unknown"}`)(null==e?void 0:e.id,m),a=localStorage.getItem(t),l=a?new Date(a).getTime():0;b=s.filter(e=>("pending"===e.status||"waiting"===e.status||"open"===e.status)&&!1===e.isRead).length,0===b&&(b=s.filter(e=>{const t=e.status;if("pending"!==t&&"waiting"!==t&&"open"!==t)return!1;const s=e.createdAt||e.created_at||e.createdat||e.created_at,a=s?new Date(s).getTime():0;return!Number.isFinite(l)||l<=0||!(!Number.isFinite(a)||a<=0)&&a>l}).length)}}let f=0;if("fulfilled"===p.status){const e=p.value.data||p.value||[];Array.isArray(e)&&(f=e.reduce((e,t)=>e+(t.unreadCount||t.unread||0),0))}let y=0;if("nakliyeci"===m||"tasiyici"===m)y=await u();else if("fulfilled"===g.status){const e=g.value,t=(null==(n=e.data)?void 0:n.shipments)||e.data||(Array.isArray(e)?e:[]);Array.isArray(t)&&(y=t.filter(e=>{const t=(e.status||"").toLowerCase();return"waiting"===t||"pending"===t||"open"===t||"preparing"===t}).length)}a({newOffers:b,newMessages:f,pendingShipments:y}),i=0,l=0}catch(d){i+=1;const e=Math.min(6e4,5e3*Math.pow(2,Math.max(0,i-1)));l=Date.now()+e,a({newOffers:0,newMessages:0,pendingShipments:0})}finally{r(!1),s=null}})(),s)};n();const d=setInterval(n,3e4),o=()=>{"visible"===document.visibilityState&&n()},c=()=>{n()};return window.addEventListener("focus",o),document.addEventListener("visibilitychange",o),window.addEventListener("yolnext:refresh-badges",c),()=>{clearInterval(d),window.removeEventListener("focus",o),document.removeEventListener("visibilitychange",o),window.removeEventListener("yolnext:refresh-badges",c)}},[e,t]),{badgeCounts:s,isLoading:i}},Dl=({onLogout:e})=>{var t;const s=m(),[a,i]=l.useState(!1),[r,n]=l.useState(1024),{badgeCounts:o}=Al(),{user:c}=sa();l.useEffect(()=>{const e=()=>{const e=window.innerWidth;n(e),e>300&&i(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const x=r<=300;l.useEffect(()=>{},[r,x]),l.useEffect(()=>{i(!1)},[s.pathname]);const u=[{title:"Ana Menü",items:[{name:"Ana Sayfa",href:"/individual/dashboard",icon:xe},{name:"Gönderi Oluştur",href:"/individual/create-shipment",icon:ue},{name:"Gönderilerim",href:"/individual/my-shipments",icon:R,badge:o.pendingShipments>0?o.pendingShipments:void 0},{name:"Teklifler",href:"/individual/offers",icon:W,badge:o.newOffers>0?o.newOffers:void 0},{name:"Geçmiş Gönderiler",href:"/individual/history",icon:L}]},{title:"Takip & İletişim",items:[{name:"Canlı Takip",href:"/individual/live-tracking",icon:E},{name:"Mesajlar",href:"/individual/messages",icon:G,badge:o.newMessages>0?o.newMessages:void 0}]},{title:"Hesap",items:[{name:"Ayarlar",href:"/individual/settings",icon:oe},{name:"Yardım ve Destek Merkezi",href:"/individual/help",icon:he}]}],h=e=>s.pathname===e;return Ot.jsxs(Ot.Fragment,{children:[x&&Ot.jsx("div",{className:"fixed top-4 left-4 z-50",children:Ot.jsx("button",{onClick:()=>i(!a),className:"w-12 h-12 bg-white rounded-xl shadow-lg border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-colors","aria-label":a?"Men?y? kapat":"Men?y? a?","aria-expanded":a,"data-testid":"mobile-menu-button",children:a?Ot.jsx(_,{className:"w-6 h-6"}):Ot.jsx(I,{className:"w-6 h-6"})})}),a&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>i(!1)}),Ot.jsxs("div",{"data-testid":"sidebar",className:`\n        fixed top-0 left-0 z-50 h-full \n        bg-gradient-to-b from-slate-50 to-white shadow-xl \n        flex flex-col border-r border-slate-200\n        transform transition-transform duration-300 ease-in-out\n        ${a?"translate-x-0":"-translate-x-full"}\n        ${x?"":"translate-x-0"}\n      `,style:{width:x?"320px":`${Math.min(256,Math.max(200,.25*r))}px`},children:[Ot.jsx("div",{className:"border-b border-slate-200 bg-white overflow-hidden flex items-center justify-between h-20 px-3",children:Ot.jsx(d,{to:"/individual/dashboard",className:"block focus:outline-none flex items-center justify-center",onClick:()=>i(!1),children:Ot.jsx(Da,{size:"xl",variant:"normal",showText:!1,className:"text-white"})})}),Ot.jsx("div",{className:"p-3 lg:p-4 border-b border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-50 rounded-lg p-2 lg:p-3 transition-colors",children:[Ot.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-sm lg:text-lg shadow-sm",children:Ot.jsx(xe,{className:"w-4 h-4 lg:w-6 lg:h-6"})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"text-xs lg:text-sm font-bold text-slate-900 truncate",children:(null==c?void 0:c.firstName)||(null==(t=null==c?void 0:c.fullName)?void 0:t.split(" ")[0])||"Kullan?c?"}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Bireysel Hesap"})]}),Ot.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"})]})}),Ot.jsx("nav",{className:"flex-1 px-3 lg:px-4 py-4 lg:py-6 space-y-4 lg:space-y-6 overflow-y-auto",children:u.map((e,t)=>Ot.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[Ot.jsx("div",{className:"px-2",children:Ot.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:e.title})}),Ot.jsx("div",{className:"space-y-1",children:e.items.map(e=>Ot.jsxs(d,{to:e.href,onClick:()=>i(!1),className:"flex items-center px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg transition-all duration-200 group "+(h(e.href)?"bg-gradient-to-r from-slate-800 to-blue-900 text-white shadow-md":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[Ot.jsx(e.icon,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 "+(h(e.href)?"text-white":"text-slate-400 group-hover:text-slate-600")}),Ot.jsx("span",{className:"flex-1 truncate",children:e.name}),e.badge&&e.badge>0&&Ot.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-bold rounded-full "+(h(e.href)?"bg-white text-slate-800":"bg-red-500 text-white"),children:e.badge>99?"99+":e.badge}),h(e.href)&&!e.badge&&Ot.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full flex-shrink-0"})]},e.name))})]},e.title))}),Ot.jsx("div",{className:"p-3 lg:p-4 border-t border-slate-200",children:Ot.jsxs("button",{onClick:e,className:"flex items-center w-full px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg text-slate-600 hover:bg-red-50 hover:text-red-700 transition-colors group",children:[Ot.jsx(pe,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 text-slate-400 group-hover:text-red-600"}),Ot.jsx("span",{className:"truncate",children:"Çıkış Yap"})]})})]})]})},El=()=>{const{logout:e}=sa(),[t,s]=l.useState(1024);l.useEffect(()=>{const e=()=>{s(window.innerWidth)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const a=t<=300?0:Math.min(256,Math.max(200,.25*t));return Ot.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",children:[Ot.jsx(Dl,{onLogout:()=>{e()}}),Ot.jsx("main",{className:"overflow-auto bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",style:{width:`calc(100% - ${a}px)`,marginLeft:`${a}px`},children:Ot.jsx("div",{className:"min-h-full",children:Ot.jsx(x,{})})})]})},_l=({onLogout:e})=>{var t;const s=m(),[a,i]=l.useState(!1),[r,n]=l.useState(1024),{badgeCounts:o}=Al(),{user:c}=sa();l.useEffect(()=>{const e=()=>{const e=window.innerWidth;n(e),e>300&&i(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const x=r<=300;l.useEffect(()=>{},[r,x]);const u=[{title:"Ana Menü",items:[{name:"Ana Sayfa",href:"/corporate/dashboard",icon:A},{name:"Gönderi Oluştur",href:"/corporate/create-shipment",icon:ue},{name:"Gönderilerim",href:"/corporate/shipments",icon:R,badge:o.pendingShipments>0?o.pendingShipments:void 0},{name:"Teklifler",href:"/corporate/offers",icon:W,badge:o.newOffers>0?o.newOffers:void 0},{name:"Nakliyeciler",href:"/corporate/carriers",icon:E}]},{title:"Analiz & Raporlar",items:[{name:"Analiz & Raporlar",href:"/corporate/analytics",icon:ge}]},{title:"İletişim",items:[{name:"Mesajlar",href:"/corporate/messages",icon:G,badge:o.newMessages>0?o.newMessages:void 0}]},{title:"Hesap & Ayarlar",items:[{name:"Ayarlar",href:"/corporate/settings",icon:oe},{name:"Yardım ve Destek Merkezi",href:"/corporate/help",icon:he}]}],h=e=>s.pathname===e;return Ot.jsxs(Ot.Fragment,{children:[x&&Ot.jsx("div",{className:"fixed top-4 left-4 z-50",children:Ot.jsx("button",{onClick:()=>i(!a),className:"w-12 h-12 bg-white rounded-xl shadow-lg border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-colors",children:a?Ot.jsx(_,{className:"w-6 h-6"}):Ot.jsx(I,{className:"w-6 h-6"})})}),a&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>i(!1)}),Ot.jsxs("div",{className:`\n        fixed top-0 left-0 z-50 h-full \n        bg-gradient-to-b from-slate-50 to-white shadow-xl \n        flex flex-col border-r border-slate-200\n        transform transition-transform duration-300 ease-in-out\n        ${a?"translate-x-0":"-translate-x-full"}\n        ${x?"":"translate-x-0"}\n      `,style:{width:x?"320px":`${Math.min(256,Math.max(200,.25*r))}px`},children:[Ot.jsx("div",{className:"border-b border-slate-200 bg-white overflow-hidden flex items-center justify-between h-20 px-3",children:Ot.jsx(d,{to:"/corporate/dashboard",className:"block focus:outline-none flex items-center justify-center",onClick:()=>i(!1),children:Ot.jsx(Da,{size:"xl",variant:"normal",showText:!1,className:"text-white"})})}),Ot.jsx("div",{className:"p-3 lg:p-4 border-b border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-50 rounded-lg p-2 lg:p-3 transition-colors",children:[Ot.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-sm lg:text-lg shadow-sm",children:Ot.jsx(A,{className:"w-4 h-4 lg:w-6 lg:h-6"})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"text-xs lg:text-sm font-bold text-slate-900 truncate",children:(null==c?void 0:c.companyName)||(null==c?void 0:c.firstName)||(null==(t=null==c?void 0:c.fullName)?void 0:t.split(" ")[0])||"Kullan?c?"}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Kurumsal Hesap"})]}),Ot.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"})]})}),Ot.jsx("nav",{className:"flex-1 px-3 lg:px-4 py-4 lg:py-6 space-y-4 lg:space-y-6 overflow-y-auto",children:u.map((e,t)=>Ot.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[Ot.jsx("div",{className:"px-2",children:Ot.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:e.title})}),Ot.jsx("div",{className:"space-y-1",children:e.items.map(e=>Ot.jsxs(d,{to:e.href,onClick:()=>i(!1),className:"flex items-center px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg transition-all duration-200 group "+(h(e.href)?"bg-gradient-to-r from-slate-800 to-blue-900 text-white shadow-md":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[Ot.jsx(e.icon,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 "+(h(e.href)?"text-white":"text-slate-400 group-hover:text-slate-600")}),Ot.jsx("span",{className:"flex-1 truncate",children:e.name}),e.badge&&e.badge>0&&Ot.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-bold rounded-full "+(h(e.href)?"bg-white text-slate-800":"bg-red-500 text-white"),children:e.badge>99?"99+":e.badge}),h(e.href)&&!e.badge&&Ot.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full flex-shrink-0"})]},e.name))})]},e.title))}),Ot.jsx("div",{className:"p-3 lg:p-4 border-t border-slate-200",children:Ot.jsxs("button",{onClick:e,className:"flex items-center w-full px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg text-slate-600 hover:bg-red-50 hover:text-red-700 transition-colors group",children:[Ot.jsx(pe,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 text-slate-400 group-hover:text-red-600"}),Ot.jsx("span",{className:"truncate",children:"Çıkış Yap"})]})})]})]})},Il=(e,t="TRY")=>{const s=Number(e),a=Number.isFinite(s)?s:0;return new Intl.NumberFormat("tr-TR",{style:"currency",currency:t}).format(a)},Kl=(e,t="short")=>{if(!e)return"";const s="string"==typeof e||"number"==typeof e?new Date(e):e;if(!(s instanceof Date&&Number.isFinite(s.getTime())))return"";const a={short:{day:"2-digit",month:"2-digit",year:"numeric"},long:{day:"2-digit",month:"long",year:"numeric"},time:{hour:"2-digit",minute:"2-digit"}}[t];return new Intl.DateTimeFormat("tr-TR",a).format(s)},Ml=e=>{const t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},$l=e=>{const t=String(e??"").trim();if(!t)return"";const s=t.replace(/^\s*AUTO\s+PW-EXCL-\d+\s*/i,"").replace(/\bPW-EXCL-\d+\b/gi,"").replace(/^\s*MCP(\s+Ultra)?\s*-\s*/i,"").replace(/^\s*MCP\s+/i,"").replace(/^\s*Ultra\s*[-\u2010\u2011\u2012\u2013\u2014\u2212:]\s*/i,"").replace(/^\s*Ultra\b\s*/i,"").replace(/^\s*Kapsamlı\s+İş\s+Akışı\s+Testi\s*-\s*/i,"").replace(/^\s*4-Panel\s+Flow\s*/i,"").replace(/\bUI\s+Regression\s+Shipment\b/gi,"").replace(/\bComms\/Tracking\b/gi,"").replace(/\bRegression\b/gi,"").replace(/\bShipment\b/gi,"").replace(/\bTest\b/gi,"").replace(/\bDeneme\b/gi,"").replace(/\bWorkflow\b/gi,"").replace(/^\s*[-\u2010\u2011\u2012\u2013\u2014\u2212]\s*/i,"").replace(/\s+/g," ").trim();return s?/^individual\s+shipment$/i.test(s)?"Genel Gönderi":/^shipment$/i.test(s)?"Gönderi":s:"Gönderi"},Bl=e=>{const t=String(e??"").trim();if(!t)return"";const s=t.replace(/\bmesajla(?:s|ş)ma\s+sistemi\s+test\s+ediliyor\b\.?/gi,"").replace(/\bmesajla(?:s|ş)ma\s+sistemi\s+ediliyor\b\.?/gi,"").replace(/\bkapsamlı\s+iş\s+akışı\s+testi\s+devam\s+ediyor\b\.?/gi,"").replace(/\bmesaj\s+testi\b/gi,"").replace(/\breceiver\s+auto\s*\d*\b/gi,"").replace(/\(\s*fix\d+\s*\)/gi,"").replace(/^\s*(E2E)\s*[:\-–—]\s*/i,"").replace(/^\s*(Test|Deneme)\s+(Mesaj[ıi]?|Message)\s*[:\-–—]\s*/i,"").replace(/^\s*(Test|Deneme)\s*[:\-–—]\s*/i,"").replace(/^\s*MCP\s*[:\-–—]\s*/i,"").replace(/^\s*(AUTO\s+)?PW-EXCL-\d+\s*[:\-–—]?\s*/i,"").replace(/\bPW-EXCL-\d+\b/gi,"").replace(/\b(E2E|MCP|Regression)\b/gi,"").replace(/\btest\b/gi,"").replace(/\bdeneme\b/gi,"").replace(/\btest\s+ediliyor\b\.?/gi,"").replace(/\(\s*\)/g,"").replace(/\s*[-–—]+\s*$/g,"").replace(/\.\s*#/g," #").replace(/\s+/g," ").trim();return s?/^mesaj(\s*\([^)]*\))?\s*[:\-–—]*$/i.test(s)?"":s:""},Rl=e=>{const t=String(e??"").trim();if(!t)return"";const s=t.replace(/\bPW-EXCL-\d+\b/gi,"").replace(/\bAUTO\b/gi,"").replace(/\bMCP\b/gi,"").replace(/\bTest\b/gi,"").replace(/\bDeneme\b/gi,"").replace(/\bRegression\b/gi,"").replace(/\bShipment\b/gi,"").replace(/\bpickup\b/gi,"Alım").replace(/\bdelivery\b/gi,"Teslim").replace(/\s+/g," ").trim();return s?/^(Alım|Teslim)$/i.test(s)?"":s:""},Ol=({items:e,className:t=""})=>{const s=m().pathname||"",a=s.startsWith("/individual")?"/individual/dashboard":s.startsWith("/corporate")?"/corporate/dashboard":s.startsWith("/nakliyeci")?"/nakliyeci/dashboard":s.startsWith("/tasiyici")?"/tasiyici/dashboard":"/";return Ot.jsxs("nav",{className:`flex items-center space-x-2 text-sm ${t}`,children:[Ot.jsx(d,{to:a,className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors",children:Ot.jsx(j,{className:"w-4 h-4"})}),e.map((e,t)=>Ot.jsxs(n.Fragment,{children:[Ot.jsx(be,{className:"w-4 h-4 text-gray-400"}),e.href?Ot.jsxs(d,{to:e.href,className:"text-gray-500 hover:text-gray-700 transition-colors flex items-center gap-1",children:[e.icon,e.label]}):Ot.jsxs("span",{className:"text-gray-900 font-medium flex items-center gap-1",children:[e.icon,e.label]})]},t))]})},Pl=({message:e="Yükleniyor...",size:t="md",className:s=""})=>Ot.jsx("div",{className:`flex items-center justify-center ${s}`,role:"status","aria-live":"polite","aria-label":e,children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(y,{className:`${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t]} text-blue-600 animate-spin mx-auto mb-2`,"aria-hidden":"true"}),Ot.jsx("p",{className:"text-gray-600",children:e})]})}),Ll=({userType:e,onComplete:t})=>{const{user:s}=sa(),[a,i]=l.useState(1),r=l.useMemo(()=>`onboardingCompleted:${(null==s?void 0:s.id)?String(s.id):"anonymous"}:${e}`,[s,e]),n=l.useMemo(()=>`onboardingPending:${(null==s?void 0:s.id)?String(s.id):"anonymous"}:${e}`,[s,e]),d=(()=>{const t=[{id:1,title:"Hoş Geldiniz! 🎉",description:`${(null==s?void 0:s.firstName)||"Kullanıcı"}, YolNext platformuna hoş geldiniz!`,icon:Ot.jsx(J,{className:"w-12 h-12 text-green-500"}),content:Ot.jsx("div",{className:"space-y-4 text-center",children:Ot.jsx("p",{className:"text-lg text-slate-600",children:"Hesabınız başarıyla oluşturuldu. Platformu kullanmaya başlamak için birkaç önemli bilgi:"})})}];return"individual"===e?t.push({id:2,title:"Gönderi Oluşturun",description:"İlk gönderinizi oluşturarak başlayın",icon:Ot.jsx(R,{className:"w-12 h-12 text-blue-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Nasıl Çalışır?"}),Ot.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Gönderi oluşturun (nereden, nereye, ne taşınacak)"}),Ot.jsx("li",{children:"Nakliyeciler size teklif verecek"}),Ot.jsx("li",{children:"En uygun teklifi seçin"}),Ot.jsx("li",{children:"Gönderinizi takip edin ve mesajlaşın"})]})]})})},{id:3,title:"Teklifleri İnceleyin",description:"Gelen teklifleri karşılaştırın ve seçin",icon:Ot.jsx(M,{className:"w-12 h-12 text-green-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"İpuçları"}),Ot.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Teklifleri fiyat, süre ve nakliyeci puanına göre değerlendirin"}),Ot.jsx("li",{children:"Nakliyeci profillerini inceleyin"}),Ot.jsx("li",{children:"Mesajlaşma özelliğini kullanarak detayları öğrenin"})]})]})})}):"corporate"===e?t.push({id:2,title:"Kurumsal Gönderi Oluşturun",description:"İhtiyacınıza uygun gönderiyi yayınlayın",icon:Ot.jsx(A,{className:"w-12 h-12 text-blue-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Kurumsal Akış"}),Ot.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Gönderi detaylarını girin (kategori/ölçüler)"}),Ot.jsx("li",{children:"Adres ve tarih bilgilerini ekleyin"}),Ot.jsx("li",{children:"Yayınlayın ve teklifleri toplayın"}),Ot.jsx("li",{children:"Seçiminizi yapın ve süreci yönetin"})]})]})})},{id:3,title:"Teklif & İletişim",description:"Teklifleri yönetip nakliyecilerle iletişim kurun",icon:Ot.jsx(G,{className:"w-12 h-12 text-green-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"İpuçları"}),Ot.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Teklifleri SLA/süre, fiyat ve güven puanına göre kıyaslayın"}),Ot.jsx("li",{children:"Gerekirse mesajlaşma ile netleştirin"}),Ot.jsx("li",{children:"Seçimden sonra gönderiyi takip ekranından yönetin"})]})]})})}):"nakliyeci"===e?t.push({id:2,title:"Gönderileri Keşfedin",description:"Size uygun gönderileri bulun ve teklif verin",icon:Ot.jsx(R,{className:"w-12 h-12 text-blue-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Nasıl Çalışır?"}),Ot.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Size uygun gönderileri bulun"}),Ot.jsx("li",{children:"Rekabetçi teklifler verin"}),Ot.jsx("li",{children:"Teklifiniz kabul edilirse taşıyıcı atayın"}),Ot.jsx("li",{children:"Gönderiyi takip edin ve tamamlayın"})]}),Ot.jsx("div",{className:"mt-4 text-sm text-slate-600",children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(T,{className:"w-4 h-4 text-slate-700"}),"Not: Şehir kuralı gereği, genelde sadece kendi şehrinizdeki gönderilere teklif verebilirsiniz."]})})]})})},{id:3,title:"Taşıyıcı Ekleyin",description:"Taşıyıcı kodları ile ekleyin",icon:Ot.jsx(E,{className:"w-12 h-12 text-purple-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-purple-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Taşıyıcı Yönetimi"}),Ot.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Taşıyıcılar sayfasından taşıyıcı ekleyebilirsiniz"}),Ot.jsx("li",{children:"Taşıyıcıların kodlarını kullanarak ekleyin"}),Ot.jsx("li",{children:"Taşıyıcılarınızı gönderilere atayabilirsiniz"})]})]})})}):"tasiyici"===e&&t.push({id:2,title:"Taşıyıcı Kodunuz",description:"Nakliyeciler sizi bu kod ile ekleyecek",icon:Ot.jsx(E,{className:"w-12 h-12 text-blue-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 text-center",children:[Ot.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:(null==s?void 0:s.driverCode)||"DRV-XXX-XXX"}),Ot.jsx("p",{className:"text-slate-600",children:"Bu kodunuzu nakliyecilerle paylaşın. Sizi eklemek için bu kodu kullanacaklar."})]})})},{id:3,title:"İş Fırsatları",description:"Nakliyecilerden iş alın",icon:Ot.jsx(M,{className:"w-12 h-12 text-green-500"}),content:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Nasıl Çalışır?"}),Ot.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700",children:[Ot.jsx("li",{children:"Nakliyeciler sizi ekledikten sonra size iş atayacaklar"}),Ot.jsx("li",{children:"Atanan işleri kabul edebilir veya reddedebilirsiniz"}),Ot.jsx("li",{children:"Gönderileri tamamladıkça puanınız artacak"})]})]})})}),t.push({id:t.length+1,title:"Hazırsınız! 🚀",description:"Artık platformu kullanmaya başlayabilirsiniz",icon:Ot.jsx(J,{className:"w-12 h-12 text-green-500"}),content:Ot.jsx("div",{className:"space-y-4 text-center",children:Ot.jsx("p",{className:"text-lg text-slate-600",children:"Tüm önemli bilgileri öğrendiniz. Şimdi dashboard'unuza gidip işlemlerinize başlayabilirsiniz!"})})}),t})(),o=d.find(e=>e.id===a),c=()=>{try{localStorage.setItem("onboardingCompleted","true"),localStorage.setItem(r,"true"),localStorage.removeItem(n)}catch{}t()};return Ot.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-2 sm:p-4",children:Ot.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[Ot.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-3 sm:px-6 py-3 sm:py-4 flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-900",children:"Hızlı Başlangıç"}),Ot.jsxs("p",{className:"text-xs sm:text-sm text-slate-600",children:["Adım ",a," / ",d.length]})]}),Ot.jsx("button",{onClick:()=>{c()},className:"text-slate-400 hover:text-slate-600 transition-colors p-1","aria-label":"Kapat",children:Ot.jsx(_,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),Ot.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 bg-slate-50 border-b border-slate-200",children:Ot.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:d.map((e,t)=>Ot.jsx("div",{className:"flex-1 h-1.5 sm:h-2 rounded-full transition-colors "+(e.id<=a?"bg-gradient-to-r from-slate-800 to-blue-900":"bg-slate-200")},e.id))})}),Ot.jsxs("div",{className:"p-4 sm:p-6",children:[Ot.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4",children:Ot.jsx("div",{className:"scale-75 sm:scale-100",children:null==o?void 0:o.icon})}),Ot.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-slate-900 mb-1 sm:mb-2",children:null==o?void 0:o.title}),Ot.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:null==o?void 0:o.description})]}),Ot.jsx("div",{className:"mb-4 sm:mb-6 text-sm sm:text-base",children:null==o?void 0:o.content}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 sm:pt-6 border-t border-slate-200 gap-2 sm:gap-4",children:[Ot.jsxs("button",{onClick:()=>{a>1&&i(a-1)},disabled:1===a,className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm sm:text-base",children:[Ot.jsx(K,{className:"w-3 h-3 sm:w-4 sm:h-4 rotate-180"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Geri"})]}),a===d.length?Ot.jsxs("button",{onClick:c,className:"flex items-center gap-1 sm:gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:shadow-lg transition-all text-sm sm:text-base",children:[Ot.jsx("span",{className:"hidden sm:inline",children:"Başlayalım"}),Ot.jsx("span",{className:"sm:hidden",children:"Başla"}),Ot.jsx(J,{className:"w-4 h-4 sm:w-5 sm:h-5"})]}):Ot.jsxs("button",{onClick:()=>{a<d.length?i(a+1):c()},className:"flex items-center gap-1 sm:gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:shadow-lg transition-all text-sm sm:text-base",children:[Ot.jsx("span",{className:"hidden sm:inline",children:"İleri"}),Ot.jsx("span",{className:"sm:hidden",children:"İleri"}),Ot.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5"})]})]})]})]})})},Gl=({storageKey:e,title:t,subtitle:s,steps:a,className:i=""})=>{const r=l.useMemo(()=>`quickstart:dismissed:${e}`,[e]),[n,o]=l.useState(!1);l.useEffect(()=>{try{o("1"===localStorage.getItem(r))}catch{o(!1)}},[r]);return n?null:Ot.jsxs("div",{className:`w-full rounded-2xl border border-slate-200 bg-white shadow-sm ${i}`,children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3 p-4 sm:p-5 border-b border-slate-200",children:[Ot.jsxs("div",{className:"min-w-0",children:[Ot.jsx("div",{className:"text-sm sm:text-base font-extrabold text-slate-900",children:t}),s&&Ot.jsx("div",{className:"text-xs sm:text-sm text-slate-600 mt-1 leading-relaxed",children:s})]}),Ot.jsx("button",{type:"button",onClick:()=>{o(!0);try{localStorage.setItem(r,"1")}catch{}},className:"w-9 h-9 rounded-full bg-white hover:bg-slate-50 border border-slate-200 flex items-center justify-center text-slate-500 hover:text-slate-900 flex-shrink-0","aria-label":"Kapat",children:Ot.jsx(_,{className:"w-4 h-4"})})]}),Ot.jsx("div",{className:"p-4 sm:p-5 space-y-3",children:a.map(e=>{const t=!!e.done,s=t?fe:ye;return Ot.jsx(d,{to:e.to,className:"block rounded-xl border border-slate-200 bg-slate-50 hover:bg-slate-100 transition-colors p-3",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center flex-shrink-0 "+(t?"bg-emerald-100 text-emerald-700":"bg-white text-slate-500 border border-slate-200"),"aria-hidden":"true",children:Ot.jsx(s,{className:"w-5 h-5"})}),Ot.jsxs("div",{className:"min-w-0",children:[Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:e.title}),e.description&&Ot.jsx("div",{className:"text-xs text-slate-600 mt-0.5 leading-relaxed",children:e.description})]})]})},e.id)})})]})},Fl=({message:e,isVisible:t,onClose:s,duration:a=5e3,className:i=""})=>{const[r,n]=l.useState(!1);return l.useEffect(()=>{if(t){n(!0);const e=setTimeout(()=>{n(!1),setTimeout(s,300)},a);return()=>clearTimeout(e)}},[t,a,s]),t?Ot.jsx("div",{className:`fixed top-4 right-4 z-50 ${i}`,children:Ot.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg transition-all duration-300 "+(r?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(J,{className:"w-5 h-5 text-green-600 mr-3"}),Ot.jsx("p",{className:"text-green-800 font-medium flex-1",children:e}),Ot.jsx("button",{onClick:s,className:"text-green-400 hover:text-green-600 transition-colors ml-3",children:Ot.jsx(_,{className:"w-4 h-4"})})]})})}):null},Yl=({icon:e,title:t,description:s,primaryAction:a,secondaryAction:l,className:i=""})=>{const r=(e,t)=>{const s="primary"===t?"inline-flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg":"inline-flex items-center justify-center px-4 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-lg font-semibold transition-all duration-200 border border-slate-200";return e.to?Ot.jsx(d,{to:e.to,className:s,onClick:e.onClick,children:e.label}):Ot.jsx("button",{type:"button",onClick:e.onClick,className:s,children:e.label})};return Ot.jsx("div",{className:`w-full rounded-2xl border border-slate-200 bg-gradient-to-br from-slate-50 to-white p-4 sm:p-5 shadow-sm ${i}`,children:Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e&&Ot.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-slate-800 to-blue-900 text-white flex items-center justify-center shadow-sm flex-shrink-0",children:Ot.jsx(e,{className:"w-5 h-5"})}),Ot.jsxs("div",{className:"min-w-0",children:[Ot.jsx("div",{className:"text-sm sm:text-base font-bold text-slate-900",children:t}),s&&Ot.jsx("div",{className:"text-xs sm:text-sm text-slate-600 mt-1 leading-relaxed",children:s})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[l&&r(l,"secondary"),r(a,"primary")]})]})})},ql=({storageKey:e,icon:t,title:s,description:a,primaryAction:i,secondaryAction:r,className:n="",isEmpty:d})=>{const o=l.useMemo(()=>`guidance:dismissed:${e}`,[e]),[c,m]=l.useState(!1),[x,u]=l.useState(!1);l.useEffect(()=>{try{const e="1"===localStorage.getItem(o);u(e);const t=!e&&Boolean(d);m(t)}catch{u(!1),m(Boolean(d))}},[o,d]),l.useEffect(()=>{if("undefined"!=typeof document&&document.body){try{document.body.style.overflow=c?"hidden":"unset"}catch(e){}return()=>{try{"undefined"!=typeof document&&document.body&&(document.body.style.overflow="unset")}catch(e){}}}},[c]),l.useEffect(()=>{if("undefined"==typeof document)return;const e=e=>{"Escape"===e.key&&h()};if(c)try{document.addEventListener("keydown",e)}catch(t){}return()=>{try{"undefined"!=typeof document&&document.removeEventListener("keydown",e)}catch(t){}}},[c]);const h=()=>{m(!1),u(!0);try{localStorage.setItem(o,"1")}catch{}},p=!x&&(void 0===d||Boolean(d)),g=x||!1===d;return Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:`w-full ${n}`,children:[p&&Ot.jsx(Yl,{icon:t,title:s,description:a,primaryAction:i,secondaryAction:r}),g&&Ot.jsx("div",{className:"flex justify-end",children:Ot.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-xs sm:text-sm font-semibold text-slate-600 hover:text-slate-900 underline underline-offset-4",children:"Yardım / Tekrar Göster"})})]}),c&&Ot.jsxs("div",{className:"fixed inset-0 z-50",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:h}),Ot.jsx("div",{className:"relative flex min-h-full items-center justify-center p-4",children:Ot.jsxs("div",{className:"relative w-full max-w-2xl",children:[Ot.jsx("button",{type:"button",onClick:h,className:"absolute -top-3 -right-3 w-10 h-10 rounded-full bg-white shadow-lg border border-slate-200 flex items-center justify-center text-slate-600 hover:text-slate-900","aria-label":"Kapat",children:Ot.jsx(_,{className:"w-5 h-5"})}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-slate-200 p-4 sm:p-6",children:[Ot.jsx(Yl,{icon:t,title:s,description:a,primaryAction:{...i,onClick:()=>{var e;null==(e=i.onClick)||e.call(i),h()}},secondaryAction:r?{...r,onClick:()=>{var e;null==(e=r.onClick)||e.call(r),h()}}:void 0}),Ot.jsx("div",{className:"mt-4 flex justify-end",children:Ot.jsx("button",{type:"button",onClick:h,className:"px-4 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-lg font-semibold transition-all duration-200 border border-slate-200",children:"Anladım"})})]})]})})]})]})},Hl=(...e)=>{for(const t of e){if(null==t)continue;const e=String(t).trim();if(e)return e}return""},Ul=(e,t)=>[(null==e?void 0:e[`${t}City`])||(null==e?void 0:e[`${t}_city`])||(null==e?void 0:e[`${t}city`])||("pickup"===t?(null==e?void 0:e.fromCity)||(null==e?void 0:e.from_city)||(null==e?void 0:e.fromcity)||(null==e?void 0:e.from):(null==e?void 0:e.toCity)||(null==e?void 0:e.to_city)||(null==e?void 0:e.tocity)||(null==e?void 0:e.to)),(null==e?void 0:e[`${t}District`])||(null==e?void 0:e[`${t}_district`])||(null==e?void 0:e[`${t}district`])||("pickup"===t?(null==e?void 0:e.fromDistrict)||(null==e?void 0:e.from_district):(null==e?void 0:e.toDistrict)||(null==e?void 0:e.to_district))].filter(Boolean).join(", ").trim(),Vl=e=>({from:Ul(e,"pickup")||Hl(null==e?void 0:e.pickupAddress,null==e?void 0:e.pickup_address,null==e?void 0:e.pickupaddress,null==e?void 0:e.from_address,null==e?void 0:e.fromaddress)||"Bilinmiyor",to:Ul(e,"delivery")||Hl(null==e?void 0:e.deliveryAddress,null==e?void 0:e.delivery_address,null==e?void 0:e.deliveryaddress,null==e?void 0:e.to_address,null==e?void 0:e.toaddress)||"Bilinmiyor"});function Jl({isOpen:e,onClose:t}){const[s,a]=l.useState([]),[i,r]=l.useState(!1),[n,d]=l.useState(0),c=o(),m=e=>{if(!e)return null;if("object"==typeof e)return e;if("string"==typeof e)try{return JSON.parse(e)}catch{return null}return null},x=e=>{const t=(()=>{var e;const t=(null==(e=window.location)?void 0:e.pathname)||"";return t.startsWith("/tasiyici")?"/tasiyici":t.startsWith("/nakliyeci")?"/nakliyeci":t.startsWith("/corporate")?"/corporate":t.startsWith("/individual")?"/individual":""})(),s=m(e.data)||m(e.metadata)||null,a=s&&(s.actionUrl||s.action_url||s.linkUrl||s.link_url||s.url)||e.linkUrl||e.link_url||e.linkurl;if(a&&"string"==typeof a)return{label:"Aç",to:a};if("/tasiyici"!==t)return null;const l=(null==s?void 0:s.shipmentId)??(null==s?void 0:s.shipment_id)??(null==s?void 0:s.shipment)??(null==s?void 0:s.id),i=(null==s?void 0:s.offerId)??(null==s?void 0:s.offer_id),r=String(e.type||"").toLowerCase(),n=String(e.title||"").toLowerCase();return null!=l&&String(l).length>0?{label:"İşi Aç",to:`/tasiyici/jobs/${encodeURIComponent(String(l))}`}:null!=i||r.includes("offer")||n.includes("teklif")?{label:"Tekliflerim",to:"/tasiyici/my-offers"}:r.includes("message")||n.includes("mesaj")?{label:"Mesajlar",to:"/tasiyici/messages"}:null};l.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{r(!0);const e=localStorage.getItem("authToken"),t=await fetch(Zs("/api/notifications"),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json(),s=(Array.isArray(null==e?void 0:e.data)?e.data:Array.isArray(e)?e:[]).map(e=>{const t=e.created_at??e.createdAt??e.createdat??null,s=e.is_read??e.isRead??e.isread??!1,a=e.data??e.metadata,l=m(a),i=((e,t)=>{const s=String(e).toLowerCase(),a=(null==t?void 0:t.shipmentId)??(null==t?void 0:t.shipment_id)??(null==t?void 0:t.shipment)??(null==t?void 0:t.id);return s.includes("route_plan_updated")?{title:"Rota güncellendi",message:a?"İşi açıp yeni rotayı kontrol et.":"Yeni rotayı kontrol et."}:s.includes("new_message")||s.includes("message")?{title:"Yeni mesaj",message:"Mesajlara girip kontrol et."}:s.includes("offer")||s.includes("bid")?{title:"Teklif güncellendi",message:"Teklif durumunu kontrol et."}:s.includes("shipment")||s.includes("status")?{title:"İş durumu güncellendi",message:a?"İşi açıp güncel durumu kontrol et.":"Güncel durumu kontrol et."}:{title:"Bildirim",message:"Detay için aç."}})(e.type||"info",l),r=String(e.title||"").trim()||i.title,n=String(e.message||"").trim()||i.message;return{...e,title:r,message:n,created_at:t,is_read:s,data:e.data??e.metadata,metadata:e.metadata,linkUrl:e.linkUrl??e.link_url??e.linkurl}});a(s),d(s.filter(e=>!e.is_read).length)}}catch(e){}finally{r(!1)}},h=async e=>{try{const t=localStorage.getItem("authToken");(await fetch(Zs(`/api/notifications/${e}/read`),{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok&&(a(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),d(e=>Math.max(0,e-1)),window.dispatchEvent(new Event("yolnext:refresh-notifications")),window.dispatchEvent(new Event("yolnext:refresh-badges")))}catch(t){}},p=e=>{switch(e){case"success":case"offer_accepted":case"shipment_delivered":return Ot.jsx(J,{className:"w-5 h-5 text-green-500"});case"warning":return Ot.jsx(f,{className:"w-5 h-5 text-yellow-500"});case"error":case"offer_rejected":case"shipment_cancelled":return Ot.jsx(te,{className:"w-5 h-5 text-red-500"});case"status_update":return Ot.jsx(L,{className:"w-5 h-5 text-blue-500"});default:return Ot.jsx(ve,{className:"w-5 h-5 text-blue-500"})}},g=e=>{if(!e)return"—";const t=new Date(e);if(!Number.isFinite(t.getTime()))return"—";const s=new Date,a=Math.floor((s.getTime()-t.getTime())/6e4);return a<1?"Az önce":a<60?`${a} dakika önce`:a<1440?`${Math.floor(a/60)} saat önce`:t.toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})};return e?Ot.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),Ot.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-96 bg-white shadow-xl overflow-hidden flex flex-col",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(H,{className:"w-5 h-5 text-gray-600"}),Ot.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Bildirimler"}),n>0&&Ot.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:n})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[n>0&&Ot.jsxs("button",{onClick:async()=>{try{const e=localStorage.getItem("authToken");(await fetch(Zs("/api/notifications/mark-all-read"),{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).ok&&(a(e=>e.map(e=>({...e,is_read:!0}))),d(0),window.dispatchEvent(new Event("yolnext:refresh-notifications")),window.dispatchEvent(new Event("yolnext:refresh-badges")))}catch(e){}},className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[Ot.jsx(je,{className:"w-4 h-4"}),"Tümünü okundu işaretle"]}),Ot.jsx("button",{onClick:t,className:"min-w-[44px] min-h-[44px] p-1 hover:bg-gray-100 rounded flex items-center justify-center","aria-label":"Kapat",children:Ot.jsx(_,{className:"w-5 h-5 text-gray-600"})})]})]}),Ot.jsx("div",{className:"flex-1 overflow-y-auto",children:i?Ot.jsx("div",{className:"flex items-center justify-center p-8",children:Ot.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):0===s.length?Ot.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[Ot.jsx(H,{className:"w-12 h-12 text-gray-300 mb-4"}),Ot.jsx("p",{className:"text-gray-500",children:"Henüz bildirim yok"})]}):Ot.jsx("div",{className:"divide-y divide-gray-200",children:s.map(e=>Ot.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${e.is_read?"":"bg-blue-50 border-l-4 border-l-blue-500"} ${"high"===e.priority?"bg-red-50 border-l-red-500":"medium"===e.priority?"bg-yellow-50 border-l-yellow-500":""}`,onClick:()=>h(e.id),children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"flex-shrink-0 mt-1",children:p(e.type)}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.title}),!e.is_read&&Ot.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),Ot.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(()=>{const s=x(e);return s?Ot.jsx("div",{className:"mt-3 flex justify-end",children:Ot.jsx("button",{type:"button",onClick:async a=>{a.stopPropagation(),await h(e.id),s.to&&(c(s.to),t())},className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg text-sm font-semibold transition-all duration-200 min-h-[44px]",children:s.label})}):null})(),Ot.jsxs("div",{className:"flex items-center justify-between mt-2",children:[Ot.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[Ot.jsx(L,{className:"w-3 h-3"}),g(e.created_at)]}),e.sender_name&&Ot.jsx("span",{className:"text-xs text-gray-500",children:e.sender_name})]})]})]})},e.id))})})]})]}):null}var Wl=Object.defineProperty,Zl=(e,t,s)=>((e,t,s)=>t in e?Wl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const Xl=new class{constructor(){Zl(this,"isDevelopment",!1),Zl(this,"logLevel","info"),Zl(this,"enableMetrics",!1),Zl(this,"sessionId"),this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}shouldLog(e){const t=["error","warn","info","debug"],s=t.indexOf(this.logLevel);return t.indexOf(e)<=s}formatMessage(e,t,s){const a=`[${(new Date).toISOString()}] [${e.toUpperCase()}]`;return s?`${a} ${t} ${JSON.stringify(s)}`:`${a} ${t}`}log(e,t,s){if(!this.shouldLog(e))return;const a=this.formatMessage(e,t,s);this.isDevelopment?this.logToConsole(e,a,s):this.sendToLoggingService(e,t,s)}logToConsole(e,t,s){}async sendToLoggingService(e,t,s){const a={level:e,message:t,data:s,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,sessionId:this.sessionId};try{await fetch(Zs("/api/logs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(l){}}error(e,t){this.log("error",e,t)}warn(e,t){this.log("warn",e,t)}info(e,t){this.log("info",e,t)}debug(e,t){this.log("debug",e,t)}apiRequest(e,t,s){this.info(`API Request: ${e} ${t}`,s)}apiResponse(e,t,s,a){const l=s>=400?"error":"info";this.log(l,`API Response: ${e} ${t} - ${s}`,a)}userAction(e,t){this.info(`User Action: ${e}`,t)}performance(e,t,s){this.enableMetrics&&this.info(`Performance: ${e} took ${t}ms`,s)}security(e,t){this.warn(`Security Event: ${e}`,t)}businessMetric(e,t,s){this.enableMetrics&&this.info(`Business Metric: ${e} = ${t}`,s)}},Ql=(e,...t)=>Xl.info(e,...t),ei=(e,...t)=>Xl.error(e,...t),ti=(e,...t)=>Xl.warn(e,...t),si=(e,...t)=>Xl.debug(e,...t),ai="pending",li="open",ii="waiting_for_offers",ri="offer_accepted",ni="accepted",di="assigned",oi="in_progress",ci="picked_up",mi="in_transit",xi="delivered",ui="completed",hi="cancelled",pi=e=>({[ai]:{text:"Beklemede",color:"bg-yellow-100 text-yellow-800 border-yellow-200",description:"Gönderi oluşturuldu, teklif bekleniyor"},[li]:{text:"İlana Açık",color:"bg-sky-100 text-sky-800 border-sky-200",description:"Gönderi yayında, teklifler toplanıyor"},[ii]:{text:"Teklif Bekliyor",color:"bg-blue-100 text-blue-800 border-blue-200",description:"Taşıyıcılardan teklif bekleniyor"},[ri]:{text:"Teklif Kabul Edildi",color:"bg-green-100 text-green-800 border-green-200",description:"Teklif kabul edildi, taşıyıcı ataması bekleniyor"},[ni]:{text:"Kabul Edildi",color:"bg-green-100 text-green-800 border-green-200",description:"Teklif kabul edildi, taşıyıcı ataması bekleniyor"},[oi]:{text:"Hazırlanıyor",color:"bg-indigo-100 text-indigo-800 border-indigo-200",description:"Taşıyıcı atandı, yükleme hazırlığı devam ediyor"},[di]:{text:"Taşıyıcı Atandı",color:"bg-indigo-100 text-indigo-800 border-indigo-200",description:"Taşıyıcı atandı, yükleme bekleniyor"},[ci]:{text:"Yük Alındı",color:"bg-blue-100 text-blue-800 border-blue-200",description:"Yük alındı, yola çıkış bekleniyor"},[mi]:{text:"Yolda",color:"bg-blue-100 text-blue-800 border-blue-200",description:"Gönderi yolda, teslimat bekleniyor"},[xi]:{text:"Teslim Edildi",color:"bg-emerald-100 text-emerald-800 border-emerald-200",description:"Gönderi teslim edildi, onay bekleniyor"},[hi]:{text:"İptal Edildi",color:"bg-red-100 text-red-800 border-red-200",description:"Gönderi iptal edildi"},[ui]:{text:"Tamamlandı",color:"bg-gray-100 text-gray-800 border-gray-200",description:"Gönderi başarıyla tamamlandı"},preparing:{text:"Hazırlanıyor",color:"bg-indigo-100 text-indigo-800 border-indigo-200",description:"Yükleme hazırlığı devam ediyor"}}[(e=>{const t=String(e||"").trim().toLowerCase().replace(/-/g,"_");return"waiting"===t?ii:"canceled"===t?hi:t})(e)]||{text:"Bilinmiyor",color:"bg-gray-100 text-gray-800 border-gray-200",description:"Durum bilgisi mevcut değil"}),gi=e=>pi(e).text,bi={house_move:"Ev Taşınması",furniture:"Mobilya Taşıma",special:"Özel Yük",other:"Diğer",general:"Genel Gönderi",retail_consumer:"Perakende & Tüketim Malı",raw_materials:"Ham Madde & Endüstriyel Mal",electronics:"Elektronik & Teknoloji",electronics_tech:"Elektronik & Teknoloji",textile:"Tekstil & Giyim",textile_apparel:"Tekstil & Giyim",food_beverage:"Gıda & İçecek",furniture_home:"Mobilya & Ev Eşyası",construction:"İnşaat Malzemeleri",automotive:"Otomotiv Parçaları",medical:"Medikal & İlaç",medical_pharma:"Medikal & İlaç",chemical:"Kimyasal & Tehlikeli Madde",document:"Doküman & Önemli Kargo",warehouse:"Depo Transferi",bulk:"Dökme Yük",refrigerated:"Soğutmalı Yük",oversized:"Büyük Boy Yük",office:"Ofis Ekipmanı",machinery:"Makine & Ekipman",exhibition:"Vitrin & Sergi Malzemesi"},fi=e=>e?bi[e]||bi[e.toLowerCase()]||e:"",yi=()=>{var e;const{user:t}=sa(),[s,a]=l.useState({totalShipments:0,deliveredShipments:0,pendingShipments:0,successRate:0,totalSpent:0,thisMonthSpent:0,monthlyGrowth:0,activeCarriers:0}),[i,r]=l.useState([]),[n,o]=l.useState([]),[c,m]=l.useState(!0),[x,u]=l.useState(!1),[h,p]=l.useState(""),[g,b]=l.useState(!1),[f,y]=l.useState(!1),[j,v]=l.useState(!1),[N,k]=l.useState(0),w=e=>{switch(e){case"preparing":return{text:"Hazırlanıyor",color:"bg-yellow-100 text-yellow-800"};case"waiting":case"waiting_for_offers":return{text:"Teklif Bekliyor",color:"bg-blue-100 text-blue-800"};case"offer_accepted":case"accepted":return{text:"Teklif Kabul Edildi",color:"bg-green-100 text-green-800"};case"in_transit":return{text:"Yolda",color:"bg-green-100 text-green-800"};case"delivered":return{text:"Teslim Edildi",color:"bg-emerald-100 text-emerald-800"};case"cancelled":return{text:"İptal Edildi",color:"bg-red-100 text-red-800"};default:return{text:"Bilinmiyor",color:"bg-gray-100 text-gray-800"}}},S={totalShipments:0,deliveredShipments:0,pendingShipments:0,successRate:0,totalSpent:0,thisMonthSpent:0,monthlyGrowth:0,activeCarriers:0},z=[],C=[];return l.useEffect(()=>{if(!(null==t?void 0:t.id))return;const e=String((null==t?void 0:t.role)||"corporate").toLowerCase(),s=`onboardingCompleted:${t.id}:${e}`,a="true"===localStorage.getItem(s),l=`onboardingPending:${t.id}:${e}`,i="true"===localStorage.getItem(l);if(a)try{localStorage.removeItem(l)}catch{}else i&&v(!0)},[null==t?void 0:t.id]),l.useEffect(()=>{(async()=>{var e,s,l;if(!(null==t?void 0:t.id))return void m(!1);m(!0);const i=setTimeout(()=>{m(!1)},1e4);try{let t=null;try{const e=await pl();if(null==e?void 0:e.success){const s=e.data,a=Array.isArray(null==s?void 0:s.carriers)?s.carriers:Array.isArray(s)?s:[];t=a.length}}catch(d){}const i=await ol("corporate");if((null==i?void 0:i.success)&&(null==(e=null==i?void 0:i.data)?void 0:e.stats)){const e=i.data.stats.activeCarriers;a({...i.data.stats,deliveredShipments:i.data.stats.completedShipments||0,successRate:i.data.stats.completedShipments>0?(i.data.stats.completedShipments/i.data.stats.totalShipments*100).toFixed(1):0,totalSpent:0,thisMonthSpent:0,monthlyGrowth:0,activeCarriers:"number"==typeof e?e:"string"==typeof e&&parseInt(e,10)||(t??0)})}else a(S);const o=await ml.getAll();if(null==o?void 0:o.success){let e=[];Array.isArray(o.data)?e=o.data:Array.isArray(o.shipments)?e=o.shipments:(null==(s=o.data)?void 0:s.shipments)&&Array.isArray(o.data.shipments)?e=o.data.shipments:(null==(l=o.data)?void 0:l.data)&&Array.isArray(o.data.data)&&(e=o.data.data);const i=e.map(e=>{var t;return{...(()=>{const{from:t,to:s}=Vl(e);return{from:t,to:s}})(),id:(null==(t=e.id)?void 0:t.toString())||String(e.id),trackingCode:e.trackingCode||e.trackingNumber||e.tracking_number||`TRK${(e.id||"").toString().padStart(6,"0")}`,title:$l(e.title||e.productDescription||e.description||"Gönderi"),status:"open"===e.status||"waiting_for_offers"===e.status?"waiting":"offer_accepted"===e.status||"accepted"===e.status?"offer_accepted":"in_transit"===e.status||"in_progress"===e.status?"in_transit":"delivered"===e.status?"delivered":"cancelled"===e.status?"cancelled":"preparing"===e.status?"preparing":e.status||"waiting",createdAt:e.createdAt||e.created_at||(new Date).toISOString(),estimatedDelivery:e.deliveryDate||e.delivery_date||e.estimatedDelivery||"",price:e.displayPrice||e.price||e.offerPrice||e.value||0,carrierName:e.carrierName||e.carrier_name||void 0,category:e.category||e.cargoType||"",subCategory:e.subCategory||e.cargoSubType||"",volume:e.volume?"number"==typeof e.volume?e.volume.toString():e.volume:"0"}});r(i),a(e=>{if(e.activeCarriers&&e.activeCarriers>0)return e;if(t&&t>0)return{...e,activeCarriers:t};const s=new Set;if(s&&"function"==typeof s.add){for(const e of i){const t=String(e.carrierName||"").trim();t&&"Atanmamış"!==t&&s.add(t)}if(n&&n.length>0)for(const e of n){const t=String(e.carrierName||e.carrier||"").trim();t&&"Atanmamış"!==t&&s.add(t)}}return{...e,activeCarriers:s.size}})}else r(z);try{const e=await cl.getUnreadCount();if(null==e?void 0:e.success){const t=e.data||{};k(t.count||t.unreadCount||t.unread||0)}}catch(d){}}catch(c){ei("Panel verileri yüklenirken hata:",c),a(S),r(z),o(C)}finally{clearTimeout(i),m(!1)}})()},[]),c?Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Ana Sayfa - YolNext"})}),Ot.jsxs("div",{className:"p-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa"},{label:"Ana Sayfa"}]}),Ot.jsx(Pl,{message:"Ana Sayfa yükleniyor..."})]})]}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Ana Sayfa - YolNext Kurumsal"})}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(A,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:["Merhaba ",(null==t?void 0:t.firstName)||(null==(e=null==t?void 0:t.fullName)?void 0:e.split(" ")[0])||"Kullanıcı","! 👋"]}),Ot.jsxs("p",{className:"text-slate-200 text-lg leading-relaxed",children:["Kurumsal gönderilerinizi kolayca yönetin.",Ot.jsx("br",{}),Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"Profesyonel, güvenilir ve ekonomik"})," çözümlerimizle yanınızdayız."]})]})]}),Ot.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:[Ot.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg"}),Ot.jsx("span",{className:"text-slate-200 font-medium",children:"Çevrimiçi"})]}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:Ot.jsxs("span",{className:"text-slate-200 font-medium",children:[s.totalShipments," Gönderi"]})})]})]}),Ot.jsxs("div",{className:"flex items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[Ot.jsxs("button",{type:"button",onClick:()=>y(!0),className:"relative min-w-[44px] min-h-[44px] w-12 h-12 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center hover:bg-white/20 transition-all duration-300 border border-white/20","aria-label":"Bildirimleri aç",children:[Ot.jsx(H,{size:20,className:"text-white"}),N>0&&Ot.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold shadow-lg",children:N>9?"9+":N})]}),Ot.jsx(d,{to:"/corporate/create-shipment",className:"w-full sm:w-auto",children:Ot.jsxs("button",{className:"bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 text-base shadow-lg hover:shadow-xl w-full sm:w-auto",children:[Ot.jsx(ue,{size:20}),"Gönderi Oluştur"]})})]})]})})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"corporate.dashboard",icon:R,title:"Kurumsal Panel",description:"Gönderi oluştur, teklifleri topla ve operasyonu takip et. Düzenli çalıştığın nakliyecileri “Nakliyeciler” bölümünden yönetebilirsin.",isEmpty:0===s.totalShipments,primaryAction:{label:"Gönderi Oluştur",to:"/corporate/create-shipment"},secondaryAction:{label:"Nakliyeciler",to:"/corporate/carriers"}})}),0===s.totalShipments&&(null==t?void 0:t.id)&&Ot.jsx("div",{className:"mb-6",children:Ot.jsx(Gl,{storageKey:`corporate:${t.id}`,title:"Kurumsal Hızlı Başlangıç (3 adım)",subtitle:"İlk kurumsal gönderini sorunsuz başlatmak için hızlı akış.",steps:[{id:"create",title:"Gönderi Oluştur",description:"Kategori + adres + tarih + bütçe bilgilerini gir",to:"/corporate/create-shipment",done:s.totalShipments>0},{id:"carriers",title:"Nakliyeciler",description:"Sık çalıştığın nakliyecileri yönet ve performansı izle",to:"/corporate/carriers",done:s.activeCarriers>0},{id:"offers",title:"Teklifleri İncele",description:"Gelen teklifleri karşılaştır ve en uygunu seç",to:"/corporate/offers",done:s.totalShipments>0&&0===s.pendingShipments}]})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:s.totalShipments}),Ot.jsx("div",{className:"flex items-center gap-1",children:Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})})})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Toplam Gönderi"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Kurumsal gönderi sayısı"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(fe,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:s.deliveredShipments}),Ot.jsx("div",{className:"flex items-center gap-1",children:Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})})})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Teslim Edildi"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Başarıyla teslim edilen"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:s.activeCarriers}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}),Ot.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Aktif ortaklar"})]})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Aktif Nakliyeci"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Çalışan ortaklarınız"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:s.pendingShipments}),Ot.jsx("div",{className:"flex items-center gap-1",children:Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})})})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Bekleyen Gönderiler"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"İşlem bekleyen gönderiler"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Hızlı İşlemler"}),Ot.jsx("p",{className:"text-slate-600",children:"En çok kullandığın özellikler - tek tıkla erişim"})]}),Ot.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[Ot.jsx(d,{to:"/corporate/create-shipment",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-blue-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(ue,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Gönderi Oluştur"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Yeni gönderi kaydet"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/corporate/offers",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-emerald-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx($,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Teklifler"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Gelen teklifleri incele"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/corporate/messages",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-purple-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-purple-800 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(G,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Mesajlaşma"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Nakliyecilerle iletişim"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-purple-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/corporate/analytics",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-amber-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(ge,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Analitik"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Detaylı raporlar"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-amber-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-4 sm:p-8 shadow-xl border border-slate-200 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Son Gönderiler"}),Ot.jsx("p",{className:"text-slate-600",children:"Kurumsal gönderilerinizi takip edin"})]}),Ot.jsxs(d,{to:"/corporate/shipments",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center gap-2",children:["Tümünü Gör",Ot.jsx(K,{className:"w-4 h-4"})]})]}),Ot.jsx("div",{className:"hidden md:block",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200 bg-gradient-to-r from-slate-50 to-blue-50",children:[Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Gönderi No"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Rota"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Durum"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Nakliyeci"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Fiyat"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:i.slice(0,5).map(e=>Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900",children:e.trackingCode}),Ot.jsx("div",{className:"text-xs text-slate-500",children:Kl(e.createdAt,"long")}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.title})]}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsxs("div",{className:"text-sm font-medium text-slate-900",children:[e.from," → ",e.to]}),e.category&&Ot.jsxs("div",{className:"text-xs text-slate-500",children:[fi(e.category),e.subCategory?` - ${fi(e.subCategory)}`:""]})]}),Ot.jsx("td",{className:"py-4 px-4",children:(()=>{const t=w(e.status);return Ot.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.color}`,children:["in_transit"===e.status&&Ot.jsx(E,{className:"w-3 h-3 mr-1"}),"preparing"===e.status&&Ot.jsx(R,{className:"w-3 h-3 mr-1"}),"delivered"===e.status&&Ot.jsx(fe,{className:"w-3 h-3 mr-1"}),("waiting"===e.status||"waiting_for_offers"===e.status)&&Ot.jsx(L,{className:"w-3 h-3 mr-1"}),t.text]})})()}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:e.carrierName||e.carrierEmail||e.carrier_email||("offer_accepted"===e.status||"accepted"===e.status||"in_transit"===e.status||"delivered"===e.status?"Nakliyeci Atandı":"Atanmamış")})}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:e.price>0?Il(e.price):"waiting_for_offers"===e.status||"waiting"===e.status||"pending"===e.status||"open"===e.status?Ot.jsx("span",{className:"text-slate-400 font-normal",children:"Teklif Bekleniyor"}):"—"}),e.estimatedDelivery&&Ot.jsx("div",{className:"text-xs text-slate-500",children:Kl(e.estimatedDelivery,"long")})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(d,{to:`/corporate/shipments?highlight=${e.id}`,className:"px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-lg transition-colors",children:"Detay"}),Ot.jsx(d,{to:"/corporate/messages",className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-medium rounded-lg transition-colors",children:"Mesaj"})]})})]},e.id))})]})})}),Ot.jsx("div",{className:"md:hidden space-y-4",children:i.slice(0,5).map(e=>Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900 truncate mb-1",children:e.trackingCode}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.title})]}),Ot.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-2 flex-shrink-0 ${w(e.status).color}`,children:(()=>{const t=w(e.status);return Ot.jsxs(Ot.Fragment,{children:["in_transit"===e.status&&Ot.jsx(E,{className:"w-3 h-3 mr-1"}),"preparing"===e.status&&Ot.jsx(R,{className:"w-3 h-3 mr-1"}),"delivered"===e.status&&Ot.jsx(fe,{className:"w-3 h-3 mr-1"}),("waiting"===e.status||"waiting_for_offers"===e.status)&&Ot.jsx(L,{className:"w-3 h-3 mr-1"}),Ot.jsx("span",{className:"ml-1",children:t.text})]})})()})]}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-900 mb-1",children:[Ot.jsx(T,{className:"w-4 h-4"}),e.from," → ",e.to]}),e.category&&Ot.jsxs("div",{className:"text-xs text-slate-500",children:[fi(e.category),e.subCategory?` - ${fi(e.subCategory)}`:""]})]}),Ot.jsx("div",{className:"mb-3",children:Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:e.carrierName||e.carrierEmail||e.carrier_email||"Nakliyeci atanmamış"})}),Ot.jsxs("div",{className:"mb-4",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mb-1",children:Il(e.price)}),Ot.jsx("div",{className:"text-xs text-slate-500 space-y-1",children:Ot.jsxs("div",{children:["Teslimat: ",e.estimatedDelivery?Kl(e.estimatedDelivery,"long"):"Bilinmiyor"]})})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ot.jsx(d,{to:`/corporate/shipments?highlight=${e.id}`,className:"flex-1 min-w-[80px] min-h-[40px] px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center",children:"Detay"}),Ot.jsx(d,{to:"/corporate/messages",className:"flex-1 min-w-[80px] min-h-[40px] px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center",children:"Mesaj"})]})]},`${e.id}-mobile`))})]}),x&&Ot.jsx(Fl,{message:h,isVisible:x,onClose:()=>u(!1)})]}),Ot.jsx(Jl,{isOpen:f,onClose:()=>{y(!1),window.dispatchEvent(new Event("yolnext:refresh-notifications")),window.dispatchEvent(new Event("yolnext:refresh-badges"))}}),j&&Ot.jsx(Ll,{userType:"corporate",onComplete:()=>v(!1)})]})};function ji(){const{logout:e}=sa(),t=m(),[s,a]=l.useState(1024);l.useEffect(()=>{const e=()=>{a(window.innerWidth)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const i=s<=300?0:Math.min(256,Math.max(200,.25*s)),r=()=>{e()};return"/corporate/dashboard"===t.pathname?Ot.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",children:[Ot.jsx(_l,{onLogout:r}),Ot.jsx("main",{className:"overflow-auto bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",style:{width:`calc(100% - ${i}px)`,marginLeft:`${i}px`},children:Ot.jsx(yi,{})})]}):Ot.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",children:[Ot.jsx(_l,{onLogout:r}),Ot.jsx("main",{className:"overflow-auto bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",style:{width:`calc(100% - ${i}px)`,marginLeft:`${i}px`},children:Ot.jsx(x,{})})]})}const vi=({onLogout:e})=>{var t;const s=m(),[a,i]=l.useState(!1),[r,n]=l.useState(1024),{badgeCounts:o}=Al(),{user:c}=sa();l.useEffect(()=>{const e=()=>{const e=window.innerWidth;n(e),e>300&&i(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const x=r<=300,u=[{title:"Ana Menü",items:[{name:"Ana Sayfa",href:"/nakliyeci/dashboard",icon:E},{name:"İş Pazarı",href:"/nakliyeci/jobs",icon:Ne,badge:o.pendingShipments>0?o.pendingShipments:void 0},{name:"Aktif Yükler",href:"/nakliyeci/active-shipments",icon:ke},{name:"Tekliflerim",href:"/nakliyeci/offers",icon:W},{name:"Taşıyıcı İlanlarım",href:"/nakliyeci/listings",icon:we},{name:"Taşıyıcılarım",href:"/nakliyeci/drivers",icon:C},{name:"Akıllı Rota",href:"/nakliyeci/route-planner",icon:Z}]},{title:"Analitik & Raporlar",items:[{name:"Analitik",href:"/nakliyeci/analytics",icon:Se}]},{title:"Finansal",items:[{name:"Cüzdan",href:"/nakliyeci/wallet",icon:ze}]},{title:"İletişim",items:[{name:"Mesajlar",href:"/nakliyeci/messages",icon:G,badge:o.newMessages>0?o.newMessages:void 0}]},{title:"Hesap & Ayarlar",items:[{name:"Ayarlar",href:"/nakliyeci/settings",icon:oe},{name:"Yardım ve Destek Merkezi",href:"/nakliyeci/help",icon:he}]}],h=e=>s.pathname===e;return Ot.jsxs(Ot.Fragment,{children:[x&&Ot.jsx("div",{className:"fixed top-4 left-4 z-50",children:Ot.jsx("button",{onClick:()=>i(!a),className:"w-12 h-12 bg-white rounded-xl shadow-lg border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-colors","aria-label":a?"Men?y? kapat":"Men?y? a?","aria-expanded":a,"data-testid":"mobile-menu-button",children:a?Ot.jsx(_,{className:"w-6 h-6"}):Ot.jsx(I,{className:"w-6 h-6"})})}),a&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>i(!1)}),Ot.jsxs("div",{"data-testid":"sidebar",className:`\n          fixed top-0 left-0 z-50 h-full \n          bg-gradient-to-b from-slate-50 to-white shadow-xl \n          flex flex-col border-r border-slate-200\n          transform transition-transform duration-300 ease-in-out\n          ${a?"translate-x-0":"-translate-x-full"}\n          ${x?"":"translate-x-0"}\n        `,style:{width:x?"320px":`${Math.min(256,Math.max(200,.25*r))}px`},children:[Ot.jsx("div",{className:"border-b border-slate-200 bg-white overflow-hidden flex items-center justify-between h-20 px-3",children:Ot.jsx(d,{to:"/nakliyeci/dashboard",className:"block focus:outline-none flex items-center justify-center",onClick:()=>i(!1),children:Ot.jsx(Da,{size:"xl",variant:"normal",showText:!1,className:"text-white"})})}),Ot.jsx("div",{className:"p-3 lg:p-4 border-b border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-50 rounded-lg p-2 lg:p-3 transition-colors",children:[Ot.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-sm lg:text-lg shadow-sm",children:Ot.jsx(xe,{className:"w-4 h-4 lg:w-6 lg:h-6"})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"text-xs lg:text-sm font-bold text-slate-900 truncate",children:(null==c?void 0:c.firstName)||(null==(t=null==c?void 0:c.fullName)?void 0:t.split(" ")[0])||(null==c?void 0:c.companyName)||"Kullan?c?"}),Ot.jsx("div",{className:"text-xs text-slate-500",children:(null==c?void 0:c.companyName)||"Nakliyeci Hesap"})]}),Ot.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"})]})}),Ot.jsx("nav",{className:"flex-1 px-3 lg:px-4 py-4 lg:py-6 space-y-4 lg:space-y-6 overflow-y-auto",children:u.map((e,t)=>Ot.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[Ot.jsx("div",{className:"px-2",children:Ot.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:e.title})}),Ot.jsx("div",{className:"space-y-1",children:e.items.map(e=>Ot.jsxs(d,{to:e.href,onClick:()=>i(!1),className:"flex items-center px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg transition-all duration-200 group "+(h(e.href)?"bg-gradient-to-r from-slate-800 to-blue-900 text-white shadow-md":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[Ot.jsx(e.icon,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 "+(h(e.href)?"text-white":"text-slate-400 group-hover:text-slate-600")}),Ot.jsx("span",{className:"flex-1 truncate",children:e.name}),e.badge&&e.badge>0&&Ot.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-bold rounded-full "+(h(e.href)?"bg-white text-slate-800":"bg-red-500 text-white"),children:e.badge>99?"99+":e.badge}),h(e.href)&&!e.badge&&Ot.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full flex-shrink-0"})]},e.name))})]},e.title))}),Ot.jsx("div",{className:"p-3 lg:p-4 border-t border-slate-200",children:Ot.jsxs("button",{onClick:e,className:"flex items-center w-full px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg text-slate-600 hover:bg-red-50 hover:text-red-700 transition-colors group",children:[Ot.jsx(pe,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 text-slate-400 group-hover:text-red-600"}),Ot.jsx("span",{className:"truncate",children:"Çıkış Yap"})]})})]})]})},Ni=()=>{const{logout:e}=sa(),[t,s]=l.useState(1024);l.useEffect(()=>{const e=()=>{s(window.innerWidth)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const a=t<=300?0:Math.min(256,Math.max(200,.25*t));return Ot.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",children:[Ot.jsx(vi,{onLogout:()=>{e()}}),Ot.jsx("main",{className:"overflow-auto bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",style:{width:`calc(100% - ${a}px)`,marginLeft:`${a}px`},children:Ot.jsx("div",{className:"min-h-full",children:Ot.jsx(x,{})})})]})},ki=({onLogout:e})=>{var t;const s=m(),[a,i]=l.useState(!1),[r,n]=l.useState(1024),{badgeCounts:o}=Al(),{user:c}=sa();l.useEffect(()=>{const e=()=>{const e=window.innerWidth;n(e),e>768&&i(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const x=r<=300;l.useEffect(()=>{i(!1)},[s.pathname]),l.useEffect(()=>{},[r,x]);const u=[{title:"Ana Menü",items:[{name:"Ana Sayfa",href:"/tasiyici/dashboard",icon:E},{name:"İş Pazarı",href:"/tasiyici/market",icon:T,badge:o.pendingShipments>0?o.pendingShipments:void 0},{name:"İşlerim",href:"/tasiyici/islerim",icon:R},{name:"Tamamlanan İşler",href:"/tasiyici/completed-jobs",icon:J},{name:"Mesajlar",href:"/tasiyici/messages",icon:G,badge:o.newMessages>0?o.newMessages:void 0},{name:"Ayarlar",href:"/tasiyici/settings",icon:oe},{name:"Yardım ve Destek Merkezi",href:"/tasiyici/help",icon:he}]}],h=e=>s.pathname===e;return Ot.jsxs(Ot.Fragment,{children:[x&&Ot.jsx("div",{className:"fixed top-4 left-4 z-50",children:Ot.jsx("button",{onClick:()=>i(!a),className:"w-12 h-12 bg-white rounded-xl shadow-lg border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-colors","aria-label":a?"Men?y? kapat":"Men?y? a?","aria-expanded":a,"data-testid":"mobile-menu-button",children:a?Ot.jsx(_,{className:"w-6 h-6"}):Ot.jsx(I,{className:"w-6 h-6"})})}),a&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>i(!1)}),Ot.jsxs("div",{"data-testid":"sidebar",className:`\n        fixed top-0 left-0 z-50 h-full \n        bg-gradient-to-b from-slate-50 to-white shadow-xl \n        flex flex-col border-r border-slate-200\n        transform transition-transform duration-300 ease-in-out\n        ${a?"translate-x-0":"-translate-x-full"}\n        ${x?"":"translate-x-0"}\n      `,style:{width:x?"320px":`${Math.min(256,Math.max(200,.25*r))}px`},children:[Ot.jsx("div",{className:"border-b border-slate-200 bg-white overflow-hidden flex items-center justify-between h-20 px-3",children:Ot.jsx(d,{to:"/tasiyici/dashboard",className:"block focus:outline-none flex items-center justify-center",onClick:()=>i(!1),children:Ot.jsx(Da,{size:"xl",variant:"normal",showText:!1,className:"text-white"})})}),Ot.jsx("div",{className:"p-3 lg:p-4 border-b border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-50 rounded-lg p-2 lg:p-3 transition-colors",children:[Ot.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-sm lg:text-lg shadow-sm",children:Ot.jsx(xe,{className:"w-4 h-4 lg:w-6 lg:h-6"})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"text-xs lg:text-sm font-bold text-slate-900 truncate",children:(null==c?void 0:c.firstName)||(null==(t=null==c?void 0:c.fullName)?void 0:t.split(" ")[0])||"Kullan?c?"}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Taşıyıcı Hesap"})]}),Ot.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"})]})}),Ot.jsx("nav",{className:"flex-1 px-3 lg:px-4 py-4 lg:py-6 space-y-4 lg:space-y-6 overflow-y-auto",children:u.map((e,t)=>Ot.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[Ot.jsx("div",{className:"px-2",children:Ot.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:e.title})}),Ot.jsx("div",{className:"space-y-1",children:e.items.map(e=>Ot.jsxs(d,{to:e.href,onClick:()=>i(!1),className:"flex items-center px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg transition-all duration-200 group "+(h(e.href)?"bg-gradient-to-r from-slate-800 to-blue-900 text-white shadow-md":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[Ot.jsx(e.icon,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 "+(h(e.href)?"text-white":"text-slate-400 group-hover:text-slate-600")}),Ot.jsx("span",{className:"flex-1 truncate",children:e.name}),e.badge&&e.badge>0&&Ot.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-bold rounded-full "+(h(e.href)?"bg-white text-slate-800":"bg-red-500 text-white"),children:e.badge>99?"99+":e.badge}),h(e.href)&&!e.badge&&Ot.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full flex-shrink-0"})]},e.name))})]},e.title))}),Ot.jsx("div",{className:"p-3 lg:p-4 border-t border-slate-200",children:Ot.jsxs("button",{onClick:e,className:"flex items-center w-full px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg text-slate-600 hover:bg-red-50 hover:text-red-700 transition-colors group",children:[Ot.jsx(pe,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 text-slate-400 group-hover:text-red-600"}),Ot.jsx("span",{className:"truncate",children:"Çıkış Yap"})]})})]})]})},wi=()=>{const{logout:e}=sa(),[t,s]=l.useState(1024);l.useEffect(()=>{const e=()=>{s(window.innerWidth)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const a=t<=300?0:Math.min(256,Math.max(200,.25*t));return Ot.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",children:[Ot.jsx(ki,{onLogout:()=>{e()}}),Ot.jsx("main",{className:"overflow-auto bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900",style:{width:`calc(100% - ${a}px)`,marginLeft:`${a}px`},children:Ot.jsx("div",{className:"min-h-full",children:Ot.jsx(x,{})})})]})};function Si({children:e,userType:t,title:s}){const[a,l]=n.useState(!1);return Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsxs(Rs,{children:[Ot.jsxs("title",{children:[s," - YolNext"]}),Ot.jsx("meta",{name:"description",content:`YolNext ${t} mobil panel`})]}),Ot.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:Ot.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[Ot.jsx("button",{onClick:()=>l(!a),className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:a?Ot.jsx(_,{size:20}):Ot.jsx(I,{size:20})}),Ot.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:s}),Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("button",{className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:Ot.jsx(H,{size:20})}),Ot.jsx("button",{className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:Ot.jsx(xe,{size:20})})]})]})}),Ot.jsx("main",{className:"pb-20",children:e}),Ot.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2",children:Ot.jsxs("div",{className:"flex justify-around",children:[Ot.jsxs("button",{className:"flex flex-col items-center py-2 px-3 text-blue-600",children:[Ot.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:Ot.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full"})}),Ot.jsx("span",{className:"text-xs mt-1",children:"Ana Sayfa"})]}),Ot.jsxs("button",{className:"flex flex-col items-center py-2 px-3 text-gray-500",children:[Ot.jsx("div",{className:"w-6 h-6"}),Ot.jsx("span",{className:"text-xs mt-1",children:"Gönderiler"})]}),Ot.jsxs("button",{className:"flex flex-col items-center py-2 px-3 text-gray-500",children:[Ot.jsx("div",{className:"w-6 h-6"}),Ot.jsx("span",{className:"text-xs mt-1",children:"Mesajlar"})]}),Ot.jsxs("button",{className:"flex flex-col items-center py-2 px-3 text-gray-500",children:[Ot.jsx("div",{className:"w-6 h-6"}),Ot.jsx("span",{className:"text-xs mt-1",children:"Profil"})]})]})})]})}const zi=({children:e,requiredRole:t})=>{const{isAuthenticated:s,isLoading:a,user:l}=sa(),i=m();if(a||s&&!l)return Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:Ot.jsx(Pl,{message:"Kimlik doğrulanıyor..."})});if(!s)return Ot.jsx(u,{to:"/login",state:{from:i},replace:!0});if(t&&(null==l?void 0:l.role)!==t){const e={individual:"/individual/dashboard",corporate:"/corporate/dashboard",nakliyeci:"/nakliyeci/dashboard",tasiyici:"/tasiyici/dashboard"}[null==l?void 0:l.role]||"/";return Ot.jsx(u,{to:e,replace:!0})}return Ot.jsx(Ot.Fragment,{children:e})},Ti=({children:e})=>{const{isAuthenticated:t,isLoading:s,user:a}=sa(),l=m();return s?Ot.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ot.jsx(Pl,{message:"Kimlik doğrulanıyor..."})}):t?"admin"!==(null==a?void 0:a.role)&&"admin"!==(null==a?void 0:a.panel_type)?Ot.jsx(u,{to:"/",replace:!0}):Ot.jsx(Ot.Fragment,{children:e}):Ot.jsx(u,{to:`${Aa()}/login`,state:{from:l},replace:!0})},Ci=({onLogout:e})=>{const t=m(),[s,a]=l.useState(!1),{user:i}=sa(),r=Aa(),n=[{title:"Merkez",items:[{name:"Dashboard",href:`${r}/dashboard`,icon:Te},{name:"Operasyon Masası",href:`${r}/ops`,icon:U}]},{title:"Yönetim",items:[{name:"Kullanıcılar",href:`${r}/users`,icon:C},{name:"Vakalar",href:`${r}/cases`,icon:W},{name:"Şikayetler",href:`${r}/complaints`,icon:f},{name:"Destek",href:`${r}/support`,icon:G},{name:"Sistem",href:`${r}/system`,icon:ke}]}],o=e=>t.pathname===e;return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:Ot.jsx("button",{onClick:()=>a(!s),className:"w-12 h-12 bg-white rounded-xl shadow-lg border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors","aria-label":s?"Menüyü kapat":"Menüyü aç","aria-expanded":s,children:s?Ot.jsx(_,{className:"w-6 h-6"}):Ot.jsx(I,{className:"w-6 h-6"})})}),s&&Ot.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>a(!1)}),Ot.jsxs("div",{className:`\n          fixed lg:static top-0 left-0 z-50 h-full w-80 lg:w-64\n          bg-gradient-to-b from-slate-50 to-white shadow-xl\n          flex flex-col border-r border-gray-200\n          transform transition-transform duration-300 ease-in-out\n          ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}\n        `,children:[Ot.jsx("div",{className:"border-b border-gray-200 bg-white overflow-hidden flex items-center justify-center h-24 px-2",children:Ot.jsx(d,{to:`${r}/ops`,className:"block focus:outline-none flex items-center justify-center",onClick:()=>a(!1),children:Ot.jsx(Da,{size:"xl",variant:"normal",showText:!1,className:"text-white"})})}),Ot.jsx("div",{className:"p-3 lg:p-4 border-b border-gray-200",children:Ot.jsxs("div",{className:"flex items-center gap-3 hover:bg-gray-50 rounded-lg p-2 lg:p-3 transition-colors",children:[Ot.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white shadow-sm",children:Ot.jsx(U,{className:"w-4 h-4 lg:w-6 lg:h-6"})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"text-xs lg:text-sm font-bold text-slate-900 truncate",children:(null==i?void 0:i.fullName)||(null==i?void 0:i.email)||"Admin"}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Yönetici"})]})]})}),Ot.jsx("nav",{className:"flex-1 px-3 lg:px-4 py-4 lg:py-6 space-y-4 lg:space-y-6 overflow-y-auto custom-scrollbar",children:n.map(e=>Ot.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[Ot.jsx("div",{className:"px-2",children:Ot.jsx("h3",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider",children:e.title})}),Ot.jsx("div",{className:"space-y-1",children:e.items.map(e=>Ot.jsxs(d,{to:e.href,onClick:()=>a(!1),className:"flex items-center px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg transition-all duration-200 group "+(o(e.href)?"bg-gradient-to-r from-slate-800 to-blue-900 text-white shadow-md":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[Ot.jsx(e.icon,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 "+(o(e.href)?"text-white":"text-slate-400 group-hover:text-slate-600")}),Ot.jsx("span",{className:"flex-1 truncate",children:e.name}),o(e.href)&&Ot.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full flex-shrink-0"})]},e.name))})]},e.title))}),Ot.jsx("div",{className:"p-3 lg:p-4 border-t border-gray-200",children:Ot.jsxs("button",{onClick:e,className:"flex items-center w-full px-2 lg:px-3 py-2 lg:py-3 text-xs lg:text-sm font-medium rounded-lg text-slate-600 hover:bg-red-50 hover:text-red-700 transition-colors group",children:[Ot.jsx(pe,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2 lg:mr-3 text-slate-400 group-hover:text-red-600"}),Ot.jsx("span",{className:"truncate",children:"Çıkış Yap"})]})})]})]})},Ai=()=>{const{logout:e}=sa(),t=o();return Ot.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[Ot.jsx(Ci,{onLogout:()=>{e(),t("/login",{replace:!0})}}),Ot.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[Ot.jsx("div",{className:"sticky top-0 z-30 bg-white/85 backdrop-blur-md border-b border-gray-200",children:Ot.jsx("div",{className:"container-custom py-4",children:Ot.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3 lg:gap-4",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 uppercase tracking-wider mb-2",children:"Komut Araması"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),Ot.jsx("input",{className:"input pl-10",placeholder:"email / userId / adminRef / shipmentId",onKeyDown:e=>{if("Enter"===e.key){const s=(e.currentTarget.value||"").trim();if(!s)return;t(`${Aa()}/ops?focus=${encodeURIComponent(s)}`)}}})]}),Ot.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Enter: Operasyon Masası’nda odakla"})]}),Ot.jsx("div",{className:"flex items-center justify-between lg:justify-end gap-3",children:Ot.jsx("div",{className:"text-xs font-semibold text-gray-500 whitespace-nowrap",children:"07:00–18:00"})})]})})}),Ot.jsx("main",{className:"flex-1",children:Ot.jsx(x,{})})]})]})};function Di({className:e}){const t=l.useMemo(()=>Ba(),[]),[s,a]=l.useState(!t),[i,r]=l.useState(!1),[n,o]=l.useState(Boolean(null==t?void 0:t.analytics));if(l.useEffect(()=>{try{if("undefined"==typeof document)return;const e=document.documentElement;if(!e)return;return s?e.classList.add("yolnext-cookie-open"):e.classList.remove("yolnext-cookie-open"),()=>e.classList.remove("yolnext-cookie-open")}catch{}},[s]),l.useEffect(()=>{const e=()=>{const e=Ba();o(Boolean(null==e?void 0:e.analytics)),r(!0),a(!0)};return window.addEventListener("yolnext:cookie-preferences",e),()=>{window.removeEventListener("yolnext:cookie-preferences",e)}},[]),!s)return null;const c=async e=>{try{await il("/kvkk/cookie-consent",{analytics:Boolean(e),version:$a})}catch{}},m=()=>{Ra({analytics:!1}),c(!1),a(!1)};return Ot.jsx("div",{className:e||"fixed bottom-0 left-0 right-0 z-[60] bg-slate-900 text-white border-t border-slate-800",role:"dialog","aria-label":"Çerez tercihleri",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:Ot.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-sm font-semibold",children:"Çerez Tercihleri"}),Ot.jsxs("div",{className:"text-xs text-slate-300 mt-1",children:["Zorunlu çerezler platformun çalışması için gereklidir. Analitik çerezleri, ürünü geliştirmek için kullanım istatistikleri toplar. Tercihlerinizi istediğiniz zaman güncelleyebilirsiniz.",Ot.jsxs("span",{className:"ml-2",children:[Ot.jsx(d,{to:"/cookie-policy",className:"underline text-white",children:"Çerez Politikası"}),Ot.jsx("span",{className:"mx-2 text-slate-500",children:"|"}),Ot.jsx(d,{to:"/privacy",className:"underline text-white",children:"Gizlilik Politikası"})]})]})]}),i?Ot.jsxs("div",{className:"w-full md:w-[420px] bg-slate-800 rounded-xl p-4 border border-slate-700",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-bold",children:"Tercihler"}),Ot.jsx("div",{className:"text-xs text-slate-300 mt-1",children:"Zorunlu çerezler kapatılamaz. Analitik tercihini seçebilirsiniz."})]}),Ot.jsx("button",{type:"button",className:"p-2 rounded-lg hover:bg-slate-700","aria-label":"Tercihleri kapat",onClick:()=>r(!1),children:Ot.jsx(_,{className:"w-4 h-4"})})]}),Ot.jsxs("div",{className:"mt-4 space-y-3",children:[Ot.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-semibold",children:"Zorunlu"}),Ot.jsx("div",{className:"text-xs text-slate-300",children:"Giriş, güvenlik ve oturum için gerekli."})]}),Ot.jsx("div",{className:"text-xs font-bold text-emerald-300",children:"Açık"})]}),Ot.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-semibold",children:"Analitik"}),Ot.jsx("div",{className:"text-xs text-slate-300",children:"Kullanım istatistikleri ve A/B testleri."})]}),Ot.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Ot.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n,onChange:e=>o(e.target.checked)}),Ot.jsx("div",{className:"w-11 h-6 bg-slate-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),Ot.jsxs("div",{className:"flex gap-2 pt-2",children:[Ot.jsx("button",{type:"button",onClick:()=>{Ra({analytics:n}),c(n),a(!1)},className:"flex-1 px-4 py-2 rounded-lg bg-white text-slate-900 hover:bg-slate-100 text-sm font-semibold",children:"Kaydet"}),Ot.jsx("button",{type:"button",onClick:()=>{m()},className:"px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-sm font-semibold",children:"Reddet"})]})]})]}):Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[Ot.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-sm font-semibold",children:"Sadece Zorunlu"}),Ot.jsx("button",{type:"button",onClick:()=>{Ra({analytics:!0}),c(!0),a(!1)},className:"px-4 py-2 rounded-lg bg-white text-slate-900 hover:bg-slate-100 text-sm font-semibold",children:"Hepsini Kabul Et"}),Ot.jsxs("button",{type:"button",onClick:()=>r(!0),className:"px-4 py-2 rounded-lg bg-transparent border border-slate-700 hover:border-slate-500 text-sm font-semibold inline-flex items-center justify-center gap-2",children:[Ot.jsx(Ce,{className:"w-4 h-4"}),"Tercihler"]}),Ot.jsx("button",{type:"button",onClick:()=>{m()},className:"p-2 rounded-lg hover:bg-slate-800 self-start sm:self-auto","aria-label":"Kapat",children:Ot.jsx(_,{className:"w-4 h-4"})})]})]})})})}const Ei=()=>{const[e,t]=l.useState(1),[s,a]=l.useState([]),[i,r]=l.useState(""),n=[{id:1,title:"Hoş Geldiniz!",description:"YolNext platformuna hoş geldiniz. Size en uygun hesap türünü seçin.",icon:Ot.jsx(xe,{className:"w-8 h-8"}),content:Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Hesap Türünüzü Seçin"}),Ot.jsx("p",{className:"text-gray-600",children:"Size en uygun hesap türünü seçerek başlayın"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsx("button",{onClick:()=>r("individual"),className:"p-6 rounded-xl border-2 transition-all duration-300 "+("individual"===i?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:Ot.jsxs("div",{className:"flex items-center space-x-4",children:[Ot.jsx(xe,{className:"w-8 h-8 text-blue-600"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bireysel"}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"Kişisel gönderileriniz için"})]})]})}),Ot.jsx("button",{onClick:()=>r("corporate"),className:"p-6 rounded-xl border-2 transition-all duration-300 "+("corporate"===i?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"),children:Ot.jsxs("div",{className:"flex items-center space-x-4",children:[Ot.jsx(A,{className:"w-8 h-8 text-green-600"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kurumsal"}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"Şirket gönderileriniz için"})]})]})}),Ot.jsx("button",{onClick:()=>r("carrier"),className:"p-6 rounded-xl border-2 transition-all duration-300 "+("carrier"===i?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"),children:Ot.jsxs("div",{className:"flex items-center space-x-4",children:[Ot.jsx(E,{className:"w-8 h-8 text-purple-600"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nakliyeci"}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"Taşımacılık hizmeti verin"})]})]})}),Ot.jsx("button",{onClick:()=>r("driver"),className:"p-6 rounded-xl border-2 transition-all duration-300 "+("driver"===i?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"),children:Ot.jsxs("div",{className:"flex items-center space-x-4",children:[Ot.jsx(R,{className:"w-8 h-8 text-orange-600"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Taşıyıcı"}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"Bireysel taşımacılık"})]})]})})]})]})},{id:2,title:"Profil Bilgileri",description:"Temel bilgilerinizi girin",icon:Ot.jsx(xe,{className:"w-8 h-8"}),content:Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Profil Bilgileriniz"}),Ot.jsx("p",{className:"text-gray-600",children:"Hesabınızı oluşturmak için gerekli bilgileri girin"})]}),Ot.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),Ot.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adınızı ve soyadınızı girin"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),Ot.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ornek@email.com"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon"}),Ot.jsx("input",{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+90 5XX XXX XX XX"})]}),"corporate"===i&&Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şirket Adı"}),Ot.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şirket adınızı girin"})]})]})]})},{id:3,title:"Hesap Oluşturuldu",description:"Hesabınız başarıyla oluşturuldu!",icon:Ot.jsx(J,{className:"w-8 h-8"}),content:Ot.jsxs("div",{className:"text-center space-y-6",children:[Ot.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:Ot.jsx(J,{className:"w-10 h-10 text-green-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tebrikler!"}),Ot.jsxs("p",{className:"text-gray-600 mb-6",children:["individual"===i&&"Bireysel hesabınız başarıyla oluşturuldu.","corporate"===i&&"Kurumsal hesabınız başarıyla oluşturuldu.","carrier"===i&&"Nakliyeci hesabınız başarıyla oluşturuldu.","driver"===i&&"Taşıyıcı hesabınız başarıyla oluşturuldu."]}),Ot.jsx("p",{className:"text-sm text-gray-500",children:"Artık platformumuzun tüm özelliklerini kullanabilirsiniz."})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("button",{className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-6 rounded-lg font-medium hover:from-blue-900 hover:to-slate-800 transition-colors",children:"Dashboard'a Git"}),Ot.jsx("button",{className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Profili Düzenle"})]})]})}],d=n.find(t=>t.id===e);return Ot.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Ot.jsxs("div",{className:"max-w-4xl w-full",children:[Ot.jsx("div",{className:"mb-8",children:Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:n.map((t,a)=>Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(s.includes(t.id)?"bg-green-500 text-white":e===t.id?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"),children:s.includes(t.id)?Ot.jsx(J,{className:"w-6 h-6"}):Ot.jsx("span",{className:"font-semibold",children:t.id})}),a<n.length-1&&Ot.jsx("div",{className:"w-16 h-1 mx-2 "+(s.includes(t.id)?"bg-green-500":"bg-gray-200")})]},t.id))})}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:null==d?void 0:d.icon}),Ot.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:null==d?void 0:d.title}),Ot.jsx("p",{className:"text-gray-600",children:null==d?void 0:d.description})]}),null==d?void 0:d.content,Ot.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[Ot.jsxs("button",{onClick:()=>{e>1&&t(e-1)},disabled:1===e,className:"flex items-center px-6 py-3 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[Ot.jsx(re,{className:"w-4 h-4 mr-2"}),"Geri"]}),e===n.length?Ot.jsxs("button",{onClick:()=>{window.location.href="/dashboard"},className:"flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:["Tamamla",Ot.jsx(J,{className:"w-4 h-4 ml-2"})]}):Ot.jsxs("button",{onClick:()=>{e<n.length&&(a([...s,e]),t(e+1))},disabled:1===e&&!i,className:"flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["İleri",Ot.jsx(K,{className:"w-4 h-4 ml-2"})]})]})]})]})})},_i=()=>{const[e,t]=l.useState({from:"",to:"",weight:"",volume:"",category:"",urgency:"normal",specialHandling:!1}),[s,a]=l.useState(null),[i,r]=l.useState(!1),n=[{id:"house_move",name:"Ev Taşıma",basePrice:500},{id:"furniture",name:"Mobilya",basePrice:300},{id:"electronics",name:"Elektronik",basePrice:200},{id:"documents",name:"Doküman",basePrice:50},{id:"vehicle",name:"Araç",basePrice:1e3},{id:"other",name:"Diğer",basePrice:150}],d=[{id:"normal",name:"Normal",multiplier:1},{id:"urgent",name:"Acil",multiplier:1.5},{id:"express",name:"Ekspres",multiplier:2}],o=(e,s)=>{t(t=>({...t,[e]:s}))};return Ot.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ot.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-center mb-4",children:[Ot.jsx(Ae,{className:"w-8 h-8 text-blue-600 mr-3"}),Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Maliyet Hesaplayıcı"})]}),Ot.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Gönderinizin maliyetini hesaplayın. Mesafe, ağırlık, kategori ve diğer faktörlere göre tahmini fiyat alın."})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[Ot.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Gönderi Bilgileri"}),Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Nereden"]}),Ot.jsx("input",{type:"text",value:e.from,onChange:e=>o("from",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Alış şehri"})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Nereye"]}),Ot.jsx("input",{type:"text",value:e.to,onChange:e=>o("to",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Teslim şehri"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(R,{className:"w-4 h-4 inline mr-2"}),"Ağırlık (kg)"]}),Ot.jsx("input",{type:"number",value:e.weight,onChange:e=>o("weight",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.1"})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(R,{className:"w-4 h-4 inline mr-2"}),"Hacim (m³)"]}),Ot.jsx("input",{type:"number",value:e.volume,onChange:e=>o("volume",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.1"})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(E,{className:"w-4 h-4 inline mr-2"}),"Kategori"]}),Ot.jsxs("select",{value:e.category,onChange:e=>o("category",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ot.jsx("option",{value:"",children:"Kategori seçin"}),n.map(e=>Ot.jsxs("option",{value:e.id,children:[e.name," (₺",e.basePrice," başlangıç)"]},e.id))]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx($,{className:"w-4 h-4 inline mr-2"}),"Aciliyet"]}),Ot.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(t=>Ot.jsxs("button",{onClick:()=>o("urgency",t.id),className:"p-3 rounded-lg border-2 transition-all "+(e.urgency===t.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[Ot.jsx("div",{className:"text-sm font-medium",children:t.name}),Ot.jsxs("div",{className:"text-xs text-gray-500",children:["x",t.multiplier]})]},t.id))})]}),Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("input",{type:"checkbox",id:"specialHandling",checked:e.specialHandling,onChange:e=>o("specialHandling",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"specialHandling",className:"ml-3 text-sm text-gray-700",children:"Özel Taşıma (+%20)"})]})}),Ot.jsx("button",{onClick:async()=>{var t;r(!0),await new Promise(e=>setTimeout(e,1500));const s=n.find(t=>t.id===e.category);if(!s)return;const l=s.basePrice,i=parseFloat(e.weight)||0;parseFloat(e.volume);const o=500*Math.random()+50,c=Math.max(1,o/100),m=Math.max(1,i/10),x=(null==(t=d.find(t=>t.id===e.urgency))?void 0:t.multiplier)||1,u=e.specialHandling?.2*l:0;a({basePrice:l,distanceMultiplier:c,weightMultiplier:m,urgencyMultiplier:x,totalPrice:l*c*m*x+u,breakdown:{base:l,distance:l*(c-1),weight:l*(m-1),urgency:l*(x-1)}}),r(!1)},disabled:!e.from||!e.to||!e.category||i,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-4 px-6 rounded-lg font-medium hover:from-blue-900 hover:to-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:i?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Hesaplanıyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ae,{className:"w-5 h-5 mr-2"}),"Maliyet Hesapla"]})})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[Ot.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Hesaplama Sonucu"}),s?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["₺",s.totalPrice.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),Ot.jsx("div",{className:"text-gray-600",children:"Tahmini Toplam Maliyet"})]})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Maliyet Dağılımı"}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Temel Fiyat"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.base.toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Mesafe Katkısı"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.distance.toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Ağırlık Katkısı"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.weight.toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Aciliyet Katkısı"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.urgency.toFixed(2)]})]}),e.specialHandling&&Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Özel Taşıma"}),Ot.jsxs("span",{className:"font-medium",children:["₺",(.2*s.totalPrice).toFixed(2)]})]})]})]}),Ot.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(ve,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),Ot.jsxs("div",{className:"text-sm text-yellow-800",children:[Ot.jsx("p",{className:"font-medium mb-1",children:"Önemli Not:"}),Ot.jsx("p",{children:"Bu hesaplama tahminidir. Kesin fiyat, nakliyeci teklifleri alındıktan sonra belirlenir."})]})]})})]}):Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(Ae,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Hesaplama Yapın"}),Ot.jsx("p",{className:"text-gray-500",children:"Sol taraftaki formu doldurarak maliyet hesaplaması yapabilirsiniz."})]})]})]})]})})},Ii=()=>{const[e,t]=l.useState("all"),[s,a]=l.useState(""),[i,r]=l.useState(null),n=[{id:"all",name:"Tümü",count:12},{id:"ecommerce",name:"E-ticaret",count:4},{id:"manufacturing",name:"Üretim",count:3},{id:"retail",name:"Perakende",count:2},{id:"logistics",name:"Lojistik",count:3}],d=[{id:1,title:"E-ticaret Devinin Lojistik Optimizasyonu",company:"TechStore Türkiye",category:"ecommerce",challenge:"Günlük 10,000+ siparişin hızlı ve güvenli teslimatı. Müşteri memnuniyetinin düşmesi ve maliyetlerin artması.",solution:"YolNext platformu ile 50+ nakliyeci ağı kuruldu. Otomatik rota optimizasyonu ve gerçek zamanlı takip sistemi entegre edildi.",results:{costSavings:35,timeReduction:50,satisfaction:95},image:"/api/placeholder/400/250",tags:["E-ticaret","Optimizasyon","Maliyet Tasarrufu"],featured:!0},{id:2,title:"Üretim Şirketinin Tedarik Zinciri Dönüşümü",company:"MetalPro A.Ş.",category:"manufacturing",challenge:"Hammadde tedarikinde gecikmeler ve yüksek lojistik maliyetleri. Tedarikçi çeşitliliğinin az olması.",solution:"Platform üzerinden geniş nakliyeci ağına erişim. Dinamik fiyatlandırma ve kalite garantili hizmet.",results:{costSavings:28,timeReduction:40,satisfaction:92},image:"/api/placeholder/400/250",tags:["Üretim","Tedarik Zinciri","Kalite"],featured:!0},{id:3,title:"Perakende Zincirinin Dağıtım Ağı Genişletmesi",company:"MarketChain",category:"retail",challenge:"Yeni şehirlere genişleme sürecinde lojistik altyapı eksikliği. Hızlı ve güvenilir dağıtım ihtiyacı.",solution:"YolNext ile yerel nakliyeci ortaklıkları kuruldu. Merkezi yönetim sistemi ile tüm operasyonlar tek noktadan kontrol edildi.",results:{costSavings:42,timeReduction:60,satisfaction:98},image:"/api/placeholder/400/250",tags:["Perakende","Genişleme","Merkezi Yönetim"],featured:!1},{id:4,title:"Lojistik Şirketinin Dijital Dönüşümü",company:"FastLog Lojistik",category:"logistics",challenge:"Geleneksel yöntemlerle müşteri memnuniyetinin düşmesi. Operasyonel verimliliğin artırılması ihtiyacı.",solution:"YolNext platformuna entegrasyon ile dijital süreçler. Otomatik iş akışları ve müşteri self-servis portalı.",results:{costSavings:25,timeReduction:35,satisfaction:90},image:"/api/placeholder/400/250",tags:["Dijital Dönüşüm","Verimlilik","Müşteri Deneyimi"],featured:!1}],o=d.filter(t=>{const a="all"===e||t.category===e,l=t.title.toLowerCase().includes(s.toLowerCase())||t.company.toLowerCase().includes(s.toLowerCase())||t.tags.some(e=>e.toLowerCase().includes(s.toLowerCase()));return a&&l}),c=d.filter(e=>e.featured);return Ot.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Başarı Hikayeleri"}),Ot.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"YolNext platformunu kullanan şirketlerin gerçek dönüşüm hikayelerini keşfedin. Nasıl maliyet tasarrufu sağladıklarını ve operasyonlarını nasıl optimize ettiklerini öğrenin."})]}),Ot.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:Ot.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[Ot.jsx("div",{className:"flex-1",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Ot.jsx("input",{type:"text",placeholder:"Vaka çalışması ara...",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),Ot.jsx("div",{className:"flex gap-2",children:n.map(s=>Ot.jsxs("button",{onClick:()=>t(s.id),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(e===s.id?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.name," (",s.count,")"]},s.id))})]})}),Ot.jsxs("div",{className:"mb-12",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Öne Çıkan Vakalar"}),Ot.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:c.map(e=>{var t;return Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-shadow",children:[Ot.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:Ot.jsx(R,{className:"w-16 h-16 text-white"})}),Ot.jsxs("div",{className:"p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:null==(t=n.find(t=>t.id===e.category))?void 0:t.name}),Ot.jsxs("div",{className:"flex items-center text-yellow-500",children:[Ot.jsx(O,{className:"w-4 h-4 fill-current"}),Ot.jsx("span",{className:"ml-1 text-sm font-medium",children:"Öne Çıkan"})]})]}),Ot.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),Ot.jsx("p",{className:"text-gray-600 mb-4",children:e.company}),Ot.jsxs("div",{className:"space-y-3 mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Zorluk:"}),Ot.jsx("p",{className:"text-sm text-gray-600",children:e.challenge})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Çözüm:"}),Ot.jsx("p",{className:"text-sm text-gray-600",children:e.solution})]})]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["%",e.results.costSavings]}),Ot.jsx("div",{className:"text-xs text-gray-500",children:"Maliyet Tasarrufu"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["%",e.results.timeReduction]}),Ot.jsx("div",{className:"text-xs text-gray-500",children:"Zaman Tasarrufu"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["%",e.results.satisfaction]}),Ot.jsx("div",{className:"text-xs text-gray-500",children:"Memnuniyet"})]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map(e=>Ot.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e},e))}),Ot.jsxs("button",{onClick:()=>r(e),className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-2 px-4 rounded-lg font-medium hover:from-blue-900 hover:to-slate-800 transition-colors flex items-center justify-center",children:["Detayları Gör",Ot.jsx(K,{className:"w-4 h-4 ml-2"})]})]})]},e.id)})})]}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Tüm Vaka Çalışmaları"}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{var t;return Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[Ot.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-400 to-gray-600 flex items-center justify-center",children:Ot.jsx(E,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{className:"p-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:null==(t=n.find(t=>t.id===e.category))?void 0:t.name}),e.featured&&Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-current"})]}),Ot.jsx("h3",{className:"font-bold text-gray-900 mb-1 text-sm",children:e.title}),Ot.jsx("p",{className:"text-gray-600 text-xs mb-3",children:e.company}),Ot.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-3",children:[Ot.jsxs("span",{children:["%",e.results.costSavings," tasarruf"]}),Ot.jsxs("span",{children:["%",e.results.satisfaction," memnuniyet"]})]}),Ot.jsx("button",{onClick:()=>r(e),className:"w-full text-blue-600 text-xs font-medium hover:text-blue-700 transition-colors",children:"Detayları Gör →"})]})]},e.id)})})]}),i&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Ot.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:Ot.jsxs("div",{className:"p-6",children:[Ot.jsxs("div",{className:"flex justify-between items-start mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:i.title}),Ot.jsx("p",{className:"text-gray-600",children:i.company})]}),Ot.jsx("button",{onClick:()=>r(null),className:"text-gray-400 hover:text-gray-600",children:Ot.jsx(ie,{className:"w-6 h-6"})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Zorluk"}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:i.challenge}),Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Çözüm"}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:i.solution})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Sonuçlar"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx($,{className:"w-5 h-5 text-green-600 mr-3"}),Ot.jsx("span",{className:"font-medium",children:"Maliyet Tasarrufu"})]}),Ot.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["%",i.results.costSavings]})]}),Ot.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(L,{className:"w-5 h-5 text-blue-600 mr-3"}),Ot.jsx("span",{className:"font-medium",children:"Zaman Tasarrufu"})]}),Ot.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["%",i.results.timeReduction]})]}),Ot.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(C,{className:"w-5 h-5 text-purple-600 mr-3"}),Ot.jsx("span",{className:"font-medium",children:"Müşteri Memnuniyeti"})]}),Ot.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:["%",i.results.satisfaction]})]})]}),Ot.jsxs("div",{className:"mt-6",children:[Ot.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Etiketler"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(e=>Ot.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:e},e))})]})]})]})]})})})]})})},Ki=()=>{const[e,t]=l.useState({amount:"",userType:"individual",paymentMethod:"credit_card",isPremium:!1,volume:""}),[s,a]=l.useState(null),[i,r]=l.useState(!1),n=[{id:"individual",name:"Bireysel",baseRate:.08},{id:"corporate",name:"Kurumsal",baseRate:.06},{id:"carrier",name:"Nakliyeci",baseRate:.05},{id:"driver",name:"Taşıyıcı",baseRate:.03}],d=[{id:"credit_card",name:"Kredi Kartı",fee:.025},{id:"bank_transfer",name:"Banka Havalesi",fee:.015},{id:"wallet",name:"Cüzdan",fee:.01},{id:"cash",name:"Nakit",fee:.02}],o=(e,s)=>{t(t=>({...t,[e]:s}))};return Ot.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ot.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-center mb-4",children:[Ot.jsx(Ae,{className:"w-8 h-8 text-green-600 mr-3"}),Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Komisyon Hesaplayıcı"})]}),Ot.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Platform komisyonlarını hesaplayın. Kullanıcı türü, ödeme yöntemi ve diğer faktörlere göre net kazancınızı görün."})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[Ot.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Hesaplama Bilgileri"}),Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx($,{className:"w-4 h-4 inline mr-2"}),"İşlem Tutarı (₺)"]}),Ot.jsx("input",{type:"number",value:e.amount,onChange:e=>o("amount",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0.00",min:"0",step:"0.01"})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(C,{className:"w-4 h-4 inline mr-2"}),"Kullanıcı Türü"]}),Ot.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map(t=>Ot.jsxs("button",{onClick:()=>o("userType",t.id),className:"p-4 rounded-lg border-2 transition-all text-left "+(e.userType===t.id?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"),children:[Ot.jsx("div",{className:"font-medium",children:t.name}),Ot.jsxs("div",{className:"text-sm text-gray-500",children:["%",(100*t.baseRate).toFixed(1)," komisyon"]})]},t.id))})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(De,{className:"w-4 h-4 inline mr-2"}),"Ödeme Yöntemi"]}),Ot.jsx("div",{className:"space-y-2",children:d.map(t=>Ot.jsx("button",{onClick:()=>o("paymentMethod",t.id),className:"w-full p-3 rounded-lg border-2 transition-all text-left "+(e.paymentMethod===t.id?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"),children:Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"font-medium",children:t.name}),Ot.jsxs("span",{className:"text-sm text-gray-500",children:["%",(100*t.fee).toFixed(1)]})]})},t.id))})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ot.jsx(M,{className:"w-4 h-4 inline mr-2"}),"Aylık İşlem Hacmi (₺)"]}),Ot.jsx("input",{type:"number",value:e.volume,onChange:e=>o("volume",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0",min:"0"}),Ot.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Yüksek hacimli kullanıcılar için indirim uygulanır"})]}),Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("input",{type:"checkbox",id:"isPremium",checked:e.isPremium,onChange:e=>o("isPremium",e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),Ot.jsx("label",{htmlFor:"isPremium",className:"ml-3 text-sm text-gray-700",children:"Premium Üyelik (%15 indirim)"})]}),Ot.jsx("button",{onClick:async()=>{r(!0),await new Promise(e=>setTimeout(e,1e3));const t=parseFloat(e.amount)||0,s=parseFloat(e.volume)||0;if(t<=0)return;const l=n.find(t=>t.id===e.userType),i=d.find(t=>t.id===e.paymentMethod);if(!l||!i)return;let o=l.baseRate;s>100?o*=.8:s>50&&(o*=.9),e.isPremium&&(o*=.85);const c=t*i.fee,m=t*o,x=.01*t,u=m+c+x;a({baseAmount:t,commissionRate:100*o,commissionAmount:u,netAmount:t-u,breakdown:{platformFee:m,processingFee:c,serviceFee:x}}),r(!1)},disabled:!e.amount||parseFloat(e.amount)<=0||i,className:"w-full bg-green-600 text-white py-4 px-6 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:i?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Hesaplanıyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ae,{className:"w-5 h-5 mr-2"}),"Komisyon Hesapla"]})})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[Ot.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Hesaplama Sonucu"}),s?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["₺",s.netAmount.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),Ot.jsx("div",{className:"text-gray-600",children:"Net Kazanç"})]})}),Ot.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Ot.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Komisyon Özeti"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"text-gray-600",children:"İşlem Tutarı"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.baseAmount.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"text-gray-600",children:"Komisyon Oranı"}),Ot.jsxs("span",{className:"font-medium",children:["%",s.commissionRate.toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[Ot.jsx("span",{children:"Toplam Komisyon"}),Ot.jsxs("span",{className:"font-medium",children:["-₺",s.commissionAmount.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Komisyon Dağılımı"}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Platform Komisyonu"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.platformFee.toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Ödeme İşlem Ücreti"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.processingFee.toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[Ot.jsx("span",{className:"text-gray-600",children:"Hizmet Ücreti"}),Ot.jsxs("span",{className:"font-medium",children:["₺",s.breakdown.serviceFee.toFixed(2)]})]})]})]}),(e.isPremium||parseFloat(e.volume)>50)&&Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(ve,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),Ot.jsxs("div",{className:"text-sm text-blue-800",children:[Ot.jsx("p",{className:"font-medium mb-1",children:"İndirim Uygulandı!"}),Ot.jsxs("p",{children:[e.isPremium&&"Premium üyelik indirimi uygulandı. ",parseFloat(e.volume)>50&&"Yüksek hacim indirimi uygulandı."]})]})]})}),Ot.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx(ve,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),Ot.jsxs("div",{className:"text-sm text-yellow-800",children:[Ot.jsx("p",{className:"font-medium mb-1",children:"Önemli Not:"}),Ot.jsx("p",{children:"Komisyon oranları değişebilir. Güncel oranlar için müşteri hizmetleri ile iletişime geçin."})]})]})})]}):Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(Ae,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Hesaplama Yapın"}),Ot.jsx("p",{className:"text-gray-500",children:"Sol taraftaki formu doldurarak komisyon hesaplaması yapabilirsiniz."})]})]})]})]})})},Mi=({userId:e,userType:t,averageRating:s=0,totalRatings:a=0,isVerified:l=!1,completedJobs:i=0,successRate:r=0,className:n=""})=>{const d=(()=>{let e=0;if(l&&(e+=20),a>0&&s>0){e+=s/5*30+Math.min(a/10,10)}if(i>0){e+=Math.min(i/10,20)+r/100*5}return e+=5,Math.min(Math.round(e),100)})(),o=(c=d)>=80?{level:"Çok Güvenilir",color:"text-green-700 bg-green-100 border-green-200",description:"Yüksek deneyim ve mükemmel geçmiş"}:c>=60?{level:"Güvenilir",color:"text-blue-700 bg-blue-100 border-blue-200",description:"İyi deneyim ve olumlu geçmiş"}:c>=40?{level:"Orta Güven",color:"text-yellow-700 bg-yellow-100 border-yellow-200",description:"Sınırlı deneyim, dikkatli değerlendirin"}:c>=20?{level:"Düşük Güven",color:"text-orange-700 bg-orange-100 border-orange-200",description:"Az deneyim, extra dikkat gerekli"}:{level:"Yeni Kullanıcı",color:"text-gray-700 bg-gray-100 border-gray-200",description:"Henüz yeterli işlem geçmişi yok"};var c;return Ot.jsxs("div",{className:`bg-white rounded-lg border border-slate-200 p-4 ${n}`,children:[Ot.jsx("div",{className:"flex items-center justify-between mb-3",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(U,{className:"w-5 h-5 text-slate-600"}),Ot.jsx("span",{className:"font-semibold text-slate-900",children:"Güven Skoru"})]})}),Ot.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border ${o.color} mb-3`,children:[d>=80&&Ot.jsx(J,{className:"w-4 h-4"}),d>=40&&d<80&&Ot.jsx(U,{className:"w-4 h-4"}),d<40&&Ot.jsx(f,{className:"w-4 h-4"}),o.level]}),Ot.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-slate-600",children:[Ot.jsx(xe,{className:"w-4 h-4"}),Ot.jsx("span",{children:(e=>{switch(e){case"individual":return"Bireysel Gönderici";case"corporate":return"Kurumsal Gönderici";case"nakliyeci":return"Nakliyeci";case"tasiyici":return"Taşıyıcı";default:return"Kullanıcı"}})(t)}),l&&Ot.jsx(J,{className:"w-4 h-4 text-green-500"})]}),Ot.jsxs("div",{className:"space-y-2 text-sm",children:[a>0?Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-current"}),Ot.jsxs("span",{children:[s.toFixed(1),"/5"]})]}),Ot.jsxs("span",{className:"text-slate-500",children:["(",a," değerlendirme)"]})]}):Ot.jsx("div",{className:"text-slate-500",children:"Henüz değerlendirme yok"}),i>0&&Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Tamamlanan İş"}),Ot.jsx("span",{className:"font-medium",children:i})]}),r>0&&Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Başarı Oranı"}),Ot.jsxs("span",{className:"font-medium",children:["%",r]})]})]}),Ot.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:Ot.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:o.description})})]})},$i=({averageRating:e,totalRatings:t,isVerified:s,completedJobs:a,successRate:l})=>{const i=(()=>{let i=0;if(s&&(i+=20),t>0&&e>0){i+=e/5*30+Math.min(t/10,10)}if(a>0){i+=Math.min(a/10,20)+l/100*5}return i+=5,Math.min(Math.round(i),100)})(),r=(n=i)>=80?{level:"Çok Güvenilir",color:"text-green-700 bg-green-100 border-green-200"}:n>=60?{level:"Güvenilir",color:"text-blue-700 bg-blue-100 border-blue-200"}:n>=40?{level:"Orta Güven",color:"text-yellow-700 bg-yellow-100 border-yellow-200"}:n>=20?{level:"Düşük Güven",color:"text-orange-700 bg-orange-100 border-orange-200"}:{level:"Yeni",color:"text-gray-700 bg-gray-100 border-gray-200"};var n;return Ot.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs font-medium border ${r.color}`,children:[i>=80&&Ot.jsx(J,{className:"w-3 h-3"}),i>=40&&i<80&&Ot.jsx(U,{className:"w-3 h-3"}),i<40&&Ot.jsx(f,{className:"w-3 h-3"}),Ot.jsx("span",{className:"font-semibold",children:r.level})]})},Bi=({carrierId:e,carrierName:t,companyName:s,carrierRating:a=0,carrierReviews:l=0,carrierVerified:i=!1,successRate:r=0,completedJobs:n=0,variant:d="compact",showMessaging:o=!1,messagingEnabled:c=!1,onMessageClick:m,className:x=""})=>{const u=s&&s.trim()?s.trim():t&&t.trim()?t.trim():"Nakliyeci",h=((e,t)=>{if(t&&t.trim())return t.trim().charAt(0).toUpperCase();if(e&&e.trim()){const t=e.trim().split(" ");return t.length>1?(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase():e.trim().charAt(0).toUpperCase()}return"N"})(t,s),p=e=>{const t=Math.floor(e),s=e%1>=.5,a=5-t-(s?1:0);return Ot.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(t)].map((e,t)=>Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-current"},`full-${t}`)),s&&Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-current opacity-50"}),[...Array(a)].map((e,t)=>Ot.jsx(O,{className:"w-4 h-4 text-slate-300"},`empty-${t}`))]})};return"compact"===d?Ot.jsxs("div",{className:`flex items-center gap-3 ${x}`,children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-sm flex-shrink-0 shadow-lg",children:h}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx("span",{className:"font-semibold text-slate-900 truncate",children:u}),i&&Ot.jsx(J,{className:"w-4 h-4 text-green-600 flex-shrink-0"})]}),Ot.jsx("div",{className:"flex items-center gap-2 text-sm",children:a>0?Ot.jsxs(Ot.Fragment,{children:[p(a),Ot.jsx("span",{className:"text-slate-600 font-medium",children:a.toFixed(1)}),l>0&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("span",{className:"text-slate-400",children:"•"}),Ot.jsxs("span",{className:"text-slate-500",children:[l," ","yorum"]})]})]}):Ot.jsx("span",{className:"text-slate-500",children:"Henüz değerlendirilmemiş"})})]}),e&&(a>0||l>0)&&Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsx($i,{averageRating:a,totalRatings:l,isVerified:i,completedJobs:n,successRate:r})}),o&&Ot.jsxs("button",{onClick:m,disabled:!c,title:c?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır",className:"flex-shrink-0 px-3 py-2 rounded-lg transition-colors flex items-center gap-1 text-sm font-medium "+(c?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-gray-50 text-gray-400 cursor-not-allowed"),children:[Ot.jsx(Ee,{className:"w-4 h-4"}),"Mesajlaş"]})]}):Ot.jsx("div",{className:`bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl p-6 border border-slate-200 ${x}`,children:Ot.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-800 to-blue-900 rounded-3xl flex items-center justify-center text-white font-bold text-2xl shadow-xl flex-shrink-0",children:h}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ot.jsx("h4",{className:"text-2xl font-bold text-slate-900",children:u}),i&&Ot.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",children:[Ot.jsx(U,{className:"w-4 h-4"}),"Doğrulanmış"]})]}),a>0||l>0?Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[p(a),Ot.jsx("span",{className:"text-lg font-bold text-slate-900",children:a.toFixed(1)})]}),l>0&&Ot.jsxs("span",{className:"text-slate-600",children:["(",l," ","değerlendirme",")"]})]}):Ot.jsx("div",{className:"text-slate-500 mb-4",children:"Henüz değerlendirme yapılmamış"}),e&&Ot.jsx("div",{className:"mb-4",children:Ot.jsx(Mi,{userId:e,userType:"nakliyeci",averageRating:a,totalRatings:l,isVerified:i,completedJobs:n,successRate:r,className:"!p-3"})}),o&&Ot.jsxs("button",{onClick:m,disabled:!c,title:c?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır",className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-2 "+(c?"bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:[Ot.jsx(Ee,{className:"w-5 h-5"}),"Mesajlaş"]})]})]})})};function Ri(e,t){const s=String(e??"").trim(),a=String(t??"").trim();if(s&&/^YN-/.test(s))return s;if(s&&/^TRK/i.test(s))return s.toUpperCase();if(s){const e=Number(s);return Number.isFinite(e)&&e>0?`TRK${Math.trunc(e).toString().padStart(6,"0")}`:s}if(!a)return"";if(/^YN-/.test(a))return a;if(/^TRK/i.test(a))return a.toUpperCase();const l=Number(a);return Number.isFinite(l)&&l>0?`TRK${Math.trunc(l).toString().padStart(6,"0")}`:a}const Oi={house_move:"Ev Taşınması",furniture:"Mobilya Taşıma",special:"Özel Yük",other:"Diğer",general:"Genel Gönderi","Ev Taşınması":"Ev Taşınması","Mobilya Taşıma":"Mobilya Taşıma","Özel Yük":"Özel Yük","Diğer":"Diğer"},Pi=()=>{var e;const{user:t}=sa(),s=o(),a=(e,t=0)=>{if("number"==typeof e)return Number.isFinite(e)?e:t;if("string"==typeof e){const s=parseFloat(e.replace(/[^0-9.,-]/g,"").replace(",","."));return Number.isFinite(s)?s:t}return t},i=(e,t="short")=>{if(!e)return"";const s=e instanceof Date?e:new Date(e);return Number.isFinite(s.getTime())?Kl(s,t):""},[r,n]=l.useState({totalShipments:0,activeShipments:0,deliveredShipments:0,pendingShipments:0,cancelledShipments:0,successRate:0,totalSpent:0,thisMonthSpent:0,favoriteCarriers:0}),[c,m]=l.useState([]),[x,u]=l.useState(0),[h,p]=l.useState(!1),[g,b]=l.useState(!1),[f,y]=l.useState(!1);return l.useEffect(()=>{!localStorage.getItem("onboardingCompleted")&&(null==t?void 0:t.id)&&y(!0)},[null==t?void 0:t.id]),l.useEffect(()=>{(async()=>{var e;if(!(null==t?void 0:t.id))return void b(!1);b(!0);const s=setTimeout(()=>{b(!1)},1e4);try{try{const e=await ol("individual");if((null==e?void 0:e.success)&&(null==e?void 0:e.data)){const t=e.data.stats||e.data;n({totalShipments:a(t.totalShipments,0),activeShipments:a(t.activeShipments,0),deliveredShipments:a(t.completedShipments??t.deliveredShipments,0),pendingShipments:a(t.pendingShipments,0),cancelledShipments:a(t.cancelledShipments??t.canceledShipments,0),successRate:a(t.successRate,0),totalSpent:a(t.totalSpent,0),thisMonthSpent:0,favoriteCarriers:0})}}catch(l){}try{const s=localStorage.getItem("authToken")||localStorage.getItem("token");if(s){const l=new URLSearchParams({page:"1",limit:"5",userId:String(t.id)}),i=await fetch(Zs(`/api/shipments?${l.toString()}`),{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),r=await i.json();if(i.ok&&(null==r?void 0:r.success)){const t=(null==(e=r.data)?void 0:e.shipments)||r.shipments||(Array.isArray(r.data)?r.data:[])||[],s=(Array.isArray(t)?t:[]).map(e=>{var t,s;const{from:l,to:i}=Vl(e),r=String((null==e?void 0:e.status)||"").trim().toLowerCase(),n="open"===r||"waiting_for_offers"===r?"waiting":"offer_accepted"===r||"accepted"===r?"offer_accepted":"in_transit"===r||"in_progress"===r?"in_transit":"delivered"===r||"completed"===r?"delivered":"cancelled"===r||"canceled"===r?"cancelled":"preparing"===r?"preparing":r||"waiting",d=a((null==e?void 0:e.displayPrice)??(null==e?void 0:e.price)??(null==e?void 0:e.offerPrice)??(null==e?void 0:e.value),0),o=a((null==e?void 0:e.volume)??(null==e?void 0:e.volume_m3)??(null==e?void 0:e.volumeM3),0),c=(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||(null==e?void 0:e.createdAt),m=(null==e?void 0:e.estimatedDelivery)||(null==e?void 0:e.estimated_delivery)||(null==e?void 0:e.deliveryDate)||(null==e?void 0:e.delivery_date);return{...e,id:(null==(s=null==(t=null==e?void 0:e.id)?void 0:t.toString)?void 0:s.call(t))||String((null==e?void 0:e.id)||""),title:$l((null==e?void 0:e.title)||(null==e?void 0:e.productDescription)||(null==e?void 0:e.description)||"Gönderi"),status:n,price:d,volume:o,createdAt:c,estimatedDelivery:m,trackingCode:Ri((null==e?void 0:e.trackingCode)||(null==e?void 0:e.trackingNumber)||(null==e?void 0:e.tracking_number),null==e?void 0:e.id),from:l,to:i,carrierName:(null==e?void 0:e.carrierName)||(null==e?void 0:e.carrier_name)||(null==e?void 0:e.nakliyeciName)||(null==e?void 0:e.nakliyeci_name)||(null==e?void 0:e.assignedCarrierName)||void 0,carrierEmail:(null==e?void 0:e.carrierEmail)||(null==e?void 0:e.carrier_email)||void 0,carrierCompany:(null==e?void 0:e.carrierCompany)||(null==e?void 0:e.carrier_company)||void 0,carrierId:(null==e?void 0:e.carrierId)||(null==e?void 0:e.carrier_id)||(null==e?void 0:e.nakliyeciId)||(null==e?void 0:e.nakliyeci_id)||void 0,carrierRating:(null==e?void 0:e.carrierRating)||0,carrierReviews:(null==e?void 0:e.carrierReviews)||0,carrierVerified:(null==e?void 0:e.carrierVerified)||!1,completedJobs:(null==e?void 0:e.completedJobs)||0,successRate:(null==e?void 0:e.successRate)||0,rating:a(null==e?void 0:e.rating,0)}}).slice().sort((e,t)=>{const s=new Date(e.createdAt||e.updatedAt||0).getTime();return new Date(t.createdAt||t.updatedAt||0).getTime()-s}).slice(0,5);m(s)}}else m([])}catch(l){}try{const e=await cl.getUnreadCount();if(null==e?void 0:e.success){const t=e.data||{};u(t.count||t.unreadCount||t.unread||0)}}catch(l){}}catch(i){}finally{clearTimeout(s),b(!1)}})()},[null==t?void 0:t.id]),g?Ot.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ot.jsx(Pl,{message:"Ana Sayfa yükleniyor...",size:"lg",className:"py-12"})}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Ana Sayfa - YolNext Bireysel"}),Ot.jsx("meta",{name:"description",content:"YolNext bireysel panel ana sayfası"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx("span",{className:"text-white font-bold text-xl",children:"YN"})}),Ot.jsxs("div",{children:[Ot.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:["Merhaba"," ",(null==t?void 0:t.firstName)||(null==(e=null==t?void 0:t.fullName)?void 0:e.split(" ")[0])||"Kullanıcı","! 👋"]}),Ot.jsxs("p",{className:"text-slate-200 text-lg leading-relaxed",children:["Gönderilerinizi yönetin, takip edin, ",Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"tasarruf edin!"}),Ot.jsx("br",{}),Ot.jsx("span",{className:"text-emerald-300 font-semibold",children:"Her gönderide %30-50 daha ucuz"})," ","fiyatlarla yanınızdayız."]})]})]}),Ot.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:[Ot.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg"}),Ot.jsx("span",{className:"text-slate-200 font-medium",children:"Çevrimiçi"})]}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:Ot.jsxs("span",{className:"text-slate-200 font-medium",children:[r.totalShipments," Gönderi"]})})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[Ot.jsxs("button",{type:"button",onClick:()=>p(!0),className:"relative min-w-[44px] min-h-[44px] w-12 h-12 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center hover:bg-white/20 transition-all duration-300 border border-white/20","aria-label":"Bildirimleri aç",children:[Ot.jsx(H,{size:20,className:"text-white"}),x>0&&Ot.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold shadow-lg",children:x>9?"9+":x})]}),Ot.jsx(d,{to:"/individual/create-shipment",children:Ot.jsxs("button",{className:"bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 text-base shadow-lg hover:shadow-xl w-full sm:w-auto","aria-label":"Yeni gönderi oluştur",children:[Ot.jsx(ue,{size:20}),"Gönderi Oluştur"]})})]})]})})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"individual.dashboard",icon:R,title:"Nasıl Başlayalım?",description:"🚀 1) Gönderi oluştur 2) Dakikalar içinde teklifler gelecek 3) En uygununu seç - bu kadar basit!",primaryAction:{label:"Gönderi Oluştur",to:"/individual/create-shipment"},secondaryAction:{label:"Tekliflere Git",to:"/individual/offers"}})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",role:"region","aria-label":"Toplam gönderi istatistiği",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center","aria-hidden":"true",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1","aria-live":"polite",children:r.totalShipments}),Ot.jsx("div",{className:"flex items-center gap-1",children:Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})})})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Toplam Gönderi"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Şimdiye kadar yaptığın tüm gönderiler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",role:"region","aria-label":"Aktif gönderi istatistiği",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center","aria-hidden":"true",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsx("div",{className:"text-right",children:Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1","aria-live":"polite",children:r.activeShipments})})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Aktif Gönderi"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Şu anda yoldaki gönderiler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",role:"region","aria-label":"Teslim edilen gönderi istatistiği",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center","aria-hidden":"true",children:Ot.jsx(fe,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:r.deliveredShipments}),Ot.jsx("div",{className:"flex items-center gap-1"})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Teslim Edildi ✓"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Sorunsuz tamamlanan gönderiler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",role:"region","aria-label":"Bekleyen gönderi istatistiği",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center","aria-hidden":"true",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:r.pendingShipments}),Ot.jsx("div",{className:"flex items-center gap-1"})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Beklemede"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Teklif bekleyen veya onay bekleyen"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",role:"region","aria-label":"Başarı oranı istatistiği",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center","aria-hidden":"true",children:Ot.jsx(M,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:[r.successRate,"%"]}),Ot.jsx("div",{className:"flex items-center gap-1"})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Başarı Oranı"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Sorunsuz teslimat oranın - yüksek = güven"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Hızlı İşlemler"}),Ot.jsx("p",{className:"text-slate-600",children:"En çok kullandığın özellikler - tek tıkla erişim"})]}),Ot.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[Ot.jsx(d,{to:"/individual/create-shipment",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-blue-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(ue,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Yeni Gönderi"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"3 adımda oluştur, dakikalar içinde teklif al"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/individual/my-shipments",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-emerald-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Gönderilerim"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Tüm gönderilerini tek yerden yönet"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/individual/live-tracking",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-purple-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-purple-800 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Canlı Takip"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Gönderinin nerede olduğunu anlık gör"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-purple-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/individual/messages",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-amber-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(G,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Mesajlar"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Nakliyecinle direkt iletişim kur"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-amber-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"📦 Son Gönderiler"}),Ot.jsx("p",{className:"text-slate-600",children:"En son oluşturduğun gönderiler - hızlı erişim için buradan"})]}),Ot.jsxs(d,{to:"/individual/my-shipments",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center gap-2",children:["Tümünü Gör",Ot.jsx(K,{className:"w-4 h-4"})]})]}),Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200 bg-gradient-to-r from-slate-50 to-blue-50",children:[Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Gönderi No"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Rota"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Durum"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Nakliyeci"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Fiyat"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:c.length>0?c.map(e=>{return Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-blue-50 transition-colors",children:[Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-800",children:e.trackingCode}),Ot.jsx("div",{className:"text-xs text-slate-500",children:i(e.createdAt,"short")}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.title})]}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsxs("div",{className:"text-sm font-medium text-slate-900",children:[e.from," → ",e.to]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:(t=e.subCategory||e.category,t?Oi[t]||t:"-")})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("delivered"===e.status?"bg-green-100 text-green-800":"in_transit"===e.status?"bg-blue-100 text-blue-800":"cancelled"===e.status?"bg-red-100 text-red-800":"preparing"===e.status?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:["in_transit"===e.status?Ot.jsx(E,{className:"w-3 h-3 mr-1"}):"cancelled"===e.status?Ot.jsx(ie,{className:"w-3 h-3 mr-1"}):"preparing"===e.status?Ot.jsx(R,{className:"w-3 h-3 mr-1"}):"delivered"===e.status||"offer_accepted"===e.status||"accepted"===e.status?Ot.jsx(fe,{className:"w-3 h-3 mr-1"}):Ot.jsx(L,{className:"w-3 h-3 mr-1"}),pi(e.status).text]})}),Ot.jsx("td",{className:"py-4 px-4",children:e.carrierId&&e.carrierName?Ot.jsx(Bi,{carrierId:String(e.carrierId),carrierName:e.carrierName,companyName:e.carrierCompany,carrierRating:e.carrierRating||0,carrierReviews:e.carrierReviews||0,carrierVerified:e.carrierVerified||!1,successRate:e.successRate||0,completedJobs:e.completedJobs||0,variant:"compact",showMessaging:!1,className:"max-w-xs"}):Ot.jsx("div",{className:"text-sm font-medium text-slate-500",children:"offer_accepted"===e.status||"accepted"===e.status||"in_transit"===e.status||"delivered"===e.status?"Nakliyeci Atandı":"Atanmamış"})}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"text-sm font-bold text-blue-700",children:a(e.price,0)>0?Il(a(e.price,0)):"waiting_for_offers"===e.status||"waiting"===e.status||"pending"===e.status||"open"===e.status?Ot.jsx("span",{className:"text-slate-400 font-normal",children:"Teklif Bekleniyor"}):"—"}),Ot.jsx("div",{className:"text-xs text-slate-500",children:a(e.volume,0)>0?`${a(e.volume,0).toFixed(2)} m³`:""}),Ot.jsx("div",{className:"text-xs text-slate-500",children:i(e.estimatedDelivery,"short")})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{onClick:()=>s(`/individual/shipments/${e.id}`),className:"px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-lg transition-colors",children:"Detay"}),"waiting"!==e.status&&"cancelled"!==e.status&&Ot.jsx("button",{onClick:()=>s(`/individual/live-tracking?shipmentId=${encodeURIComponent(e.id)}`),className:"px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-lg transition-colors",children:"Takip"}),(()=>{var t,a;const l=e.carrierId||e.carrier_id||e.nakliyeciId||e.nakliyeci_id||(null==(t=e.carrier)?void 0:t.id)||(null==(a=e.nakliyeci)?void 0:a.id)||null,i=null!=l&&""!==String(l)&&"cancelled"!==e.status;return Ot.jsx("button",{onClick:()=>{i&&s(`/individual/messages?userId=${encodeURIComponent(String(l))}&shipmentId=${encodeURIComponent(String(e.id))}`)},disabled:!i,className:"px-3 py-1.5 text-xs font-medium rounded-lg transition-colors "+(i?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:"Mesaj"})})()]})})]},e.id);var t}):Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:6,className:"py-12 text-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-700 to-blue-800 rounded-full mx-auto mb-4 flex items-center justify-center",children:Ot.jsx(R,{className:"w-8 h-8 text-white"})}),Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Henüz Gönderiniz Yok"}),Ot.jsx("p",{className:"text-slate-600 mb-6",children:"İlk gönderinizi oluşturun, dakikalar içinde nakliyecilerden teklifler gelmeye başlayacak. Ortalama bekleme süresi 5-15 dakikadır."}),Ot.jsxs(d,{to:"/individual/create-shipment",className:"inline-flex items-center gap-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Gönderi Oluştur"]})]})})})})})]})})]})]}),Ot.jsx(Jl,{isOpen:h,onClose:()=>{p(!1),window.dispatchEvent(new Event("yolnext:refresh-notifications")),window.dispatchEvent(new Event("yolnext:refresh-badges"))}}),f&&Ot.jsx(Ll,{userType:"individual",onComplete:()=>y(!1)})]})};function Li({formData:e,errors:t,handleInputChange:s,handleDimensionsChange:a,setErrors:l,mainCategories:i}){const r="special_cargo"===e.mainCategory,n={red:"text-red-600",orange:"text-orange-600",blue:"text-blue-600",cyan:"text-cyan-600",yellow:"text-yellow-600"};return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-lg font-semibold text-slate-900 mb-2",children:[Ot.jsx(R,{className:"w-5 h-5 inline mr-2 text-blue-600"}),"Yük Kategorisi *"]}),Ot.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 rounded-r-lg p-4 mb-4",children:[Ot.jsxs("p",{className:"text-sm text-slate-700 leading-relaxed",children:[Ot.jsx("strong",{className:"text-slate-900",children:"Önemli:"})," Doğru kategori seçimi, daha uygun ve daha hızlı teklif almanı sağlar."]}),Ot.jsxs("details",{className:"mt-2",children:[Ot.jsx("summary",{className:"text-sm text-blue-800 font-semibold cursor-pointer select-none",children:"Neden önemli?"}),Ot.jsx("p",{className:"mt-2 text-sm text-slate-700 leading-relaxed",children:"Nakliyeciler teklif hesaplamasını kategoriye göre yapar. Yanlış kategori, yanlış fiyat/uygunsuz tekliflere neden olabilir."})]})]}),Ot.jsxs("select",{value:e.mainCategory??"",onChangeCapture:e=>{s("mainCategory",e.currentTarget.value)},onChange:e=>{s("mainCategory",e.currentTarget.value),t.mainCategory&&l(e=>({...e,mainCategory:""}))},onInput:e=>{s("mainCategory",e.currentTarget.value)},"aria-label":"Yük kategorisi seçin","aria-required":"true","aria-invalid":!!t.mainCategory,"aria-describedby":t.mainCategory?"mainCategory-error":void 0,className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 text-lg min-h-[48px] "+(t.mainCategory?"border-red-500 focus:border-red-500":"border-slate-200 focus:border-blue-500"),children:[Ot.jsx("option",{value:"",children:"Kategori seçiniz"}),i.map(e=>Ot.jsx("option",{value:e.id,children:e.name},e.id))]}),t.mainCategory&&Ot.jsx("p",{id:"mainCategory-error",className:"mt-2 text-sm text-red-600",role:"alert",children:t.mainCategory})]}),e.mainCategory&&Ot.jsx("div",{className:"space-y-6",children:Ot.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(W,{className:"w-4 h-4 inline mr-2"}),"Yük Açıklaması *"]}),Ot.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Taşınacak eşyalarınız hakkında detaylı bilgi veriniz. Bu bilgiler, nakliyecilerin size en doğru fiyat teklifini sunabilmesi için gereklidir."}),Ot.jsx("textarea",{value:e.productDescription??"",onChange:e=>{s("productDescription",e.target.value),t.productDescription&&l(e=>({...e,productDescription:""}))},onInput:e=>{s("productDescription",e.currentTarget.value)},rows:4,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none "+(t.productDescription?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"),placeholder:"Örnek: 3+1 daire eşyası, büyük eşyalar (koltuk takımı, yatak odası takımı, buzdolabı, çamaşır makinesi), küçük eşyalar (kutu, çanta vb.)"}),t.productDescription&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.productDescription})]}),"house_move"===e.mainCategory&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Oda Sayısı *"}),Ot.jsxs("select",{value:e.roomCount??"",onChange:e=>{s("roomCount",e.target.value),t.roomCount&&l(e=>({...e,roomCount:""}))},className:`w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md ${t.roomCount?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"} text-slate-900 caret-slate-900`,children:[Ot.jsx("option",{value:"",children:"Seçin"}),Ot.jsx("option",{value:"1+0",children:"1+0"}),Ot.jsx("option",{value:"1+1",children:"1+1"}),Ot.jsx("option",{value:"2+1",children:"2+1"}),Ot.jsx("option",{value:"3+1",children:"3+1"}),Ot.jsx("option",{value:"4+1",children:"4+1"}),Ot.jsx("option",{value:"5+1",children:"5+1"}),Ot.jsx("option",{value:"6+1",children:"6+1"}),Ot.jsx("option",{value:"7+1",children:"7+1"})]}),t.roomCount&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.roomCount})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bina Tipi *"}),Ot.jsxs("select",{value:e.buildingType??"",onChange:e=>{s("buildingType",e.target.value),t.buildingType&&l(e=>({...e,buildingType:""}))},className:`w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md ${t.buildingType?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"} text-slate-900 caret-slate-900`,children:[Ot.jsx("option",{value:"",children:"Seçin"}),Ot.jsx("option",{value:"apartment",children:"Apartman Dairesi"}),Ot.jsx("option",{value:"villa",children:"Villa"}),Ot.jsx("option",{value:"residence",children:"Rezidans"}),Ot.jsx("option",{value:"duplex",children:"Dubleks"}),Ot.jsx("option",{value:"penthouse",children:"Penthouse"}),Ot.jsx("option",{value:"other",children:"Diğer"})]}),t.buildingType&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.buildingType})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Toplama Adresi Katı *"}),Ot.jsx("input",{type:"text",value:e.pickupFloor,onChange:e=>{s("pickupFloor",e.target.value),t.pickupFloor&&l(e=>({...e,pickupFloor:""}))},className:`w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md ${t.pickupFloor?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"} text-slate-900 caret-slate-900`,placeholder:"Örn: Zemin, 1, 2, 3, Çatı katı"}),t.pickupFloor&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.pickupFloor})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Teslimat Adresi Katı *"}),Ot.jsx("input",{type:"text",value:e.deliveryFloor,onChange:e=>{s("deliveryFloor",e.target.value),t.deliveryFloor&&l(e=>({...e,deliveryFloor:""}))},className:`w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md ${t.deliveryFloor?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"} text-slate-900 caret-slate-900`,placeholder:"Örn: Zemin, 1, 2, 3, Çatı katı"}),t.deliveryFloor&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.deliveryFloor})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Asansör Durumu (opsiyonel)"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-blue-300 cursor-pointer transition-all",children:[Ot.jsx("input",{type:"checkbox",checked:e.hasElevatorPickup,onChange:e=>s("hasElevatorPickup",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Toplama adresinde asansör var"})]}),Ot.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-blue-300 cursor-pointer transition-all",children:[Ot.jsx("input",{type:"checkbox",checked:e.hasElevatorDelivery,onChange:e=>s("hasElevatorDelivery",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Teslimat adresinde asansör var"})]})]})]}),Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-blue-300 cursor-pointer transition-all",children:[Ot.jsx("input",{type:"checkbox",checked:e.needsPackaging,onChange:e=>s("needsPackaging",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Ambalaj ve paketleme hizmeti istiyorum"})]})}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Özel Eşyalar (Piano, Antika, Sanat Eseri vb.)"}),Ot.jsx("textarea",{value:e.specialItems??"",onChange:e=>s("specialItems",e.target.value),rows:3,className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",placeholder:"Özel eşyalarınız varsa detaylı bilgi verin..."})]})]}),"furniture_goods"===e.mainCategory&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mobilya Parça Sayısı *"}),Ot.jsx("input",{type:"number",value:e.furniturePieces??"",onChange:e=>{s("furniturePieces",e.target.value),t.furniturePieces&&l(e=>({...e,furniturePieces:""}))},className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(t.furniturePieces?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"),placeholder:"Örn: 5",min:"1"}),t.furniturePieces&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.furniturePieces})]}),Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-blue-300 cursor-pointer transition-all",children:[Ot.jsx("input",{type:"checkbox",checked:e.isDisassembled,onChange:e=>s("isDisassembled",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Mobilyalar sökülmüş durumda"})]})})]}),"house_move"!==e.mainCategory&&Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[Ot.jsx(_e,{className:"w-4 h-4 inline mr-2"}),"Ağırlık (kg)",r?" *":" (opsiyonel)"]}),Ot.jsx("input",{type:"number",value:e.weight??"",onChange:e=>{s("weight",e.target.value),t.weight&&l(e=>({...e,weight:""}))},onInput:e=>{s("weight",e.currentTarget.value)},className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(t.weight?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-500 focus:border-blue-500"),step:"0.1",min:"0.1"}),t.weight&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.weight})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[Ot.jsx(R,{className:"w-4 h-4 inline mr-2"}),"Miktar"]}),Ot.jsx("input",{type:"number",value:e.quantity??"",onChange:e=>s("quantity",e.target.value),onInput:e=>s("quantity",e.currentTarget.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",min:"1"})]}),Ot.jsxs("div",{className:"md:col-span-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-4",children:[Ot.jsx(Ie,{className:"w-4 h-4 inline mr-2"}),"Boyutlar (cm) - Opsiyonel"]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Uzunluk"}),Ot.jsx("input",{type:"number",value:e.dimensions.length,onChange:e=>a("length",e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Genişlik"}),Ot.jsx("input",{type:"number",value:e.dimensions.width,onChange:e=>a("width",e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Yükseklik"}),Ot.jsx("input",{type:"number",value:e.dimensions.height,onChange:e=>a("height",e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md"})]})]})]})]}),"house_move"!==e.mainCategory&&(()=>{const t=(()=>{switch(e.mainCategory){case"furniture_goods":return[{id:"fragile",name:"Kırılgan",icon:f,color:"red"},{id:"signature",name:"İmzalı Teslimat",icon:Ke,color:"blue"}];case"special_cargo":return[{id:"fragile",name:"Kırılgan",icon:f,color:"red"},{id:"urgent",name:"Acil",icon:L,color:"orange"},{id:"temperature",name:"Soğuk Zincir",icon:Me,color:"cyan"},{id:"valuable",name:"Değerli",icon:O,color:"yellow"}];default:return[{id:"fragile",name:"Kırılgan",icon:f,color:"red"},{id:"urgent",name:"Acil",icon:L,color:"orange"},{id:"signature",name:"İmzalı Teslimat",icon:Ke,color:"blue"}]}})(),a=e.specialRequirements?e.specialRequirements.split(",").filter(e=>e.trim()):[];return Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Özel Gereksinimler (opsiyonel)"}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(e=>{const t=e.icon,l=a.includes(e.id);return Ot.jsxs("label",{className:"flex items-center p-3 border-2 rounded-xl cursor-pointer transition-all "+(l?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),children:[Ot.jsx("input",{type:"checkbox",checked:l,onChange:t=>{let l=[...a];t.target.checked?l.push(e.id):l=l.filter(t=>t!==e.id),s("specialRequirements",l.join(","))},className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx(t,{className:`w-5 h-5 ml-3 ${l?n[e.color]||"text-blue-600":"text-gray-400"}`}),Ot.jsx("span",{className:"ml-2 text-sm font-medium "+(l?"text-blue-900":"text-gray-700"),children:e.name})]},e.id)})})]})})()]})})]})}const Gi=[{id:1,name:"Adana",districts:["Seyhan","Yüreğir","Çukurova","Sarıçam","Karaisalı","Pozantı","Karatas","Kozan","Feke","Saimbeyli","Tufanbeyli","İmamoğlu","Aladağ","Ceyhan","Yumurtalık"]},{id:2,name:"Adıyaman",districts:["Merkez","Besni","Çelikhan","Gerger","Gölbaşı","Kahta","Samsat","Sincik","Tut"]},{id:3,name:"Afyonkarahisar",districts:["Merkez","Başmakçı","Bayat","Bolvadin","Çay","Çobanlar","Dazkırı","Dinar","Emirdağ","Evciler","Hocalar","İhsaniye","İscehisar","Kızılören","Sandıklı","Sinanpaşa","Sultandağı","Şuhut"]},{id:4,name:"Ağrı",districts:["Merkez","Diyadin","Doğubayazıt","Eleşkirt","Hamur","Patnos","Taşlıçay","Tutak"]},{id:5,name:"Amasya",districts:["Merkez","Göynücek","Gümüşhacıköy","Hamamözü","Merzifon","Suluova","Taşova"]},{id:6,name:"Ankara",districts:["Altındağ","Ayaş","Bala","Beypazarı","Çamlıdere","Çankaya","Çubuk","Elmadağ","Güdül","Haymana","Kalecik","Kızılcahamam","Nallıhan","Polatlı","Şereflikoçhisar","Yenimahalle","Gölbaşı","Keçiören","Mamak","Sincan","Kazan","Akyurt","Etimesgut","Evren","Pursaklar"]},{id:7,name:"Antalya",districts:["Akseki","Alanya","Elmalı","Finike","Gazipaşa","Gündoğmuş","Kaş","Kemer","Korkuteli","Kumluca","Manavgat","Serik","Demre","İbradı","Muratpaşa","Kepez","Konyaaltı","Döşemealtı","Aksu"]},{id:8,name:"Artvin",districts:["Merkez","Ardanuç","Arhavi","Borçka","Hopa","Murgul","Şavşat","Yusufeli"]},{id:9,name:"Aydın",districts:["Merkez","Bozdoğan","Buharkent","Çine","Didim","Efeler","Germencik","İncirliova","Karacasu","Karpuzlu","Koçarlı","Köşk","Kuşadası","Kuyucak","Nazilli","Söke","Sultanhisar","Yenipazar"]},{id:10,name:"Balıkesir",districts:["Altıeylül","Ayvalık","Balya","Bandırma","Bigadiç","Burhaniye","Dursunbey","Edremit","Erdek","Gömeç","Gönen","Havran","İvrindi","Karesi","Kepsut","Manyas","Marmara","Savaştepe","Sındırgı","Susurluk"]},{id:11,name:"Bilecik",districts:["Merkez","Bozüyük","Gölpazarı","İnhisar","Osmaneli","Pazaryeri","Söğüt","Yenipazar"]},{id:12,name:"Bingöl",districts:["Merkez","Adaklı","Genç","Karlıova","Kiğı","Solhan","Yayladere","Yedisu"]},{id:13,name:"Bitlis",districts:["Merkez","Adilcevaz","Ahlat","Güroymak","Hizan","Mutki","Tatvan"]},{id:14,name:"Bolu",districts:["Merkez","Dörtdivan","Gerede","Göynük","Kıbrıscık","Mengen","Mudurnu","Seben","Yeniçağa"]},{id:15,name:"Burdur",districts:["Merkez","Ağlasun","Altınyayla","Bucak","Çavdır","Çeltikçi","Gölhisar","Karamanlı","Kemer","Tefenni","Yeşilova"]},{id:16,name:"Bursa",districts:["Osmangazi","Nilüfer","Yıldırım","Mudanya","Gemlik","İnegöl","Mustafakemalpaşa","Orhangazi","Karacabey","Keles","Kestel","M.Kemalpaşa","Orhaneli","Harmancık","Büyükorhan"]},{id:17,name:"Çanakkale",districts:["Merkez","Ayvacık","Bayramiç","Biga","Bozcaada","Çan","Eceabat","Ezine","Gelibolu","Gökçeada","Lapseki","Yenice"]},{id:18,name:"Çankırı",districts:["Merkez","Atkaracalar","Bayramören","Çerkeş","Eldivan","Ilgaz","Kızılırmak","Korgun","Kurşunlu","Orta","Şabanözü","Yapraklı"]},{id:19,name:"Çorum",districts:["Merkez","Alaca","Bayat","Boğazkale","Dodurga","İskilip","Kargı","Laçin","Mecitözü","Oğuzlar","Ortaköy","Osmancık","Sungurlu","Uğurludağ"]},{id:20,name:"Denizli",districts:["Merkezefendi","Pamukkale","Acıpayam","Babadağ","Baklan","Bekilli","Beyağaç","Bozkurt","Buldan","Çal","Çameli","Çardak","Çivril","Güney","Honaz","Kale","Sarayköy","Serinhisar","Tavas"]},{id:21,name:"Diyarbakır",districts:["Bağlar","Kayapınar","Sur","Yenişehir","Bismil","Çermik","Çınar","Çüngüş","Dicle","Eğil","Ergani","Hani","Hazro","Kocaköy","Kulp","Lice","Silvan","Sur"]},{id:22,name:"Edirne",districts:["Merkez","Enez","Havsa","İpsala","Keşan","Lalapaşa","Meriç","Süloğlu","Uzunköprü"]},{id:23,name:"Elazığ",districts:["Merkez","Ağın","Alacakaya","Arıcak","Baskil","Karakoçan","Keban","Kovancılar","Maden","Palu","Sivrice"]},{id:24,name:"Erzincan",districts:["Merkez","Çayırlı","İliç","Kemah","Kemaliye","Otlukbeli","Refahiye","Tercan","Üzümlü"]},{id:25,name:"Erzurum",districts:["Yakutiye","Palandöken","Aziziye","Aşkale","Çat","Hınıs","Horasan","İspir","Karaçoban","Karayazı","Köprüköy","Narman","Oltu","Olur","Pasinler","Şenkaya","Tekman","Tortum","Uzundere"]},{id:26,name:"Eskişehir",districts:["Odunpazarı","Tepebaşı","Alpu","Beylikova","Çifteler","Günyüzü","Han","İnönü","Mahmudiye","Mihalgazi","Mihalıççık","Sarıcakaya","Seyitgazi","Sivrihisar"]},{id:27,name:"Gaziantep",districts:["Şahinbey","Şehitkamil","Oğuzeli","Araban","İslahiye","Karkamış","Nizip","Nurdağı","Yavuzeli"]},{id:28,name:"Giresun",districts:["Merkez","Alucra","Bulancak","Çanakçı","Dereli","Doğankent","Espiye","Eynesil","Görele","Güce","Keşap","Piraziz","Şebinkarahisar","Tirebolu","Yağlıdere"]},{id:29,name:"Gümüşhane",districts:["Merkez","Kelkit","Köse","Kürtün","Şiran","Torul"]},{id:30,name:"Hakkari",districts:["Merkez","Çukurca","Şemdinli","Yüksekova"]},{id:31,name:"Hatay",districts:["Antakya","Defne","Altınözü","Belen","Dörtyol","Erzin","Hassa","İskenderun","Kırıkhan","Kumlu","Reyhanlı","Samandağ","Yayladağı"]},{id:32,name:"Isparta",districts:["Merkez","Aksu","Atabey","Eğirdir","Gelendost","Gönen","Keçiborlu","Senirkent","Sütçüler","Şarkikaraağaç","Uluborlu","Yalvaç","Yenişarbademli"]},{id:33,name:"Mersin",districts:["Akdeniz","Mezitli","Toroslar","Yenişehir","Anamur","Aydıncık","Bozyazı","Çamlıyayla","Erdemli","Gülnar","Mut","Silifke","Tarsus"]},{id:34,name:"İstanbul",districts:["Adalar","Arnavutköy","Ataşehir","Avcılar","Bağcılar","Bahçelievler","Bakırköy","Başakşehir","Bayrampaşa","Beşiktaş","Beykoz","Beylikdüzü","Beyoğlu","Büyükçekmece","Çatalca","Çekmeköy","Esenler","Esenyurt","Eyüpsultan","Fatih","Gaziosmanpaşa","Güngören","Kadıköy","Kağıthane","Kartal","Küçükçekmece","Maltepe","Pendik","Sancaktepe","Sarıyer","Silivri","Sultanbeyli","Sultangazi","Şile","Şişli","Tuzla","Ümraniye","Üsküdar","Zeytinburnu"]},{id:35,name:"İzmir",districts:["Aliağa","Bayındır","Bayraklı","Bergama","Beydağ","Bornova","Buca","Çeşme","Çiğli","Dikili","Foça","Gaziemir","Güzelbahçe","Karabağlar","Karaburun","Karşıyaka","Kemalpaşa","Kınık","Kiraz","Konak","Menderes","Menemen","Narlıdere","Ödemiş","Seferihisar","Selçuk","Tire","Torbalı","Urla"]},{id:36,name:"Kars",districts:["Merkez","Akyaka","Arpaçay","Digor","Kağızman","Sarıkamış","Selim","Susuz"]},{id:37,name:"Kastamonu",districts:["Merkez","Abana","Ağlı","Araç","Azdavay","Bozkurt","Cide","Çatalzeytin","Daday","Devrekani","Doğanyurt","Hanönü","İhsangazi","İnebolu","Küre","Pınarbaşı","Seydiler","Şenpazar","Taşköprü","Tosya"]},{id:38,name:"Kayseri",districts:["Melikgazi","Kocasinan","Talas","Akkışla","Bünyan","Develi","Felahiye","Hacılar","İncesu","Özvatan","Pınarbaşı","Sarıoğlan","Sarız","Tomarza","Yahyalı","Yeşilhisar"]},{id:39,name:"Kırklareli",districts:["Merkez","Babaeski","Demirköy","Kofçaz","Lüleburgaz","Pehlivanköy","Pınarhisar","Vize"]},{id:40,name:"Kırşehir",districts:["Merkez","Akçakent","Akpınar","Boztepe","Çiçekdağı","Kaman","Mucur"]},{id:41,name:"Kocaeli",districts:["İzmit","Gebze","Gölcük","Kandıra","Karamürsel","Körfez","Derince","Başiskele","Çayırova","Dilovası","Kartepe"]},{id:42,name:"Konya",districts:["Meram","Karatay","Selçuklu","Akören","Akşehir","Altınekin","Beyşehir","Bozkır","Cihanbeyli","Çeltik","Çumra","Derbent","Derebucak","Doğanhisar","Emirgazi","Ereğli","Güneysinir","Hadim","Halkapınar","Hüyük","Ilgın","Kadınhanı","Karapınar","Kulu","Sarayönü","Seydişehir","Taşkent","Tuzlukçu","Yalıhüyük","Yunak"]},{id:43,name:"Kütahya",districts:["Merkez","Altıntaş","Aslanapa","Domaniç","Dumlupınar","Emet","Gediz","Hisarcık","Pazarlar","Simav","Şaphane","Tavşanlı"]},{id:44,name:"Malatya",districts:["Battalgazi","Yeşilyurt","Akçadağ","Arapgir","Arguvan","Darende","Doğanşehir","Doğanyol","Hekimhan","Kale","Kuluncak","Pütürge","Yazıhan"]},{id:45,name:"Manisa",districts:["Şehzadeler","Yunusemre","Ahmetli","Akhisar","Alaşehir","Demirci","Gölmarmara","Gördes","Kırkağaç","Köprübaşı","Kula","Salihli","Sarıgöl","Saruhanlı","Selendi","Soma","Turgutlu"]},{id:46,name:"Kahramanmaraş",districts:["Dulkadiroğlu","Onikişubat","Afşin","Andırın","Çağlayancerit","Ekinözü","Elbistan","Göksun","Nurhak","Pazarcık","Türkoğlu"]},{id:47,name:"Mardin",districts:["Artuklu","Dargeçit","Derik","Kızıltepe","Mazıdağı","Midyat","Nusaybin","Ömerli","Savur","Yeşilli"]},{id:48,name:"Muğla",districts:["Bodrum","Dalaman","Datça","Fethiye","Kavaklıdere","Köyceğiz","Marmaris","Menteşe","Milas","Ortaca","Seydikemer","Ula","Yatağan"]},{id:49,name:"Muş",districts:["Merkez","Bulanık","Hasköy","Korkut","Malazgirt","Varto"]},{id:50,name:"Nevşehir",districts:["Merkez","Acıgöl","Avanos","Derinkuyu","Gülşehir","Hacıbektaş","Kozaklı","Ürgüp"]},{id:51,name:"Niğde",districts:["Merkez","Altunhisar","Bor","Çamardı","Çiftlik","Ulukışla"]},{id:52,name:"Ordu",districts:["Altınordu","Akkuş","Aybastı","Çamaş","Çatalpınar","Çaybaşı","Fatsa","Gölköy","Gülyalı","Gürgentepe","İkizce","Kabadüz","Kabataş","Korgan","Kumru","Mesudiye","Perşembe","Ulubey","Ünye"]},{id:53,name:"Rize",districts:["Merkez","Ardeşen","Çamlıhemşin","Çayeli","Derepazarı","Fındıklı","Güneysu","Hemşin","İkizdere","İyidere","Kalkandere","Pazar"]},{id:54,name:"Sakarya",districts:["Adapazarı","Akyazı","Arifiye","Erenler","Ferizli","Geyve","Hendek","Karapürçek","Karasu","Kaynarca","Kocaali","Pamukova","Sapanca","Serdivan","Söğütlü","Taraklı"]},{id:55,name:"Samsun",districts:["Atakum","Canik","İlkadım","Tekkeköy","Alaçam","Asarcık","Ayvacık","Bafra","Çarşamba","Havza","Kavak","Ladik","Ondokuzmayıs","Salıpazarı","Terme","Vezirköprü","Yakakent"]},{id:56,name:"Siirt",districts:["Merkez","Baykan","Eruh","Kurtalan","Pervari","Şirvan","Tillo"]},{id:57,name:"Sinop",districts:["Merkez","Ayancık","Boyabat","Dikmen","Durağan","Erfelek","Gerze","Saraydüzü","Türkeli"]},{id:58,name:"Sivas",districts:["Merkez","Akıncılar","Altınyayla","Divriği","Doğanşar","Gemerek","Gölova","Gürün","Hafik","İmranlı","Kangal","Koyulhisar","Şarkışla","Suşehri","Ulaş","Yıldızeli","Zara"]},{id:59,name:"Tekirdağ",districts:["Süleymanpaşa","Çerkezköy","Çorlu","Ergene","Hayrabolu","Kapaklı","Malkara","Marmaraereğlisi","Muratlı","Saray","Şarköy"]},{id:60,name:"Tokat",districts:["Merkez","Almus","Artova","Başçiftlik","Erbaa","Niksar","Pazar","Reşadiye","Sulusaray","Turhal","Yeşilyurt","Zile"]},{id:61,name:"Trabzon",districts:["Ortahisar","Akçaabat","Araklı","Arsin","Beşikdüzü","Çarşıbaşı","Çaykara","Dernekpazarı","Düzköy","Hayrat","Köprübaşı","Maçka","Of","Şalpazarı","Sürmene","Tonya","Vakfıkebir","Yomra"]},{id:62,name:"Tunceli",districts:["Merkez","Çemişgezek","Hozat","Mazgirt","Nazımiye","Ovacık","Pertek","Pülümür"]},{id:63,name:"Şanlıurfa",districts:["Haliliye","Eyyübiye","Karaköprü","Akçakale","Birecik","Bozova","Ceylanpınar","Halfeti","Harran","Hilvan","Siverek","Suruç","Viranşehir"]},{id:64,name:"Uşak",districts:["Merkez","Banaz","Eşme","Karahallı","Sivaslı","Ulubey"]},{id:65,name:"Van",districts:["İpekyolu","Tuşba","Edremit","Bahçesaray","Başkale","Çaldıran","Çatak","Erciş","Gevaş","Gürpınar","Muradiye","Özalp","Saray"]},{id:66,name:"Yozgat",districts:["Merkez","Akdağmadeni","Aydıncık","Boğazlıyan","Çandır","Çayıralan","Çekerek","Kadışehri","Saraykent","Sarıkaya","Sorgun","Şefaatli","Yerköy","Yenifakılı"]},{id:67,name:"Zonguldak",districts:["Merkez","Alaplı","Çaycuma","Devrek","Gökçebey","Kilimli","Kozlu"]},{id:68,name:"Aksaray",districts:["Merkez","Ağaçören","Eskil","Gülağaç","Güzelyurt","Ortaköy","Sarıyahşi"]},{id:69,name:"Bayburt",districts:["Merkez","Aydıntepe","Demirözü"]},{id:70,name:"Karaman",districts:["Merkez","Ayrancı","Başyayla","Ermenek","Kazımkarabekir","Sarıveliler"]},{id:71,name:"Kırıkkale",districts:["Merkez","Bahşılı","Balışeyh","Çelebi","Delice","Karakeçili","Keskin","Sulakyurt","Yahşihan"]},{id:72,name:"Batman",districts:["Merkez","Beşiri","Gercüş","Hasankeyf","Kozluk","Sason"]},{id:73,name:"Şırnak",districts:["Merkez","Beytüşşebap","Cizre","Güçlükonak","İdil","Silopi","Uludere"]},{id:74,name:"Bartın",districts:["Merkez","Amasra","Kurucaşile","Ulus"]},{id:75,name:"Ardahan",districts:["Merkez","Çıldır","Damal","Göle","Hanak","Posof"]},{id:76,name:"Iğdır",districts:["Merkez","Aralık","Karakoyunlu","Tuzluca"]},{id:77,name:"Yalova",districts:["Merkez","Altınova","Armutlu","Çınarcık","Çiftlikköy","Termal"]},{id:78,name:"Karabük",districts:["Merkez","Eflani","Eskipazar","Ovacık","Safranbolu","Yenice"]},{id:79,name:"Kilis",districts:["Merkez","Elbeyli","Musabeyli","Polateli"]},{id:80,name:"Osmaniye",districts:["Merkez","Bahçe","Düziçi","Hasanbeyli","Kadirli","Sumbas","Toprakkale"]},{id:81,name:"Düzce",districts:["Merkez","Akçakoca","Cumayeri","Çilimli","Gölyaka","Gümüşova","Kaynaşlı","Yığılca"]}];function Fi({formData:e,errors:t,handleInputChange:s,setErrors:a}){var l,i;return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Adres ve Tarih Bilgileri"}),Ot.jsx("p",{className:"text-slate-600",children:"Lütfen toplama ve teslimat adreslerinizi eksiksiz olarak giriniz. Doğru adres bilgileri, hızlı ve güvenli taşımacılık için kritik öneme sahiptir."})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Toplama Adresi"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Yükünüzün alınacağı tam adres bilgilerini giriniz"})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"pickupCity",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İl *"]}),Ot.jsxs("select",{id:"pickupCity",value:e.pickupCity??"",onChange:e=>{s("pickupCity",e.target.value),s("pickupDistrict",""),t.pickupCity&&a(e=>({...e,pickupCity:""}))},onInput:e=>{const t=e.currentTarget.value;s("pickupCity",t),s("pickupDistrict","")},"aria-label":"Toplama ili","aria-required":"true","aria-invalid":!!t.pickupCity,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(t.pickupCity?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-blue-500 focus:border-blue-500"),children:[Ot.jsx("option",{value:"",children:"İl seçiniz"}),Gi.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]}),t.pickupCity&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:t.pickupCity})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"pickupDistrict",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İlçe *"]}),Ot.jsxs("select",{id:"pickupDistrict",value:e.pickupDistrict??"",onChange:e=>{s("pickupDistrict",e.target.value),t.pickupDistrict&&a(e=>({...e,pickupDistrict:""}))},onInput:e=>{s("pickupDistrict",e.currentTarget.value)},disabled:!e.pickupCity,"aria-label":"Toplama ilçesi","aria-required":"true","aria-invalid":!!t.pickupDistrict,className:`w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 ${e.pickupCity?"":"bg-gray-100 cursor-not-allowed"} ${t.pickupDistrict?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-blue-500 focus:border-blue-500"}`,children:[Ot.jsx("option",{value:"",children:"İlçe seçiniz"}),e.pickupCity&&(null==(l=Gi.find(t=>t.name===e.pickupCity))?void 0:l.districts.map(e=>Ot.jsx("option",{value:e,children:e},e)))]}),t.pickupDistrict&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:t.pickupDistrict})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"pickupAddress",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Adres *"]}),Ot.jsx("textarea",{id:"pickupAddress",value:e.pickupAddress,onChange:e=>{s("pickupAddress",e.target.value),t.pickupAddress&&a(e=>({...e,pickupAddress:""}))},rows:4,"aria-label":"Toplama adresi","aria-required":"true","aria-invalid":!!t.pickupAddress,"aria-describedby":t.pickupAddress?"pickupAddress-error":void 0,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none "+(t.pickupAddress?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-blue-500 focus:border-blue-500"),placeholder:"Mahalle, sokak, bina numarası, daire numarası ve varsa kat bilgisi gibi tüm detayları eksiksiz olarak giriniz..."}),t.pickupAddress&&Ot.jsx("p",{id:"pickupAddress-error",className:"mt-2 text-sm text-red-600",role:"alert",children:t.pickupAddress})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"pickupDate",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx($e,{className:"w-4 h-4 inline mr-2"}),"Toplama Tarihi *"]}),Ot.jsx("input",{id:"pickupDate",type:"date",value:e.pickupDate,onChange:e=>{s("pickupDate",e.target.value),t.pickupDate&&a(e=>({...e,pickupDate:""}))},min:(new Date).toISOString().split("T")[0],max:new Date(Date.now()+1728e6).toISOString().split("T")[0],"aria-label":"Toplama tarihi","aria-required":"true","aria-invalid":!!t.pickupDate,"aria-describedby":t.pickupDate?"pickupDate-error":void 0,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(t.pickupDate?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-blue-500 focus:border-blue-500")}),Ot.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Takvimden seçin. Format \\(YYYY-AA-GG\\) — örn: 2026-01-24"}),t.pickupDate&&Ot.jsx("p",{id:"pickupDate-error",className:"mt-2 text-sm text-red-600",role:"alert",children:t.pickupDate})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Teslimat Adresi"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Yükünüzün teslim edileceği tam adres bilgilerini giriniz"})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"deliveryCity",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İl *"]}),Ot.jsxs("select",{id:"deliveryCity",value:e.deliveryCity??"",onChange:e=>{s("deliveryCity",e.target.value),s("deliveryDistrict",""),t.deliveryCity&&a(e=>({...e,deliveryCity:""}))},onInput:e=>{const t=e.currentTarget.value;s("deliveryCity",t),s("deliveryDistrict","")},"aria-label":"Teslimat ili","aria-required":"true","aria-invalid":!!t.deliveryCity,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(t.deliveryCity?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-emerald-500 focus:border-emerald-500"),children:[Ot.jsx("option",{value:"",children:"İl seçiniz"}),Gi.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]}),t.deliveryCity&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:t.deliveryCity})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"deliveryDistrict",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İlçe *"]}),Ot.jsxs("select",{id:"deliveryDistrict",value:e.deliveryDistrict??"",onChange:e=>{s("deliveryDistrict",e.target.value),t.deliveryDistrict&&a(e=>({...e,deliveryDistrict:""}))},onInput:e=>{s("deliveryDistrict",e.currentTarget.value)},disabled:!e.deliveryCity,"aria-label":"Teslimat ilçesi","aria-required":"true","aria-invalid":!!t.deliveryDistrict,className:`w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 ${e.deliveryCity?"":"bg-gray-100 cursor-not-allowed"} ${t.deliveryDistrict?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-emerald-500 focus:border-emerald-500"}`,children:[Ot.jsx("option",{value:"",children:"İlçe seçiniz"}),e.deliveryCity&&(null==(i=Gi.find(t=>t.name===e.deliveryCity))?void 0:i.districts.map(e=>Ot.jsx("option",{value:e,children:e},e)))]}),t.deliveryDistrict&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:t.deliveryDistrict})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"deliveryAddress",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Adres *"]}),Ot.jsx("textarea",{id:"deliveryAddress",value:e.deliveryAddress,onChange:e=>{s("deliveryAddress",e.target.value),t.deliveryAddress&&a(e=>({...e,deliveryAddress:""}))},rows:4,"aria-label":"Teslimat adresi","aria-required":"true","aria-invalid":!!t.deliveryAddress,"aria-describedby":t.deliveryAddress?"deliveryAddress-error":void 0,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none "+(t.deliveryAddress?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-emerald-500 focus:border-emerald-500"),placeholder:"Mahalle, sokak, bina numarası, daire numarası ve varsa kat bilgisi gibi tüm detayları eksiksiz olarak giriniz..."}),t.deliveryAddress&&Ot.jsx("p",{id:"deliveryAddress-error",className:"mt-2 text-sm text-red-600",role:"alert",children:t.deliveryAddress})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{htmlFor:"deliveryDate",className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx($e,{className:"w-4 h-4 inline mr-2"}),"Teslimat Tarihi *"]}),Ot.jsx("input",{id:"deliveryDate",type:"date",value:e.deliveryDate,onChange:e=>{s("deliveryDate",e.target.value),t.deliveryDate&&a(e=>({...e,deliveryDate:""}))},min:e.pickupDate?new Date(new Date(e.pickupDate).getTime()+864e5).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],max:new Date(Date.now()+1728e6).toISOString().split("T")[0],"aria-label":"Teslimat tarihi","aria-required":"true","aria-invalid":!!t.deliveryDate,"aria-describedby":t.deliveryDate?"deliveryDate-error":void 0,className:"w-full p-4 border-2 rounded-xl focus:ring-2 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(t.deliveryDate?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-200 focus:ring-emerald-500 focus:border-emerald-500")}),Ot.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Takvimden seçin. Format \\(YYYY-AA-GG\\) — örn: 2026-01-24"}),t.deliveryDate&&Ot.jsx("p",{id:"deliveryDate-error",className:"mt-2 text-sm text-red-600",role:"alert",children:t.deliveryDate})]})]})]})]})]})}const Yi=[{id:"house_move",name:"Ev Taşınması"},{id:"furniture_goods",name:"Mobilya Taşıma"},{id:"special_cargo",name:"Özel Yük"},{id:"other",name:"Diğer"}];function qi({formData:e,errors:t,isLoading:s,handleInputChange:a,handlePublish:l}){var i;const r=Boolean(null==e?void 0:e.disclaimerAccepted);return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Gönderi Özeti ve Onay"}),Ot.jsx("p",{className:"text-slate-600",children:"Lütfen tüm bilgilerinizi kontrol ediniz. Bilgilerin doğruluğu, hızlı ve güvenli taşımacılık için çok önemlidir."})]}),Ot.jsx("div",{className:"bg-slate-50 rounded-xl p-6 space-y-6",children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Yük Bilgileri"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Kategori:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:null==(i=Yi.find(t=>t.id===e.mainCategory))?void 0:i.name})]}),"house_move"===e.mainCategory&&Ot.jsxs(Ot.Fragment,{children:[e.roomCount&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Oda Sayısı:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.roomCount})]}),e.buildingType&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Bina Tipi:"}),Ot.jsxs("span",{className:"font-medium text-slate-900",children:["apartment"===e.buildingType&&"Apartman Dairesi","villa"===e.buildingType&&"Villa","residence"===e.buildingType&&"Rezidans","duplex"===e.buildingType&&"Dubleks","penthouse"===e.buildingType&&"Penthouse","other"===e.buildingType&&"Diğer"]})]}),e.pickupFloor&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Toplama Katı:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.pickupFloor})]}),e.deliveryFloor&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Teslimat Katı:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.deliveryFloor})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Asansör:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:(()=>{const t=[];return e.hasElevatorPickup&&t.push("Toplama var"),e.hasElevatorDelivery&&t.push("Teslimat var"),0===t.length?"Yok":t.join(", ")})()})]}),e.needsPackaging&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Ambalaj Hizmeti:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:"İsteniyor"})]}),e.specialItems&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Özel Eşyalar:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.specialItems})]})]}),"furniture_goods"===e.mainCategory&&Ot.jsxs(Ot.Fragment,{children:[e.furniturePieces&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Parça Sayısı:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.furniturePieces})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Sökülmüş:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.isDisassembled?"Evet":"Hayır, monte"})]}),e.dimensions.length&&e.dimensions.width&&e.dimensions.height&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Boyut (En büyük parça):"}),Ot.jsxs("span",{className:"font-medium text-slate-900",children:[e.dimensions.length," x ",e.dimensions.width," x ",e.dimensions.height," cm"]})]})]}),("other"===e.mainCategory||"special_cargo"===e.mainCategory)&&Ot.jsxs(Ot.Fragment,{children:[e.weight&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Ağırlık:"}),Ot.jsxs("span",{className:"font-medium text-slate-900",children:[e.weight," kg"]})]}),e.quantity&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Miktar:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.quantity})]}),e.dimensions.length&&e.dimensions.width&&e.dimensions.height&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Boyut:"}),Ot.jsxs("span",{className:"font-medium text-slate-900",children:[e.dimensions.length," x ",e.dimensions.width," x ",e.dimensions.height," cm"]})]})]}),e.specialRequirements&&e.specialRequirements.trim()&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Özel Gereksinimler:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.specialRequirements.split(",").filter(e=>e.trim()).map(e=>({fragile:"Kırılgan",urgent:"Acil",signature:"İmzalı Teslimat",temperature:"Soğuk Zincir",valuable:"Değerli"}[e.trim()]||e.trim())).join(", ")})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Adres Bilgileri"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{children:[Ot.jsx("span",{className:"text-slate-600",children:"Toplama:"}),Ot.jsx("p",{className:"font-medium text-slate-900 text-sm",children:e.pickupAddress})]}),Ot.jsxs("div",{children:[Ot.jsx("span",{className:"text-slate-600",children:"Teslimat:"}),Ot.jsx("p",{className:"font-medium text-slate-900 text-sm",children:e.deliveryAddress})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Toplama Tarihi:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.pickupDate})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Teslimat Tarihi:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.deliveryDate})]})]})]})]})}),t.publish&&Ot.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl p-4 mb-4",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(f,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-bold text-red-800 mb-1",children:"Hata!"}),Ot.jsx("p",{className:"text-sm text-red-700",children:t.publish}),t.publish.includes("bağlanılamıyor")||t.publish.includes("connection")||t.publish.includes("Failed to fetch")?Ot.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Sunucuya bağlanılamıyor. İnternet bağlantını kontrol et. Sorun devam ederse gönderi bilgilerinizi kontrol edip tekrar deneyin."}):null]})]})}),Ot.jsx("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-xl p-6 space-y-3",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(f,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-amber-900 mb-3",children:"Önemli Bilgilendirme - Sorumluluk Reddi"}),Ot.jsxs("div",{className:"space-y-3 text-sm text-amber-800 leading-relaxed",children:[Ot.jsx("p",{className:"font-semibold",children:"YolNext bir pazaryeri platformudur. Hiçbir sorumluluk almaz."}),Ot.jsx("p",{children:"YolNext, göndericiler ve nakliyeciler arasında bağlantı kuran bir aracı platformdur. Taşımacılık hizmetlerini bizzat sağlamaz ve sigorta hizmeti vermez."}),Ot.jsx("p",{className:"font-medium",children:"Tüm riskler gönderici ve nakliyeci arasındadır. Kaza, yangın, çalınma gibi durumlarda taraflar arasında çözülmelidir. Platform sadece tarafları buluşturan bir aracıdır."}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Sigorta:"})," İhtiyaç duyuyorsanız, kendi sigortanızı yaptırmak ",Ot.jsx("strong",{children:"TAMAMEN"})," ","sizin sorumluluğunuzdadır. YolNext hiçbir sigorta hizmeti vermez."]}),Ot.jsx("p",{children:Ot.jsx(d,{to:"/terms",target:"_blank",className:"text-amber-900 underline font-medium hover:text-amber-700 transition-colors",children:"Detaylı bilgi için Kullanım Koşulları'nı inceleyebilirsiniz"})}),Ot.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[Ot.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[Ot.jsx("input",{type:"checkbox",checked:r,onChange:e=>a("disclaimerAccepted",e.target.checked),className:"mt-0.5 w-5 h-5 text-amber-700 border-amber-400 rounded focus:ring-amber-500"}),Ot.jsx("span",{className:"text-sm font-semibold text-amber-900",children:"Okudum, anladım ve kabul ediyorum."})]}),t.disclaimerAccepted&&Ot.jsx("p",{className:"mt-2 text-sm text-red-700",children:t.disclaimerAccepted})]})]})]})]})}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Yayınlama Tercihi"}),Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("input",{type:"radio",id:"all",name:"publishType",value:"all",checked:!0,readOnly:!0,disabled:!0,className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"all",className:"ml-3 text-sm font-medium text-slate-700",children:"Tüm nakliyecilere açık (Önerilen)"})]})})]}),Ot.jsxs("div",{className:"flex flex-col items-end gap-3",children:[Ot.jsx("div",{className:"text-right",children:Ot.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Gönderinizi yayınladığınızda, platformdaki nakliyeciler gönderinizi görebilecek ve size teklif sunabilecektir."})}),Ot.jsx("button",{onClick:l,disabled:s||!r,className:"px-8 py-4 rounded-xl font-semibold text-white transition-all duration-300 shadow-lg hover:shadow-xl "+(s||!r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-slate-800 via-blue-900 to-indigo-900 hover:from-slate-700 hover:via-blue-800 hover:to-indigo-800"),children:s?Ot.jsxs("span",{className:"flex items-center gap-2",children:[Ot.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Ot.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Ot.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Gönderi yayınlanıyor..."]}):"Gönderiyi Yayınla ve Teklifleri Bekle"})]})]})}function Hi(){const e=o(),[t,s]=l.useState(1),[a,i]=l.useState(!1),[r,d]=l.useState(!1),[c,m]=l.useState(""),[x,u]=l.useState(!1),[h,p]=l.useState(""),[g,b]=l.useState({}),[y,j]=l.useState({mainCategory:"",productDescription:"",weight:"",quantity:"",dimensions:{length:"",width:"",height:""},specialRequirements:"",pickupCity:"",pickupDistrict:"",pickupAddress:"",deliveryCity:"",deliveryDistrict:"",deliveryAddress:"",pickupDate:"",deliveryDate:"",publishType:"all",disclaimerAccepted:!1,roomCount:"",pickupFloor:"",deliveryFloor:"",buildingType:"",hasElevatorPickup:!1,hasElevatorDelivery:!1,needsPackaging:!1,specialItems:"",furniturePieces:"",isDisassembled:!1}),v=[{id:1,title:"Form Doldurma",subtitle:"Yük Bilgileri",icon:Ot.jsx(R,{size:20})},{id:2,title:"Adres ve Tarih",subtitle:"Adres Bilgileri",icon:Ot.jsx(T,{size:20})},{id:3,title:"Ön İzleme ve Yayınlama",subtitle:"Yayınla & Önizleme",icon:Ot.jsx(ne,{size:20})}],N=[{id:"house_move",name:"Ev Taşınması"},{id:"furniture_goods",name:"Mobilya Taşıma"},{id:"special_cargo",name:"Özel Yük"},{id:"other",name:"Diğer"}],k=(e,t)=>{j(s=>({...s,[e]:t}))},w=(e,t)=>{j(s=>({...s,dimensions:{...s.dimensions,[e]:t}}))},S=e=>{const t=String(e||"").trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(t))return null;const[s,a,l]=t.split("-"),i=parseInt(s,10),r=parseInt(a,10),n=parseInt(l,10);if(!Number.isFinite(i)||!Number.isFinite(r)||!Number.isFinite(n))return null;const d=new Date(i,r-1,n);return Number.isFinite(d.getTime())?d.getFullYear()!==i||d.getMonth()!==r-1||d.getDate()!==n?null:(d.setHours(0,0,0,0),d):null},z=async()=>{var t,s,a,l;if(!(()=>{var e;const t={};return y.mainCategory||(t.mainCategory="Lütfen yük kategorisini seçiniz"),(null==(e=y.productDescription)?void 0:e.trim())||(t.productDescription="Lütfen yük açıklamasını giriniz"),y.pickupCity||(t.pickupCity="Lütfen toplama ilini seçiniz"),y.deliveryCity||(t.deliveryCity="Lütfen teslimat ilini seçiniz"),y.disclaimerAccepted||(t.disclaimerAccepted='Devam etmek için "Okudum, anladım ve kabul ediyorum" seçeneğini işaretleyin.'),b(t),0===Object.keys(t).length})())return;i(!0);const r=setTimeout(()=>{i(!1),b({publish:"Gönderi oluşturma işlemi zaman aşımına uğradı. Lütfen tekrar deneyin."})},3e4);try{const l={city:y.pickupCity||"İstanbul",district:y.pickupDistrict||""},n={city:y.deliveryCity||"İstanbul",district:y.deliveryDistrict||""},o={title:`${l.city} → ${n.city}`,description:y.productDescription||"",productDescription:y.productDescription||"",category:y.mainCategory||"general",pickupCity:l.city,pickupDistrict:l.district,pickupAddress:y.pickupAddress,pickupDate:y.pickupDate,deliveryCity:n.city,deliveryDistrict:n.district,deliveryAddress:y.deliveryAddress,deliveryDate:y.deliveryDate,weight:y.weight?parseFloat(y.weight):0,volume:0,dimensions:y.dimensions.length&&y.dimensions.width&&y.dimensions.height?`${y.dimensions.length}x${y.dimensions.width}x${y.dimensions.height}`:null,value:0,specialRequirements:(()=>{const e=y.specialRequirements?y.specialRequirements.split(",").filter(e=>e.trim()):[],t=[y.roomCount?`Oda Sayısı: ${y.roomCount}`:null,y.buildingType?`Bina Tipi: ${y.buildingType}`:null,y.pickupFloor?`Toplama Katı: ${y.pickupFloor}`:null,y.deliveryFloor?`Teslimat Katı: ${y.deliveryFloor}`:null,y.hasElevatorPickup?"Toplama adresinde asansör var":null,y.hasElevatorDelivery?"Teslimat adresinde asansör var":null,y.needsPackaging?"Ambalaj ve paketleme hizmeti gerekli":null,y.specialItems||null].filter(Boolean),s={fragile:"Kırılgan",urgent:"Acil",signature:"İmzalı Teslimat",temperature:"Soğuk Zincir",valuable:"Değerli"};return[...e.map(e=>s[e.trim()]||e.trim()).filter(Boolean),...t].join(", ")})()},c=await ml.create(o);if(clearTimeout(r),i(!1),!c.success||!(null==(t=c.data)?void 0:t.shipment)&&!(null==(s=c.data)?void 0:s.id))throw new Error(c.message||"Gönderi oluşturuldu ama doğrulanamadı");{const t=(null==(a=c.data)?void 0:a.shipment)||c.data,s=Ri((null==t?void 0:t.trackingNumber)||(null==t?void 0:t.tracking_number)||(null==t?void 0:t.trackingnumber)||(null==t?void 0:t.trackingCode)||(null==t?void 0:t.tracking_code)||(null==t?void 0:t.trackingcode)||(null==t?void 0:t.shipmentCode)||(null==t?void 0:t.shipment_code)||(null==t?void 0:t.shipmentcode)||null,null==t?void 0:t.id),l=s?`Takip kodunuz: ${s}`:"";Ga("shipment_create_success",{shipmentId:(null==t?void 0:t.id)||null,category:y.mainCategory||null,publishType:y.publishType||null}),m(`Gönderiniz başarıyla yayınlandı. ${l?l+". ":""}Platformdaki sertifikalı nakliyeciler gönderinizi inceleyecek ve size teklif sunmaya başlayacaktır. Ortalama bekleme süresi 5-15 dakikadır. Teklifler sayfasına yönlendiriliyorsunuz...`),d(!0),setTimeout(()=>{d(!1),e("/individual/offers")},2e3)}}catch(n){clearTimeout(r),i(!1);const e=n;if(429===(null==e?void 0:e.status)){const t=(null==(l=null==e?void 0:e.data)?void 0:l.message)||(null==e?void 0:e.message);return p(t||"Günlük limit aşıldı. Lütfen yarın tekrar deneyin."),u(!0),void b(e=>({...e,publish:""}))}const t=n instanceof Error?n.message:"Bir sorun oluştu - tekrar dene";b({publish:t}),d(!1)}};return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Gönderi Oluştur - YolNext"})}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/individual/dashboard"},{label:"Gönderi Oluştur",href:"/individual/create-shipment"}]}),Ot.jsx("div",{className:"mt-4 mb-6",children:Ot.jsx(ql,{storageKey:"individual.create-shipment",icon:R,title:"Gönderi Oluşturma İpucu",description:"Doğru şehir/ilçe ve net tarih aralığı, daha hızlı ve daha doğru teklifler getirir. Ölçü/ağırlık bilgisini mümkün olduğunca gerçek gir.",primaryAction:{label:"Yardım Merkezi",to:"/individual/help"},secondaryAction:{label:"Teklifler",to:"/individual/offers"}})}),Ot.jsx("div",{className:"mb-8 text-center",children:Ot.jsxs("div",{className:"flex flex-col items-center justify-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-xl flex items-center justify-center shadow-lg mb-4",children:Ot.jsx(R,{className:"w-8 h-8 text-white"})}),Ot.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-slate-800 via-blue-900 to-indigo-900 bg-clip-text text-transparent",children:"Gönderi Oluştur"})]})}),Ot.jsx("div",{className:"mb-8",children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[Ot.jsx("div",{className:"hidden md:flex items-center justify-between",children:v.map((e,s)=>Ot.jsxs(n.Fragment,{children:[Ot.jsxs("div",{className:"flex flex-col items-center flex-1",children:[Ot.jsx("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full mb-3 transition-all duration-300 "+(t===e.id?"bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 text-white shadow-lg scale-110":t>e.id?"bg-gradient-to-br from-slate-700 to-blue-800 text-white":"bg-gray-200 text-gray-500"),children:t>e.id?Ot.jsx(Ke,{size:20,className:"text-white"}):e.icon}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-sm font-semibold mb-1 "+(t===e.id?"text-slate-800":t>e.id?"text-gray-700":"text-gray-400"),children:e.title}),Ot.jsx("div",{className:"text-xs "+(t===e.id?"text-blue-600":t>e.id?"text-gray-600":"text-gray-400"),children:e.subtitle})]})]}),s<v.length-1&&Ot.jsx("div",{className:"flex-1 h-0.5 mx-4 mt-[-24px] transition-all duration-300 "+(t>e.id?"bg-gradient-to-r from-slate-800 to-blue-900":"bg-gray-200")})]},e.id))}),Ot.jsxs("div",{className:"md:hidden",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:v.map((e,s)=>Ot.jsxs(n.Fragment,{children:[Ot.jsxs("div",{className:"flex flex-col items-center flex-1",children:[Ot.jsx("div",{className:"relative flex items-center justify-center w-10 h-10 rounded-full mb-2 transition-all duration-300 "+(t===e.id?"bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 text-white shadow-lg scale-110":t>e.id?"bg-gradient-to-br from-slate-700 to-blue-800 text-white":"bg-gray-200 text-gray-500"),children:t>e.id?Ot.jsx(Ke,{size:18,className:"text-white"}):Ot.jsx("div",{className:"scale-75",children:e.icon})}),Ot.jsx("div",{className:"text-center",children:Ot.jsxs("div",{className:"text-xs font-semibold "+(t===e.id?"text-slate-800":t>e.id?"text-gray-700":"text-gray-400"),children:[s+1,". Adım"]})})]}),s<v.length-1&&Ot.jsx("div",{className:"flex-1 h-0.5 mx-2 mt-[-20px] transition-all duration-300 "+(t>e.id?"bg-gradient-to-r from-slate-800 to-blue-900":"bg-gray-200")})]},e.id))}),Ot.jsxs("div",{className:"text-center mt-2",children:[Ot.jsx("div",{className:"text-sm font-semibold "+(t===v[0].id?"text-slate-800":t===v[1].id?"text-blue-700":"text-indigo-700"),children:v[t-1].title}),Ot.jsx("div",{className:"text-xs text-gray-600 mt-1",children:v[t-1].subtitle})]})]})]})}),(()=>{switch(t){case 1:return Ot.jsx(Li,{formData:y,handleInputChange:k,handleDimensionsChange:w,errors:g,setErrors:b,mainCategories:N});case 2:return Ot.jsx(Fi,{formData:y,handleInputChange:k,errors:g,setErrors:b});case 3:return Ot.jsx(qi,{formData:y,errors:g,isLoading:a,handleInputChange:k,handlePublish:z});default:return null}})(),Ot.jsxs("div",{className:"flex justify-between mt-8",children:[t>1?Ot.jsxs("button",{onClick:()=>{t>1&&s(t-1)},className:"flex items-center px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:[Ot.jsx(re,{className:"w-5 h-5 mr-2"}),"Geri"]}):Ot.jsx("span",{}),t<v.length&&Ot.jsxs("button",{onClick:()=>{(e=>{const t={};if(1===e)y.mainCategory||(t.mainCategory="Yük kategorisi seçimi zorunludur. Doğru kategori seçimi, size en uygun fiyat tekliflerinin alınması için kritik öneme sahiptir."),y.productDescription&&""!==y.productDescription.trim()||(t.productDescription="Yük açıklaması zorunludur. Lütfen taşınacak eşyalar hakkında detaylı bilgi veriniz."),"house_move"===y.mainCategory?(y.roomCount||(t.roomCount="Oda sayısı bilgisi zorunludur."),y.buildingType||(t.buildingType="Bina tipi bilgisi zorunludur."),y.pickupFloor&&""!==y.pickupFloor.trim()||(t.pickupFloor="Toplama adresi kat bilgisi zorunludur."),y.deliveryFloor&&""!==y.deliveryFloor.trim()||(t.deliveryFloor="Teslimat adresi kat bilgisi zorunludur.")):"furniture_goods"===y.mainCategory?y.furniturePieces||(t.furniturePieces="Mobilya parça sayısı zorunludur."):"special_cargo"===y.mainCategory&&(y.weight&&""!==y.weight.trim()||(t.weight="Ağırlık bilgisi zorunludur."));else if(2===e)if(y.pickupCity||(t.pickupCity="Toplama ili seçimi zorunludur."),y.pickupDistrict||(t.pickupDistrict="Toplama ilçesi seçimi zorunludur."),y.pickupAddress&&""!==y.pickupAddress.trim()||(t.pickupAddress="Toplama adresi zorunludur."),y.deliveryCity||(t.deliveryCity="Teslimat ili seçimi zorunludur."),y.deliveryDistrict||(t.deliveryDistrict="Teslimat ilçesi seçimi zorunludur."),y.deliveryAddress&&""!==y.deliveryAddress.trim()||(t.deliveryAddress="Teslimat adresi zorunludur."),y.pickupDate){const e=S(y.pickupDate),s=new Date;s.setHours(0,0,0,0),e||(t.pickupDate="Takvimden tarih seç"),e&&e<s&&(t.pickupDate="Geçmiş tarih seçemezsiniz");const a=new Date(s);if(a.setDate(a.getDate()+20),e&&e>a&&(t.pickupDate="En fazla 20 gün sonrası için planlayabilirsiniz"),y.deliveryDate){const s=S(y.deliveryDate);s?e&&s<e&&(t.deliveryDate="Teslimat tarihi alım tarihinden önce olamaz"):t.deliveryDate="Takvimden tarih seç"}}else t.pickupDate="Toplama tarihi seçimi zorunludur.";return b(t),0===Object.keys(t).length})(t)&&t<v.length&&(s(t+1),b({}))},className:`flex items-center px-6 py-3 rounded-xl text-white transition-all duration-300 shadow-lg hover:shadow-xl ${a?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-slate-800 via-blue-900 to-indigo-900 hover:from-slate-700 hover:via-blue-800 hover:to-indigo-800"} ml-auto`,disabled:a,children:["İleri",Ot.jsx(K,{className:"w-5 h-5 ml-2"})]})]})]}),r&&Ot.jsx(Fl,{message:c,isVisible:r,onClose:()=>d(!1)}),x&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Ot.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-sm text-center relative",children:[Ot.jsx("button",{onClick:()=>u(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:Ot.jsx(_,{size:20})}),Ot.jsx(f,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Limit Aşıldı!"}),Ot.jsx("p",{className:"text-gray-600 mb-5",children:h}),Ot.jsx("button",{onClick:()=>u(!1),className:"bg-orange-600 text-white px-5 py-2 rounded-lg hover:bg-orange-700 transition-colors",children:"Tamam"})]})})]})}const Ui=["Ne zaman yola çıkacaksınız?","Tahmini teslim saati nedir?","Yükleme adresine ne zaman gelirsiniz?","Teslimat durumu nedir?"],Vi=["Tahmini teslimat tarihi ve saati nedir?","Yükleme saatini teyit edebilir misiniz?","Araç bilgilerini paylaşır mısınız?","İş durumu hakkında bilgi alabilir miyim?"],Ji=["Adres bilgilerini teyit edebilir misiniz?","Yük hazır mı?","Taşıyıcı atandı, kısa sürede gelecek","Teslimat tamamlandı mı?"],Wi=["Yükleme noktasına geldim","Yola çıktım","Teslim noktasına yaklaştım","Teslimat tamamlandı","Gecikme var, bilgi vereceğim"];function Zi({userType:e}){const t=o(),[s,a]=c(),i=s.get("userId"),r=s.get("shipmentId"),d=s.get("prefill"),[m,x]=l.useState([]),[u,h]=l.useState(null),[p,g]=l.useState(""),[b,f]=l.useState(!0),[j,v]=l.useState(""),[N,k]=l.useState(!1),[w,S]=l.useState(null),[z,T]=l.useState("active"),[C,A]=l.useState(!1),D=()=>{switch(e){case"corporate":return"Kurumsal";case"individual":return"Bireysel";case"nakliyeci":return"Nakliyeci";case"tasiyici":return"Taşıyıcı";default:return""}},E=()=>{switch(e){case"corporate":case"individual":case"tasiyici":return"Nakliyeci";case"nakliyeci":return"Taşıyıcı";default:return"Diğer"}},_=l.useMemo(()=>{switch(e){case"individual":default:return Ui;case"corporate":return Vi;case"nakliyeci":return Ji;case"tasiyici":return Wi}},[e]);l.useEffect(()=>{F()},[]);const I=()=>{const e=localStorage.getItem("userId")||localStorage.getItem("userid")||localStorage.getItem("user_id")||"",t=String(e||"").trim();if(t&&"null"!==t&&"undefined"!==t)return t;const s=localStorage.getItem("user")||localStorage.getItem("YolNext_user");if(!s)return"";try{const e=JSON.parse(s),t=(null==e?void 0:e.id)??(null==e?void 0:e.userId)??(null==e?void 0:e.user_id)??(null==e?void 0:e.userid);return null!=t?String(t):""}catch(a){return""}},K=(e,t)=>{const s=String(e??"").trim(),a=String(t??"").trim();if(!s){if(!a)return"";if(/^TRK/i.test(a))return a;const e=Number(a);return Number.isFinite(e)&&e>0?`TRK${Math.trunc(e).toString().padStart(6,"0")}`:a}if(/^TRK/i.test(s))return s;const l=Number(s);return Number.isFinite(l)&&l>0?`TRK${Math.trunc(l).toString().padStart(6,"0")}`:s},M=e=>{const t=null!=e.shipmentId?String(e.shipmentId):"",s=String(e.trackingNumber||"").trim()||t,a=e.otherUserId??e.participantId??e.carrierId??"",l=null!=a?String(a):"";return`${s}::${String(e.carrierName||e.participant||"").trim()||""||l}`},$=e=>{const t=e=>{const t=e.lastMessageCreatedAt?Date.parse(e.lastMessageCreatedAt):NaN;return Number.isFinite(t)?t:0},s=(Array.isArray(e)?e:[]).slice().sort((e,s)=>t(s)-t(e)),a=new Set,l=[];for(const i of s){const e=M(i);e&&"::"!==e?a.has(e)||(a.add(e),l.push(i)):l.push(i)}return l},B=e=>{const t=(null==e?void 0:e.shipmentId)??(null==e?void 0:e.shipmentid)??(null==e?void 0:e.shipment_id)??(null==e?void 0:e.shipmentID)??void 0,s=null!=t&&""!==String(t).trim()?String(t):void 0,a=(null==e?void 0:e.otherUserId)??(null==e?void 0:e.otheruserid)??(null==e?void 0:e.other_user_id)??(null==e?void 0:e.otherUserID)??(null==e?void 0:e.participantId)??(null==e?void 0:e.participantid)??(null==e?void 0:e.carrierId)??(null==e?void 0:e.carrierid)??void 0,l=null!=a&&""!==String(a).trim()?String(a):void 0,i=String((null==e?void 0:e.otherUserName)??(null==e?void 0:e.otherusername)??(null==e?void 0:e.other_user_name)??(null==e?void 0:e.participant)??(null==e?void 0:e.carrierName)??"").trim()||E(),r=(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||(null==e?void 0:e.createdat)||(null==e?void 0:e.timestamp)||(null==e?void 0:e.time)||null,n=Bl(String((null==e?void 0:e.lastMessage)??(null==e?void 0:e.message)??(null==e?void 0:e.content)??(null==e?void 0:e.text)??"").trim()),d=(e=>{const t=e?new Date(e):null;return t&&!Number.isNaN(t.getTime())?t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):""})(r),o=(e=>{try{if(!e)return null;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?null:t.toISOString()}catch(t){return null}})(r)||void 0,c=I(),m=(null==e?void 0:e.senderId)??(null==e?void 0:e.senderid)??(null==e?void 0:e.sender_id),x=(null==e?void 0:e.receiverId)??(null==e?void 0:e.receiverid)??(null==e?void 0:e.receiver_id),u=c&&null!=m&&String(m)!==String(c),h=Boolean((null==e?void 0:e.isRead)??(null==e?void 0:e.isread)??(null==e?void 0:e.read)??!1),p=u&&!h?1:0,g=l||(c?null!=m&&null!=x?String(m)===String(c)?String(x):String(m):null!=m&&String(m)!==String(c)?String(m):null!=x&&String(x)!==String(c)?String(x):void 0:void 0),b=s?`thread-${String(g||"unknown")}-shipment-${s}`:`thread-${String(g||(null==e?void 0:e.id)||Math.random())}`,f=K((null==e?void 0:e.trackingNumber)??(null==e?void 0:e.tracking_number)??(null==e?void 0:e.trackingnumber),s);return{id:b,otherUserId:g,carrierId:g,participantId:g,carrierName:i,carrierCompany:(null==e?void 0:e.carrierCompany)??(null==e?void 0:e.companyName)??(null==e?void 0:e.company_name)??void 0,participant:i,lastMessage:n,lastMessageTime:d,lastMessageCreatedAt:o,unreadCount:p,isOnline:!1,isArchived:Boolean((null==e?void 0:e.isArchived)??(null==e?void 0:e.is_archived)??!1),messages:Array.isArray(null==e?void 0:e.messages)?e.messages:void 0,shipmentId:s,trackingNumber:f||void 0,status:(null==e?void 0:e.status)?String(e.status):void 0}},O=t=>{const s=(null==t?void 0:t.createdAt)||(null==t?void 0:t.created_at)||(null==t?void 0:t.createdat)||(null==t?void 0:t.timestamp)||(null==t?void 0:t.time)||null,a=s?new Date(s):null,l=a&&!Number.isNaN(a.getTime())?a.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):"",i=a&&!Number.isNaN(a.getTime())?a.toISOString():void 0,r=Bl(String((null==t?void 0:t.message)??(null==t?void 0:t.text)??"").trim()),n=I(),d=(null==t?void 0:t.senderId)??(null==t?void 0:t.senderid)??(null==t?void 0:t.sender_id),o=n&&null!=d&&String(d)===String(n),c=String((null==t?void 0:t.senderrole)||(null==t?void 0:t.senderRole)||(null==t?void 0:t.fromType)||"").toLowerCase(),m="individual"===c?"individual":"corporate"===c?"corporate":"nakliyeci"===c||"carrier"===c?"nakliyeci":"tasiyici"===c||"driver"===c?"tasiyici":"nakliyeci"===e||"tasiyici"===e?"client":"carrier",x=o?"Siz":String((null==t?void 0:t.sendername)||(null==t?void 0:t.senderName)||(null==t?void 0:t.from)||"").trim()||E(),u=o?e:m;return{id:String((null==t?void 0:t.id)??`m-${Math.random()}`),from:x,fromType:u,message:r,timestamp:l,createdAt:i,shipmentId:String((null==t?void 0:t.shipmentId)||(null==t?void 0:t.shipmentid)||""),isRead:Boolean((null==t?void 0:t.isRead)??(null==t?void 0:t.isread)??(null==t?void 0:t.read)??!1),read:Boolean((null==t?void 0:t.read)??(null==t?void 0:t.isRead)??(null==t?void 0:t.isread)??!1)}},P=async(t,s)=>{try{const a=localStorage.getItem("authToken")||localStorage.getItem("token");if(!a)return;const l=Zs(`/api/messages/shipment/${t}`),i=await fetch(l,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!i.ok)return;const r=await i.json().catch(()=>null),n=(null==r?void 0:r.data)||(null==r?void 0:r.messages)||[],d=Array.isArray(n)?n:[],o=I(),c=e=>!(!e||!o)&&String(e)===String(o),m=d[d.length-1]||{},u=(null==m?void 0:m.senderId)??(null==m?void 0:m.senderid)??(null==m?void 0:m.sender_id),p=(null==m?void 0:m.receiverId)??(null==m?void 0:m.receiverid)??(null==m?void 0:m.receiver_id),g=String((null==m?void 0:m.senderName)??(null==m?void 0:m.sendername)??(null==m?void 0:m.sender_name)??"").trim(),b=String((null==m?void 0:m.receiverName)??(null==m?void 0:m.receivername)??(null==m?void 0:m.receiver_name)??"").trim(),f=c(u)?p:u,y=c(u)?b:g,j=(t=>{if(!Array.isArray(t)||0===t.length)return null;const s=t[t.length-1]||{},a=String((null==s?void 0:s.senderrole)||(null==s?void 0:s.senderRole)||"").toLowerCase(),l=String((null==s?void 0:s.receiverrole)||(null==s?void 0:s.receiverRole)||"").toLowerCase(),i=(null==s?void 0:s.senderId)??(null==s?void 0:s.senderid),r=(null==s?void 0:s.receiverId)??(null==s?void 0:s.receiverid);if("nakliyeci"===e||"tasiyici"===e){if("individual"===a||"corporate"===a)return i??null;if("individual"===l||"corporate"===l)return r??null}else{if("nakliyeci"===a||"carrier"===a||"tasiyici"===a||"driver"===a)return i??null;if("nakliyeci"===l||"carrier"===l||"tasiyici"===l||"driver"===l)return r??null}return i??r??null})(d),v=d.map(O).filter(e=>e.message),N=v.length?v[v.length-1]:null,k=(null==s?void 0:s.carrierName)||(null==s?void 0:s.participant)||String(y||"").trim()||E(),w=(null==s?void 0:s.otherUserId)||(null==s?void 0:s.participantId)||(null==s?void 0:s.carrierId)||(null!=f?String(f):null!=j?String(j):void 0),S=(null==s?void 0:s.trackingNumber)||K(void 0,t),z={id:(null==s?void 0:s.id)||`thread-${String(w||"unknown")}-shipment-${t}`,shipmentId:t,otherUserId:w,carrierId:w,participantId:w,carrierName:k,carrierCompany:null==s?void 0:s.carrierCompany,participant:k,lastMessage:(null==N?void 0:N.message)||"",lastMessageTime:(null==N?void 0:N.timestamp)||"",unreadCount:0,isOnline:!1,isArchived:null==s?void 0:s.isArchived,messages:v,trackingNumber:S,status:null==s?void 0:s.status};x(e=>e.some(e=>String(e.id)===String(z.id))?e.map(e=>String(e.id)===String(z.id)?{...e,...z}:e):[z,...e]),h(z)}catch(a){}},G=e=>{h(e),e.shipmentId&&P(String(e.shipmentId),e)};l.useEffect(()=>{const e=(d||"").trim();e&&g(e)},[d]),l.useEffect(()=>{if(!r)return;const e=i?{id:`thread-${i}-shipment-${r}`,otherUserId:i,carrierId:i,participantId:i,shipmentId:r,carrierName:E(),participant:E(),lastMessage:"",lastMessageTime:""}:void 0;P(String(r),e)},[r,P]),l.useEffect(()=>{if(!i)return;const e=m.find(e=>String(e.otherUserId||e.carrierId||e.participantId)===String(i));if(e)G(e);else if(r){const e={id:`thread-${i}-shipment-${r}`,otherUserId:i,carrierId:i,participantId:i,shipmentId:r,carrierName:E(),participant:E(),lastMessage:"",lastMessageTime:"",unreadCount:0,isOnline:!1,messages:[]};G(e),x(t=>t.find(e=>String(e.otherUserId||e.carrierId||e.participantId)===String(i))?t:[...t,e])}setTimeout(()=>{a(e=>{const t=new URLSearchParams(e);return t.delete("userId"),t.delete("prefill"),r&&t.set("shipmentId",r),t})},100)},[i,r,m,a]);const F=async()=>{f(!0);try{const t=localStorage.getItem("authToken")||localStorage.getItem("token");if(!t)return void x([]);let s="";switch(e){case"corporate":s=Zs("/api/messages/corporate");break;case"individual":{const e=await xl(),t=e.success&&e.data?e.data:[],s=Array.isArray(t)?t:[];return x($(s.map(B))),void f(!1)}default:s=Zs("/api/messages")}const a=await fetch(s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Konuşmalar yüklenemedi");const l=await a.json(),i=(null==l?void 0:l.conversations)||(null==l?void 0:l.data)||(null==l?void 0:l.messages)||[],r=Array.isArray(i)?i:[];x($(r.map(B)))}catch(t){x([])}finally{f(!1)}},Y=async()=>{var t;if(!p.trim()||N)return;if(!(e=>{const t=e.toLowerCase();return!["mal","aptal","salak","ahmak","gerizekalı","budala","kapat","sus","defol","siktir","amk","mk","aq","orospu","piç","ibne","geber","öl","geberin"].some(e=>t.includes(e))||(q("🙅 Lütfen kibarca iletişim kurun. Profesyonel bir iş platformundayız.","error"),!1)})(p))return;if(!u)return void q("Lütfen bir sohbet ve mesaj seçin","error");k(!0);const s=p;g("");const a=(s||"").trim(),l={id:`temp-${Date.now()}`,from:"Siz",fromType:"carrier",message:a,timestamp:(new Date).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),createdAt:(new Date).toISOString(),isRead:!1,status:"sending"};h(e=>e?{...e,messages:[...e.messages||[],l],lastMessage:l.message,lastMessageTime:l.timestamp}:e);try{const s=I(),r=e=>!(!e||!s)&&String(e)===String(s),n=async t=>{var s;const a=localStorage.getItem("authToken")||localStorage.getItem("token");if(!a)return"";try{const l=await fetch(Zs(`/api/shipments/${t}`),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!l.ok)return"";const i=await l.json(),n=(null==i?void 0:i.shipment)||(null==(s=null==i?void 0:i.data)?void 0:s.shipment)||(null==i?void 0:i.data)||i;if(!n)return"";const d=(n.status||"").toLowerCase().trim();if(!["accepted","assigned","in_progress","picked_up","in_transit","delivered","completed"].includes(d))throw new Error(`Mesajlaşma için iş onaylanması gerekiyor. Mevcut durum: ${d}`);const o=[n.userId,n.userid,n.user_id,n.ownerId,n.owner_id,n.senderId,n.sender_id,n.corporateId,n.corporate_id,n.individualId,n.individual_id].filter(Boolean),c=[n.carrierId,n.carrierid,n.carrier_id,n.nakliyeciId,n.nakliyeciid,n.nakliyeci_id,n.assignedCarrierId,n.assigned_carrier_id].filter(Boolean),m=("tasiyici"===e?c:o).find(e=>!r(e));if(m)return String(m);const x=("tasiyici"===e?o:c).find(e=>!r(e));return x?String(x):""}catch(l){return""}};let d=u.otherUserId||u.participantId||u.carrierId;if(!d||r(d)){const e=u.shipmentId;if(e){const t=await n(e);t&&(d=t)}}if(!d||r(d))throw new Error("Alıcı bilgisi bulunamadı, sohbeti yeniden başlat.");if(u.shipmentId)try{const e=localStorage.getItem("authToken")||localStorage.getItem("token"),s=await fetch(Zs(`/api/shipments/${u.shipmentId}`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json(),a=(null==e?void 0:e.shipment)||(null==(t=null==e?void 0:e.data)?void 0:t.shipment)||(null==e?void 0:e.data)||e,l=((null==a?void 0:a.status)||"").toLowerCase().trim();if(!["accepted","assigned","in_progress","picked_up","in_transit","delivered","completed"].includes(l))throw new Error(`Mesajlaşma henüz aktif değil. İş durumu: ${l}. Onay bekle.`)}}catch(i){if(i.message.includes("mesajlaşma"))throw i}await ul({receiverId:String(d),message:a,shipmentId:u.shipmentId?String(u.shipmentId):void 0});const o={...l,id:`sent-${Date.now()}`,status:"sent"};h(e=>e?{...e,messages:(e.messages||[]).map(e=>e.id===l.id?o:e),lastMessage:o.message,lastMessageTime:o.timestamp}:e),q("Mesaj gönderildi","success")}catch(r){h(e=>e?{...e,messages:(e.messages||[]).filter(e=>e.id!==l.id)}:e),g(s),q((null==r?void 0:r.message)||"Mesaj gönderilemedi","error")}finally{k(!1)}},q=(e,t="info")=>{S({message:e,type:t}),setTimeout(()=>S(null),3e3)},U=m.filter(e=>{const t=(j||"").toLowerCase(),s=e.carrierName||e.participant||"",a=e.carrierCompany||"",l=String(e.shipmentId??""),i=String(e.trackingNumber??""),r=s.toLowerCase().includes(t)||a.toLowerCase().includes(t)||l.toLowerCase().includes(t)||i.toLowerCase().includes(t),n="archived"===z?!0===e.isArchived:!0!==e.isArchived;return r&&n});return b?Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:Ot.jsx("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:Ot.jsx(Pl,{message:"Mesajlar yükleniyor..."})})}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsxs("title",{children:["Mesajlar - YolNext ",D()]}),Ot.jsx("meta",{name:"description",content:`${D()} mesajları`})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-800 to-blue-900 rounded-3xl flex items-center justify-center shadow-2xl",children:Ot.jsx(Ee,{className:"w-10 h-10 text-white"})})}),Ot.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-slate-900 mb-4",children:["Mesajlar"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"& İletişim"})]}),Ot.jsxs("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:[E(),"lerinizle profesyonel iletişim kurun ve gönderilerinizi takip edin"]})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:`${e}.messages`,isEmpty:!b&&0===m.length,icon:Ee,title:"Şimdi ne yapmalısın?",description:"tasiyici"===e?"Nakliyeci ile yükleme/talimat ve işin durumunu burada netleştir. Konuşmayı seçip kısa mesajlarla hızlıca bilgi ver.":"Teklif kabul ettiyseniz operasyon detaylarını burada netleştirin. Yeni konuşma başlatmak için ilgili sayfalardan gönderiyi açıp mesajlaşmaya geçebilirsiniz.",primaryAction:{label:"tasiyici"===e?"İş Pazarı":"corporate"===e||"individual"===e?"Gönderilerim":"İlanlarım",to:"tasiyici"===e?"/tasiyici/market":"corporate"===e?"/corporate/shipments":"individual"===e?"/individual/my-shipments":`/${e}/listings`},secondaryAction:{label:"tasiyici"===e?"Tekliflerim":"Teklifler",to:"tasiyici"===e?"/tasiyici/my-offers":`/${e}/offers`}})}),Ot.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-slate-200 overflow-hidden",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 border-b border-slate-200 px-8 py-6",children:Ot.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 justify-between items-start lg:items-center",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Mesaj Merkezi"}),Ot.jsxs("p",{className:"text-slate-600",children:[E(),"lerinizle gerçek zamanlı iletişim"]})]}),Ot.jsx("div",{className:"hidden lg:block w-px h-12 bg-slate-300"}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[Ot.jsx(L,{className:"w-4 h-4"}),"Son güncelleme: ",(new Date).toLocaleString("tr-TR")]})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-3",children:[Ot.jsxs("button",{onClick:()=>{A(!0),F().finally(()=>{A(!1)})},disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors disabled:opacity-50",children:[Ot.jsx(y,{className:"w-4 h-4 "+(C?"animate-spin":"")}),"Yenile"]}),"tasiyici"!==e&&Ot.jsxs("button",{type:"button",onClick:()=>t((()=>{switch(e){case"corporate":return"/corporate/settings";case"individual":return"/individual/settings";case"nakliyeci":return"/nakliyeci/settings";case"tasiyici":return"/tasiyici/settings";default:return"/settings"}})()),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[Ot.jsx(oe,{className:"w-4 h-4"}),"Ayarlar"]})]})]})}),Ot.jsxs("div",{className:"flex h-[600px]",style:{minHeight:"600px"},children:[Ot.jsxs("div",{className:"w-1/3 border-r border-slate-200 bg-slate-50",style:{minHeight:"600px"},children:[Ot.jsx("div",{className:"p-4 border-b border-slate-200",children:Ot.jsxs("div",{className:"flex space-x-1 bg-white p-1 rounded-lg shadow-sm",children:[Ot.jsxs("button",{onClick:()=>T("active"),className:"flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors "+("active"===z?"bg-blue-500 text-white shadow-sm":"text-slate-600 hover:text-slate-900"),children:["Aktif (",m.filter(e=>!e.isArchived).length,")"]}),Ot.jsxs("button",{onClick:()=>T("archived"),className:"flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors "+("archived"===z?"bg-blue-500 text-white shadow-sm":"text-slate-600 hover:text-slate-900"),children:["Arşiv (",m.filter(e=>e.isArchived).length,")"]})]})}),Ot.jsx("div",{className:"p-4 border-b border-slate-200",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:`${E()} veya gönderi ara...`,value:j,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm"})]})}),Ot.jsx("div",{className:"flex-1 overflow-y-auto",style:{maxHeight:"400px"},children:0===U.length?Ot.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[Ot.jsx(Ee,{className:"w-16 h-16 text-slate-300 mb-4"}),Ot.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"💬 Henüz mesaj yok"}),Ot.jsxs("p",{className:"text-slate-500 text-sm",children:[E(),"lerinizle mesajlaşmaya başla"]})]}):U.map(e=>Ot.jsx("div",{onClick:()=>G(e),className:"p-4 border-b border-slate-200 cursor-pointer transition-all hover:bg-white "+((null==u?void 0:u.id)===e.id?"bg-white border-r-4 border-r-blue-500":""),children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:(e.carrierName||e.participant||E()).charAt(0).toUpperCase()}),Ot.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white "+(e.isOnline?"bg-emerald-500":"bg-slate-400")})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:e.carrierName||e.participant||E()}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[e.unreadCount&&e.unreadCount>0&&Ot.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-slate-800 to-blue-900 text-white text-xs rounded-full flex items-center justify-center",children:e.unreadCount}),Ot.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{const t=m.find(t=>t.id===e);if(!t)return;const s=!t.isArchived;try{x(t=>t.map(t=>t.id===e?{...t,isArchived:s}:t)),(null==u?void 0:u.id)===e&&h(null),q("Sohbet "+(s?"arşivlendi":"arşivden çıkarıldı"),"success")}catch(a){q("İşlem başarısız","error")}})(e.id)},className:"p-1 text-slate-400 hover:text-slate-600 transition-colors",title:e.isArchived?"Arşivden çıkar":"Arşivle",children:Ot.jsx(Be,{className:"w-4 h-4"})})]})]}),Ot.jsx("div",{className:"text-sm text-slate-600 mb-2 truncate",children:e.trackingNumber||""}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("Yolda"===e.status?"bg-blue-100 text-blue-700":"Teslim Edildi"===e.status?"bg-emerald-100 text-emerald-700":"bg-orange-100 text-orange-700"),children:e.status||"Aktif"}),Ot.jsx("span",{className:"text-xs text-slate-500",children:e.lastMessageTime})]}),Ot.jsx("div",{className:"flex items-center justify-between mt-2",children:Ot.jsx("p",{className:"text-sm text-slate-600 truncate flex-1",children:e.lastMessage})})]})]})},String(e.id)))})]}),Ot.jsx("div",{className:"flex-1 flex flex-col",style:{minHeight:"600px"},children:u?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:(u.carrierName||u.participant||E()).charAt(0).toUpperCase()}),Ot.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white "+(u.isOnline?"bg-emerald-500":"bg-slate-400")})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900",children:u.carrierName||u.participant||E()}),Ot.jsx("p",{className:"text-sm text-slate-500",children:u.carrierCompany||"Şirket bilgisi yok"})]})]}),Ot.jsx("div",{className:"flex items-center gap-2",children:Ot.jsx("button",{onClick:async()=>{if(!u)return;if(window.confirm("Bu sohbeti silmek istediğinize emin misiniz?"))try{const e=u.otherUserId||u.carrierId||u.participantId;e&&await hl(String(e)),x(t=>e?t.filter(t=>String(t.otherUserId||t.carrierId||t.participantId||"")!==String(e)):t.filter(e=>e.id!==u.id)),h(null),q("Sohbet silindi","success")}catch(e){q((null==e?void 0:e.message)||"Sohbet silinemedi","error")}},className:"px-3 py-2 text-xs font-semibold text-red-600 border border-red-200 rounded-lg hover:text-red-700 hover:bg-red-50 transition",children:"Sohbeti Sil"})})]}),u.shipmentId&&Ot.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:Ot.jsx("div",{className:"flex items-center justify-between",children:Ot.jsxs("div",{children:[Ot.jsxs("h4",{className:"font-semibold text-slate-900",children:["Gönderi ",K(u.trackingNumber,u.shipmentId)]}),Ot.jsx("div",{className:"flex items-center gap-4 mt-1",children:Ot.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-600",children:[Ot.jsx(R,{className:"w-4 h-4"}),K(u.trackingNumber,u.shipmentId)||"Takip No"]})})]})})})]}),Ot.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",style:{maxHeight:"400px"},children:(u.messages||[]).map((e,t)=>{const s=new Date(e.createdAt||Date.now()).toDateString()!==(t>0?new Date((u.messages||[])[t-1].createdAt||Date.now()).toDateString():null);return Ot.jsxs(n.Fragment,{children:[s&&Ot.jsx("div",{className:"flex items-center justify-center my-4",children:Ot.jsx("div",{className:"px-3 py-1 bg-slate-100 rounded-full text-xs text-slate-600",children:new Date(e.createdAt||Date.now()).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})})}),Ot.jsx("div",{className:"flex "+("Siz"===e.from?"justify-end":"justify-start"),children:Ot.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+("Siz"===e.from?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"system"===e.fromType?"bg-slate-100 text-slate-900":"bg-slate-200 text-slate-900"),style:{wordBreak:"break-word",overflowWrap:"break-word"},children:[Ot.jsx("p",{className:"text-sm whitespace-pre-wrap",style:{wordBreak:"break-word"},children:e.message}),Ot.jsxs("div",{className:"flex items-center justify-between mt-1",children:[Ot.jsx("p",{className:"text-xs "+("Siz"===e.from?"text-blue-100":"text-slate-500"),children:e.timestamp}),"Siz"===e.from&&e.status&&Ot.jsxs("div",{className:"ml-2",children:["sending"===e.status&&Ot.jsx(L,{className:"w-3 h-3 text-blue-100"}),"sent"===e.status&&Ot.jsx(Ke,{className:"w-3 h-3 text-blue-100"}),"delivered"===e.status&&Ot.jsx(je,{className:"w-3 h-3 text-blue-100"})]})]})]})})]},e.id)})}),Ot.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[Ot.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(e=>Ot.jsx("button",{onClick:()=>g(e),className:"px-3 py-1.5 text-xs bg-slate-50 border border-slate-300 text-slate-700 rounded-md hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-colors",children:e},e))}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx("input",{type:"text",value:p,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),Y()),placeholder:"Mesajınızı yazın...",className:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),Ot.jsx("button",{onClick:Y,disabled:!p.trim()||N,className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-xl hover:from-blue-900 hover:to-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:N?Ot.jsx("span",{className:"text-sm",children:"Gönderiliyor..."}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ne,{className:"w-4 h-4"}),"Gönder"]})})]})]})]}):Ot.jsx("div",{className:"flex items-center justify-center h-full",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Ee,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Sohbet Seçin"}),Ot.jsx("p",{className:"text-slate-500",children:"Görüntülemek istediğiniz konuşmayı seçin"})]})})})]})]})]}),w&&Ot.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-in slide-in-from-bottom-5",children:Ot.jsxs("div",{className:"px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 "+("success"===w.type?"bg-green-500 text-white":"error"===w.type?"bg-red-500 text-white":"bg-blue-500 text-white"),children:["success"===w.type&&Ot.jsx(J,{className:"w-5 h-5"}),"error"===w.type&&Ot.jsx(te,{className:"w-5 h-5"}),"info"===w.type&&Ot.jsx(H,{className:"w-5 h-5"}),Ot.jsx("p",{className:"text-sm font-medium",children:w.message}),Ot.jsx("button",{onClick:()=>S(null),className:"ml-2 hover:opacity-75 transition-opacity",children:"×"})]})})]})}function Xi(){return Ot.jsx(Zi,{userType:"individual"})}const Qi=({title:e="Bir Hata Oluştu",message:t,onRetry:s,showSupport:a=!0,className:l=""})=>Ot.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-slate-200 p-6 text-center ${l}`,children:[Ot.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ot.jsx(f,{className:"w-8 h-8 text-red-600"})}),Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e}),Ot.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:t}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s&&Ot.jsxs("button",{onClick:s,className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-2","aria-label":"Tekrar dene",children:[Ot.jsx(y,{className:"w-5 h-5"}),"Tekrar Dene"]}),a&&Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-sm text-slate-600",children:[Ot.jsxs("a",{href:"mailto:destek@yolnext.com.tr",className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors","aria-label":"E-posta ile destek al",children:[Ot.jsx(S,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"E-posta"})]}),Ot.jsxs("a",{href:"tel:+902124567890",className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors","aria-label":"Telefon ile destek al",children:[Ot.jsx(z,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Telefon"})]})]})]})]}),er=({isOpen:e,onClose:t,title:s,children:a,size:i="md",className:r=""})=>{const n=l.useRef(null),d=l.useRef(null);return l.useEffect(()=>(e?(document.body.style.overflow="hidden",d.current=document.activeElement,setTimeout(()=>{if(n.current){const e=n.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e?e.focus():n.current.focus()}},100)):(document.body.style.overflow="unset",d.current&&d.current.focus()),()=>{document.body.style.overflow="unset"}),[e]),l.useEffect(()=>{const s=s=>{"Escape"===s.key&&e&&t()};return e&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e,t]),l.useEffect(()=>{if(!e||!n.current)return;const t=e=>{var t;if("Tab"!==e.key)return;const s=null==(t=n.current)?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!s||0===s.length)return;const a=s[0],l=s[s.length-1];e.shiftKey?document.activeElement===a&&(e.preventDefault(),l.focus()):document.activeElement===l&&(e.preventDefault(),a.focus())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e]),e?Ot.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":s?"modal-title":void 0,"aria-describedby":s?void 0:"modal-description",children:[Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t,"aria-hidden":"true"}),Ot.jsx("div",{className:"flex min-h-full items-center justify-center p-2 sm:p-4",children:Ot.jsx("div",{ref:n,className:`relative w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]} ${r}`,tabIndex:-1,children:Ot.jsxs("div",{className:"bg-white rounded-xl shadow-xl",children:[s&&Ot.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Ot.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:s}),Ot.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Modalı kapat",children:Ot.jsx(_,{className:"w-6 h-6"})})]}),Ot.jsx("div",{className:"p-6",children:a})]})})})]}):null},tr=({isOpen:e,onClose:t,onSubmitted:s,mode:a="rate",ratedUser:i,currentUser:r,shipmentId:n})=>{const[d,o]=l.useState(0),[c,m]=l.useState(""),[x,u]=l.useState(!1),[h,p]=l.useState([]),[g,b]=l.useState(0),[f,y]=l.useState(0),[j,v]=l.useState(!1),[N,k]=l.useState(""),[w,S]=l.useState("");l.useEffect(()=>{e&&i.id&&(z(),k(""),S(""))},[e,i.id]),l.useEffect(()=>{if(!e)return;const s=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e,t]);const z=async()=>{try{v(!0);const e=localStorage.getItem("authToken"),t=await fetch(Zs(`/api/ratings/${i.id}`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json(),s=(null==e?void 0:e.data)&&"object"==typeof e.data?e.data:e,a=(null==s?void 0:s.ratings)||(null==e?void 0:e.ratings)||e||[];p(Array.isArray(a)?a:[]),b(Number((null==s?void 0:s.averageRating)||0)||0),y(Number((null==s?void 0:s.totalRatings)||(Array.isArray(a)?a.length:0))||0)}}catch(e){}finally{v(!1)}};return e?Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:Ot.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:Ot.jsx(O,{className:"w-5 h-5 text-yellow-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Değerlendirme"}),Ot.jsxs("p",{className:"text-sm text-gray-600",children:[i.name," - ",i.type]}),f>0&&Ot.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ortalama: ",Number.isFinite(g)?g.toFixed(1):"0.0"," / 5 • ",f," yorum"]})]})]}),Ot.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(_,{className:"w-5 h-5 text-gray-500"})})]}),Ot.jsxs("div",{className:"flex-1 overflow-hidden flex",children:["view"!==a&&Ot.jsxs("div",{className:"flex-1 p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Değerlendirme Yap"}),Ot.jsxs("form",{onSubmit:async e=>{var a,l,h;if(e.preventDefault(),0!==d&&!x){k(""),S("");try{u(!0);const e=localStorage.getItem("authToken");if(!e)return k("Oturum açmanız gerekiyor"),void u(!1);const x=await fetch(Zs("/api/ratings"),{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({rated_user_id:i.id,ratedUserId:i.id,rating:d,comment:c.trim(),shipment_id:n,shipmentId:n})}),g=await x.json();if(x.ok&&!1!==g.success)p(e=>{var t,s,a,l;return[{id:(null==(t=g.data)?void 0:t.id)||Date.now().toString(),rating:(null==(s=g.data)?void 0:s.rating)||d,comment:(null==(a=g.data)?void 0:a.comment)||c.trim(),rater_name:r.name,created_at:(null==(l=g.data)?void 0:l.created_at)||(new Date).toISOString()},...e]}),s&&s({shipmentId:n,rating:Number((null==(a=g.data)?void 0:a.rating)||d)||d,comment:String((null==(l=g.data)?void 0:l.comment)||c.trim()),id:null==(h=g.data)?void 0:h.id}),o(0),m(""),S("Değerlendirme başarıyla gönderildi!"),setTimeout(()=>{t()},2e3);else{const e=g.message||g.error||"Değerlendirme gönderilemedi";k(e)}}catch(g){k(g.message||"Değerlendirme gönderilirken bir hata oluştu")}finally{u(!1)}}},className:"space-y-6",children:[N&&Ot.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[Ot.jsx("div",{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",children:Ot.jsx(_,{className:"w-5 h-5"})}),Ot.jsx("p",{className:"text-sm text-red-800 flex-1",children:N}),Ot.jsx("button",{type:"button",onClick:()=>k(""),className:"text-red-600 hover:text-red-800",children:Ot.jsx(_,{className:"w-4 h-4"})})]}),w&&Ot.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[Ot.jsx("div",{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5",children:Ot.jsx(Re,{className:"w-5 h-5"})}),Ot.jsx("p",{className:"text-sm text-green-800 flex-1",children:w})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Puan"}),Ot.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(e=>Ot.jsx("button",{type:"button",onClick:()=>o(e),className:"w-10 h-10 rounded-lg transition-colors "+(e<=d?"text-yellow-400 bg-yellow-50":"text-gray-300 hover:text-yellow-400"),children:Ot.jsx(O,{className:"w-6 h-6 fill-current"})},e))}),Ot.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[0===d&&"Değerlendirme puanınızı seçiniz",1===d&&"Yetersiz hizmet kalitesi",2===d&&"Geliştirilmesi gereken hizmet",3===d&&"Standart hizmet seviyesi",4===d&&"Kaliteli hizmet deneyimi",5===d&&"Olağanüstü hizmet mükemmeliyeti"]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yorum (Opsiyonel)"}),Ot.jsx("textarea",{value:c,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",rows:4,placeholder:"Hizmet deneyiminizi ve önerilerinizi bizimle paylaşınız..."})]}),Ot.jsx("button",{type:"submit",disabled:0===d||x,className:"w-full px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:x?Ot.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Re,{className:"w-4 h-4"}),"Değerlendirme Gönder"]})})]})]}),Ot.jsxs("div",{className:("view"===a?"flex-1":"w-80 border-l border-gray-200")+" p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Önceki Değerlendirmeler"}),j?Ot.jsx("div",{className:"flex justify-center items-center h-32",children:Ot.jsx("div",{className:"w-6 h-6 border-2 border-yellow-600 border-t-transparent rounded-full animate-spin"})}):0===h.length?Ot.jsxs("div",{className:"text-center text-gray-500 py-8",children:[Ot.jsx(O,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),Ot.jsx("p",{children:"Henüz değerlendirme yok"})]}):Ot.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:h.map((e,t)=>{return Ot.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx("div",{className:"flex",children:[1,2,3,4,5].map(t=>Ot.jsx(O,{className:"w-4 h-4 "+(t<=e.rating?"text-yellow-400 fill-current":"text-gray-300")},t))}),Ot.jsx("span",{className:"text-sm text-gray-500",children:(s=e.created_at,new Date(s).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})]}),e.comment&&Ot.jsx("p",{className:"text-sm text-gray-700 mb-2",children:e.comment}),Ot.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[Ot.jsx(xe,{className:"w-3 h-3"}),Ot.jsx("span",{children:e.rater_name})]})]},`${String(e.id||"")}-${String(e.created_at||e.createdAt||"")}-${String(e.rater_id||e.raterId||"")}-${t}`);var s})})]})]})]})}):null},sr=(e,t=.01)=>Math.round(e*t*100)/100,ar=e=>{if(!e)return"-";try{const t=new Date(e);return Number.isFinite(t.getTime())?new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"long",day:"numeric"}).format(t):e}catch{return e}};function lr(){const e=o(),{user:t}=sa(),[s,a]=l.useState(()=>Date.now()),[i,r]=l.useState("all"),[n,c]=l.useState(""),[m,x]=l.useState("date"),[u,h]=l.useState(!1),[p,g]=l.useState(!1),[b,f]=l.useState(!1),[y,j]=l.useState(!1),[v,N]=l.useState(null),[k,w]=l.useState(null),[S,z]=l.useState(""),[C,A]=l.useState(null),[D,E]=l.useState(null),[I,M]=l.useState(""),[B,P]=l.useState(""),[F,Y]=l.useState(""),[q,H]=l.useState(!1),[V,Z]=l.useState(!1),[X,ee]=l.useState(""),[te,se]=l.useState([]),[ae,le]=l.useState(!1),[re,ne]=l.useState(null),[de,oe]=l.useState({totalOffers:0,pendingOffers:0,acceptedOffers:0,rejectedOffers:0,averagePrice:0,topCarrier:"",responseTime:0}),ce=l.useRef(null),xe=l.useRef(!1),he=l.useRef(!1);l.useEffect(()=>{const e=null==t?void 0:t.id,s=String((null==t?void 0:t.role)||"individual").toLowerCase();e&&(localStorage.setItem(`yolnext:lastSeen:offers:${e}:${s}`,(new Date).toISOString()),window.dispatchEvent(new Event("yolnext:refresh-badges")))},[t]),l.useEffect(()=>{xe.current=y},[y]),l.useEffect(()=>{const e=setInterval(()=>a(Date.now()),3e4);return()=>clearInterval(e)},[]),l.useEffect(()=>()=>{ce.current&&clearTimeout(ce.current)},[]);const pe=e=>{const t=String(e||"").toLowerCase();return"accepted"===t||"offer_accepted"===t?"accepted":"rejected"===t||"cancelled"===t||"canceled"===t?"rejected":"pending"},ge=l.useCallback(async()=>{var e,t,s,a,l,i,r;if(!he.current){he.current=!0,H(!0);try{const e=localStorage.getItem("user")?(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}})():null,t=(null==e||e.id,localStorage.getItem("authToken")),s=new AbortController,a=setTimeout(()=>s.abort(),1e4),l=await fetch(Zs("/api/offers/individual"),{headers:{Authorization:`Bearer ${t||""}`,"Content-Type":"application/json"},signal:s.signal});if(clearTimeout(a),!l.ok)throw new Error(`HTTP ${l.status}: Teklifler yüklenemedi`);const i=await l.json(),r=i.data||i.offers||(Array.isArray(i)?i:[]),n=Array.isArray(r)?r:[],d=n.length,o=n.filter(e=>"pending"===pe(null==e?void 0:e.status)).length,c=n.filter(e=>"accepted"===pe(null==e?void 0:e.status)).length,m=n.filter(e=>"rejected"===pe(null==e?void 0:e.status)).length,x=d>0?n.reduce((e,t)=>{const s=Number((null==t?void 0:t.price)||(null==t?void 0:t.offerPrice)||0);return e+(Number.isFinite(s)?s:0)},0)/d:0,u=n.map(e=>{var t,s;let a=e.message||"",l=!1,i="";if(a&&a.startsWith("[ROUTE_PLANNER:")){l=!0;const e=a.match(/^\[ROUTE_PLANNER:([^\]]+)\]/);e&&(i=e[1],a=a.replace(/^\[ROUTE_PLANNER:[^\]]+\]/,""))}return{id:(null==(t=e.id)?void 0:t.toString())||"",shipmentId:e.shipmentId?String(e.shipmentId):e.shipment_id?String(e.shipment_id):void 0,shipmentTitle:e.shipmentTitle||e.title||"",carrierName:e.carrierName||e.fullName||"Nakliyeci",carrierCompany:e.carrierCompany||e.companyName||void 0,carrierId:null!=e.carrierId?String(e.carrierId):void 0,carrierRating:Number(e.carrierRating||0)||0,carrierVerified:e.carrierVerified||!1,carrierReviews:Number(e.carrierReviews||0)||0,carrierExperience:String(e.carrierExperience||"").trim(),completedJobs:Number(e.completedJobs||0)||0,successRate:Number(e.successRate||0)||0,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0,estimatedDelivery:e.estimatedDeliveryDate||e.estimatedDelivery||"",expiresAt:(e=>{const t=(null==e?void 0:e.expiresAt)||(null==e?void 0:e.expires_at)||(null==e?void 0:e.expiresat),s=String(t||"").trim();if(s)return s;const a=(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||(null==e?void 0:e.date),l=a?new Date(a):null;return l&&Number.isFinite(l.getTime())?new Date(l.getTime()+18e5).toISOString():""})(e),message:a,isFromRoutePlanner:l,sourceCity:i,status:pe(e.status),createdAt:e.createdAt||e.created_at||(new Date).toISOString(),pickupAddress:e.pickupAddress||(e.pickupAddressLine?`${e.pickupAddressLine}${e.pickupStreet?`, ${e.pickupStreet}`:""}${e.pickupBuildingNumber?` No:${e.pickupBuildingNumber}`:""}${e.pickupDistrict?`, ${e.pickupDistrict}`:""}${e.pickupCity?`, ${e.pickupCity}`:""}`.trim():`${e.pickupCity||""} ${e.pickupDistrict||""}`.trim())||"",deliveryAddress:e.deliveryAddress||(e.deliveryAddressLine?`${e.deliveryAddressLine}${e.deliveryStreet?`, ${e.deliveryStreet}`:""}${e.deliveryBuildingNumber?` No:${e.deliveryBuildingNumber}`:""}${e.deliveryDistrict?`, ${e.deliveryDistrict}`:""}${e.deliveryCity?`, ${e.deliveryCity}`:""}`.trim():`${e.deliveryCity||""} ${e.deliveryDistrict||""}`.trim())||"",weight:(null==(s=e.weight)?void 0:s.toString())||"",dimensions:e.dimensions||"",specialFeatures:e.specialFeatures||[],tracking:e.tracking||!1,priority:e.priority||"medium",trackingCode:Ri(e.trackingCode||e.tracking_code,e.shipmentId||e.shipment_id),carrierLogo:e.carrierLogo||"",recentComments:Array.isArray(e.recentComments)?e.recentComments:[],responseTime:String(e.responseTime||"").trim()}});se(u),oe({totalOffers:d,pendingOffers:o,acceptedOffers:c,rejectedOffers:m,averagePrice:x,topCarrier:"",responseTime:0}),Y("")}catch(n){se([]),oe({totalOffers:0,pendingOffers:0,acceptedOffers:0,rejectedOffers:0,averagePrice:0,topCarrier:"",responseTime:0});let d="Teklifler şu anda yüklenemiyor. Lütfen birkaç dakika sonra tekrar deneyin.";"AbortError"===(null==n?void 0:n.name)||(null==(e=null==n?void 0:n.message)?void 0:e.includes("timeout"))||(null==(t=null==n?void 0:n.message)?void 0:t.includes("Timeout"))?d="İstek zaman aşımına uğradı. Lütfen tekrar deneyin.":(null==(s=null==n?void 0:n.message)?void 0:s.includes("fetch"))||(null==(a=null==n?void 0:n.message)?void 0:a.includes("Failed to fetch"))?d="İnternet bağlantınızı kontrol edin. Bağlantı sorunu giderildikten sonra tekrar deneyin.":500===(null==(l=null==n?void 0:n.response)?void 0:l.status)||500===(null==n?void 0:n.status)?d="Teklifler şu anda yüklenemiyor. Lütfen birkaç dakika sonra tekrar deneyin.":((null==(i=null==n?void 0:n.message)?void 0:i.includes("401"))||(null==(r=null==n?void 0:n.message)?void 0:r.includes("401")))&&(d="Oturum süreniz dolmuş. Lütfen tekrar giriş yapın."),Y(d)}finally{H(!1),he.current=!1}}},[]);l.useEffect(()=>{ge().catch(()=>{})},[ge]);const be=[...te.filter(e=>{const t="all"===i||e.status===i,s=!n||""===n.trim()||(e.shipmentTitle||"").toLowerCase().includes(n.toLowerCase())||(e.carrierName||"").toLowerCase().includes(n.toLowerCase())||(e.trackingCode||"").toLowerCase().includes(n.toLowerCase());return t&&s})].sort((e,t)=>{if("price"===m)return Number(e.price||0)-Number(t.price||0);if("rating"===m)return Number(t.carrierRating||0)-Number(e.carrierRating||0);if("delivery"===m){const s=new Date(e.estimatedDelivery||"").getTime(),a=new Date(t.estimatedDelivery||"").getTime();return Number.isFinite(s)&&Number.isFinite(a)?s-a:String(e.estimatedDelivery||"").localeCompare(String(t.estimatedDelivery||""),"tr")}return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}),fe=e=>{switch(e){case"accepted":return Ot.jsx(J,{className:"w-3 h-3 mr-1"});case"rejected":return Ot.jsx(ie,{className:"w-3 h-3 mr-1"});default:return Ot.jsx(L,{className:"w-3 h-3 mr-1"})}},ye=e=>{switch(e){case"accepted":return{text:"Kabul Edildi",color:"bg-green-100 text-green-800"};case"rejected":return{text:"Reddedildi",color:"bg-red-100 text-red-800"};case"pending":return{text:"Beklemede",color:"bg-yellow-100 text-yellow-800"};default:return{text:"Bilinmiyor",color:"bg-gray-100 text-gray-800"}}},[je,ve]=l.useState(!1),[Ne,ke]=l.useState(null),we=async e=>{ke(e),await Se(e)},Se=async t=>{var s,a;const l=t||Ne;if(!l)return;H(!0),ve(!1);const i=setTimeout(()=>{H(!1),Y("Teklif kabul işlemi zaman aşımına uğradı. Lütfen tekrar deneyin.")},1e4);try{const t=te.find(e=>String(e.id)===String(l))||null,r=await fetch(Zs(`/api/offers/${l}/accept`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}}),n=await r.json().catch(()=>null);if(!r.ok)throw clearTimeout(i),new Error((null==n?void 0:n.message)||"Teklif kabul edilemedi");clearTimeout(i);const d=(null==(s=null==n?void 0:n.data)?void 0:s.carrierId)?String(n.data.carrierId):(null==t?void 0:t.carrierId)?String(t.carrierId):null,o=(null==(a=null==n?void 0:n.data)?void 0:a.shipmentId)?String(n.data.shipmentId):(null==t?void 0:t.shipmentId)?String(t.shipmentId):null,c=`Merhaba, ödeme detaylarını netleştirelim. İş No: #${o||""}`.trim();Ga("offer_accept_success",{offerId:l,shipmentId:o,carrierId:d}),ee("Teklif başarıyla kabul edildi. Ödeme detaylarını mesajlaşma üzerinden yazılı olarak netleştirmenizi öneririz. Gönderileriniz sayfasına yönlendiriliyorsunuz..."),Z(!0),se(e=>e.filter(e=>e.id!==l)),oe(e=>({...e,pendingOffers:Math.max(0,e.pendingOffers-1),acceptedOffers:e.acceptedOffers+1})),setTimeout(()=>{var s;Z(!1),e("/individual/my-shipments",{state:{refresh:!0,acceptedOffer:{carrierId:d,carrierName:(null==t?void 0:t.carrierName)||(null==(s=null==n?void 0:n.data)?void 0:s.carrierName)||"Nakliyeci",shipmentId:o,prefill:c}}})},2e3)}catch(r){clearTimeout(i),Y("Teklif kabul edilirken bir hata oluştu. Lütfen tekrar deneyin."),H(!1)}finally{clearTimeout(i),H(!1),ke(null)}},ze=async e=>{H(!0);try{if(!(await fetch(Zs(`/api/offers/${e}/reject`),{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).ok)throw new Error("Teklif reddedilemedi");ee("Teklif başarıyla reddedildi. İlgili taraf bilgilendirilmiştir."),Z(!0),se(t=>t.filter(t=>t.id!==e)),oe(e=>({...e,pendingOffers:Math.max(0,e.pendingOffers-1),rejectedOffers:e.rejectedOffers+1})),await ge(),setTimeout(()=>Z(!1),2e3),M(""),P("")}catch(t){Y("Teklif reddedilirken bir hata oluştu. Lütfen tekrar deneyin."),H(!1)}finally{H(!1),E(null),h(!1)}},Te=e=>"accepted"===String(e||"").trim(),Ce=e=>{(null==e?void 0:e.carrierId)&&(ne({id:String(e.carrierId),name:e.carrierName||"Nakliyeci",email:"",type:"nakliyeci"}),le(!0))};return q&&0===te.length?Ot.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:Ot.jsx(Pl,{message:"Teklifler yükleniyor...",size:"lg"})}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsx(Fl,{isVisible:V,message:X,duration:2e3,onClose:()=>Z(!1)}),F&&0===te.length&&!q&&Ot.jsx("div",{className:"max-w-5xl mx-auto px-4 py-6",children:Ot.jsx(Qi,{title:"Teklifler Yüklenemedi",message:F,onRetry:()=>{Y(""),ge()},showSupport:!0})}),Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Tekliflerim - YolNext Bireysel"}),Ot.jsx("meta",{name:"description",content:"Gönderileriniz için gelen teklifleri yönetin"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(W,{className:"w-8 h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-3",children:["Tekliflerinizi"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Yönetin"})]}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Gönderileriniz için gelen teklifleri karşılaştırın ve en uygun olanını seçin"})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"individual.offers",isEmpty:!q&&0===te.length,icon:W,title:"Teklif Yönetimi",description:"Gelen teklifleri inceleyin, nakliyeci profillerini değerlendirin ve en uygun teklifi seçin. Teklif kabul edildiğinde süreç başlar; ödeme detaylarını mesajlaşma üzerinden yazılı netleştirmeniz önerilir.",primaryAction:{label:"Gönderi Oluştur",to:"/individual/create-shipment"},secondaryAction:{label:"Gönderilerim",to:"/individual/my-shipments"}})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Toplam Teklif"}),Ot.jsx("p",{className:"text-2xl font-bold text-slate-900",children:de.totalOffers})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(W,{className:"w-6 h-6 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Bekleyen"}),Ot.jsx("p",{className:"text-2xl font-bold text-slate-900",children:de.pendingOffers})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Kabul Edilen"}),Ot.jsx("p",{className:"text-2xl font-bold text-slate-900",children:de.acceptedOffers})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:Ot.jsx(J,{className:"w-6 h-6 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Ortalama Fiyat"}),Ot.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["₺",isNaN(de.averagePrice)?"0":de.averagePrice.toFixed(0)]})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-700 rounded-xl flex items-center justify-center",children:Ot.jsx($,{className:"w-6 h-6 text-white"})})]})})]}),Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Teklif ara...",value:n,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Teklif ara"})]}),Ot.jsxs("select",{value:i,onChange:e=>r(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Durum filtresi",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"pending",children:"Bekleyen"}),Ot.jsx("option",{value:"accepted",children:"Kabul Edilen"}),Ot.jsx("option",{value:"rejected",children:"Reddedilen"})]}),Ot.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Sıralama seçeneği",children:[Ot.jsx("option",{value:"date",children:"Tarihe Göre"}),Ot.jsx("option",{value:"price",children:"Fiyata Göre"}),Ot.jsx("option",{value:"rating",children:"Puana Göre"}),Ot.jsx("option",{value:"delivery",children:"Teslimat Süresine Göre"})]}),Ot.jsxs("button",{onClick:()=>{c(""),r("all"),x("date")},className:"px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors flex items-center justify-center gap-2",children:[Ot.jsx(_,{className:"w-4 h-4"}),"Sıfırla"]})]})}),Ot.jsx("div",{className:"space-y-4",children:be.length>0?be.map(e=>Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg border hover:shadow-xl transition-all duration-300 group relative "+(e.isFromRoutePlanner?"border-l-4 border-l-amber-500 border-t border-r border-b border-slate-200":"border border-slate-200"),children:[e.isFromRoutePlanner&&Ot.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 bg-amber-50 border border-amber-200 rounded-lg px-3 py-1.5 z-10",children:[Ot.jsx(Oe,{className:"w-4 h-4 text-amber-600"}),Ot.jsx("span",{className:"text-xs font-semibold text-amber-800",children:"Dışarıdan Gelen"})]}),Ot.jsxs("div",{className:"p-6",children:[e.isFromRoutePlanner&&e.sourceCity&&Ot.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:Ot.jsxs("p",{className:"text-sm text-amber-800",children:[Ot.jsx("span",{className:"font-semibold",children:"Bilgi:"})," Bu araç ",Ot.jsx("span",{className:"font-bold",children:e.sourceCity}),"'dan geliyor."]})}),Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(W,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-600 transition-colors",children:e.shipmentTitle}),Ot.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[Ot.jsx("span",{className:"font-mono bg-slate-100 text-slate-800 px-2 py-1 rounded",children:e.trackingCode}),Ot.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("tr-TR")})]})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["₺",e.price.toLocaleString()]}),Ot.jsxs("div",{className:"text-sm text-slate-500",children:["Teslimat: ",ar(e.estimatedDelivery)]}),(()=>{const t=String(e.expiresAt||"").trim();if(!t)return null;const a=new Date(t).getTime();if(!Number.isFinite(a))return null;const l=a-s,i=Math.max(0,Math.ceil(l/6e4)),r=l<=0,n=r?"text-red-600":i<=5?"text-amber-700":"text-slate-500";return Ot.jsxs("div",{className:`mt-1 text-xs font-semibold ${n}`,children:["Teklif süresi: ",r?"Doldu":`${i} dk kaldı`]})})(),Ot.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:["Platform hizmet bedeli (nakliyeci): ₺",sr(Number(e.price||0)).toLocaleString("tr-TR")]})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(T,{className:"w-4 h-4"}),Ot.jsxs("span",{children:[e.pickupAddress," → ",e.deliveryAddress]})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(R,{className:"w-4 h-4"}),Ot.jsxs("span",{children:[e.weight?`${e.weight} kg`:"",e.weight&&e.dimensions?" • ":"",e.dimensions?`${e.dimensions} m³`:"",!e.weight&&!e.dimensions&&"—"]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ${ye(e.status).color}`,children:[fe(e.status),ye(e.status).text]}),Ot.jsxs("span",{className:"px-3 py-1 rounded-lg text-xs font-semibold "+("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:["high"===e.priority?"Yüksek":"medium"===e.priority?"Orta":"Düşük"," ","Öncelik"]})]})]}),Ot.jsxs("div",{className:"mb-4",children:[Ot.jsx(Bi,{carrierId:e.carrierId,carrierName:e.carrierName,companyName:e.carrierCompany,carrierRating:e.carrierRating,carrierReviews:e.carrierReviews,carrierVerified:e.carrierVerified,successRate:e.successRate,completedJobs:e.completedJobs,variant:"compact",showMessaging:!1,className:"mb-3"}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[e.carrierId&&e.carrierReviews>0&&Ot.jsx("button",{onClick:()=>Ce(e),className:"px-3 py-1.5 bg-yellow-50 hover:bg-yellow-100 text-yellow-800 text-xs rounded-lg border border-yellow-200 transition-colors",children:"Yorumları Gör"}),e.tracking&&Ot.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-lg",children:"Takip ✓"})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-sm text-slate-500",children:e.message.length>60?e.message.substring(0,60)+"...":e.message}),Ot.jsxs("div",{className:"flex items-center gap-2",children:["pending"===e.status&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("button",{onClick:()=>we(e.id),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",children:[Ot.jsx(J,{className:"w-4 h-4"}),"Kabul Et"]}),Ot.jsxs("button",{onClick:()=>{E(e.id),h(!0)},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",children:[Ot.jsx(ie,{className:"w-4 h-4"}),"Reddet"]})]}),Ot.jsxs("button",{onClick:()=>(e=>{const t=te.find(t=>t.id===e);t&&(A(t),g(!0))})(e.id),className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 text-sm font-medium rounded-lg transition-colors flex items-center gap-1",children:[Ot.jsx(Q,{className:"w-4 h-4"}),"Detay"]})]})]})]})]},e.id)):Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-700 to-blue-800 rounded-full mx-auto mb-4 flex items-center justify-center",children:Ot.jsx(W,{className:"w-8 h-8 text-white"})}),Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Henüz Teklif Yok"}),Ot.jsx("p",{className:"text-slate-600 mb-4",children:"Gönderi oluşturduktan sonra nakliyecilerden teklifler gelmeye başlayacak. Ortalama bekleme süresi 5-15 dakikadır."}),0===de.pendingOffers&&0===te.length&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Teklifler geldiğinde burada görünecek ve bildirim alacaksınız."}),Ot.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:[Ot.jsx("span",{className:"font-semibold",children:"Teklif gelmezse ne yapmalıyım?"})," 24 saat içinde teklif gelmezse otomatik bildirim alırsınız. Gönderi bilgilerinizi kontrol edip güncelleyebilir veya fiyat teklifinizi gözden geçirebilirsiniz."]})]}),Ot.jsxs(d,{to:"/individual/create-shipment",className:"inline-flex items-center gap-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Gönderi Oluştur"]})]})})}),Ot.jsx("div",{className:"mt-8 text-center",children:Ot.jsxs(d,{to:"/individual/create-shipment",className:"inline-flex items-center gap-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white px-6 py-3 rounded-xl font-semibold hover:from-slate-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Yeni Gönderi Oluştur"]})})]}),Ot.jsx(er,{isOpen:p,onClose:()=>g(!1),title:"",size:"xl",children:C&&Ot.jsxs("div",{className:"p-0",children:[Ot.jsxs("div",{className:"relative bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 p-8 text-white rounded-t-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 to-transparent rounded-t-2xl"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-start justify-between mb-6",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:Ot.jsx(W,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-2xl font-bold mb-2",children:C.shipmentTitle}),Ot.jsxs("div",{className:"flex items-center gap-4 text-blue-200",children:[Ot.jsx("span",{className:"font-mono bg-white/20 backdrop-blur-sm text-white px-3 py-1 rounded-lg text-sm",children:C.trackingCode}),Ot.jsx("span",{className:"text-sm",children:new Date(C.createdAt).toLocaleDateString("tr-TR")})]})]})]}),Ot.jsx("div",{className:"flex items-center gap-6 text-blue-200",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(T,{className:"w-5 h-5"}),Ot.jsxs("span",{className:"font-medium",children:[C.pickupAddress," →"," ",C.deliveryAddress]})]})})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-4xl font-bold mb-2",children:["₺",C.price.toLocaleString()]}),Ot.jsxs("div",{className:"text-blue-200",children:["Teslimat: ",C.estimatedDelivery]})]})]})})]}),Ot.jsxs("div",{className:"p-8",children:[Ot.jsx(Bi,{carrierId:C.carrierId,carrierName:C.carrierName,companyName:C.carrierCompany,carrierRating:C.carrierRating,carrierReviews:C.carrierReviews,carrierVerified:C.carrierVerified,successRate:C.successRate,completedJobs:C.completedJobs,variant:"detailed",showMessaging:!1,className:"mb-8"}),Ot.jsxs("div",{className:"mb-8",children:[Ot.jsxs("h5",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[Ot.jsx(O,{className:"w-6 h-6 text-yellow-500"}),"Müşteri Değerlendirmeleri"]}),Ot.jsx("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm",children:Ot.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Ot.jsx("div",{className:"text-sm text-slate-600",children:C.carrierReviews>0?`${C.carrierReviews} değerlendirme`:"Değerlendirme bekleniyor"}),Ot.jsx("button",{onClick:()=>{C.carrierId&&(g(!1),Ce(C))},disabled:!C.carrierId,className:"px-4 py-2 bg-yellow-50 hover:bg-yellow-100 text-yellow-800 text-sm rounded-lg border border-yellow-200 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:"Değerlendirmeleri Gör"})]})})]}),Ot.jsxs("div",{className:"mb-8",children:[Ot.jsxs("h5",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(G,{className:"w-5 h-5 text-blue-600"}),"Nakliyeci Mesajı"]}),Ot.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full flex items-center justify-center flex-shrink-0",children:Ot.jsx(G,{className:"w-4 h-4 text-white"})}),Ot.jsx("p",{className:"text-slate-700 leading-relaxed",children:C.message})]})})]}),"pending"===C.status&&Ot.jsx("div",{className:"mb-8 p-5 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(U,{className:"w-6 h-6 text-green-700 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h5",{className:"text-base font-semibold text-green-900 mb-2",children:"Ödeme (taraflar arasında)"}),Ot.jsx("p",{className:"text-sm text-green-800 leading-relaxed",children:"YolNext ödeme altyapısı sunmaz; ödeme işlemi gönderici ile nakliyeci arasında gerçekleşir. IBAN/alıcı adı/açıklama ve yükleme saatini mesajlaşma üzerinden yazılı olarak netleştirmeniz önerilir."})]})]})}),Ot.jsxs("div",{className:"flex justify-end gap-4",children:[Ot.jsx("button",{onClick:()=>g(!1),className:"px-6 py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium",children:"Kapat"}),"pending"===C.status&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("button",{onClick:()=>{g(!1),we(C.id)},className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-700 text-white rounded-xl font-semibold hover:from-green-700 hover:to-emerald-800 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(J,{className:"w-5 h-5"}),"Kabul Et"]}),Ot.jsxs("button",{onClick:()=>{g(!1),E(C.id),h(!0)},className:"px-8 py-3 bg-gradient-to-r from-red-600 to-rose-700 text-white rounded-xl font-semibold hover:from-red-700 hover:to-rose-800 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(ie,{className:"w-5 h-5"}),"Reddet"]})]})]})]})]})}),Ot.jsx(er,{isOpen:u,onClose:()=>{h(!1),M(""),P("")},title:"Teklifi Reddet",children:Ot.jsxs("div",{className:"p-6 space-y-4",children:[Ot.jsx("p",{className:"text-slate-600 mb-4",children:"Bu teklifi reddetmek istediğinizden emin misiniz? Lütfen reddetme sebebinizi seçin."}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Reddetme Sebebi ",Ot.jsx("span",{className:"text-red-500",children:"*"})]}),Ot.jsxs("select",{value:I,onChange:e=>{M(e.target.value),"other"!==e.target.value&&P("")},className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[Ot.jsx("option",{value:"",children:"Sebep seçin..."}),Ot.jsx("option",{value:"price_not_suitable",children:"Fiyat uygun değil"}),Ot.jsx("option",{value:"time_not_suitable",children:"Zaman uygun değil"}),Ot.jsx("option",{value:"no_external_vehicle",children:"Dışarıdan araç kabul etmiyorum"}),Ot.jsx("option",{value:"found_better_offer",children:"Daha iyi bir teklif buldum"}),Ot.jsx("option",{value:"shipment_cancelled",children:"Gönderiyi iptal ettim"}),Ot.jsx("option",{value:"other",children:"Diğer"})]})]}),"other"===I&&Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Açıklama ",Ot.jsx("span",{className:"text-red-500",children:"*"})]}),Ot.jsx("textarea",{value:B,onChange:e=>P(e.target.value),placeholder:"Lütfen reddetme sebebinizi açıklayın...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:3})]}),"no_external_vehicle"===I&&Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:[Ot.jsx("p",{className:"font-semibold mb-1",children:"Bilgi:"}),Ot.jsx("p",{children:"Bu seçenek, rota planlayıcı üzerinden eklenen gönderiler için özellikle önemlidir. Nakliyeci bilgilendirilecek ve bu tercihiniz kaydedilecektir."})]}),F&&Ot.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert","aria-live":"polite",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:F}),Ot.jsx("p",{className:"text-xs text-red-600",children:"Sorun devam ederse gönderi bilgilerinizi kontrol edip tekrar deneyin."})]}),Ot.jsx("button",{onClick:()=>{Y(""),D&&ze(D)},"aria-label":"Hata mesajını kapat",className:"ml-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Tekrar Dene"})]})}),Ot.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[Ot.jsx("button",{onClick:()=>{h(!1),M(""),P(""),Y("")},className:"px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"İptal"}),Ot.jsx("button",{onClick:()=>{D&&ze(D)},disabled:!I||"other"===I&&!B.trim(),className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Reddet"})]})]})}),Ot.jsx(er,{isOpen:b,onClose:()=>{f(!1)},title:"Nakliyeci ile İletişim",size:"md",children:Ot.jsxs("div",{className:"p-6 space-y-4",children:[Ot.jsx("p",{className:"text-slate-600 mb-4",children:"Nakliyeci ile iletişim kurmak için bir yöntem seçin:"}),Ot.jsx("div",{className:"space-y-3",children:Ot.jsxs("button",{onClick:()=>{Te(null==C?void 0:C.status)&&(f(!1),e("/individual/messages"))},disabled:!Te(null==C?void 0:C.status),title:Te(null==C?void 0:C.status)?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır",className:"w-full flex items-center gap-3 p-4 bg-gradient-to-r from-slate-50 to-blue-50 hover:from-slate-100 hover:to-blue-100 border border-slate-200 rounded-xl transition-all duration-300 group",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:Ot.jsx(Ee,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"flex-1 text-left",children:[Ot.jsx("div",{className:"font-semibold text-slate-900",children:"Mesajlar"}),Ot.jsx("div",{className:"text-sm text-slate-600",children:"Platform üzerinden iletişim kurun"})]}),Ot.jsx(K,{className:"w-5 h-5 text-slate-600 group-hover:translate-x-1 transition-transform"})]})}),Ot.jsx("div",{className:"pt-4 border-t border-slate-200",children:Ot.jsx("button",{onClick:()=>{f(!1)},className:"w-full px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg font-medium",children:"İptal"})})]})}),Ot.jsx(er,{isOpen:y,onClose:()=>{j(!1),N(null),w(null),z("")},title:"Ödeme ve Süreç",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("div",{className:"text-sm text-slate-700",children:"Ödemenizi anlaştığınız nakliyeci ile mesajlaşma üzerinden konuşabilirsiniz. Tutar, yöntem ve açıklama bilgisini netleştirmeniz önerilir."}),Ot.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border border-slate-200 text-sm text-slate-700",children:["Hazır mesaj: ",Ot.jsx("span",{className:"font-semibold",children:S||"Merhaba, ödeme detaylarını netleştirelim."})]}),Ot.jsx("div",{className:"flex gap-2 justify-end",children:Ot.jsx("button",{className:"btn-primary",disabled:!v,onClick:()=>{const t=new URLSearchParams;v&&t.set("userId",String(v)),k&&t.set("shipmentId",String(k)),S&&t.set("prefill",S),e(`/individual/messages?${t.toString()}`)},children:"Mesaj Gönder"})})]})}),ae&&re&&t&&Ot.jsx(tr,{isOpen:ae,onClose:()=>{le(!1),ne(null)},mode:"view",ratedUser:re,currentUser:{id:t.id||"",name:t.fullName||"Kullanıcı"}})]})}const ir=({icon:e,title:t,description:s,action:a,className:l=""})=>Ot.jsxs("div",{className:`text-center py-12 ${l}`,children:[Ot.jsx("div",{className:"w-20 h-20 mx-auto mb-5 bg-gradient-to-br from-blue-100 to-slate-100 rounded-full flex items-center justify-center",children:n.isValidElement(e)?e:n.createElement(e,{className:"w-10 h-10 text-blue-600"})}),Ot.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:t}),Ot.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto leading-relaxed",children:s}),a&&Ot.jsx("button",{onClick:a.onClick,className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105",children:a.label})]}),rr=({currentPage:e,totalPages:t,onPageChange:s,className:a=""})=>t<=1?null:Ot.jsxs("div",{className:`flex items-center justify-center space-x-2 ${a}`,children:[Ot.jsxs("button",{onClick:()=>s(e-1),disabled:1===e,className:"flex items-center px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[Ot.jsx(Pe,{className:"w-4 h-4 mr-1"}),"Önceki"]}),(()=>{const s=[],a=[];for(let l=Math.max(2,e-2);l<=Math.min(t-1,e+2);l++)s.push(l);return e-2>2?a.push(1,"..."):a.push(1),a.push(...s),e+2<t-1?a.push("...",t):t>1&&a.push(t),a})().map((t,a)=>Ot.jsx("button",{onClick:()=>"number"==typeof t&&s(t),disabled:"..."===t,className:"px-3 py-2 text-sm font-medium rounded-lg "+(t===e?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"..."===t?"text-slate-400 cursor-default":"text-slate-600 bg-white border border-slate-300 hover:bg-slate-50"),children:t},a)),Ot.jsxs("button",{onClick:()=>s(e+1),disabled:e===t,className:"flex items-center px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["Sonraki",Ot.jsx(be,{className:"w-4 h-4 ml-1"})]})]});function nr({title:e="Gönderilerim",totalCount:t,actions:s}){return Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(R,{className:"w-8 h-8 text-white"})})}),Ot.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-3",children:e}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Gönderilerinizin durumunu takip edin ve yönetin"}),s&&Ot.jsx("div",{className:"mt-6",children:s})]})}function dr({searchTerm:e,statusFilter:t,sortBy:s,onSearchChange:a,onStatusFilterChange:l,onSortByChange:i,onReset:r}){return Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Gönderi ara...",value:e,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Gönderi ara"})]}),Ot.jsxs("select",{value:t,onChange:e=>l(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Durum filtresi",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"active",children:"Aktif Gönderiler"}),Ot.jsx("option",{value:"completed",children:"Tamamlanan"}),Ot.jsx("option",{value:"pending",children:"Beklemede"})]}),Ot.jsxs("select",{value:s,onChange:e=>i(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":"Sıralama seçeneği",children:[Ot.jsx("option",{value:"date",children:"Tarihe Göre"}),Ot.jsx("option",{value:"status",children:"Duruma Göre"}),Ot.jsx("option",{value:"priority",children:"Önceliğe Göre"}),Ot.jsx("option",{value:"value",children:"Değere Göre"})]}),Ot.jsxs("button",{onClick:r,className:"min-h-[44px] px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors flex items-center justify-center gap-2","aria-label":"Filtreleri sıfırla",children:[Ot.jsx(_,{className:"w-4 h-4"}),"Sıfırla"]})]})})}function or({shipment:e,index:t,onViewDetails:s,onTrack:a,onMessage:l,onConfirmDelivery:i,onRateCarrier:r,onCancel:n,isTrackEnabled:d,isMessagingEnabled:o,canCancel:c,isLocallyRated:m}){const x=e=>({house_move:"Ev Taşınması",furniture_goods:"Mobilya Taşıma",special_cargo:"Özel Yük",other:"Diğer",general:"Genel Gönderi"}[e]||e),u=x(e.category||""),h=e.subCategory?x(e.subCategory):"",p=h&&h!==u?`${u} - ${h}`:u;return Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900",children:e.trackingCode}),Ot.jsx("div",{className:"text-xs text-slate-500",children:Kl(e.createdAt,"long")}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.title})]}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsxs("div",{className:"text-sm font-medium text-slate-900",children:[e.from," → ",e.to]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:p})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("delivered"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-gray-100 text-gray-800":"in_transit"===e.status?"bg-blue-100 text-blue-800":"preparing"===e.status?"bg-orange-100 text-orange-800":"offer_accepted"===e.status||"accepted"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(e=>{switch(e){case"in_transit":return Ot.jsx(E,{className:"w-4 h-4"});case"preparing":return Ot.jsx(R,{className:"w-4 h-4"});case"delivered":case"completed":return Ot.jsx(J,{className:"w-4 h-4"});case"waiting":return Ot.jsx(L,{className:"w-4 h-4"});default:return Ot.jsx(te,{className:"w-4 h-4"})}})(e.status),(e=>{const t=pi(e);let s=te;return"in_transit"===e?s=E:"preparing"===e?s=R:"delivered"===e||"completed"===e||"offer_accepted"===e||"accepted"===e?s=J:"waiting"!==e&&"waiting_for_offers"!==e||(s=L),{...t,icon:s}})(e.status).text]})}),Ot.jsx("td",{className:"py-4 px-4",children:e.carrierId&&e.carrierName?Ot.jsx(Bi,{carrierId:String(e.carrierId),carrierName:e.carrierName,companyName:e.carrierCompany,carrierRating:e.carrierRating||0,carrierReviews:e.carrierReviews||0,carrierVerified:e.carrierVerified||!1,successRate:e.successRate||0,completedJobs:e.completedJobs||0,variant:"compact",showMessaging:!1,className:"max-w-xs"}):Ot.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Atanmamış"})}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:e.price&&Number(e.price)>0?Il(e.price):Ot.jsx("span",{className:"text-slate-400 font-normal",children:"Teklif Bekleniyor"})}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.volume&&"0"!==e.volume&&Number(e.volume)>0?`${e.volume} m³`:""}),Ot.jsx("div",{className:"text-xs text-slate-500",children:Kl(e.estimatedDelivery,"long")})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{onClick:()=>s(e.id),className:"px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-lg transition-colors","aria-label":`${e.trackingCode} gönderisinin detaylarını görüntüle`,children:"Detay"}),d(e.status)&&Ot.jsx("button",{onClick:()=>a(e.id),className:"px-3 py-1.5 bg-green-100 hover:bg-green-200 text-green-700 text-xs font-medium rounded-lg transition-colors","aria-label":`${e.trackingCode} gönderisini takip et`,children:"Takip"}),Ot.jsx("button",{onClick:()=>l(e),disabled:!o(e.status),title:o(e.status)?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır","aria-label":o(e.status)?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır",className:"px-3 py-1.5 text-xs font-medium rounded-lg transition-colors "+(o(e.status)?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-gray-50 text-gray-400 cursor-not-allowed"),children:"Mesaj"}),"delivered"===e.status&&Ot.jsx("button",{onClick:()=>i(e),className:"px-3 py-1.5 bg-green-100 hover:bg-green-200 text-green-700 text-xs font-medium rounded-lg transition-colors",children:"Onayla"}),"completed"===e.status&&e.carrierName&&!e.rating&&!m(e.id)&&Ot.jsx("button",{onClick:()=>r(e),className:"px-3 py-1.5 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 text-xs font-medium rounded-lg transition-colors",children:"Değerlendir"}),c(e.status)&&Ot.jsx("button",{onClick:()=>n(e),className:"px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 text-xs font-medium rounded-lg transition-colors",children:"İptal Et"})]})})]},`${e.id}-${e.trackingCode}-${t}`)}function cr({shipment:e,index:t,onViewDetails:s,onTrack:a,onMessage:l,onConfirmDelivery:i,onRateCarrier:r,onCancel:n,isTrackEnabled:d,isMessagingEnabled:o,canCancel:c,isLocallyRated:m,getStatusInfo:x,getStatusIcon:u}){const h=e=>({house_move:"Ev Taşınması",furniture_goods:"Mobilya Taşıma",special_cargo:"Özel Yük",other:"Diğer"}[e]||e),p=h(e.category||""),g=e.subCategory?h(e.subCategory):"",b=g&&g!==p?`${p} - ${g}`:p,f=x(e.status);return Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-slate-200 mb-4",children:[Ot.jsxs("div",{className:"p-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900",children:e.trackingCode}),Ot.jsx("div",{className:"text-xs text-slate-500",children:Kl(e.createdAt,"long")})]}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900 mb-2",children:e.title}),Ot.jsxs("div",{className:"text-xs text-slate-500",children:[e.from," → ",e.to]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:b})]}),Ot.jsx("div",{className:"px-4 mb-3",children:Ot.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("delivered"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-gray-100 text-gray-800":"in_transit"===e.status?"bg-blue-100 text-blue-800":"preparing"===e.status?"bg-orange-100 text-orange-800":"offer_accepted"===e.status||"accepted"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[u(e.status),f.text]})}),Ot.jsx("div",{className:"px-4 mb-3",children:e.carrierId&&e.carrierName?Ot.jsx(Bi,{carrierId:String(e.carrierId),carrierName:e.carrierName,companyName:e.carrierCompany,carrierRating:e.carrierRating||0,carrierReviews:e.carrierReviews||0,carrierVerified:e.carrierVerified||!1,successRate:e.successRate||0,completedJobs:e.completedJobs||0,variant:"compact",showMessaging:!1,className:"w-full"}):Ot.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Nakliyeci atanmamış"})}),Ot.jsxs("div",{className:"px-4 mb-4",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mb-1",children:Il(e.price)}),Ot.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[Ot.jsxs("div",{children:["Teslimat: ",Kl(e.estimatedDelivery,"long")]}),e.volume&&"0"!==e.volume&&Ot.jsxs("div",{children:["Hacim: ",e.volume," m³"]})]})]}),Ot.jsxs("div",{className:"px-4 pb-4",children:[Ot.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ot.jsx("button",{onClick:()=>s(e.id),className:"flex-1 min-w-[80px] min-h-[44px] px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center","aria-label":`${e.trackingCode} gönderisinin detaylarını görüntüle`,children:"Detay"}),d(e.status)&&Ot.jsx("button",{onClick:()=>a(e.id),className:"flex-1 min-w-[80px] min-h-[44px] px-3 py-2 bg-green-100 hover:bg-green-200 text-green-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center","aria-label":`${e.trackingCode} gönderisini takip et`,children:"Takip"}),Ot.jsx("button",{onClick:()=>l(e),disabled:!o(e.status),className:"flex-1 min-w-[80px] min-h-[44px] px-3 py-2 text-xs font-medium rounded-lg transition-colors flex items-center justify-center "+(o(e.status)?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-gray-50 text-gray-400 cursor-not-allowed"),"aria-label":o(e.status)?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır",children:"Mesaj"})]}),"delivered"===e.status&&Ot.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[Ot.jsx("button",{onClick:()=>i(e),className:"flex-1 min-w-[80px] min-h-[44px] px-3 py-2 bg-green-100 hover:bg-green-200 text-green-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center","aria-label":"Teslimatı onayla",children:"Onayla"}),e.carrierName&&!e.rating&&!m(e.id)&&Ot.jsx("button",{onClick:()=>r(e),className:"flex-1 min-w-[80px] min-h-[44px] px-3 py-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center","aria-label":"Nakliyeciyi değerlendir",children:"Değerlendir"})]}),c(e.status)&&Ot.jsx("div",{className:"mt-2",children:Ot.jsx("button",{onClick:()=>n(e),className:"w-full min-h-[44px] px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 text-xs font-medium rounded-lg transition-colors flex items-center justify-center","aria-label":"Gönderiyi iptal et",children:"İptal Et"})})]})]},`${e.id}-${e.trackingCode}-${t}`)}const mr=({isOpen:e,onClose:t,otherUser:s,currentUser:a,shipmentId:i})=>{const[r,n]=l.useState([]),[d,o]=l.useState(""),[c,m]=l.useState(!1),[x,u]=l.useState(!1),h=l.useRef(null),p=$l(null==s?void 0:s.name),g=String((null==s?void 0:s.email)||"").trim(),b=g&&!g.includes("@")?g:"",f=i?(e=>{const t=String(e??"").trim();if(!t)return"";if(/^TRK/i.test(t))return t;const s=Number(t);return Number.isFinite(s)&&s>0?`TRK${Math.trunc(s).toString().padStart(6,"0")}`:t})(i):"",y=/\bTR\d{2}(?:\s?\d{4}){1,5}\s?\d{0,2}\b/i,j=r.some(e=>y.test(String(e.message||""))),v=[{label:"IBAN iste",text:`Merhaba, ödeme için IBAN bilgilerinizi paylaşır mısınız? İş No: ${f}`.trim()},{label:"Ödeme teyidi",text:`Ödeme ile ilgili teyit rica ederim. İş No: ${f}`.trim()},{label:"Dekont iste",text:`Ödeme dekontunu paylaşabilir misiniz? İş No: ${f}`.trim()},{label:"Açıklama öner",text:`Ödeme açıklamasına lütfen "${f}" yazalım. Tutar ve alıcı adı teyit edelim.`.trim()}];l.useEffect(()=>{e&&(null==s?void 0:s.id)&&N()},[e,null==s?void 0:s.id]),l.useEffect(()=>{if(!e)return;const s=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e,t]),l.useEffect(()=>{var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth"})},[r]);const N=async()=>{try{m(!0);const e=localStorage.getItem("authToken");let t="/api/messages";i&&(t=`/api/messages/shipment/${i}`);const a=await fetch(Zs(t),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(a.ok){const e=await a.json();let t=e.data||e.messages||e||[];if(!i&&(null==s?void 0:s.id)&&Array.isArray(t)){const e=String(parseInt(s.id));t=t.filter(t=>t.sender_id===e||t.receiver_id===e)}n(t)}else n([])}catch(e){n([])}finally{m(!1)}},k=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}catch{return""}};return e?Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:Ot.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:Ot.jsx(xe,{className:"w-5 h-5 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-lg font-bold text-gray-900",children:p||"Gönderici"}),Ot.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Ot.jsxs("p",{className:"text-sm text-gray-600",children:[null==s?void 0:s.type,b?` • ${b}`:""]}),i&&Ot.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-700 border border-slate-200",children:["İş No: ",f||`#${i}`]})]})]})]}),Ot.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(_,{className:"w-5 h-5 text-gray-500"})})]}),Ot.jsxs("div",{className:"px-6 pt-4",children:[Ot.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm text-amber-900",children:["Bu kanal ödeme ve süreç koordinasyonu içindir. IBAN/ödeme paylaşırken alıcı adını doğrulayın ve açıklamaya ",f||"iş numarasını"," ekleyin."]}),j&&Ot.jsx("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-900",children:"Konuşmada IBAN bilgisi tespit edildi. Lütfen alıcı adını ve tutarı tekrar teyit edin."})]}),Ot.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c?Ot.jsx("div",{className:"flex justify-center items-center h-32",children:Ot.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):0===r.length?Ot.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-500",children:[Ot.jsx(G,{className:"w-8 h-8 mb-2"}),Ot.jsx("p",{children:"Henüz mesaj yok"}),Ot.jsx("p",{className:"text-sm",children:"İlk mesajı siz gönderin"})]}):r.map(e=>Ot.jsx("div",{className:"flex "+(e.sender_id===a.id?"justify-end":"justify-start"),children:Ot.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+(e.sender_id===a.id?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"bg-gray-100 text-gray-900"),children:[Ot.jsx("p",{className:"text-sm",children:Bl(e.message)}),Ot.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[Ot.jsx(L,{className:"w-3 h-3"}),Ot.jsx("span",{className:"text-xs opacity-75",children:k(e.created_at)})]})]})},e.id)),Ot.jsx("div",{ref:h})]}),Ot.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),d.trim()&&!x)try{u(!0);const e=localStorage.getItem("authToken"),t=await fetch(Zs("/api/messages"),{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({receiverId:parseInt(null==s?void 0:s.id)||(null==s?void 0:s.id),message:d.trim(),shipmentId:i?parseInt(i):null})});if(t.ok){const e=await t.json(),l=e.data||e,i={id:l.id||Date.now().toString(),sender_id:a.id,receiver_id:(null==s?void 0:s.id)||"",message:d.trim(),created_at:l.created_at||(new Date).toISOString(),sender_name:a.name,receiver_name:(null==s?void 0:s.name)||""};n(e=>[...e,i]),o(""),N()}else{await t.json().catch(()=>({}));0}}catch(t){}finally{u(!1)}},className:"p-4 border-t border-gray-200",children:[Ot.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.map(e=>Ot.jsx("button",{type:"button",onClick:()=>o(e.text),className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-medium rounded-lg transition-colors",children:e.label},e.label))}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx("input",{type:"text",value:d,onChange:e=>o(e.target.value),placeholder:"Ödeme/IBAN ve süreç için mesaj yazın...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x}),Ot.jsx("button",{type:"submit",disabled:!d.trim()||x,className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:x?Ot.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):Ot.jsx(ne,{className:"w-4 h-4"})})]})]})]})}):null},xr=({showDetailModal:e,selectedShipment:t,onCloseDetailModal:s,onOpenMessaging:a,onOpenRating:i,onCancelShipment:r,showMessagingModal:n,selectedCarrier:d,selectedShipmentId:o,onCloseMessagingModal:c,showRatingModal:m,onCloseRatingModal:x,onRatingSubmit:u,showCancelModal:h,onCloseCancelModal:p,onConfirmCancel:g,isMessagingEnabled:b,locallyRatedShipmentIds:f})=>{if(!t)return null;const y=(j=t.status,pi(j));var j;const v=t.user_rated||f.includes(t.id),N=l.useMemo(()=>{const e=String(t.status||""),s=Boolean(t.carrier_id),a=Boolean(t.driver_name||t.driver_id||t.vehicle_plate),l=[{key:"offer",title:"Teklif kabul edildi",hint:"Nakliyeci seçildi"},{key:"assign",title:"Taşıyıcı ataması",hint:a?"Taşıyıcı atandı":"Taşıyıcı/araç bekleniyor"},{key:"pickup",title:"Yük alındı",hint:"Yükleme tamamlandı"},{key:"transit",title:"Yolda",hint:"Taşıma sürüyor"},{key:"deliver",title:"Teslim",hint:"Teslimat tamamlandı"},{key:"complete",title:"Kapanış",hint:"Değerlendirme / kayıt"}];if(!["offer_accepted","accepted","assigned","in_progress","picked_up","in_transit","delivered","completed"].includes(e))return null;let i="Sıradaki adım: Nakliyeci taşıyıcı atayacak.";return s&&!a&&(i="Sıradaki adım: Nakliyeci taşıyıcı atayacak (taşıyıcı teklifi 30 dk içinde kabul eder)."),a&&["offer_accepted","accepted","assigned","in_progress"].includes(e)&&(i="Sıradaki adım: Yükleme alınacak."),"picked_up"===e&&(i="Sıradaki adım: Yola çıkış / takip."),"in_transit"===e&&(i="Sıradaki adım: Teslimat."),"delivered"===e&&(i="Sıradaki adım: Teslimat onayı (varsa)."),"completed"===e&&(i="Süreç tamamlandı."),{steps:l,done:t=>"offer"===t?["offer_accepted","accepted","assigned","in_progress","picked_up","in_transit","delivered","completed"].includes(e):"assign"===t?s&&["assigned","in_progress","picked_up","in_transit","delivered","completed"].includes(e)||a:"pickup"===t?["picked_up","in_transit","delivered","completed"].includes(e):"transit"===t?["in_transit","delivered","completed"].includes(e):"deliver"===t?["delivered","completed"].includes(e):"complete"===t&&["completed"].includes(e),nextText:i}},[t]);return Ot.jsxs(Ot.Fragment,{children:[e&&Ot.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:Ot.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[Ot.jsx("h2",{className:"text-xl font-semibold",children:"Gönderi Detayları"}),Ot.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(_,{className:"w-5 h-5"})})]}),Ot.jsxs("div",{className:"p-6 space-y-8",children:[Ot.jsx("div",{className:`p-6 rounded-xl border-l-4 ${y.color} bg-gradient-to-r from-slate-50 to-blue-50`,children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:y.icon}),Ot.jsxs("div",{children:[Ot.jsx("span",{className:"text-lg font-bold text-slate-900",children:y.text}),Ot.jsx("p",{className:"text-sm text-slate-600 mt-1",children:y.description})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t.tracking_code||`TRK${String(t.id).slice(-6).padStart(6,"0")}`}),Ot.jsx("div",{className:"text-xs text-slate-500",children:Kl(t.created_at)})]})]})}),N&&Ot.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center",children:Ot.jsx(E,{className:"w-5 h-5"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:"Süreç akışı"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:N.nextText})]})]}),Ot.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:N.steps.map(e=>{const t=N.done(e.key);return Ot.jsxs("div",{className:"rounded-lg border p-3 "+(t?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-slate-50"),children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(fe,{className:"w-4 h-4 "+(t?"text-emerald-700":"text-slate-400")}),Ot.jsx("div",{className:"text-sm font-semibold "+(t?"text-emerald-900":"text-slate-900"),children:e.title})]}),Ot.jsx("div",{className:"text-xs mt-1 "+(t?"text-emerald-700":"text-slate-600"),children:e.hint})]},e.key)})})]}),Ot.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[Ot.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(R,{className:"w-5 h-5 text-blue-600"}),"Yük Bilgileri"]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Gönderi Başlığı"}),Ot.jsx("p",{className:"text-sm font-bold text-slate-900",children:t.title})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.weight&&Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"text-xs text-slate-500 flex items-center gap-1",children:[Ot.jsx(_e,{className:"w-3 h-3"}),"Ağırlık"]}),Ot.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[t.weight," kg"]})]}),t.volume&&Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"text-xs text-slate-500 flex items-center gap-1",children:[Ot.jsx(Ie,{className:"w-3 h-3"}),"Hacim"]}),Ot.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[t.volume," m³"]})]})]}),t.dimensions&&Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-xs text-slate-500",children:"Boyutlar (E×G×Y)"}),Ot.jsx("p",{className:"text-sm font-semibold text-slate-900",children:t.dimensions})]}),t.cargo_value&&Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"text-xs text-slate-500 flex items-center gap-1",children:[Ot.jsx(U,{className:"w-3 h-3"}),"Yük Değeri"]}),Ot.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Il(t.cargo_value)})]}),t.category&&Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-xs text-slate-500",children:"Kategori"}),Ot.jsx("p",{className:"text-sm font-semibold text-slate-900",children:t.category})]}),t.description&&Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-xs text-slate-500",children:"Açıklama"}),Ot.jsx("p",{className:"text-sm text-slate-700 bg-white rounded-lg p-3 border",children:t.description})]})]})]}),Ot.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 rounded-xl p-6 border border-slate-200",children:[Ot.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-6 flex items-center gap-2",children:[Ot.jsx(E,{className:"w-5 h-5 text-blue-600"}),"Taşıma ve Nakliyeci Bilgileri"]}),t.carrier_id?Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:Ot.jsx(A,{className:"w-5 h-5 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-bold text-slate-900",children:"Nakliyeci Firması"}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ot.jsx("span",{className:"text-xs font-medium text-green-700",children:"ATANDİ"})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-lg font-bold text-slate-900",children:t.carrier_name||"Nakliyeci Firması"}),t.carrier_company&&Ot.jsx("p",{className:"text-sm text-slate-600",children:t.carrier_company})]}),t.carrier_rating&&Ot.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 rounded-lg",children:[Ot.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,s)=>Ot.jsx(O,{className:"w-4 h-4 "+(s<(t.carrier_rating||0)?"text-amber-400 fill-current":"text-gray-300")},s))}),Ot.jsxs("span",{className:"text-sm font-bold text-slate-700",children:[t.carrier_rating,"/5"]}),t.completed_jobs&&Ot.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",t.completed_jobs," tamamlanmış iş)"]})]}),Ot.jsxs("div",{className:"space-y-2",children:[t.carrier_phone&&Ot.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded",children:[Ot.jsx(z,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:t.carrier_phone})]}),t.carrier_email&&Ot.jsx("div",{className:"text-sm text-slate-600 p-2 bg-slate-50 rounded",children:t.carrier_email})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.carrier_verified&&Ot.jsxs("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full flex items-center gap-1 text-xs font-medium",children:[Ot.jsx(fe,{className:"w-3 h-3"}),"Doğrulanmış Firma"]}),Ot.jsx("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:"Profesyonel Nakliyeci"})]})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-blue-100",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:Ot.jsx(xe,{className:"w-5 h-5 text-amber-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-bold text-slate-900",children:"Taşıyıcı & Araç"}),Ot.jsx("div",{className:"flex items-center gap-2",children:t.driver_name||t.vehicle_plate?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ot.jsx("span",{className:"text-xs font-medium text-green-700",children:"ATANDİ"})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),Ot.jsx("span",{className:"text-xs font-medium text-orange-700",children:"BEKLEME"})]})})]})]}),t.driver_name||t.vehicle_plate?Ot.jsxs("div",{className:"space-y-4",children:[t.driver_name&&Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-xs font-medium text-slate-600 mb-1 block",children:"Şoför"}),Ot.jsx("p",{className:"text-lg font-bold text-slate-900",children:t.driver_name})]}),t.driver_phone&&Ot.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded",children:[Ot.jsx(z,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:t.driver_phone})]}),t.vehicle_plate&&Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-xs font-medium text-slate-600 mb-2 block",children:"Araç Bilgileri"}),Ot.jsx("div",{className:"p-3 bg-slate-900 rounded-lg",children:Ot.jsx("p",{className:"text-xl font-mono font-bold text-white text-center tracking-wider",children:t.vehicle_plate})})]}),t.vehicle_type&&Ot.jsx("div",{className:"p-2 bg-blue-50 rounded border border-blue-200",children:Ot.jsx("span",{className:"text-sm font-semibold text-blue-800",children:t.vehicle_type})}),Ot.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(fe,{className:"w-4 h-4 text-green-600"}),Ot.jsx("span",{className:"text-sm font-medium text-green-800",children:"Araç ve şoför hazır"})]}),Ot.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Yükünüz alınmaya hazır"})]})]}):Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200 mb-4",children:[Ot.jsx(L,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),Ot.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Taşıyıcı Ataması Bekleniyor"}),Ot.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Nakliyeci firma en uygun araç ve şoförü atayacak"})]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"⏳ Genellikle 2-4 saat içinde atama yapılır"})]})]})]}):Ot.jsx("div",{className:"text-center py-12",children:Ot.jsxs("div",{className:"p-6 bg-yellow-50 rounded-xl border border-yellow-200 max-w-md mx-auto",children:[Ot.jsx(R,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),Ot.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"Nakliyeci Ataması Bekleniyor"}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Teklifler değerlendiriliyor. En uygun nakliyeci size atanacak."}),Ot.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-500",children:[Ot.jsx(L,{className:"w-3 h-3"}),Ot.jsx("span",{children:"Ortalama bekleme süresi: 1-2 saat"})]})]})})]}),!b(t.status)&&Ot.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-200",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(ve,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Mesajlaşma Henüz Aktif Değil"}),Ot.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Nakliyeci ile mesajlaşabilmek için önce bir teklif kabul etmelisiniz. Teklif kabul edildikten sonra ödeme detayları ve iletişim için mesajlaşma açılacak."})]})]})}),Ot.jsxs("div",{className:"flex flex-wrap gap-4 pt-6 border-t border-slate-200",children:[b(t.status)&&t.carrier_id&&Ot.jsxs("button",{onClick:()=>a(t),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white rounded-xl font-medium transition-colors shadow-lg hover:shadow-xl",children:[Ot.jsx(G,{className:"w-5 h-5"}),"Nakliyeci ile Mesajlaş"]}),"completed"===t.status&&!v&&Ot.jsxs("button",{onClick:()=>i(t),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-orange-600 hover:to-amber-500 text-white rounded-xl font-medium transition-colors shadow-lg hover:shadow-xl",children:[Ot.jsx(O,{className:"w-5 h-5"}),"Nakliyeciyi Değerlendir"]}),("preparing"===t.status||"waiting"===t.status||"waiting_for_offers"===t.status)&&Ot.jsxs("button",{onClick:()=>r(t),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-500 text-white rounded-xl font-medium transition-colors shadow-lg hover:shadow-xl",children:[Ot.jsx(_,{className:"w-5 h-5"}),"Gönderiyi İptal Et"]}),Ot.jsx("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-colors",children:"Kapat"})]})]})]})}),n&&d&&o&&Ot.jsx(mr,{isOpen:n,onClose:c,otherUser:{id:d.id,name:d.name,email:d.email,type:d.type},currentUser:{id:"current-user-id",name:"Current User"},shipmentId:o}),m&&Ot.jsx(tr,{isOpen:m,onClose:x,ratedUser:{id:(null==d?void 0:d.id)||"",name:(null==d?void 0:d.name)||"",email:(null==d?void 0:d.email)||"",type:(null==d?void 0:d.type)||"carrier"},currentUser:{id:"current-user-id",name:"Current User"},shipmentId:t.id,onSubmitted:u}),h&&Ot.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:Ot.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx(ve,{className:"w-6 h-6 text-amber-500"}),Ot.jsx("h3",{className:"text-lg font-semibold",children:"Gönderiyi İptal Et"})]}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:"Bu gönderiyi iptal etmek istediğinizden emin misiniz? Bu işlem geri alınamaz."}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Vazgeç"}),Ot.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"İptal Et"})]})]})})]})},ur=({basePath:e="/individual"})=>{const{user:t}=sa(),s=o(),{shipments:a,loading:i,pagination:r,notification:n,isCorporateView:c,searchTerm:m,statusFilter:x,sortBy:u,handleSearch:h,handleStatusFilter:p,handleSort:g,handlePageChange:b,refreshShipments:f,showNotification:y,toTrackingCode:j}=(e=>{const{user:t}=sa(),[s,a]=l.useState([]),[i,r]=l.useState(!0),[n,d]=l.useState(""),[o,c]=l.useState("all"),[m,x]=l.useState("date"),[u,h]=l.useState({currentPage:1,totalPages:1,totalCount:0,hasMore:!1}),[p,g]=l.useState(null),b="/corporate"===e,f=Ri,y=l.useRef(null),j=l.useRef(!1),v=l.useCallback((e,t)=>{g({type:e,message:t});const s=setTimeout(()=>g(null),1800);return()=>clearTimeout(s)},[]),N=l.useCallback(async()=>{try{r(!0);const e=localStorage.getItem("authToken");if(!e)return a([]),void r(!1);const t=new URLSearchParams({page:String(u.currentPage),limit:"10",search:n,status:"all"===o?"":o,sortBy:m}),s=b?"/api/corporate/shipments":"/api/shipments",l=await fetch(Zs(`${s}?${t}`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!l.ok){if(401!==l.status&&403!==l.status)throw new Error(`HTTP ${l.status}`);return a([]),void r(!1)}const i=await l.json(),d=i.shipments||[];a(d),h(e=>({...e,totalPages:i.totalPages||1,totalCount:i.totalCount||0,hasMore:i.hasMore||!1})),j.current=!1,g(null)}catch(e){j.current||(j.current=!0,v("error","Gönderiler yüklenirken bir hata oluştu")),a([])}finally{r(!1)}},[u.currentPage,n,o,m,b,v]),k=l.useCallback(e=>{d(e),h(e=>({...e,currentPage:1}))},[]),w=l.useCallback(e=>{c(e),h(e=>({...e,currentPage:1}))},[]),S=l.useCallback(e=>{x(e),h(e=>({...e,currentPage:1}))},[]),z=l.useCallback(e=>{h(t=>({...t,currentPage:e}))},[]),T=l.useCallback(()=>{y.current&&clearTimeout(y.current),N()},[N]);return l.useEffect(()=>{N()},[N]),{shipments:s,loading:i,pagination:u,notification:p,isCorporateView:b,searchTerm:n,statusFilter:o,sortBy:m,handleSearch:k,handleStatusFilter:w,handleSort:S,handlePageChange:z,refreshShipments:T,showNotification:v,toTrackingCode:f,setShipments:a,setNotification:g}})(e),[v,N]=l.useState(!1),[k,w]=l.useState(null),[S,z]=l.useState(null),[T,C]=l.useState([]),[A,D]=l.useState(!1),[_,I]=l.useState(null),[K,M]=l.useState(!1),[$,B]=l.useState(!1),O=e=>pi(e),P=e=>{switch(e){case"in_transit":return Ot.jsx(E,{className:"w-3 h-3 mr-1"});case"preparing":return Ot.jsx(R,{className:"w-3 h-3 mr-1"});case"delivered":case"completed":case"offer_accepted":case"accepted":return Ot.jsx(fe,{className:"w-3 h-3 mr-1"});case"waiting":case"waiting_for_offers":return Ot.jsx(L,{className:"w-3 h-3 mr-1"});case"cancelled":return Ot.jsx(ie,{className:"w-3 h-3 mr-1"});default:return Ot.jsx(te,{className:"w-3 h-3 mr-1"})}},G=e=>["offer_accepted","accepted","in_progress","picked_up","in_transit","delivered"].includes(e),F=async e=>{const t=a.find(t=>t.id===e);t&&(I(t),D(!0))},Y=e=>{e.carrier_id&&e.carrier_name&&(w({id:e.carrier_id,name:e.carrier_name,email:e.carrier_email||"",type:e.carrier_type||"nakliyeci"}),z(e.id),N(!0),D(!1))},q=e=>{I(e),M(!0),D(!1)},H=e=>{I(e),B(!0),D(!1)};return t?Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsxs(Rs,{children:[Ot.jsxs("title",{children:[c?"Kurumsal Gönderiler":"Gönderilerim"," | YolNext"]}),Ot.jsx("meta",{name:"description",content:"Gönderilerinizi takip edin ve yönetin"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:c?"/corporate":"/individual"},{label:c?"Kurumsal Gönderiler":"Gönderilerim"}]}),Ot.jsx(nr,{title:c?"Kurumsal Gönderiler":"Gönderilerim"}),Ot.jsx(dr,{searchTerm:m,statusFilter:x,sortBy:u,onSearchChange:h,onStatusFilterChange:p,onSortByChange:g,onReset:()=>{h(""),p("all"),g("created_at_desc")}}),i?Ot.jsx(Pl,{message:"Gönderiler yükleniyor..."}):0===a.length?Ot.jsx(ir,{icon:Ot.jsx(R,{className:"w-12 h-12"}),title:"Gönderi bulunamadı",description:m||"all"!==x?"Arama kriterlerinize uygun gönderi bulunamadı. Filtreleri temizleyip tekrar deneyin.":"Henüz hiç gönderi oluşturmamışsınız. İlk gönderinizi oluşturun.",action:m||"all"!==x?{label:"Filtreleri Temizle",onClick:()=>{h(""),p("all")}}:{label:"İlk Gönderinizi Oluşturun",onClick:()=>s(c?"/corporate/create-shipment":"/individual/create-shipment")}}):Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"📦 Gönderilerim"}),Ot.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Gönderilerinizi yönetin ve takip edin"})]}),Ot.jsxs(d,{to:c?"/corporate/create-shipment":"/individual/create-shipment",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white rounded-lg font-medium transition-colors shadow-lg hover:shadow-xl",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Yeni Gönderi Oluştur"]})]}),Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200 bg-gradient-to-r from-slate-50 to-blue-50",children:[Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Gönderi No"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Güzergah"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Durum"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Nakliyeci"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Fiyat"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:a.map((e,t)=>{var a,l;const i={...e,trackingCode:e.tracking_code||j(e.id),createdAt:e.created_at,estimatedDelivery:e.delivery_date||e.created_at,carrierName:e.carrier_name,carrierId:e.carrier_id,carrierPhone:e.carrier_phone,carrierEmail:e.carrier_email,carrierCompany:e.carrier_company,driverName:e.driver_name,driverId:e.driver_id,driverPhone:e.driver_phone,driverEmail:e.driver_email,vehiclePlate:e.vehicle_plate,vehicleType:e.vehicle_type,trackingNumber:e.tracking_number,category:e.category||"general",subCategory:e.sub_category||"",weight:(null==(a=e.weight)?void 0:a.toString())||"",dimensions:e.dimensions||"",specialRequirements:[],rating:e.rating,volume:(null==(l=e.volume)?void 0:l.toString())||"",pickupDate:e.pickup_date,deliveryDate:e.delivery_date,pickupAddress:e.pickup_address,deliveryAddress:e.delivery_address,pickupCity:e.from,deliveryCity:e.to,carrierRating:e.carrier_rating,carrierReviews:e.carrier_reviews,carrierVerified:e.carrier_verified,completedJobs:e.completed_jobs,successRate:e.success_rate};return Ot.jsx(or,{shipment:i,index:t,onViewDetails:F,onTrack:e=>s(`/individual/live-tracking?shipment=${e}`),onMessage:Y,onConfirmDelivery:()=>{},onRateCarrier:q,onCancel:H,isTrackEnabled:e=>["in_transit","picked_up","delivered"].includes(e),isMessagingEnabled:G,canCancel:e=>["preparing","waiting","waiting_for_offers"].includes(e),isLocallyRated:e=>T.includes(e)},e.id)})})]})})]}),Ot.jsx("div",{className:"lg:hidden space-y-4",children:a.map((e,t)=>{var a,l;const i={...e,trackingCode:e.tracking_code||j(e.id),createdAt:e.created_at,estimatedDelivery:e.delivery_date||e.created_at,carrierName:e.carrier_name,carrierId:e.carrier_id,carrierPhone:e.carrier_phone,carrierEmail:e.carrier_email,carrierCompany:e.carrier_company,category:e.category||"general",subCategory:e.sub_category||"",weight:(null==(a=e.weight)?void 0:a.toString())||"",dimensions:e.dimensions||"",specialRequirements:[],rating:e.rating,volume:(null==(l=e.volume)?void 0:l.toString())||"",carrierRating:e.carrier_rating,carrierReviews:e.carrier_reviews,carrierVerified:e.carrier_verified,completedJobs:e.completed_jobs,successRate:e.success_rate};return Ot.jsx(cr,{shipment:i,index:t,onViewDetails:F,onTrack:e=>s(`/individual/live-tracking?shipment=${e}`),onMessage:Y,onConfirmDelivery:()=>{},onRateCarrier:q,onCancel:H,isTrackEnabled:e=>["in_transit","picked_up","delivered"].includes(e),isMessagingEnabled:G,canCancel:e=>["preparing","waiting","waiting_for_offers"].includes(e),isLocallyRated:e=>T.includes(e),getStatusInfo:O,getStatusIcon:P},e.id)})}),r.totalPages>1&&Ot.jsx(rr,{currentPage:r.currentPage,totalPages:r.totalPages,onPageChange:b})]}),n&&Ot.jsx("div",{className:"fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg "+("success"===n.type?"bg-green-500 text-white":"error"===n.type?"bg-red-500 text-white":"bg-blue-500 text-white"),children:n.message}),Ot.jsx(xr,{showDetailModal:A,selectedShipment:_,onCloseDetailModal:()=>D(!1),onOpenMessaging:Y,onOpenRating:q,onCancelShipment:H,showMessagingModal:v,selectedCarrier:k,selectedShipmentId:S,onCloseMessagingModal:()=>N(!1),showRatingModal:K,onCloseRatingModal:()=>M(!1),onRatingSubmit:()=>{_&&(C(e=>[...e,_.id]),y("success","Değerlendirme başarıyla gönderildi")),M(!1),I(null)},showCancelModal:$,onCloseCancelModal:()=>B(!1),onConfirmCancel:async()=>{if(_)try{const e=localStorage.getItem("authToken");(await fetch(Zs(`/api/shipments/${_.id}/cancel`),{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).ok?(y("success","Gönderi başarıyla iptal edildi"),f()):y("error","Gönderi iptal edilirken bir hata oluştu")}catch(e){y("error","Gönderi iptal edilirken bir hata oluştu")}finally{B(!1),I(null)}},isMessagingEnabled:G,locallyRatedShipmentIds:T}),Ot.jsx(ql,{storageKey:"myShipmentsGuide",icon:R,title:"Gönderi Yönetimi Rehberi",description:"📋 Gönderilerinizi takip edin, durumları kontrol edin ve nakliyecilerle iletişime geçin. Detaylı bilgi için gönderilerin üzerine tıklayın!",primaryAction:{label:"Rehberi Başlat",to:"/individual/create-shipment"},secondaryAction:{label:"Yeni Gönderi",to:"/individual/create-shipment"}})]})]}):Ot.jsx("div",{children:"Yetkilendirme hatası"})},hr=[{label:"Ana Sayfa",href:"/individual/dashboard"},{label:"Geçmiş Gönderiler",href:"/individual/history"}],pr=()=>{const{user:e}=sa(),[t,s]=l.useState([]),[a,i]=l.useState(!0),[r,n]=l.useState(""),[o,c]=l.useState("all"),[m,x]=l.useState("date"),[u,h]=l.useState(1),[p]=l.useState(10);l.useEffect(()=>{(async()=>{var t,a;try{Ql("🔄 Geçmiş gönderiler yükleniyor..."),i(!0);const a=null==e?void 0:e.id;if(!a)return s([]),void i(!1);const l=new AbortController,r=setTimeout(()=>l.abort(),1e4),n=new URLSearchParams({page:"1",limit:"100",userId:a.toString()}),d=await fetch(Zs(`/api/shipments?${n.toString()}`),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},signal:l.signal});if(clearTimeout(r),!d.ok)throw new Error("Geçmiş verileri yüklenemedi");const o=await d.json(),c=((null==(t=o.data)?void 0:t.shipments)||o.shipments||(Array.isArray(o.data)?o.data:[])||[]).filter(e=>"delivered"===e.status).map(e=>{var t,s;return{id:(null==(t=e.id)?void 0:t.toString())||"",title:$l(e.title||e.productDescription||e.description||"Gönderi"),from:e.pickupCity||e.fromCity||"",to:e.deliveryCity||e.toCity||"",status:"delivered",createdAt:e.createdAt||e.created_at||"",estimatedDelivery:e.deliveryDate||e.estimatedDelivery||"",actualDelivery:e.actualDelivery||e.deliveredAt||"",price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0,carrierName:e.carrierName||e.nakliyeciName||"Nakliyeci",rating:e.rating||0,trackingCode:Ri(e.trackingNumber||e.trackingCode,e.id),category:e.category||"",weight:(null==(s=e.weight)?void 0:s.toString())||"",dimensions:e.dimensions||"",description:e.description||e.productDescription||""}});s(c),Ql("✅ Geçmiş gönderiler yüklendi (sadece teslim edilenler):",c.length)}catch(l){ei("❌ Geçmiş gönderiler yüklenirken hata:",l),("AbortError"===(null==l?void 0:l.name)||(null==(a=null==l?void 0:l.message)?void 0:a.includes("fetch")))&&ti("API çağrısı zaman aşımına uğradı veya bağlantı hatası"),s([])}finally{i(!1)}})()},[null==e?void 0:e.id]);const g=e=>{switch(e){case"delivered":return Ot.jsx(J,{className:"w-3 h-3 mr-1"});case"cancelled":return Ot.jsx(ie,{className:"w-3 h-3 mr-1"});case"failed":return Ot.jsx(te,{className:"w-3 h-3 mr-1"});default:return Ot.jsx(L,{className:"w-3 h-3 mr-1"})}},b=e=>{switch(e){case"delivered":return{text:gi(e),color:"bg-green-100 text-green-800"};case"cancelled":return{text:gi(e),color:"bg-red-100 text-red-800"};case"failed":return{text:"Başarısız",color:"bg-red-100 text-red-800"};case"in_progress":return{text:gi(e),color:"bg-yellow-100 text-yellow-800"};default:return{text:gi(e),color:"bg-gray-100 text-gray-800"}}},f=t.filter(e=>{const t=e.title.toLowerCase().includes(r.toLowerCase())||e.carrierName.toLowerCase().includes(r.toLowerCase())||e.trackingCode.toLowerCase().includes(r.toLowerCase()),s="all"===o||e.status===o;return t&&s}).slice().sort((e,t)=>{const s=e=>{const t=new Date(e||0).getTime();return Number.isFinite(t)?t:0},a=e=>{const t=String(e.status||"").toLowerCase();return"in_progress"===t?1:"failed"===t?2:"cancelled"===t?3:"delivered"===t?4:9};if("status"===m){const l=a(e)-a(t);return 0!==l?l:s(t.createdAt)-s(e.createdAt)}if("price"===m){const a=(Number(t.price)||0)-(Number(e.price)||0);return 0!==a?a:s(t.createdAt)-s(e.createdAt)}if("rating"===m){const a=(Number(t.rating)||0)-(Number(e.rating)||0);return 0!==a?a:s(t.createdAt)-s(e.createdAt)}return s(t.createdAt)-s(e.createdAt)}),y=Math.ceil(f.length/p),j=(u-1)*p,v=j+p,N=f.slice(j,v);return l.useEffect(()=>{h(1)},[o,r,m]),a?Ot.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Ot.jsx("p",{className:"text-gray-600",children:"Geçmiş yükleniyor..."})]})}):Ot.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Geçmiş Gönderiler - YolNext Bireysel"}),Ot.jsx("meta",{name:"description",content:"Gönderi geçmişinizi görüntüleyin ve yönetin"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[Ot.jsx("div",{className:"mb-4",children:Ot.jsx(Ol,{items:hr})}),Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(Le,{className:"w-8 h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-3",children:["Geçmiş"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Gönderileriniz"})]}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Tamamlanan gönderilerinizi görüntüleyin ve analiz edin"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Toplam Gönderi"}),Ot.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.length})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Teslim Edilen"}),Ot.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(e=>"delivered"===e.status).length})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-700 rounded-xl flex items-center justify-center",children:Ot.jsx(J,{className:"w-6 h-6 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Toplam Harcama"}),Ot.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["₺",t.reduce((e,t)=>e+t.price,0).toLocaleString()]})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-700 rounded-xl flex items-center justify-center",children:Ot.jsx($,{className:"w-6 h-6 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Ortalama Puan"}),Ot.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.length>0?(t.reduce((e,t)=>e+t.rating,0)/t.length).toFixed(1):0})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-600 to-orange-700 rounded-xl flex items-center justify-center",children:Ot.jsx(O,{className:"w-6 h-6 text-white"})})]})})]}),Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Gönderi ara...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ot.jsxs("select",{value:o,onChange:e=>c(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"delivered",children:"Teslim Edilen"}),Ot.jsx("option",{value:"cancelled",children:"İptal Edilen"}),Ot.jsx("option",{value:"failed",children:"Başarısız"}),Ot.jsx("option",{value:"in_progress",children:"Devam Eden"})]}),Ot.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ot.jsx("option",{value:"date",children:"Tarihe Göre"}),Ot.jsx("option",{value:"status",children:"Duruma Göre"}),Ot.jsx("option",{value:"price",children:"Fiyata Göre"}),Ot.jsx("option",{value:"rating",children:"Puana Göre"})]}),Ot.jsxs("button",{onClick:()=>{n(""),c("all"),x("date"),h(1)},className:"px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors flex items-center justify-center gap-2",children:[Ot.jsx(_,{className:"w-4 h-4"}),"Sıfırla"]})]})}),Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200",children:[Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Gönderi No"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Rota"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Durum"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Nakliyeci"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Fiyat"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:N.length>0?N.map(e=>Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900",children:e.trackingCode}),Ot.jsx("div",{className:"text-xs text-slate-500",children:new Date(e.createdAt).toLocaleDateString("tr-TR")}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.title})]}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsxs("div",{className:"text-sm font-medium text-slate-900",children:[e.from," → ",e.to]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.category})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(e.status).color}`,children:[g(e.status),b(e.status).text]})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(A,{className:"w-4 h-4 text-slate-400"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:e.carrierName}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(O,{className:"w-3 h-3 text-yellow-500"}),Ot.jsx("span",{className:"text-xs text-slate-500",children:e.rating})]})]})]})}),Ot.jsxs("td",{className:"py-4 px-4",children:[Ot.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["₺",e.price.toLocaleString()]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:e.weight})]}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(d,{to:`/individual/shipments/${e.id}`,className:"p-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Detayları Görüntüle",children:Ot.jsx(Q,{className:"w-4 h-4"})}),Ot.jsx("button",{className:"p-2 text-slate-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Mesaj Gönder",children:Ot.jsx(Ee,{className:"w-4 h-4"})}),Ot.jsx("button",{className:"p-2 text-slate-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"İndir",children:Ot.jsx(Ge,{className:"w-4 h-4"})})]})})]},e.id)):Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:6,className:"py-12 text-center",children:Ot.jsxs("div",{className:"text-slate-500",children:[Ot.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),Ot.jsx("p",{className:"text-lg font-medium mb-2",children:"📜 Henüz geçmiş yok"}),Ot.jsx("p",{className:"text-sm",children:"Tamamlanan gönderileriniz burada görünür."})]})})})})]})})}),f.length>p&&Ot.jsx("div",{className:"mt-6",children:Ot.jsx(rr,{currentPage:u,totalPages:y,onPageChange:h})}),Ot.jsx("div",{className:"mt-8 text-center",children:Ot.jsxs(d,{to:"/individual/create-shipment",className:"inline-flex items-center gap-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white px-6 py-3 rounded-xl font-semibold hover:from-slate-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Yeni Gönderi Oluştur"]})})]})]})};async function gr(e){if(!e.ok){const t=await e.text();if(t.trim().startsWith("<!DOCTYPE")||t.trim().startsWith("<html"))throw new Error(`HTTP ${e.status}: Server returned HTML instead of JSON`);try{return JSON.parse(t)}catch{throw new Error(`HTTP ${e.status}: ${e.statusText}`)}}const t=e.headers.get("content-type");if(t&&!t.includes("application/json")){const t=await e.text();if(t.trim().startsWith("<!DOCTYPE")||t.trim().startsWith("<html"))throw new Error(`HTTP ${e.status}: Server returned HTML instead of JSON`);try{return JSON.parse(t)}catch{throw new Error(`Invalid JSON response: ${t.substring(0,100)}`)}}try{const t=await e.text();if(!t||0===t.trim().length)return{};const s=t.trim();if(s.startsWith("<!DOCTYPE")||s.startsWith("<html"))throw new Error(`HTTP ${e.status}: Server returned HTML instead of JSON`);return JSON.parse(t)}catch(s){if(s instanceof Error&&s.message.includes("HTML"))throw s;throw new Error(`JSON parse error: ${s instanceof Error?s.message:"Unknown error"}`)}}const br=()=>{const{token:e}=sa(),t=m(),[s,a]=l.useState([]),[i,r]=l.useState(null),[n,d]=l.useState(!0),[o,c]=l.useState(!1),[x,u]=l.useState(null),[h,p]=l.useState(""),[g,b]=l.useState("date"),[y,j]=l.useState("desc"),[v,N]=l.useState("all"),[k,w]=l.useState(!1),S=l.useCallback(async t=>{if(!e||!t)return[];try{const s=await fetch(Zs(`/api/shipments/${t}/tracking`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)return[];const a=await gr(s);return(Array.isArray(a)?a:[]).map((e,s)=>{const a=String(e.status||""),l=String(e.created_at||e.createdAt||e.createdat||(new Date).toISOString()),i="delivered"===a||"completed"===a;return{id:String(e.id||`${t}-${s}`),location:String(e.location||""),timestamp:l,description:String(e.notes||e.note||e.description||a||"Güncelleme"),status:i?"completed":"in_transit"===a||"picked_up"===a?"in-progress":"pending",notes:e.notes||e.note||void 0}})}catch(s){return[]}},[e]),C=l.useCallback(async()=>{if(e)try{const t=await fetch(Zs("/api/shipments"),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load shipments");const s=await gr(t),l=((null==s?void 0:s.shipments)||(null==s?void 0:s.data)||[]).map(e=>{var t,s,a,l,i,r,n,d,o,c;return{id:String(e.id||e.shipment_id||""),trackingNumber:e.tracking_code||e.tracking_number||e.trackingCode||"",title:e.title||e.description||"Gönderi",status:A(e.status),currentLocation:e.current_location||e.currentLocation||e.origin_city||e.from||"Bilinmiyor",estimatedDelivery:e.estimated_delivery_date||e.delivery_date||e.deliveryDate||e.pickup_date||"",carrier:{name:e.carrier_name||(null==(t=e.carrier)?void 0:t.name)||e.carrierName||"Nakliyeci",company:e.carrier_company||(null==(s=e.carrier)?void 0:s.company)||e.carrierCompany||"",phone:e.carrier_phone||(null==(a=e.carrier)?void 0:a.phone)||e.carrierPhone||"",email:e.carrier_email||(null==(l=e.carrier)?void 0:l.email)||e.carrierEmail||"",rating:e.carrier_rating||(null==(i=e.carrier)?void 0:i.rating)||e.carrierRating||0,totalShipments:e.carrier_total_shipments||(null==(r=e.carrier)?void 0:r.total_shipments)||e.completed_jobs||0,successRate:e.carrier_success_rate||(null==(n=e.carrier)?void 0:n.success_rate)||e.success_rate||0},route:{origin:e.origin_city||e.origin||e.from||"",destination:e.destination_city||e.destination||e.to||"",distance:e.distance||0,estimatedTime:e.estimated_time||e.estimatedTime||""},timeline:[],isLive:"in_transit"===e.status||"picked_up"===e.status||"in_progress"===e.status,lastUpdate:e.updated_at||e.updatedAt||e.last_update||(new Date).toISOString(),priority:D(e.priority),value:e.cargo_value||e.value||e.total_value||e.price||0,weight:e.weight||0,dimensions:{length:e.length||(null==(d=e.dimensions)?void 0:d.length)||0,width:e.width||(null==(o=e.dimensions)?void 0:o.width)||0,height:e.height||(null==(c=e.dimensions)?void 0:c.height)||0},specialRequirements:e.special_requests?Array.isArray(e.special_requests)?e.special_requests:[e.special_requests]:[]}});a(l),d(!1)}catch(t){d(!1)}else d(!1)},[e]),A=e=>({pending:"pending",waiting:"pending",waiting_for_offers:"pending",preparing:"pending",offer_accepted:"pending",in_transit:"in-transit",in_progress:"in-transit",assigned:"in-transit",picked_up:"in-transit",delivered:"delivered",completed:"delivered",accepted:"delivered",exception:"exception",cancelled:"cancelled"}[e]||"pending"),D=e=>({urgent:"urgent",high:"high",normal:"normal",low:"low"}[e]||"normal"),_=e=>{switch(e){case"pending":return Ot.jsx(Je,{className:"w-6 h-6 text-yellow-500"});case"in-transit":return Ot.jsx(E,{className:"w-6 h-6 text-blue-500"});case"delivered":return Ot.jsx(fe,{className:"w-6 h-6 text-green-500"});case"exception":return Ot.jsx(f,{className:"w-6 h-6 text-red-500"});case"cancelled":return Ot.jsx(ie,{className:"w-6 h-6 text-slate-500"});default:return Ot.jsx(T,{className:"w-6 h-6 text-slate-500"})}},I=e=>{switch(e){case"pending":return gi("pending");case"in-transit":return gi("in_transit");case"delivered":return gi("delivered");case"exception":return"Problem Oluştu";case"cancelled":return gi("cancelled");default:return gi(String(e||""))}},K=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in-transit":return"bg-blue-100 text-blue-800 border-blue-200";case"delivered":return"bg-green-100 text-green-800 border-green-200";case"exception":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},M=e=>{switch(e){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"normal":return"bg-blue-500";default:return"bg-gray-500"}},B=e=>{switch(e){case"urgent":return"Acil";case"high":return"Yüksek";case"normal":default:return"Normal";case"low":return"Düşük"}},P=s.filter(e=>{const t=e.trackingNumber.toLowerCase().includes(h.toLowerCase())||e.title.toLowerCase().includes(h.toLowerCase())||e.carrier.name.toLowerCase().includes(h.toLowerCase())||e.carrier.company.toLowerCase().includes(h.toLowerCase()),s="all"===v||e.status===v;return t&&s}).sort((e,t)=>{let s=0;switch(g){case"date":s=new Date(e.lastUpdate).getTime()-new Date(t.lastUpdate).getTime();break;case"status":s=e.status.localeCompare(t.status);break;case"priority":const a={urgent:4,high:3,normal:2,low:1};s=a[e.priority]-a[t.priority];break;case"carrier":s=e.carrier.name.localeCompare(t.carrier.name)}return"asc"===y?s:-s});return l.useEffect(()=>{C()},[C]),l.useEffect(()=>{try{const e=new URLSearchParams(t.search||"").get("shipment");u(e?String(e):null)}catch{u(null)}},[t.search]),l.useEffect(()=>{if(!x)return;if(!Array.isArray(s)||0===s.length)return;const e=s.find(e=>String(e.id)===String(x))||s.find(e=>String(e.trackingNumber)===String(x))||null;e&&(null==i?void 0:i.id)!==e.id&&r(e)},[x,s,null==i?void 0:i.id]),l.useEffect(()=>{const e=setInterval(()=>{C()},3e4);return()=>clearInterval(e)},[C]),l.useEffect(()=>{i&&0===i.timeline.length&&(c(!0),S(i.id).then(e=>{r(t=>t?{...t,timeline:e}:null),c(!1)}))},[i,S]),n?Ot.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse",children:Ot.jsx(Fe,{className:"w-8 h-8 text-white"})}),Ot.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Canlı takip yükleniyor..."}),Ot.jsx("p",{className:"text-slate-600 mt-2",children:"Gönderileriniz hazırlanıyor"})]})}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Canlı Takip - YolNet"}),Ot.jsx("meta",{name:"description",content:"Gönderilerinizi gerçek zamanlı olarak takip edin"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(Fe,{className:"w-8 h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-4",children:["Canlı"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Takip"})]}),Ot.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Gönderilerinizi gerçek zamanlı olarak takip edin ve anlık güncellemeler alın"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900",children:s.length}),Ot.jsx("div",{className:"text-sm text-slate-600",children:"Toplam Gönderi"})]})]})}),Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900",children:s.filter(e=>"in-transit"===e.status).length}),Ot.jsx("div",{className:"text-sm text-slate-600",children:"Yolda"})]})]})}),Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900",children:s.filter(e=>"pending"===e.status).length}),Ot.jsx("div",{className:"text-sm text-slate-600",children:"Beklemede"})]})]})}),Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(fe,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900",children:s.filter(e=>"delivered"===e.status).length}),Ot.jsx("div",{className:"text-sm text-slate-600",children:"Teslim Edildi"})]})]})})]}),Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:Ot.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[Ot.jsx("div",{className:"flex-1",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Takip numarası, gönderi başlığı veya nakliyeci ara...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),Ot.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Ot.jsxs("select",{value:v,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"pending",children:"Beklemede"}),Ot.jsx("option",{value:"in-transit",children:"Yolda"}),Ot.jsx("option",{value:"delivered",children:"Teslim Edildi"}),Ot.jsx("option",{value:"exception",children:"Problem"})]}),Ot.jsxs("select",{value:g,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",children:[Ot.jsx("option",{value:"date",children:"Tarihe Göre"}),Ot.jsx("option",{value:"status",children:"Duruma Göre"}),Ot.jsx("option",{value:"priority",children:"Önceliğe Göre"}),Ot.jsx("option",{value:"carrier",children:"Nakliyeciye Göre"})]}),Ot.jsx("button",{onClick:()=>j("asc"===y?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"asc"===y?"↑":"↓"})]})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[Ot.jsxs("div",{className:"p-4 border-b border-gray-200",children:[Ot.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Aktif Gönderiler"}),Ot.jsxs("p",{className:"text-sm text-slate-600",children:[P.length," gönderi"]})]}),Ot.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===P.length?Ot.jsxs("div",{className:"p-8 text-center text-slate-500",children:[Ot.jsx(R,{className:"w-12 h-12 mx-auto mb-2 text-slate-400"}),Ot.jsx("p",{children:"Gönderi bulunamadı"})]}):P.map(e=>Ot.jsx("div",{onClick:()=>r(e),className:"p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors "+((null==i?void 0:i.id)===e.id?"bg-slate-50 border-l-4 border-l-slate-800":""),children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsxs("div",{className:"relative",children:[_(e.status),e.isLive&&Ot.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Ot.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:e.title}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${K(e.status)}`,children:I(e.status)}),Ot.jsx("div",{className:`w-2 h-2 rounded-full ${M(e.priority)}`,title:B(e.priority)})]})]}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-1",children:e.trackingNumber||"Takip kodu yok"}),Ot.jsxs("p",{className:"text-sm text-slate-500 truncate",children:[e.carrier.name," ",e.carrier.company?`- ${e.carrier.company}`:""]}),Ot.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[e.route.origin," → ",e.route.destination]}),Ot.jsxs("p",{className:"text-xs text-slate-400",children:["Son güncelleme: ",new Date(e.lastUpdate).toLocaleTimeString("tr-TR")]})]})]})},e.id))})]})}),Ot.jsx("div",{className:"lg:col-span-2",children:i?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{className:"relative",children:[_(i.status),i.isLive&&Ot.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-xl font-bold text-slate-900",children:i.title}),Ot.jsx("p",{className:"text-slate-600",children:i.trackingNumber||"Takip kodu yok"}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Ot.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${K(i.status)}`,children:I(i.status)}),Ot.jsx("div",{className:`w-2 h-2 rounded-full ${M(i.priority)}`,title:B(i.priority)})]})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(Ge,{className:"w-4 h-4 text-slate-500"})}),Ot.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(Ye,{className:"w-4 h-4 text-slate-500"})}),Ot.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(qe,{className:"w-4 h-4 text-slate-500"})})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(T,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"font-medium text-slate-700",children:"Mevcut Konum:"}),Ot.jsx("span",{className:"text-slate-600",children:i.currentLocation})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($e,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"font-medium text-slate-700",children:"Tahmini Teslimat:"}),Ot.jsx("span",{className:"text-slate-600",children:i.estimatedDelivery||"Belirtilmemiş"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Y,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"font-medium text-slate-700",children:"Rota:"}),Ot.jsxs("span",{className:"text-slate-600",children:[i.route.origin," → ",i.route.destination]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(R,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"font-medium text-slate-700",children:"Mesafe:"}),Ot.jsxs("span",{className:"text-slate-600",children:[i.route.distance||0," km"]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[Ot.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx($,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Değer"})]}),Ot.jsxs("p",{className:"text-lg font-semibold text-slate-900",children:["₺",i.value.toLocaleString()]})]}),Ot.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(R,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Ağırlık"})]}),Ot.jsxs("p",{className:"text-lg font-semibold text-slate-900",children:[i.weight||0," kg"]})]}),Ot.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(He,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Süre"})]}),Ot.jsx("p",{className:"text-lg font-semibold text-slate-900",children:i.route.estimatedTime||"Belirtilmemiş"})]})]}),i.specialRequirements.length>0&&Ot.jsxs("div",{className:"mb-6",children:[Ot.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Özel Gereksinimler"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:i.specialRequirements.map((e,t)=>Ot.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-lg text-xs font-medium",children:e},t))})]}),"Nakliyeci"!==i.carrier.name&&Ot.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full flex items-center justify-center",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-slate-900",children:i.carrier.name}),Ot.jsx("p",{className:"text-sm text-slate-600",children:i.carrier.company}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.carrier.rating>0&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(O,{className:"w-3 h-3 text-yellow-500"}),Ot.jsxs("span",{className:"text-sm text-slate-700",children:[i.carrier.rating,"/5"]})]}),Ot.jsx("span",{className:"text-xs text-slate-500",children:"•"})]}),i.carrier.totalShipments>0&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("span",{className:"text-xs text-slate-500",children:[i.carrier.totalShipments," gönderi"]}),Ot.jsx("span",{className:"text-xs text-slate-500",children:"•"})]}),i.carrier.successRate>0&&Ot.jsxs("span",{className:"text-xs text-slate-500",children:["%",i.carrier.successRate," başarı"]})]})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[i.carrier.phone&&Ot.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:i.carrier.phone,children:Ot.jsx(z,{className:"w-4 h-4 text-slate-500"})}),i.carrier.email&&Ot.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:i.carrier.email,children:Ot.jsx(G,{className:"w-4 h-4 text-slate-500"})})]})]})})]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Gönderi Geçmişi"}),i.timeline.length>3&&Ot.jsxs("button",{onClick:()=>w(!k),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[k?"Daha Az Göster":"Tümünü Göster",k?Ot.jsx(Ue,{className:"w-4 h-4"}):Ot.jsx(Ve,{className:"w-4 h-4"})]})]}),o?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ot.jsx("p",{className:"text-slate-600 mt-2",children:"Geçmiş yükleniyor..."})]}):0===i.timeline.length?Ot.jsxs("div",{className:"text-center py-8 text-slate-500",children:[Ot.jsx(L,{className:"w-12 h-12 mx-auto mb-2 text-slate-400"}),Ot.jsx("p",{children:"Henüz güncelleme yok"})]}):Ot.jsxs("div",{className:"space-y-4",children:[(k?i.timeline:i.timeline.slice(0,3)).map((e,t)=>Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsxs("div",{className:"flex flex-col items-center",children:[Ot.jsx("div",{className:"w-4 h-4 rounded-full "+("completed"===e.status?"bg-green-500":"in-progress"===e.status?"bg-blue-500 animate-pulse":"delayed"===e.status?"bg-red-500":"bg-gray-300")}),t<(k?i.timeline.length-1:Math.min(2,i.timeline.length-1))&&Ot.jsx("div",{className:"w-px h-8 bg-gray-300 mt-2"})]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("p",{className:"font-medium text-slate-900",children:e.description}),Ot.jsx("p",{className:"text-sm text-slate-600",children:e.location}),Ot.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(e.timestamp).toLocaleString("tr-TR")}),e.notes&&Ot.jsx("p",{className:"text-xs text-slate-500 mt-1 italic",children:e.notes})]})]},e.id)),!k&&i.timeline.length>3&&Ot.jsx("div",{className:"text-center pt-2",children:Ot.jsxs("button",{onClick:()=>w(!0),className:"text-sm text-blue-600 hover:text-blue-700",children:["+",i.timeline.length-3," daha fazla göster"]})})]})]})]}):Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 h-96 flex items-center justify-center",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Fe,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Gönderi Seçin"}),Ot.jsx("p",{className:"text-slate-600",children:"Detayları görüntülemek için sol taraftan bir gönderi seçin"})]})})})]})]})]})},fr={SUCCESS:{OFFER_SENT:"Teklifınız başarıyla iletilmiştir. İlgili taraf tarafından değerlendirilecektir.",SHIPMENT_CREATED:"Gönderi talebiniz başarıyla oluşturulmuştur. Nakliyecilerden teklifler gelmeye başlayacaktır.",DELIVERY_CONFIRMED:"Teslimat işlemi başarıyla tamamlanmıştır. Taraflar bilgilendirilmiştir.",STATUS_UPDATED:"Gönderi durumu başarıyla güncellenmiştir. İlgili taraflar bilgilendirilmiştir.",PICKUP_CONFIRMED:"Yük alım işlemi onaylanmıştır. Takip sistemi güncellenmiştir.",TRANSIT_STARTED:"Nakliye işlemi başlatılmıştır. Gönderici taraf bilgilendirilmiştir.",MESSAGE_SENT:"Mesajınız başarıyla iletilmiştir.",CONVERSATION_DELETED:"Mesaj geçmişi başarıyla kaldırılmıştır.",CONVERSATION_ARCHIVED:"Mesaj geçmişi arşivlenmiştir.",CONVERSATION_UNARCHIVED:"Mesaj geçmişi arşivden çıkarılmıştır.",PROFILE_UPDATED:"Profil bilgileriniz başarıyla güncellenmiştir.",PASSWORD_CHANGED:"Şifreniz başarıyla değiştirilmiştir. Güvenliğiniz için tüm oturumlara yeniden giriş yapmanız önerilir.",SETTINGS_SAVED:"Ayarlarınız başarıyla kaydedilmiştir.",JOB_ACCEPTED:"İş talebi kabul edilmiştir. Operasyon süreci başlamıştır.",JOB_REJECTED:"İş talebi başarıyla reddedilmiştir.",OFFER_ACCEPTED:"Teklif kabul edilmiştir. Taşıma süreci başlamıştır.",OFFER_REJECTED:"Teklif reddedilmiştir. İlgili taraf bilgilendirilmiştir.",OFFLINE_SAVED:"İşlem kaydedilmiştir. İnternet bağlantısı sağlandığında otomatik olarak gönderilecektir.",SYNC_COMPLETED:"Bekleyen işlemleriniz başarıyla gönderilmiştir.",SUPPORT_TICKET_CREATED:"Destek talebiniz oluşturulmuştur. Destek ekibimiz en kısa sürede size dönüş yapacaktır.",FEEDBACK_SENT:"Geri bildiriminiz alınmıştır. Değerlendirmeniz için teşekkür ederiz.",ACTION_COMPLETED:"İşlem başarıyla tamamlanmıştır.",CHANGES_SAVED:"Değişiklikleriniz kaydedilmiştir."},ERROR:{NETWORK_ERROR:"Bağlantı sorunu tespit edilmiştir. Lütfen internet bağlantınızı kontrol ederek işlemi yeniden deneyiniz.",REQUEST_FAILED:"İstek işlenememiştir. Lütfen birkaç dakika sonra tekrar deneyiniz.",SERVER_ERROR:"Sistemsel bir sorun tespit edilmiştir. Teknik ekibimiz konuyla ilgileniyor.",TIMEOUT_ERROR:"İşlem zaman aşımına uğramıştır. Lütfen sayfayı yenileyerek tekrar deneyiniz.",AUTH_REQUIRED:"Bu işlemi gerçekleştirmek için oturum açmanız gerekmektedir.",SESSION_EXPIRED:"Oturum süreniz dolmuştur. Güvenliğiniz için lütfen tekrar giriş yapınız.",PERMISSION_DENIED:"Bu işlemi gerçekleştirmek için yeterli yetkiniz bulunmamaktadır.",INVALID_CREDENTIALS:"Kullanıcı bilgileriniz hatalıdır. Lütfen kontrol ederek tekrar deneyiniz.",REQUIRED_FIELDS:"Lütfen tüm zorunlu alanları eksiksiz doldurunuz.",INVALID_FORMAT:"Girilen bilgi formatı geçersizdir. Lütfen doğru format kullanınız.",INVALID_AMOUNT:"Lütfen geçerli bir tutar giriniz.",FILE_TOO_LARGE:"Dosya boyutu izin verilen limitin üzerindedir. Lütfen daha küçük bir dosya seçiniz.",UNSUPPORTED_FILE:"Seçilen dosya formatı desteklenmemektedir.",OPERATION_FAILED:"İşlem gerçekleştirilememiştir. Lütfen tekrar deneyiniz.",SAVE_FAILED:"Kaydetme işlemi başarısız olmuştur. Lütfen bilgilerinizi kontrol ederek tekrar deneyiniz.",DELETE_FAILED:"Silme işlemi gerçekleştirilememiştir.",UPDATE_FAILED:"Güncelleme işlemi başarısız olmuştur.",SHIPMENT_NOT_FOUND:"Gönderi bulunamadı. Lütfen gönderi bilgilerinizi kontrol ediniz.",JOB_NOT_FOUND:"İş talebi bulunamadı veya erişim yetkiniz bulunmamaktadır.",OFFER_EXPIRED:"Teklif süresi dolmuştur. Lütfen yeni bir teklif oluşturunuz.",INSUFFICIENT_BALANCE:"Yetersiz bakiye. Lütfen hesabınıza yeterli bakiye yükleyiniz.",UNKNOWN_ERROR:"Beklenmeyen bir sorun oluşmuştur. Sorun devam ederse lütfen destek ekibimizle iletişime geçiniz."},WARNING:{UNSAVED_CHANGES:"Kaydedilmemiş değişiklikler bulunmaktadır. Sayfadan ayrılmadan önce değişiklikleri kaydetmeniz önerilir.",DATA_LOSS_WARNING:"Bu işlem geri alınamaz. Devam etmek istediğinize emin misiniz?",OFFLINE_MODE:"İnternet bağlantısı bulunmamaktadır. Bazı özellikler sınırlı olabilir.",MAINTENANCE_MODE:"Sistem bakımı nedeniyle bazı özellikler geçici olarak kullanılamayabilir.",LOCATION_REQUIRED:"Bu özelliği kullanmak için konum erişimi gereklidir.",CAMERA_REQUIRED:"Bu özelliği kullanmak için kamera erişimi gereklidir.",BETA_FEATURE:"Bu özellik beta aşamasındadır. Karşılaştığınız sorunları lütfen bildirin."},INFO:{LOADING:"Bilgiler yükleniyor, lütfen bekleyiniz...",PROCESSING:"İşleminiz gerçekleştiriliyor, lütfen bekleyiniz...",EMAIL_SENT:"E-posta adresinize bilgilendirme mesajı gönderilmiştir.",VERIFICATION_SENT:"Doğrulama kodu gönderilmiştir. Lütfen e-posta veya SMS'inizi kontrol ediniz.",UPDATE_AVAILABLE:"Yeni sürüm mevcuttur. Sayfayı yenileyerek güncelleyebilirsiniz.",FEATURE_COMING_SOON:"Bu özellik yakında kullanıma sunulacaktır.",DOCUMENTATION_LINK:"Detaylı bilgi için dokümantasyon sayfasını ziyaret edebilirsiniz.",CONTACT_SUPPORT:"Sorunuz için destek ekibimizle iletişime geçebilirsiniz."}},yr=(e,t,s="info",a)=>{const l=fr[s.toUpperCase()],i=a||l[t]||fr.ERROR.UNKNOWN_ERROR,r=(e=>({success:{duration:4e3,position:"top-right",style:{background:"#10b981",color:"#ffffff",fontWeight:"500"}},error:{duration:6e3,position:"top-right",style:{background:"#ef4444",color:"#ffffff",fontWeight:"500"}},warning:{duration:5e3,position:"top-right",style:{background:"#f59e0b",color:"#ffffff",fontWeight:"500"}},info:{duration:4e3,position:"top-right",style:{background:"#3b82f6",color:"#ffffff",fontWeight:"500"}}}[e]))(s);e({type:s,title:"success"===s?"Başarılı":"error"===s?"Hata":"warning"===s?"Uyarı":"Bilgi",message:i,duration:r.duration})},jr=async e=>(await fetch(Zs("/api/users/account"),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)})).json();function vr(){const{user:e}=sa(),{showToast:t}=ka(),[s,a]=l.useState(!1),[i,r]=l.useState(null),[n,o]=l.useState(!1),[c,m]=l.useState(""),[x,u]=l.useState("profile"),[h,p]=l.useState({profile:{name:(null==e?void 0:e.firstName)&&(null==e?void 0:e.lastName)?`${e.firstName} ${e.lastName}`:(null==e?void 0:e.email)||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phone)||"",address:"",birthDate:""},notifications:{email:!0,sms:!1,push:!0,jobAlerts:!0,messageAlerts:!0,paymentAlerts:!0},privacy:{showProfile:!0,showLocation:!1,allowMessages:!0},security:{twoFactor:!1,biometric:!1,sessionTimeout:30},preferences:{theme:"light",language:"tr",timezone:"Europe/Istanbul",currency:"TRY"}}),g=[{id:"profile",name:"Profil",icon:xe}],b=(e,t,s)=>{p(a=>({...a,[e]:{...a[e],[t]:s}}))};return s?Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:Ot.jsx(Pl,{message:"Ayarlar kaydediliyor..."})})}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Ayarlar - Bireysel Panel - YolNext"}),Ot.jsx("meta",{name:"description",content:"Bireysel ayar yönetimi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/individual/dashboard"},{label:"Ayarlar",href:"/individual/settings"}]})}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-0",children:[Ot.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(oe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Ayarlar"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Hesap ve uygulama ayarlarınızı yönetin"})]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:Ot.jsxs("button",{onClick:async()=>{a(!0);try{o(!0),m("Ayarlar başarıyla kaydedildi"),yr(t,"ACTION_COMPLETED","success")}catch(e){yr(t,"OPERATION_FAILED","error")}finally{a(!1)}},className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg sm:rounded-xl hover:shadow-lg transition-all duration-200 text-sm font-medium",children:[Ot.jsx(We,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Kaydet"})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-200",children:Ot.jsx("nav",{className:"p-4",children:Ot.jsx("ul",{className:"space-y-2",children:g.map(e=>Ot.jsx("li",{children:Ot.jsxs("button",{onClick:()=>u(e.id),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors "+(x===e.id?"bg-slate-800 text-white":"text-slate-700 hover:bg-slate-100"),children:[Ot.jsx(e.icon,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm font-medium",children:e.name})]})},e.id))})})})}),Ot.jsx("div",{className:"lg:col-span-3",children:Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-200",children:Ot.jsx("div",{className:"p-4 sm:p-6",children:"profile"===x&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Profil Bilgileri"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ad Soyad"}),Ot.jsx("input",{type:"text",value:h.profile.name,onChange:e=>b("profile","name",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"E-posta"}),Ot.jsx("input",{type:"email",value:h.profile.email,onChange:e=>b("profile","email",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefon"}),Ot.jsx("input",{type:"tel",value:h.profile.phone,onChange:e=>b("profile","phone",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Doğum Tarihi"}),Ot.jsx("input",{type:"date",value:h.profile.birthDate,onChange:e=>b("profile","birthDate",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{className:"md:col-span-2",children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Adres"}),Ot.jsx("textarea",{value:h.profile.address,onChange:e=>b("profile","address",e.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]})]}),Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 sm:p-5 shadow-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ot.jsx(W,{className:"w-5 h-5 text-slate-900"}),Ot.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Yasal Belgeler"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2",children:[Ot.jsx(d,{to:"/terms",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Kullanım Koşulları"}),Ot.jsx(d,{to:"/privacy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Gizlilik Politikası"}),Ot.jsx(d,{to:"/cookie-policy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Çerez Politikası"}),Ot.jsx("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("yolnext:cookie-preferences")),className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900 text-left",children:"Çerez Tercihleri"}),Ot.jsx(d,{to:"/kvkk-aydinlatma",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"KVKK Aydınlatma Metni"}),Ot.jsx(d,{to:"/consumer-rights",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Tüketici Hakları"}),Ot.jsx(d,{to:"/distance-selling-contract",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Mesafeli Satış Sözleşmesi"})]})]}),Ot.jsxs("div",{className:"mt-8 pt-8 border-t border-red-200",children:[Ot.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5"}),"Tehlikeli Bölge"]}),Ot.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:[Ot.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Hesabı Sil"}),Ot.jsx("p",{className:"text-sm text-red-800 mb-4",children:"Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz. Tüm verileriniz silinecek ve hesabınıza bir daha erişemeyeceksiniz."}),i&&Ot.jsx("div",{className:"mb-4 bg-red-100 border border-red-300 rounded-lg p-3 text-sm text-red-800",children:i}),Ot.jsx("button",{onClick:()=>{const e=window.prompt("Güvenlik için şifrenizi girin:");e&&(async e=>{var s,l;a(!0),r(null);try{(await jr({password:e})).success?setTimeout(()=>{localStorage.clear(),window.location.href="/"},2e3):yr(t,"OPERATION_FAILED","error")}catch(i){r((null==(l=null==(s=null==i?void 0:i.response)?void 0:s.data)?void 0:l.message)||"Hesap silme başarısız. Lütfen şifrenizi kontrol edin ve tekrar deneyin.")}finally{a(!1)}})(e)},disabled:s,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Siliniyor...":"Hesabımı Sil"})]})]})]})})})})]})]}),n&&Ot.jsx(Fl,{message:c,onClose:()=>o(!1),isVisible:n})]})}const Nr=()=>{const{showToast:e}=ka(),[t]=c(),[s,a]=l.useState(null),[i,r]=l.useState(""),[n,d]=l.useState(!1),[o,m]=l.useState([]),[x,u]=l.useState([]),[h,p]=l.useState(!1),[g,b]=l.useState({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),y=[{step:1,title:"Hesap Oluşturun",description:"Kayıt olun ve profil bilgilerinizi tamamlayın",icon:C},{step:2,title:"Gönderi Oluşturun",description:"Kategori seçin, adres bilgilerini girin ve yayınlayın",icon:R},{step:3,title:"Teklifleri Değerlendirin",description:"Gelen teklifleri karşılaştırın, sorularınızı sorup en uygunu seçin",icon:$},{step:4,title:"Mesajlaşma ile Netleştirin",description:"Teklif detaylarını mesajlaşma ile netleştirip, uygun teklifi seçerek süreci başlatın",icon:G},{step:5,title:"Takip ve Teslimat",description:"Durum değişikliklerini izleyin, teslimat tamamlandığında teyit verin",icon:T}],j=[{category:"Başlangıç",icon:ve,items:[{question:"YolNext nedir ve nasıl çalışır?",answer:"YolNext, gönderi oluşturup nakliyecilerden teklif toplamanızı sağlayan bir lojistik platformudur. Gönderinizi yayınladıktan sonra teklifler gelir, siz uygun teklifi seçersiniz. Süreç boyunca durum güncellemelerini takip edebilirsiniz."},{question:"Hesap oluşturmak ücretsiz mü?",answer:"Evet. Bireysel kullanıcılar için hesap oluşturma ve platformu kullanma ücretsizdir. Ücretlendirme, seçtiğiniz hizmete ve teklife göre yalnızca taşıma sürecinde oluşur."},{question:"Hangi şehirlere gönderi yapabilirim?",answer:"YolNext üzerinden Türkiye genelinde gönderi oluşturabilirsiniz. Hizmet kapsamı, seçtiğiniz kategoriye ve nakliyeci uygunluğuna göre değişebilir."}]},{category:"Gönderi Oluşturma",icon:R,items:[{question:"Gönderi nasıl oluştururum?",answer:"Panelinizden “Gönderi Oluştur” adımına gidin. Kategori seçin, toplama ve teslimat adreslerini girin, tarih/ölçü bilgilerini ekleyin ve ilanı yayınlayın. Yayın sonrası nakliyeciler teklif göndermeye başlar."},{question:"Hangi kategorilerde gönderi oluşturabilirim?",answer:"Platformda farklı taşıma türleri için kategoriler bulunur. Kategoriye göre istenen alanlar değişebilir (ör. ev taşıma, parça eşya, ticari yük vb.)."},{question:"Gönderi fiyatını kim belirliyor?",answer:"Fiyatı nakliyeciler teklif verirken belirler. Siz; fiyat, süre, puan ve koşulları karşılaştırıp uygun teklifi seçebilirsiniz."},{question:"Gönderi oluştururken hangi bilgiler gereklidir?",answer:"Genellikle kategori, toplama/teslimat adresleri, tarih aralığı, yük bilgileri (ağırlık/hacim/özellik) ve varsa özel notlar gereklidir. Kategoriye göre ek bilgiler istenebilir."}]},{category:"Teklifler ve Mesajlaşma",icon:$,items:[{question:"Teklifleri nasıl görüntülerim?",answer:"Gönderi detayına girerek teklifleri listeleyebilirsiniz. Teklifleri fiyat, tahmini süre ve nakliyeci puanına göre karşılaştırmak mümkündür."},{question:"Teklif kabul etmeden önce nakliyeci ile konuşabilir miyim?",answer:"Evet. Teklif/ilan detayından mesajlaşarak sorularınızı iletebilir ve şartları netleştirebilirsiniz."},{question:"Teklifi seçince süreç nasıl başlar?",answer:"Uygun teklifi seçtiğinizde gönderi süreci başlar ve gönderiniz ilgili nakliyeciyle eşleşir. Bu aşamada mesajlaşma üzerinden toplama/teslimat zamanı, yük detayları ve özel notlar netleştirilebilir."},{question:"Ücret nasıl belirlenir?",answer:"Ücret, nakliyecilerin verdiği tekliflere göre oluşur. Teklifi seçmeden önce mesajlaşma ile şartları netleştirip karşılaştırma yaparak karar verebilirsiniz."}]},{category:"Takip ve Teslimat",icon:T,items:[{question:"Gönderimi nasıl takip ederim?",answer:"Gönderilerinizin durumunu panelinizden izleyebilirsiniz. Süreç adımlarında durum güncellemeleri ve bildirimler görünür."},{question:"Gönderi durumları nelerdir?",answer:"Durumlar; teklif bekleniyor, teklif seçildi, taşıma başladı, teslimat aşamasında ve teslim edildi gibi adımlardan oluşur. Her aşama panelde görüntülenir."},{question:"Teslimat süresi ne kadar?",answer:"Teslimat süresi mesafe, kategori ve nakliyecinin planına göre değişir. Teklif içerisinde tahmini süre bilgisi bulunur."}]},{category:"İptal",icon:te,items:[{question:"Gönderim iptal edilebilir mi?",answer:"Gönderi, taşıma başlamadan önce uygun durumdayken iptal edilebilir. Taşıma başladıktan sonra iptal koşulları değişebilir."},{question:"İptal sonrası süreç nasıl ilerler?",answer:"İptal koşulları; iptal zamanı ve gönderinin hangi aşamada olduğuna göre değişebilir. Detay için ilgili gönderi kaydını inceleyebilir veya destek talebi oluşturabilirsiniz."}]}],v=async()=>{var e;try{p(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=await fetch(Zs("/api/support/tickets"),{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json(),a=(null==(e=null==t?void 0:t.data)?void 0:e.tickets)||(null==t?void 0:t.data)||(null==t?void 0:t.tickets)||[];m(Array.isArray(a)?a:[])}}catch(t){}finally{p(!1)}};l.useEffect(()=>{(async()=>{try{const e=await fetch(Zs("/api/support/categories"));if(e.ok){const t=await e.json(),s=(null==t?void 0:t.data)||(null==t?void 0:t.categories)||[];u(Array.isArray(s)?s:[])}}catch(e){}})(),v()},[]),l.useEffect(()=>{const e=String(t.get("openSupport")||"").toLowerCase(),s="1"===e||"true"===e||"yes"===e,a=t.get("category"),l=t.get("priority"),i=t.get("subject"),r=t.get("description"),n=t.get("relatedShipmentId")||t.get("shipmentId");(a||l||i||r||n)&&b(e=>({...e,category:a??e.category,priority:l??e.priority,subject:i??e.subject,description:r??e.description,relatedShipmentId:n??e.relatedShipmentId})),s&&(d(!0),window.setTimeout(()=>{var e,t;null==(e=document.getElementById("support-section"))||e.scrollIntoView({behavior:"smooth",block:"start"});const s=document.getElementById("support-category")||document.getElementById("support-category-text");null==(t=null==s?void 0:s.focus)||t.call(s)},50))},[t]);const N=l.useCallback(()=>{d(!0),window.setTimeout(()=>{var e,t;null==(e=document.getElementById("support-section"))||e.scrollIntoView({behavior:"smooth",block:"start"});const s=document.getElementById("support-category")||document.getElementById("support-category-text");null==(t=null==s?void 0:s.focus)||t.call(s)},50)},[]),k=j.flatMap(e=>e.items),w=k.filter(e=>e.question.toLowerCase().includes(i.toLowerCase())||e.answer.toLowerCase().includes(i.toLowerCase()));return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Yardım ve Destek Merkezi - Bireysel | YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext Yardım ve Destek Merkezi - SSS, kapsamlı rehberler ve profesyonel destek talebi hizmetleri"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/individual/dashboard"},{label:"Yardım ve Destek Merkezi",href:"/individual/help"}]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-white/20 to-white/10 rounded-2xl flex items-center justify-center mx-auto mb-6 backdrop-blur-sm border border-white/20",children:Ot.jsx(he,{className:"w-10 h-10 text-white"})}),Ot.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4",children:"YolNext Yardım ve Destek Merkezi"}),Ot.jsx("p",{className:"text-slate-200 text-lg mb-8 max-w-3xl mx-auto",children:"Türkiye'nin lider lojistik platformunda size yardımcı olmak için buradayız. Hızlı cevaplar, kapsamlı rehberler ve profesyonel destek hizmetlerimizden faydalanın."})]}),Ot.jsx("div",{className:"relative z-10 max-w-md mx-auto",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),Ot.jsx("input",{type:"text",placeholder:"Sorunuzu arayın...",value:i,onChange:e=>r(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/40"})]})})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Hızlı Başlangıç Rehberi"}),Ot.jsx("p",{className:"text-slate-600",children:"5 adımda YolNext'i kullanmaya başlayın"})]})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:y.map((e,t)=>{const s=e.icon;return Ot.jsxs("div",{className:"relative",children:[Ot.jsxs("div",{className:"bg-slate-50 border border-gray-100 rounded-lg p-5 h-full",children:[Ot.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg mb-3 mx-auto",children:Ot.jsx(s,{className:"w-5 h-5 text-white"})}),Ot.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-slate-800 to-blue-900 text-white rounded-full flex items-center justify-center font-bold text-xs",children:e.step}),Ot.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2 text-center",children:e.title}),Ot.jsx("p",{className:"text-xs text-slate-600 text-center",children:e.description})]}),t<y.length-1&&Ot.jsx("div",{className:"hidden md:block absolute top-1/2 -right-2 transform -translate-y-1/2",children:Ot.jsx(K,{className:"w-4 h-4 text-slate-400"})})]},t)})})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx(W,{className:"w-6 h-6 text-slate-900"}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Sık Sorulan Sorular"})]}),i?Ot.jsxs("div",{className:"mb-4 text-slate-600 text-sm",children:[Ot.jsx("strong",{children:w.length})," sonuç bulundu"]}):Ot.jsx("div",{className:"mb-6",children:Ot.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((e,t)=>{const s=e.icon;return Ot.jsxs("button",{onClick:()=>{const t=j.findIndex(t=>t.category===e.category),s=j.slice(0,t).reduce((e,t)=>e+t.items.length,0);a(s)},className:"flex items-center gap-2 px-3 py-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 border border-gray-200 transition-colors text-sm font-medium",children:[Ot.jsx(s,{className:"w-4 h-4"}),e.category]},t)})})}),Ot.jsx("div",{className:"space-y-3",children:(i?w:k).map((e,t)=>{const l=s===t;return Ot.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:border-blue-300 transition-all",children:[Ot.jsxs("button",{onClick:()=>(e=>{a(s===e?null:e)})(t),className:"w-full p-4 flex items-center justify-between text-left hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-4 h-4 text-slate-600"})})}),Ot.jsx("div",{className:"flex-1",children:Ot.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1",children:e.question})})]}),l?Ot.jsx(Ue,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"}):Ot.jsx(Ve,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"})]}),l&&Ot.jsx("div",{className:"px-4 pb-4 pt-0 border-t border-gray-200",children:Ot.jsx("div",{className:"pl-11 pt-3",children:Ot.jsx("p",{className:"text-slate-600 leading-relaxed text-sm",children:e.answer})})})]},t)})}),i&&0===w.length&&Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(me,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),Ot.jsx("p",{className:"text-slate-600",children:"Aradığınız soru bulunamadı. Lütfen farklı bir arama terimi deneyin."})]})]}),!1,n&&Ot.jsxs("div",{id:"support-section",className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsxs("div",{className:"relative z-10 text-center mb-8",children:[Ot.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:Ot.jsx(he,{className:"w-8 h-8 text-white"})}),Ot.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Profesyonel Destek Hizmeti"}),Ot.jsx("p",{className:"text-slate-200 max-w-2xl mx-auto text-lg",children:"FAQ bölümünde aradığınızı bulamadınız mı? Uzman destek ekibimizden kişiselleştirilmiş yardım alın."})]}),Ot.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-8",children:[Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(G,{className:"w-6 h-6 text-slate-900"}),"Mevcut Destek Talepleriniz (",o.length,")"]}),h?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-3"}),Ot.jsx("p",{className:"text-slate-600",children:"Destek talepleri yükleniyor..."})]}):0===o.length?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(f,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Henüz destek talebiniz bulunmuyor"}),Ot.jsx("p",{className:"text-slate-600",children:"İlk destek talebinizi oluşturarak başlayabilirsiniz."})]}):Ot.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:o.map(e=>Ot.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsx("h4",{className:"font-medium text-slate-900 text-sm",children:e.subject}),Ot.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["#",e.ticket_number]})]}),Ot.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[Ot.jsx(L,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("tr-TR")]})]},e.id))})]})}),Ot.jsxs("div",{id:"new-ticket-form",className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(ue,{className:"w-5 h-5 text-slate-900"}),"Yeni Destek Talebi Oluştur"]}),Ot.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),g.category&&g.subject&&g.description)try{p(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=new FormData;s.append("category",g.category),s.append("priority",g.priority),s.append("subject",g.subject),s.append("description",g.description),g.relatedShipmentId&&s.append("relatedShipmentId",g.relatedShipmentId);const a=await fetch(Zs("/api/support/tickets"),{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s});if(a.ok)yr(e,"SUPPORT_TICKET_CREATED","success"),b({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),v();else{const t=await a.json().catch(()=>null);yr(e,"OPERATION_FAILED","error",(null==t?void 0:t.message)||"Destek talebi oluşturulurken bir hata oluştu. Lütfen tekrar deneyin.")}}catch(s){yr(e,"NETWORK_ERROR","error")}finally{p(!1)}else yr(e,"REQUIRED_FIELDS","error")},className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Kategori *"}),x.length>0?Ot.jsxs("select",{id:"support-category",value:g.category,onChange:e=>b({...g,category:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",required:!0,children:[Ot.jsx("option",{value:"",children:"Kategori seçin"}),x.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]}):Ot.jsx("input",{id:"support-category-text",type:"text",value:g.category,onChange:e=>b({...g,category:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",placeholder:"Örn: İptal, Hasar, Ödeme, Şikâyet",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Konu *"}),Ot.jsx("input",{type:"text",value:g.subject,onChange:e=>b({...g,subject:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",placeholder:"Destek talebinizin konusu",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Açıklama *"}),Ot.jsx("textarea",{value:g.description,onChange:e=>b({...g,description:e.target.value}),rows:4,className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none bg-white text-slate-900",placeholder:"Sorununuzu detaylı olarak açıklayın",required:!0})]}),Ot.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Gönderiliyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ue,{className:"w-4 h-4"}),"Destek Talebi Oluştur"]})})]})]})]})]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-24 -translate-x-24"}),Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-white"}),Ot.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Hala Yardıma İhtiyacınız mı Var?"}),Ot.jsx("p",{className:"text-slate-200 mb-8 max-w-2xl mx-auto",children:"Sorularınız için bizimle iletişime geçebilirsiniz. Destek ekibimiz size yardımcı olmaktan mutluluk duyar."}),Ot.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:Ot.jsxs("button",{type:"button",onClick:N,className:"bg-white text-slate-900 px-6 py-3 rounded-lg font-semibold hover:bg-slate-100 transition-colors flex items-center gap-2 shadow-lg",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Destek Talebi Oluştur"]})})]})]})]})]})},kr=()=>{const{shipmentId:e}=h(),t=m(),s=o(),a=l.useMemo(()=>{if(e)return e;try{const e=new URLSearchParams(t.search||"");return e.get("shipmentId")||e.get("shipment")||void 0}catch{return}},[e,t.search]),i=l.useMemo(()=>{const e=String(t.pathname||"");return e.startsWith("/corporate")?"/corporate/shipments?complaint=submitted":e.startsWith("/nakliyeci")?"/nakliyeci/active-shipments?complaint=submitted":e.startsWith("/tasiyici")?"/tasiyici/islerim?complaint=submitted":"/individual/my-shipments?complaint=submitted"},[t.pathname]),[r,n]=l.useState({type:"",title:"",description:"",priority:"medium",attachments:[]}),[d,c]=l.useState(!1),[x,u]=l.useState("");l.useEffect(()=>{a&&n(e=>e.type?e:{...e,type:"service"})},[a]);const p=(e,t)=>{n(s=>({...s,[e]:t})),u("")},g=e=>{switch(e){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(e){case"low":return"Düşük";case"medium":default:return"Orta";case"high":return"Yüksek"}};return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Şikayet - YolNext"})}),Ot.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ot.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ot.jsxs("div",{className:"mb-8",children:[Ot.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[Ot.jsx(re,{className:"w-5 h-5 mr-2"}),"Geri Dön"]}),Ot.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Şikayet"}),Ot.jsxs("p",{className:"text-gray-600 mt-2",children:["Sorununuzu detaylı bir şekilde bildirin",a?` (İş #${a})`:""]})]}),Ot.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:Ot.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),u("");try{const e=new FormData;e.append("type",r.type),e.append("title",r.title),e.append("description",r.description),e.append("priority",r.priority),a&&e.append("shipmentId",a),r.attachments.forEach((t,s)=>{e.append(`attachment_${s}`,t)});const t=await fetch(Zs("/api/complaints"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:e});if(!t.ok){const e=await t.json().catch(()=>null);throw new Error((null==e?void 0:e.message)||"Şikayet gönderilemedi")}s(i,{replace:!0})}catch(t){u(t.message)}finally{c(!1)}},className:"space-y-8",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Şikayet Türü *"}),Ot.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{id:"delivery_delay",name:"Teslimat Gecikmesi",icon:"⏰"},{id:"damage",name:"Hasarlı Teslimat",icon:"📦"},{id:"communication",name:"İletişim Sorunu",icon:"💬"},{id:"payment",name:"Ödeme Sorunu",icon:"💳"},{id:"service",name:"Hizmet Kalitesi",icon:"⭐"},{id:"other",name:"Diğer",icon:"❓"}].map(e=>Ot.jsxs("button",{type:"button",onClick:()=>p("type",e.id),className:"p-4 border-2 rounded-xl transition-all "+(r.type===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"),children:[Ot.jsx("div",{className:"text-2xl mb-2",children:e.icon}),Ot.jsx("div",{className:"font-medium text-sm",children:e.name})]},e.id))})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Öncelik Seviyesi"}),Ot.jsx("div",{className:"flex space-x-4",children:["low","medium","high"].map(e=>Ot.jsx("button",{type:"button",onClick:()=>p("priority",e),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r.priority===e?g(e):"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,children:b(e)},e))})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Başlık *"}),Ot.jsx("input",{type:"text",value:r.title,onChange:e=>p("title",e.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Şikayetinizi kısaca özetleyin",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Detaylı Açıklama *"}),Ot.jsx("textarea",{value:r.description,onChange:e=>p("description",e.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:6,placeholder:"Sorununuzu detaylı bir şekilde açıklayın. Ne zaman, nerede, nasıl oldu? Hangi beklentileriniz karşılanmadı?",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Ek Dosyalar (Opsiyonel)"}),Ot.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center",children:[Ot.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:e=>{const t=Array.from(e.target.files||[]);n(e=>({...e,attachments:[...e.attachments,...t]}))},className:"hidden",id:"file-upload"}),Ot.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center",children:[Ot.jsx(Ze,{className:"w-12 h-12 text-gray-400 mb-4"}),Ot.jsx("span",{className:"text-gray-600 font-medium",children:"Dosya Yükle"}),Ot.jsx("span",{className:"text-gray-500 text-sm",children:"Resim, PDF, Word dosyası"})]})]}),r.attachments.length>0&&Ot.jsx("div",{className:"mt-4 space-y-2",children:r.attachments.map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(W,{className:"w-5 h-5 text-gray-500 mr-2"}),Ot.jsx("span",{className:"text-gray-700",children:e.name}),Ot.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:["(",(e.size/1024/1024).toFixed(2)," MB)"]})]}),Ot.jsx("button",{type:"button",onClick:()=>(e=>{n(t=>({...t,attachments:t.attachments.filter((t,s)=>s!==e)}))})(t),className:"text-red-500 hover:text-red-700",children:Ot.jsx(ie,{className:"w-5 h-5"})})]},t))})]}),Ot.jsxs("div",{className:"flex space-x-4",children:[Ot.jsx("button",{type:"button",onClick:()=>s(-1),className:"flex-1 py-3 px-6 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"İptal"}),Ot.jsx("button",{type:"submit",disabled:d||!r.type||!r.title||!r.description,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-xl font-semibold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:d?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Gönderiliyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ne,{className:"w-5 h-5"}),"Şikayeti Gönder"]})})]}),x&&Ot.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(ie,{className:"w-5 h-5 text-red-500 mr-2"}),Ot.jsx("span",{className:"text-red-700",children:x})]})})]})}),Ot.jsxs("div",{className:"mt-8 bg-blue-50 rounded-xl p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Şikayet Süreci"}),Ot.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(J,{className:"w-4 h-4 text-blue-600 mr-2"}),Ot.jsx("span",{children:"Şikayetiniz 24 saat içinde incelenir"})]}),Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(J,{className:"w-4 h-4 text-blue-600 mr-2"}),Ot.jsx("span",{children:"Gerekirse ek bilgi istenebilir"})]}),Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(J,{className:"w-4 h-4 text-blue-600 mr-2"}),Ot.jsx("span",{children:"Çözüm süreci hakkında bilgilendirilirsiniz"})]}),Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(J,{className:"w-4 h-4 text-blue-600 mr-2"}),Ot.jsx("span",{children:"Gizlilik ve güvenlik önceliğimizdir"})]})]})]})]})})]})};function wr({formData:e,handleInputChange:t,errors:s,setErrors:a}){var l,i;const r=(new Date).toISOString().split("T")[0];return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Adres & İletişim Bilgileri"}),Ot.jsx("p",{className:"text-slate-600",children:"Toplama ve teslimat bilgilerini girin"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Toplama Adresi"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Gönderiyi nereden alacağız?"})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İl *"]}),Ot.jsxs("select",{value:e.pickupCity,onChange:e=>{t("pickupCity",e.target.value),t("pickupDistrict",""),s.pickupCity&&a(e=>({...e,pickupCity:""}))},className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(s.pickupCity?"border-red-500":"border-slate-200"),children:[Ot.jsx("option",{value:"",children:"İl seçiniz"}),Gi.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]}),s.pickupCity&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.pickupCity})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İlçe *"]}),Ot.jsxs("select",{value:e.pickupDistrict,onChange:e=>{t("pickupDistrict",e.target.value),s.pickupDistrict&&a(e=>({...e,pickupDistrict:""}))},disabled:!e.pickupCity,className:`w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 ${e.pickupCity?"":"bg-gray-100 cursor-not-allowed"} ${s.pickupDistrict?"border-red-500":"border-slate-200"}`,children:[Ot.jsx("option",{value:"",children:"İlçe seçiniz"}),e.pickupCity&&(null==(l=Gi.find(t=>t.name===e.pickupCity))?void 0:l.districts.map(e=>Ot.jsx("option",{value:e,children:e},e)))]}),s.pickupDistrict&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.pickupDistrict})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Adres *"]}),Ot.jsx("textarea",{value:e.pickupAddress,onChange:e=>{t("pickupAddress",e.target.value),s.pickupAddress&&a(e=>({...e,pickupAddress:""}))},rows:4,className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none "+(s.pickupAddress?"border-red-500":"border-slate-200"),placeholder:"Mahalle, sokak, bina no, daire no vb. detaylı adres bilgilerini girin..."}),s.pickupAddress&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.pickupAddress})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx($e,{className:"w-4 h-4 inline mr-2"}),"Toplama Tarihi *"]}),Ot.jsx("input",{type:"date",value:e.pickupDate,onChange:e=>{t("pickupDate",e.target.value),s.pickupDate&&a(e=>({...e,pickupDate:""}))},min:r,max:new Date(Date.now()+1728e6).toISOString().split("T")[0],className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(s.pickupDate?"border-red-500":"border-slate-200")}),s.pickupDate&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.pickupDate})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Teslimat Adresi"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Gönderiyi nereye teslim edeceğiz?"})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İl *"]}),Ot.jsxs("select",{value:e.deliveryCity,onChange:e=>{t("deliveryCity",e.target.value),t("deliveryDistrict",""),s.deliveryCity&&a(e=>({...e,deliveryCity:""}))},className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-emerald-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(s.deliveryCity?"border-red-500":"border-slate-200"),children:[Ot.jsx("option",{value:"",children:"İl seçiniz"}),Gi.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]}),s.deliveryCity&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryCity})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"İlçe *"]}),Ot.jsxs("select",{value:e.deliveryDistrict,onChange:e=>{t("deliveryDistrict",e.target.value),s.deliveryDistrict&&a(e=>({...e,deliveryDistrict:""}))},disabled:!e.deliveryCity,className:`w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-emerald-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 ${e.deliveryCity?"":"bg-gray-100 cursor-not-allowed"} ${s.deliveryDistrict?"border-red-500":"border-slate-200"}`,children:[Ot.jsx("option",{value:"",children:"İlçe seçiniz"}),e.deliveryCity&&(null==(i=Gi.find(t=>t.name===e.deliveryCity))?void 0:i.districts.map(e=>Ot.jsx("option",{value:e,children:e},e)))]}),s.deliveryDistrict&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryDistrict})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(T,{className:"w-4 h-4 inline mr-2"}),"Adres *"]}),Ot.jsx("textarea",{value:e.deliveryAddress,onChange:e=>{t("deliveryAddress",e.target.value),s.deliveryAddress&&a(e=>({...e,deliveryAddress:""}))},rows:4,className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none "+(s.deliveryAddress?"border-red-500":"border-slate-200"),placeholder:"Mahalle, sokak, bina no, daire no vb. detaylı adres bilgilerini girin..."}),s.deliveryAddress&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryAddress})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx($e,{className:"w-4 h-4 inline mr-2"}),"Teslimat Tarihi *"]}),Ot.jsx("input",{type:"date",value:e.deliveryDate,onChange:e=>{t("deliveryDate",e.target.value),s.deliveryDate&&a(e=>({...e,deliveryDate:""}))},min:e.pickupDate||r,className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 "+(s.deliveryDate?"border-red-500":"border-slate-200")}),s.deliveryDate&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryDate})]})]})]})]})]})}function Sr({formData:e,errors:t,errorMessage:s,handleInputChange:a,getCurrentCategory:l,nakliyeciler:i,loadingNakliyeciler:r}){var n,d,o,c;const m=Boolean(null==e?void 0:e.disclaimerAccepted);return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Gönderi Özeti"}),Ot.jsx("p",{className:"text-slate-600",children:"Bilgilerinizi kontrol edin ve gönderiyi yayınlayın"})]}),Ot.jsx("div",{className:"bg-slate-50 rounded-xl p-6 space-y-6",children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Yük Bilgileri"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Kategori:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:null==(n=l())?void 0:n.name})]}),e.weight&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Ağırlık:"}),Ot.jsxs("span",{className:"font-medium text-slate-900",children:[e.weight," kg"]})]}),e.quantity&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Miktar:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.quantity})]}),e.dimensions.length&&e.dimensions.width&&e.dimensions.height&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Boyut:"}),Ot.jsxs("span",{className:"font-medium text-slate-900",children:[e.dimensions.length," x ",e.dimensions.width," x ",e.dimensions.height," cm"]})]}),e.specialRequirements&&Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Özel Gereksinimler:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.specialRequirements})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Adres Bilgileri"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{children:[Ot.jsx("span",{className:"text-slate-600",children:"Toplama:"}),Ot.jsx("p",{className:"font-medium text-slate-900 text-sm",children:e.pickupAddress})]}),Ot.jsxs("div",{children:[Ot.jsx("span",{className:"text-slate-600",children:"Teslimat:"}),Ot.jsx("p",{className:"font-medium text-slate-900 text-sm",children:e.deliveryAddress})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Toplama Tarihi:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.pickupDate})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-600",children:"Teslimat Tarihi:"}),Ot.jsx("span",{className:"font-medium text-slate-900",children:e.deliveryDate})]})]})]})]})}),(t.publish||s)&&Ot.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl p-4 mb-4",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(f,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-bold text-red-800 mb-1",children:"Hata!"}),Ot.jsx("p",{className:"text-sm text-red-700",children:t.publish||s}),(null==(d=t.publish||s)?void 0:d.includes("bağlanılamıyor"))||(null==(o=t.publish||s)?void 0:o.includes("connection"))||(null==(c=t.publish||s)?void 0:c.includes("Failed to fetch"))?Ot.jsx("p",{className:"text-xs text-red-600 mt-2",children:"İnternet bağlantınızı kontrol edin. Sorun devam ederse destek ekibimizle iletişime geçebilirsiniz."}):null]})]})}),Ot.jsx("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-xl p-6 space-y-3",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(f,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-amber-900 mb-3",children:"Önemli Bilgilendirme - Sorumluluk Reddi"}),Ot.jsxs("div",{className:"space-y-3 text-sm text-amber-800",children:[Ot.jsx("p",{className:"font-semibold",children:"YolNext bir pazaryeri platformudur. Hiçbir sorumluluk almaz."}),Ot.jsx("p",{children:"YolNext, göndericiler ve nakliyeciler arasında bağlantı kuran bir aracı platformdur. Taşımacılık hizmetlerini bizzat sağlamaz ve sigorta hizmeti vermez."}),Ot.jsx("p",{className:"font-medium",children:"Tüm riskler gönderici ve nakliyeci arasındadır. Kaza, yangın, çalınma gibi durumlarda taraflar arasında çözülmelidir. Platform sadece tarafları buluşturan bir aracıdır."}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Sigorta:"})," İhtiyaç duyuyorsanız, kendi sigortanızı yaptırmak TAMAMEN sizin sorumluluğunuzdadır. YolNext hiçbir sigorta hizmeti vermez."]}),Ot.jsx("p",{children:Ot.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-amber-900 underline font-medium hover:text-amber-700",children:"Detaylı bilgi için Kullanım Koşulları'nı inceleyebilirsiniz"})}),Ot.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[Ot.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[Ot.jsx("input",{type:"checkbox",checked:m,onChange:e=>a("disclaimerAccepted",e.target.checked),className:"mt-0.5 w-5 h-5 text-amber-700 border-amber-400 rounded focus:ring-amber-500"}),Ot.jsx("span",{className:"text-sm font-semibold text-amber-900",children:"Okudum, anladım ve kabul ediyorum."})]}),(null==t?void 0:t.disclaimerAccepted)&&Ot.jsx("p",{className:"mt-2 text-sm text-red-700",children:t.disclaimerAccepted})]})]})]})]})}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Yayınlama Tercihi"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("input",{type:"radio",id:"all",name:"publishType",value:"all",checked:"all"===e.publishType,onChange:e=>{a("publishType",e.target.value),a("targetNakliyeciId","")},className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"all",className:"ml-3 text-sm font-medium text-slate-700",children:"Tüm nakliyecilere açık (Önerilen)"})]}),Ot.jsxs("div",{className:"flex items-start",children:[Ot.jsx("input",{type:"radio",id:"specific",name:"publishType",value:"specific",checked:"specific"===e.publishType,onChange:e=>a("publishType",e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 mt-1"}),Ot.jsxs("div",{className:"ml-3 flex-1",children:[Ot.jsx("label",{htmlFor:"specific",className:"text-sm font-medium text-slate-700 block mb-2",children:"Belirli nakliyeciye özel (Favori nakliyecilerinizden seçin)"}),"specific"===e.publishType&&Ot.jsx(Ot.Fragment,{children:r?Ot.jsx("div",{className:"text-sm text-slate-500 py-2",children:"Favori nakliyeciler yükleniyor..."}):0===i.length?Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("div",{className:"text-sm text-amber-600 py-2",children:"Henüz favori nakliyeciniz yok. Önce favori nakliyecilerinize ekleyin."}),Ot.jsx("a",{href:"/corporate/carriers",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Nakliyeciler sayfasına git →"})]}):Ot.jsxs("select",{value:e.targetNakliyeciId,onChange:e=>a("targetNakliyeciId",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",required:"specific"===e.publishType,children:[Ot.jsx("option",{value:"",children:"Favori nakliyeci seçin..."}),i.map(e=>Ot.jsxs("option",{value:e.id,children:[e.companyName||e.name||e.fullName," - ",e.email]},e.id))]})})]})]})]})]})]})}const zr=async e=>{const t=Zs("/api/shipments"),s=localStorage.getItem("authToken")||localStorage.getItem("token")||"",a=String(s||"").replace(/^Bearer\s+/i,"").trim(),l=await fetch(t,{method:"POST",headers:{Authorization:a&&"null"!==a&&"undefined"!==a?`Bearer ${a}`:"","Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){const e=await l.text();let t=null;try{t=JSON.parse(e)}catch{t=null}const s=t&&(t.details||t.detail||t.error||t.message)||(e&&e.trim()?e.trim().slice(0,500):null)||`HTTP error! status: ${l.status}`;throw new Error(s)}const i=l.headers.get("content-type");if(!i||!i.includes("application/json")){const e=await l.text();throw new Error(`Expected JSON but got ${i}. Response: ${e.substring(0,100)}`)}return l.json()},Tr=async()=>{const e=Zs("/api/carriers/corporate"),t=localStorage.getItem("authToken")||localStorage.getItem("token")||"",s=String(t||"").replace(/^Bearer\s+/i,"").trim(),a=await fetch(e,{headers:{Authorization:s&&"null"!==s&&"undefined"!==s?`Bearer ${s}`:""}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const l=a.headers.get("content-type");if(!l||!l.includes("application/json")){const e=await a.text();throw new Error(`Expected JSON but got ${l}. Response: ${e.substring(0,100)}`)}return a.json()};function Cr(){const e=o(),[t]=c(),s=t.get("nakliyeciId"),[a,i]=l.useState(1),[r,d]=l.useState(!1),[m,x]=l.useState(!1),[u,h]=l.useState(""),[p,g]=l.useState(""),[b,y]=l.useState({}),[j,v]=l.useState([]),[N,k]=l.useState(!1),[w,S]=l.useState({mainCategory:"",productDescription:"",unitType:"",weight:"",quantity:"",dimensions:{length:"",width:"",height:""},specialRequirements:"",pickupAddress:"",pickupDistrict:"",pickupCity:"",deliveryAddress:"",deliveryDistrict:"",deliveryCity:"",pickupDate:"",deliveryDate:"",publishType:s?"specific":"all",targetNakliyeciId:s||"",disclaimerAccepted:!1,materialType:"",packagingType:"",isPalletized:!1,palletCount:"",requiresColdChain:!1,temperatureSetpoint:"",expiryDate:"",hasCertification:!1,hazardClass:"",unNumber:"",hasMSDS:!1,requiresSpecialPermit:!1,coldChainRequired:!1,loadingEquipment:"",requiresSpecialVehicle:!1,isFragile:!1,warehouseType:"",isBulkTransfer:!1,bulkType:"",requiresCover:!1,isOriginalPackaging:!1,requiresAntiStatic:!1,materialQuantity:"",requiresWeatherProtection:!1,equipmentType:"",requiresAssembly:!1,requiresPharmaLicense:!1,temperatureControlled:!1,vehicleType:"",trailerType:"",requiresCrane:!1,requiresForklift:!1,requiresHydraulicLifter:!1,heavyTonage:!1,heavyTonageAmount:"",oversizedLoad:!1,oversizedDimensions:{length:"",width:"",height:""},temperatureControl:!1,temperatureMin:"",temperatureMax:""}),z=[{id:1,title:"Form Doldurma",subtitle:"Yük Bilgileri",icon:Ot.jsx(R,{size:20})},{id:2,title:"Adres ve Tarih",subtitle:"Adres Bilgileri",icon:Ot.jsx(T,{size:20})},{id:3,title:"Ön İzleme ve Yayınlama",subtitle:"Yayınla & Önizleme",icon:Ot.jsx(ne,{size:20})}],C=[{id:"raw_materials",name:"Ham Madde & Endüstriyel Mal",icon:Xe,description:"Üretim için ham madde, endüstriyel malzemeler",requiredFields:["unitType","weight","quantity"],optionalFields:[],specialRequirements:["fragile","urgent","signature"]},{id:"retail_consumer",name:"Perakende & Tüketim Malı",icon:X,description:"Mağaza, perakende satış ürünleri",requiredFields:["unitType","weight","quantity"],optionalFields:["dimensions"],specialRequirements:["fragile","valuable","signature"]},{id:"electronics_tech",name:"Elektronik & Teknoloji",icon:Qe,description:"Elektronik cihazlar, teknoloji ürünleri",requiredFields:["unitType","weight","quantity"],optionalFields:["dimensions","isOriginalPackaging","requiresAntiStatic"],specialRequirements:["fragile","valuable"]},{id:"textile_apparel",name:"Tekstil & Giyim",icon:et,description:"Tekstil ürünleri, giyim eşyaları",requiredFields:["unitType","weight","quantity"],optionalFields:[],specialRequirements:["signature"]},{id:"food_beverage",name:"Gıda & İçecek",icon:tt,description:"Gıda ürünleri, içecekler, restoran malzemeleri",requiredFields:["unitType","weight","quantity"],optionalFields:["requiresColdChain","temperatureSetpoint","expiryDate","hasCertification"],specialRequirements:["temperature","urgent","signature"]},{id:"furniture_home",name:"Mobilya & Ev Eşyası",icon:st,description:"Mobilya, ev eşyaları, dekorasyon",requiredFields:["unitType","weight","quantity"],optionalFields:["dimensions","requiresAssembly"],specialRequirements:["fragile","requiresSpecialVehicle"]},{id:"construction_materials",name:"İnşaat Malzemeleri",icon:at,description:"İnşaat malzemeleri, yapı malzemeleri",requiredFields:["unitType","weight","quantity"],optionalFields:["materialQuantity","requiresWeatherProtection","requiresSpecialVehicle"],specialRequirements:["requiresCrane","urgent"]},{id:"automotive_parts",name:"Otomotiv Parçaları",icon:lt,description:"Araç parçaları, yedek parça, aksesuar",requiredFields:["unitType","weight","quantity"],optionalFields:[],specialRequirements:["fragile","valuable"]},{id:"medical_pharma",name:"Medikal & İlaç",icon:it,description:"Tıbbi malzemeler, ilaçlar, sağlık ürünleri",requiredFields:["unitType","weight","quantity"],optionalFields:["temperatureControlled","temperatureSetpoint","requiresPharmaLicense"],specialRequirements:["temperature","urgent"]},{id:"chemical_hazardous",name:"Kimyasal & Tehlikeli Madde",icon:rt,description:"Kimyasal maddeler, tehlikeli yükler",requiredFields:["unitType","weight","quantity","hazardClass","unNumber","hasMSDS"],optionalFields:["requiresSpecialPermit"],specialRequirements:["urgent"]},{id:"documents_mail",name:"Doküman & Önemli Kargo",icon:Be,description:"Önemli evraklar, belgeler, resmi kargo",requiredFields:["unitType","weight","quantity"],optionalFields:[],specialRequirements:["urgent","signature"]},{id:"warehouse_transfer",name:"Depo Transferi",icon:nt,description:"Depo arası transfer, stok taşıma",requiredFields:["unitType","weight","quantity"],optionalFields:["warehouseType"],specialRequirements:["urgent"]},{id:"bulk_cargo",name:"Dökme Yük",icon:dt,description:"Büyük miktarda dökme yük, toplu taşıma",requiredFields:["unitType","weight","quantity"],optionalFields:["bulkType","requiresCover"],specialRequirements:[]},{id:"refrigerated",name:"Soğutmalı Yük",icon:ot,description:"Soğuk zincir gerektiren ürünler",requiredFields:["unitType","weight","quantity","temperatureSetpoint"],optionalFields:[],specialRequirements:["temperature","urgent"]},{id:"oversized",name:"Büyük Boy Yük",icon:ct,description:"Büyük ebatlı yükler, makineler",requiredFields:["unitType","weight","dimensions","loadingEquipment"],optionalFields:["requiresSpecialVehicle","isFragile"],specialRequirements:["requiresCrane","requiresSpecialVehicle"]},{id:"office_equipment",name:"Ofis Ekipmanı",icon:mt,description:"Ofis mobilyası, ekipman, bilgisayar",requiredFields:["unitType","weight","quantity"],optionalFields:["dimensions","equipmentType","requiresAssembly"],specialRequirements:["fragile","valuable"]},{id:"machinery_equipment",name:"Makine & Ekipman",icon:oe,description:"Endüstriyel makineler, ağır ekipman",requiredFields:["unitType","weight","dimensions","loadingEquipment"],optionalFields:["requiresSpecialVehicle","isFragile"],specialRequirements:["requiresCrane","requiresSpecialVehicle"]},{id:"display_exhibition",name:"Vitrin & Sergi Malzemesi",icon:O,description:"Fuarlar, sergiler, vitrin malzemeleri",requiredFields:["unitType","weight","quantity"],optionalFields:["dimensions","requiresAssembly"],specialRequirements:["fragile","valuable"]},{id:"other",name:"Diğer",icon:R,description:"Diğer kurumsal yükler",requiredFields:["unitType","weight","quantity"],optionalFields:["dimensions"],specialRequirements:[]}],A=()=>C.find(e=>e.id===w.mainCategory),D=e=>{const t=[{value:"koli",label:"Koli"},{value:"palet",label:"Palet"},{value:"adet",label:"Adet"},{value:"varil",label:"Varil"},{value:"bigbag",label:"Bigbag"},{value:"dokme",label:"Dökme"},{value:"askili",label:"Askılı"}],s=e?{documents_mail:["adet"],bulk_cargo:["dokme","bigbag"],raw_materials:["palet","koli","adet","varil","bigbag","dokme"],chemical_hazardous:["varil","palet","koli","bigbag"],refrigerated:["palet","koli","adet"],food_beverage:["palet","koli","adet"],textile_apparel:["koli","askili","palet"],oversized:["palet","adet"],machinery_equipment:["palet","adet"],warehouse_transfer:["palet","koli"]}[e]:void 0;return s?t.filter(e=>s.includes(e.value)):t};l.useEffect(()=>{(async()=>{if("specific"===w.publishType){k(!0);try{const e=await Tr();if(e.success&&e.data){const t=e.data.carriers||e.data||[];v(t)}else v([])}catch(e){v([])}finally{k(!1)}}})()},[w.publishType]);const _=(e,t)=>{S(s=>({...s,[e]:t})),b[e]&&y(t=>({...t,[e]:""}))},I=e=>{const t=String(e||"").trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(t))return null;const[s,a,l]=t.split("-"),i=parseInt(s,10),r=parseInt(a,10),n=parseInt(l,10);if(!Number.isFinite(i)||!Number.isFinite(r)||!Number.isFinite(n))return null;const d=new Date(i,r-1,n);return Number.isFinite(d.getTime())?d.getFullYear()!==i||d.getMonth()!==r-1||d.getDate()!==n?null:(d.setHours(0,0,0,0),d):null},M=(e,t)=>{const s=t.trim();S(t=>({...t,dimensions:{...t.dimensions,[e]:s}})),b.dimensions&&y(e=>({...e,dimensions:""}))},$=e=>{const t={},s=A();if(1===e)w.mainCategory||(t.mainCategory="Kategori seçin (fiyatlandırma için gerekli)"),w.productDescription&&""!==w.productDescription.trim()||(t.productDescription="Yükü açıklayın (nakliyeciler anlayacak)"),w.unitType||(t.unitType="Birim tipi seçin"),s&&(s.requiredFields.forEach(e=>{"weight"===e&&(w.weight&&""!==w.weight.trim()||(t.weight="Ağırlık girin (yaklaşık)")),"quantity"===e&&(w.quantity&&""!==w.quantity.trim()||(t.quantity="Miktar girin")),"unitType"===e&&(w.unitType||(t.unitType="Birim tipi seçin")),"dimensions"===e&&(w.dimensions.length&&w.dimensions.width&&w.dimensions.height||(t.dimensions="Boyutları girin (en-boy-yükseklik)")),"hazardClass"!==e||w.hazardClass||(t.hazardClass="Tehlike sınıfı seçin"),"unNumber"!==e||w.unNumber||(t.unNumber="UN numarasını girin"),"hasMSDS"!==e||w.hasMSDS||(t.hasMSDS="MSDS bilgisi belirtin"),"temperatureSetpoint"===e&&(w.temperatureSetpoint&&""!==String(w.temperatureSetpoint).trim()||(t.temperatureSetpoint="Sıcaklık setpoint’i girin")),"loadingEquipment"!==e||w.loadingEquipment||(t.loadingEquipment="Yükleme ekipmanı seçin")}),"food_beverage"===s.id&&w.requiresColdChain&&(w.temperatureSetpoint&&""!==String(w.temperatureSetpoint).trim()||(t.temperatureSetpoint="Soğuk zincir için sıcaklık setpoint gerekli")));else if(2===e){if(w.pickupCity||(t.pickupCity="Toplama ili seçin"),w.pickupDistrict||(t.pickupDistrict="Toplama ilçesi seçin"),w.pickupAddress&&""!==w.pickupAddress.trim()||(t.pickupAddress="Toplama adresini girin"),w.deliveryCity||(t.deliveryCity="Teslimat ili zorunludur"),w.deliveryDistrict||(t.deliveryDistrict="Teslimat ilçesi zorunludur"),w.deliveryAddress&&""!==w.deliveryAddress.trim()||(t.deliveryAddress="Teslimat adresi zorunludur"),w.pickupDate){const e=I(w.pickupDate),s=new Date;s.setHours(0,0,0,0),e||(t.pickupDate="Geçersiz toplama tarihi. Lütfen geçerli bir tarih seçin."),e&&e<s&&(t.pickupDate="Toplama tarihi geçmiş bir tarih olamaz. Lütfen bugün veya ileri bir tarih seçin.");const a=new Date;a.setDate(s.getDate()+20),e&&e>a&&(t.pickupDate="Toplama tarihi bugünden en fazla 20 gün sonrası için olabilir. Lütfen daha yakın bir tarih seçin.")}else t.pickupDate="Toplama tarihi zorunludur";if(w.deliveryDate){const e=I(w.deliveryDate),s=new Date;if(s.setHours(0,0,0,0),e||(t.deliveryDate="Geçersiz teslimat tarihi. Lütfen geçerli bir tarih seçin."),e&&e<s&&(t.deliveryDate="Teslimat tarihi geçmiş bir tarih olamaz. Lütfen bugün veya ileri bir tarih seçin."),w.pickupDate){const s=I(w.pickupDate);s&&e&&e<s&&(t.deliveryDate="Teslimat tarihi toplama tarihinden önce olamaz.")}}else t.deliveryDate="Teslimat tarihi zorunludur"}return y(t),0===Object.keys(t).length},B=()=>{const e=A();if(!e)return null;const t=[];return"food_beverage"===e.id&&(t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresColdChain",checked:w.requiresColdChain,onChange:e=>_("requiresColdChain",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresColdChain",className:"text-sm font-medium text-slate-700",children:"Soğuk Zincir Gerekli"})]},"requiresColdChain")),w.requiresColdChain&&t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(Me,{className:"w-4 h-4 inline mr-2"}),"Sıcaklık Setpoint (℃) *"]}),Ot.jsx("input",{type:"text",value:w.temperatureSetpoint,onChange:e=>_("temperatureSetpoint",e.target.value),className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.temperatureSetpoint?"border-red-500":"border-slate-200"),placeholder:"Örn: 2-8 veya -18"}),b.temperatureSetpoint&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.temperatureSetpoint})]},"temperatureSetpoint")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"hasCertification",checked:w.hasCertification,onChange:e=>_("hasCertification",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"hasCertification",className:"text-sm font-medium text-slate-700",children:"Sertifikalı Ürün (Helal, Organik vb.)"})]},"hasCertification"))),"chemical_hazardous"===e.id&&(t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"UN Numarası *"}),Ot.jsx("input",{type:"text",value:w.unNumber,onChange:e=>_("unNumber",e.target.value),className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.unNumber?"border-red-500":"border-slate-200"),placeholder:"Örn: UN 1203"}),b.unNumber&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.unNumber})]},"unNumber")),t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(rt,{className:"w-4 h-4 inline mr-2"}),"Tehlike Sınıfı *"]}),Ot.jsxs("select",{value:w.hazardClass,onChange:e=>_("hazardClass",e.target.value),className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.hazardClass?"border-red-500":"border-slate-200"),children:[Ot.jsx("option",{value:"",children:"Tehlike sınıfı seçiniz"}),Ot.jsx("option",{value:"class1",children:"Sınıf 1 - Patlayıcılar"}),Ot.jsx("option",{value:"class2",children:"Sınıf 2 - Gazlar"}),Ot.jsx("option",{value:"class3",children:"Sınıf 3 - Alevlenir Sıvılar"}),Ot.jsx("option",{value:"class4",children:"Sınıf 4 - Alevlenir Katılar"}),Ot.jsx("option",{value:"class5",children:"Sınıf 5 - Oksitleyici"}),Ot.jsx("option",{value:"class6",children:"Sınıf 6 - Zehirli"}),Ot.jsx("option",{value:"class7",children:"Sınıf 7 - Radyoaktif"}),Ot.jsx("option",{value:"class8",children:"Sınıf 8 - Aşındırıcı"}),Ot.jsx("option",{value:"class9",children:"Sınıf 9 - Diğer Tehlikeli"})]}),b.hazardClass&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.hazardClass})]},"hazardClass")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"hasMSDS",checked:w.hasMSDS,onChange:e=>_("hasMSDS",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"hasMSDS",className:"text-sm font-medium text-slate-700",children:"MSDS (Güvenlik Bilgi Formu) Mevcut"}),b.hasMSDS&&Ot.jsx("p",{className:"text-sm text-red-600",children:b.hasMSDS})]},"hasMSDS")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresSpecialPermit",checked:w.requiresSpecialPermit,onChange:e=>_("requiresSpecialPermit",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresSpecialPermit",className:"text-sm font-medium text-slate-700",children:"Özel İzin Gerekli"})]},"requiresSpecialPermit"))),"refrigerated"===e.id&&t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(ot,{className:"w-4 h-4 inline mr-2"}),"Sıcaklık Setpoint (℃) *"]}),Ot.jsx("input",{type:"text",value:w.temperatureSetpoint,onChange:e=>_("temperatureSetpoint",e.target.value),className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.temperatureSetpoint?"border-red-500":"border-slate-200"),placeholder:"Örn: -18, 2-8"}),b.temperatureSetpoint&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.temperatureSetpoint})]},"temperatureSetpoint")),"oversized"!==e.id&&"machinery_equipment"!==e.id||(t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Yükleme Ekipmanı *"}),Ot.jsxs("select",{value:w.loadingEquipment,onChange:e=>_("loadingEquipment",e.target.value),className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.loadingEquipment?"border-red-500":"border-slate-200"),children:[Ot.jsx("option",{value:"",children:"Seçiniz"}),Ot.jsx("option",{value:"manual",children:"Manuel"}),Ot.jsx("option",{value:"forklift",children:"Forklift"}),Ot.jsx("option",{value:"crane",children:"Vinç"})]}),b.loadingEquipment&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.loadingEquipment})]},"loadingEquipment")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresSpecialVehicle",checked:w.requiresSpecialVehicle,onChange:e=>_("requiresSpecialVehicle",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresSpecialVehicle",className:"text-sm font-medium text-slate-700",children:"Özel Araç Gerekli (Düşük Tavanlı, Özel Platform vb.)"})]},"requiresSpecialVehicle"))),"electronics_tech"===e.id&&(t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"isOriginalPackaging",checked:w.isOriginalPackaging,onChange:e=>_("isOriginalPackaging",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"isOriginalPackaging",className:"text-sm font-medium text-slate-700",children:"Orijinal Ambalajında (opsiyonel)"})]},"isOriginalPackaging")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresAntiStatic",checked:w.requiresAntiStatic,onChange:e=>_("requiresAntiStatic",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresAntiStatic",className:"text-sm font-medium text-slate-700",children:"Anti-Statik Paketleme Gerekli"})]},"requiresAntiStatic"))),"warehouse_transfer"===e.id&&(t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(nt,{className:"w-4 h-4 inline mr-2"}),"Depo Tipi *"]}),Ot.jsxs("select",{value:w.warehouseType,onChange:e=>_("warehouseType",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",children:[Ot.jsx("option",{value:"",children:"Depo tipi seçiniz"}),Ot.jsx("option",{value:"standard",children:"Standart Depo"}),Ot.jsx("option",{value:"cold_storage",children:"Soğuk Hava Deposu"}),Ot.jsx("option",{value:"hazardous",children:"Tehlikeli Madde Deposu"}),Ot.jsx("option",{value:"bonded",children:"Gümrük Deposu"})]})]},"warehouseType")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"isBulkTransfer",checked:w.isBulkTransfer,onChange:e=>_("isBulkTransfer",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"isBulkTransfer",className:"text-sm font-medium text-slate-700",children:"Toplu Transfer *"})]},"isBulkTransfer"))),"bulk_cargo"===e.id&&(t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(dt,{className:"w-4 h-4 inline mr-2"}),"Dökme Yük Tipi *"]}),Ot.jsxs("select",{value:w.bulkType,onChange:e=>_("bulkType",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",children:[Ot.jsx("option",{value:"",children:"Dökme yük tipi seçiniz"}),Ot.jsx("option",{value:"grain",children:"Tahıl"}),Ot.jsx("option",{value:"mineral",children:"Mineral"}),Ot.jsx("option",{value:"chemical",children:"Kimyasal"}),Ot.jsx("option",{value:"construction",children:"İnşaat Malzemesi"}),Ot.jsx("option",{value:"other",children:"Diğer"})]})]},"bulkType")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresCover",checked:w.requiresCover,onChange:e=>_("requiresCover",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresCover",className:"text-sm font-medium text-slate-700",children:"Örtü/Konteyner Gerekli"})]},"requiresCover"))),"medical_pharma"===e.id&&(t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresPharmaLicense",checked:w.requiresPharmaLicense,onChange:e=>_("requiresPharmaLicense",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresPharmaLicense",className:"text-sm font-medium text-slate-700",children:"İlaç Lisansı Gerekli (Nakliyeci için) *"})]},"requiresPharmaLicense")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"temperatureControlled",checked:w.temperatureControlled,onChange:e=>_("temperatureControlled",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"temperatureControlled",className:"text-sm font-medium text-slate-700",children:"Sıcaklık Kontrollü Taşıma Gerekli *"})]},"temperatureControlled"))),"construction_materials"===e.id&&(t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(at,{className:"w-4 h-4 inline mr-2"}),"Malzeme Miktarı *"]}),Ot.jsx("input",{type:"text",value:w.materialQuantity,onChange:e=>_("materialQuantity",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",placeholder:"Örn: 10 ton çimento, 50 m² fayans"})]},"materialQuantity")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresWeatherProtection",checked:w.requiresWeatherProtection,onChange:e=>_("requiresWeatherProtection",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresWeatherProtection",className:"text-sm font-medium text-slate-700",children:"Hava Koşullarından Koruma Gerekli"})]},"requiresWeatherProtection"))),"office_equipment"===e.id&&(t.push(Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx(mt,{className:"w-4 h-4 inline mr-2"}),"Ekipman Tipi *"]}),Ot.jsxs("select",{value:w.equipmentType,onChange:e=>_("equipmentType",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",children:[Ot.jsx("option",{value:"",children:"Ekipman tipi seçiniz"}),Ot.jsx("option",{value:"furniture",children:"Mobilya"}),Ot.jsx("option",{value:"computer",children:"Bilgisayar"}),Ot.jsx("option",{value:"printer",children:"Yazıcı"}),Ot.jsx("option",{value:"server",children:"Sunucu"}),Ot.jsx("option",{value:"other",children:"Diğer"})]})]},"equipmentType")),t.push(Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresAssembly",checked:w.requiresAssembly,onChange:e=>_("requiresAssembly",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresAssembly",className:"text-sm font-medium text-slate-700",children:"Montaj Gerekli"})]},"requiresAssembly"))),t.length>0?Ot.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[Ot.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Kategoriye Özel Bilgiler"}),t]}):null},P=()=>{const e=A();if(!e)return null;return["raw_materials","retail_consumer","electronics_tech","textile_apparel","food_beverage","furniture_home","construction_materials","automotive_parts","medical_pharma","chemical_hazardous","documents_mail","warehouse_transfer","bulk_cargo","refrigerated","oversized","office_equipment","machinery_equipment","display_exhibition","other"].includes(e.id)?Ot.jsxs("div",{className:"space-y-6 mt-6 p-6 bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl border-2 border-slate-200",children:[Ot.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[Ot.jsx(E,{className:"w-5 h-5 text-blue-600"}),"Araç ve Ekipman Gereksinimleri"]}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Yükünüz için gerekli araç tipi ve ekipmanları belirtin. Bu bilgiler nakliyecilerin doğru teklif vermesini sağlar."}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Araç Tipi"}),Ot.jsxs("select",{value:w.vehicleType,onChange:e=>_("vehicleType",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",children:[Ot.jsx("option",{value:"",children:"Araç tipi seçiniz (opsiyonel)"}),Ot.jsx("option",{value:"van",children:"Van"}),Ot.jsx("option",{value:"kamyonet",children:"Kamyonet"}),Ot.jsx("option",{value:"kamyon",children:"Kamyon"}),Ot.jsx("option",{value:"refrigerated",children:"Soğutmalı Araç"}),Ot.jsx("option",{value:"open_truck",children:"Açık Kasa Kamyon"}),Ot.jsx("option",{value:"closed_truck",children:"Kapalı Kasa Kamyon"})]})]}),("kamyon"===w.vehicleType||"open_truck"===w.vehicleType||"closed_truck"===w.vehicleType)&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Dorse Tipi"}),Ot.jsxs("select",{value:w.trailerType,onChange:e=>_("trailerType",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",children:[Ot.jsx("option",{value:"",children:"Dorse tipi seçiniz (opsiyonel)"}),Ot.jsx("option",{value:"tenteli",children:"Tenteli Dorse"}),Ot.jsx("option",{value:"frigorific",children:"Frigorifik Dorse"}),Ot.jsx("option",{value:"lowbed",children:"Lowbed Dorse"}),Ot.jsx("option",{value:"kapalı",children:"Kapalı Dorse"}),Ot.jsx("option",{value:"açık",children:"Açık Dorse"}),Ot.jsx("option",{value:"yok",children:"Dorse Gerekmiyor"})]})]}),"refrigerated"===w.vehicleType&&Ot.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[Ot.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[Ot.jsx("input",{type:"checkbox",id:"temperatureControl",checked:w.temperatureControl,onChange:e=>_("temperatureControl",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"temperatureControl",className:"text-sm font-semibold text-slate-700",children:"Sıcaklık Kontrolü Gerekli"})]}),w.temperatureControl&&Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600",children:"Minimum Sıcaklık (℃)"}),Ot.jsx("input",{type:"number",value:w.temperatureMin,onChange:e=>_("temperatureMin",e.target.value),className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"-18"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600",children:"Maksimum Sıcaklık (℃)"}),Ot.jsx("input",{type:"number",value:w.temperatureMax,onChange:e=>_("temperatureMax",e.target.value),className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"4"})]})]})]}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Özel Ekipman Gereksinimleri"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresCrane",checked:w.requiresCrane,onChange:e=>_("requiresCrane",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresCrane",className:"text-sm font-medium text-slate-700",children:"Vinç Gerekli"})]}),Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresForklift",checked:w.requiresForklift,onChange:e=>_("requiresForklift",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresForklift",className:"text-sm font-medium text-slate-700",children:"Forklift Gerekli"})]}),Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"requiresHydraulicLifter",checked:w.requiresHydraulicLifter,onChange:e=>_("requiresHydraulicLifter",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"requiresHydraulicLifter",className:"text-sm font-medium text-slate-700",children:"Hidrolik Kaldırıcı Gerekli"})]})]})]}),Ot.jsxs("div",{className:"space-y-3 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"heavyTonage",checked:w.heavyTonage,onChange:e=>_("heavyTonage",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"heavyTonage",className:"text-sm font-semibold text-slate-700",children:"Ağır Tonaj (40+ ton)"})]}),w.heavyTonage&&Ot.jsxs("div",{className:"mt-3 space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600",children:"Toplam Ağırlık (ton)"}),Ot.jsx("input",{type:"number",value:w.heavyTonageAmount,onChange:e=>_("heavyTonageAmount",e.target.value),className:"w-full p-3 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"45",min:"40"}),Ot.jsx("p",{className:"text-xs text-amber-700",children:"⚠️ 40 ton ve üzeri yükler için özel izin ve rota planlaması gerekebilir."})]})]}),Ot.jsxs("div",{className:"space-y-3 p-4 bg-red-50 rounded-lg border border-red-200",children:[Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"oversizedLoad",checked:w.oversizedLoad,onChange:e=>_("oversizedLoad",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"oversizedLoad",className:"text-sm font-semibold text-slate-700",children:"Geniş Yük (Özel İzin Gerektiren)"})]}),w.oversizedLoad&&Ot.jsxs("div",{className:"mt-3 space-y-3",children:[Ot.jsx("p",{className:"text-xs text-red-700 font-semibold",children:"⚠️ Geniş yükler için özel izin ve rota planlaması gereklidir. Boyutları belirtin:"}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600",children:"Uzunluk (m)"}),Ot.jsx("input",{type:"number",step:"0.01",value:w.oversizedDimensions.length,onChange:e=>{const t={...w.oversizedDimensions,length:e.target.value};_("oversizedDimensions",t)},className:"w-full p-2 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"12.5"})]}),Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600",children:"Genişlik (m)"}),Ot.jsx("input",{type:"number",step:"0.01",value:w.oversizedDimensions.width,onChange:e=>{const t={...w.oversizedDimensions,width:e.target.value};_("oversizedDimensions",t)},className:"w-full p-2 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"3.5"})]}),Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600",children:"Yükseklik (m)"}),Ot.jsx("input",{type:"number",step:"0.01",value:w.oversizedDimensions.height,onChange:e=>{const t={...w.oversizedDimensions,height:e.target.value};_("oversizedDimensions",t)},className:"w-full p-2 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"4.2"})]})]})]})]})]})]}):null},G=[{label:"Yeni Gönderi",icon:Ot.jsx(ue,{className:"w-4 h-4"})}];return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Yeni Gönderi - YolNext Kurumsal"}),Ot.jsx("meta",{name:"description",content:"Kurumsal gönderi oluşturun"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:G})}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"corporate.create-shipment",icon:R,title:"Kurumsal Gönderi Oluşturma İpucu",description:"Kategoriye uygun alanları doğru doldurmak (ölçü, zaman penceresi, hassasiyet) daha hızlı teklif ve daha az iptal demektir. Gereksiz detay yerine net bilgi ver.",primaryAction:{label:"Yardım Merkezi",to:"/corporate/help"},secondaryAction:{label:"Teklifler",to:"/corporate/offers"}})}),Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(ue,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:["Yeni"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Gönderi"})]}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 max-w-2xl mx-auto leading-relaxed px-4",children:"Kurumsal nakliye ihtiyaçlarınız için kapsamlı kategori sistemi. Her işletme türüne uygun özel form alanları."})]}),Ot.jsx("div",{className:"mb-8",children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6",children:[Ot.jsx("div",{className:"hidden md:flex items-center justify-between",children:z.map((e,t)=>Ot.jsxs(n.Fragment,{children:[Ot.jsxs("div",{className:"flex flex-col items-center flex-1",children:[Ot.jsx("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full mb-3 transition-all duration-300 "+(a===e.id?"bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 text-white shadow-lg scale-110":a>e.id?"bg-gradient-to-br from-slate-700 to-blue-800 text-white":"bg-gray-200 text-gray-500"),children:a>e.id?Ot.jsx(Ke,{size:20,className:"text-white"}):e.icon}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-sm font-semibold mb-1 "+(a===e.id?"text-slate-800":a>e.id?"text-gray-700":"text-gray-400"),children:e.title}),Ot.jsx("div",{className:"text-xs "+(a===e.id?"text-blue-600":a>e.id?"text-gray-600":"text-gray-400"),children:e.subtitle||""})]})]}),t<z.length-1&&Ot.jsx("div",{className:"flex-1 h-0.5 mx-4 mt-[-24px] transition-all duration-300 "+(a>e.id?"bg-gradient-to-r from-slate-800 to-blue-900":"bg-gray-200")})]},e.id))}),Ot.jsxs("div",{className:"md:hidden",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:z.map((e,t)=>Ot.jsxs(n.Fragment,{children:[Ot.jsxs("div",{className:"flex flex-col items-center flex-1",children:[Ot.jsx("div",{className:"relative flex items-center justify-center w-10 h-10 rounded-full mb-2 transition-all duration-300 "+(a===e.id?"bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 text-white shadow-lg scale-110":a>e.id?"bg-gradient-to-br from-slate-700 to-blue-800 text-white":"bg-gray-200 text-gray-500"),children:a>e.id?Ot.jsx(Ke,{size:18,className:"text-white"}):Ot.jsx("div",{className:"scale-75",children:e.icon})}),Ot.jsx("div",{className:"text-center",children:Ot.jsxs("div",{className:"text-xs font-semibold "+(a===e.id?"text-slate-800":a>e.id?"text-gray-700":"text-gray-400"),children:[t+1,". Adım"]})})]}),t<z.length-1&&Ot.jsx("div",{className:"flex-1 h-0.5 mx-2 mt-[-20px] transition-all duration-300 "+(a>e.id?"bg-gradient-to-r from-slate-800 to-blue-900":"bg-gray-200")})]},e.id))}),Ot.jsxs("div",{className:"text-center mt-2",children:[Ot.jsx("div",{className:"text-sm font-semibold "+(a===z[0].id?"text-slate-800":a===z[1].id?"text-blue-700":"text-indigo-700"),children:z[a-1].title}),Ot.jsx("div",{className:"text-xs text-gray-600 mt-1",children:z[a-1].subtitle||""})]})]})]})}),Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4 sm:p-6 md:p-8 mb-6 sm:mb-8",children:(()=>{var e,t,s,l;switch(a){case 1:return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-lg font-semibold text-slate-900 mb-4",children:[Ot.jsx(R,{className:"w-5 h-5 inline mr-2"}),"Hangi tür yük taşıyacaksınız? *"]}),Ot.jsxs("select",{value:w.mainCategory??"",onChange:e=>{_("mainCategory",e.currentTarget.value);const t=e.currentTarget.value,s=D(t).map(e=>e.value);w.unitType&&!s.includes(w.unitType)&&_("unitType",""),b.mainCategory&&y(e=>({...e,mainCategory:""}))},onInput:e=>{_("mainCategory",e.currentTarget.value)},className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 text-lg "+(b.mainCategory?"border-red-500 focus:border-red-500":"border-slate-200 focus:border-blue-500"),children:[Ot.jsx("option",{value:"",children:"Kategori seçiniz"}),C.map(e=>Ot.jsx("option",{value:e.id,children:e.name},e.id))]}),b.mainCategory&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:b.mainCategory}),w.mainCategory&&A()&&Ot.jsx("p",{className:"mt-2 text-sm text-slate-600",children:null==(e=A())?void 0:e.description})]}),w.mainCategory&&Ot.jsx("div",{className:"space-y-6",children:Ot.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:[Ot.jsx(W,{className:"w-4 h-4 inline mr-2"}),"Yük Açıklaması *"]}),Ot.jsx("textarea",{value:w.productDescription,onChange:e=>{_("productDescription",e.target.value),b.productDescription&&y(e=>({...e,productDescription:""}))},rows:3,className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none "+(b.productDescription?"border-red-500":"border-slate-200"),placeholder:"Yükünüzü detaylı olarak tarif edin..."}),b.productDescription&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.productDescription})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Birim Tipi *"}),Ot.jsxs("select",{value:w.unitType,onChange:e=>{_("unitType",e.target.value),b.unitType&&y(e=>({...e,unitType:""}))},className:`w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md ${b.unitType?"border-red-500":"border-gray-200"} text-slate-900 caret-slate-900`,children:[Ot.jsx("option",{value:"",children:"Seçiniz"}),D(w.mainCategory).map(e=>Ot.jsx("option",{value:e.value,children:e.label},e.value))]}),b.unitType&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.unitType})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(null==(t=A())?void 0:t.requiredFields.includes("weight"))&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[Ot.jsx(_e,{className:"w-4 h-4 inline mr-2"}),"Toplam Ağırlık (kg) *"]}),Ot.jsx("input",{type:"number",step:"0.01",value:w.weight,onChange:e=>{_("weight",e.target.value),b.weight&&y(e=>({...e,weight:""}))},className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.weight?"border-red-500":"border-gray-200"),placeholder:"2.5"}),b.weight&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.weight})]}),(null==(s=A())?void 0:s.requiredFields.includes("quantity"))&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[Ot.jsx(R,{className:"w-4 h-4 inline mr-2"}),"Birim Sayısı *"]}),Ot.jsx("input",{type:"number",value:w.quantity,onChange:e=>{_("quantity",e.target.value),b.quantity&&y(e=>({...e,quantity:""}))},className:"w-full p-4 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md "+(b.quantity?"border-red-500":"border-gray-200"),placeholder:"1"}),b.quantity&&Ot.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.quantity})]})]}),(null==(l=A())?void 0:l.requiredFields.includes("dimensions"))&&Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-4",children:[Ot.jsx(Ie,{className:"w-4 h-4 inline mr-2"}),"Boyutlar (cm) *",b.dimensions&&Ot.jsxs("span",{className:"ml-2 text-red-600 text-xs",children:["(",b.dimensions,")"]})]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Uzunluk"}),Ot.jsx("input",{type:"number",min:"0",step:"0.01",value:w.dimensions.length,onChange:e=>{M("length",e.target.value)},onBlur:e=>{const t=e.target.value.trim();t&&!isNaN(parseFloat(t))&&parseFloat(t)>=0&&M("length",t)},className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",placeholder:"30"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Genişlik"}),Ot.jsx("input",{type:"number",min:"0",step:"0.01",value:w.dimensions.width,onChange:e=>{M("width",e.target.value)},onBlur:e=>{const t=e.target.value.trim();t&&!isNaN(parseFloat(t))&&parseFloat(t)>=0&&M("width",t)},className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",placeholder:"20"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Yükseklik"}),Ot.jsx("input",{type:"number",min:"0",step:"0.01",value:w.dimensions.height,onChange:e=>{M("height",e.target.value)},onBlur:e=>{const t=e.target.value.trim();t&&!isNaN(parseFloat(t))&&parseFloat(t)>=0&&M("height",t)},className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md",placeholder:"15"})]})]})]}),B(),P(),A()&&A().specialRequirements.length>0&&Ot.jsxs("div",{className:"space-y-4 mt-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Özel Gereksinimler"}),Ot.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[...A().specialRequirements.includes("fragile")?[{id:"fragile",name:"Kırılgan",icon:f,color:"red"}]:[],...A().specialRequirements.includes("urgent")?[{id:"urgent",name:"Acil",icon:L,color:"orange"}]:[],...A().specialRequirements.includes("signature")?[{id:"signature",name:"İmzalı Teslimat",icon:Ke,color:"blue"}]:[],...A().specialRequirements.includes("temperature")?[{id:"temperature",name:"Soğuk Zincir",icon:Me,color:"cyan"}]:[],...A().specialRequirements.includes("valuable")?[{id:"valuable",name:"Değerli",icon:O,color:"yellow"}]:[],...A().specialRequirements.includes("requiresCrane")?[{id:"requiresCrane",name:"Vinç Gerekli",icon:oe,color:"purple"}]:[],...A().specialRequirements.includes("requiresSpecialVehicle")?[{id:"requiresSpecialVehicle",name:"Özel Araç",icon:E,color:"indigo"}]:[]].map(e=>{const t=e.icon,s=w.specialRequirements||"",a=(s?s.split(",").filter(e=>e.trim()):[]).includes(e.id);return Ot.jsx("button",{type:"button",onClick:()=>{const t=(w.specialRequirements||"").split(",").filter(e=>e.trim());let s;s=t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id],_("specialRequirements",s.join(","))},className:`p-4 rounded-lg border-2 transition-all duration-300 ${((e,t)=>{const s={red:{border:"border-red-500",bg:"bg-red-50",text:"text-red-900"},orange:{border:"border-orange-500",bg:"bg-orange-50",text:"text-orange-900"},yellow:{border:"border-yellow-500",bg:"bg-yellow-50",text:"text-yellow-900"},blue:{border:"border-blue-500",bg:"bg-blue-50",text:"text-blue-900"},cyan:{border:"border-cyan-500",bg:"bg-cyan-50",text:"text-cyan-900"},purple:{border:"border-purple-500",bg:"bg-purple-50",text:"text-purple-900"},indigo:{border:"border-indigo-500",bg:"bg-indigo-50",text:"text-indigo-900"}},a=s[e]||s.blue;return t?`${a.border} ${a.bg}`:"border-slate-200 hover:border-slate-300 bg-white"})(e.color,a)}`,children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mb-2 ${l=e.color,i=a,i?{red:"bg-red-500",orange:"bg-orange-500",yellow:"bg-yellow-500",blue:"bg-blue-500",cyan:"bg-cyan-500",purple:"bg-purple-500",indigo:"bg-indigo-500"}[l]||"bg-blue-500":"bg-slate-100"}`,children:Ot.jsx(t,{className:"w-4 h-4 "+(a?"text-white":"text-slate-600")})}),Ot.jsx("span",{className:`text-xs font-medium ${((e,t)=>t?{red:"text-red-900",orange:"text-orange-900",yellow:"text-yellow-900",blue:"text-blue-900",cyan:"text-cyan-900",purple:"text-purple-900",indigo:"text-indigo-900"}[e]||"text-blue-900":"text-slate-700")(e.color,a)}`,children:e.name})]})},e.id);var l,i})})]})]})})]});case 2:return Ot.jsx(wr,{formData:w,handleInputChange:_,errors:b,setErrors:y});case 3:return Ot.jsx(Sr,{formData:w,errors:b,errorMessage:p,handleInputChange:_,getCurrentCategory:A,nakliyeciler:j,loadingNakliyeciler:N});default:return null}})()}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[Ot.jsxs("button",{onClick:()=>{a>1&&i(a-1)},disabled:1===a,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 border border-slate-300 rounded-xl font-semibold transition-all duration-300 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[Ot.jsx(re,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"text-sm sm:text-base",children:"Geri"})]}),a<z.length?Ot.jsxs("button",{onClick:()=>{$(a)&&a<z.length&&i(a+1)},className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:[Ot.jsx("span",{className:"text-sm sm:text-base",children:"İleri"}),Ot.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5"})]}):Ot.jsx("button",{onClick:async()=>{var t,s;if(!$(a))return;if(!w.disclaimerAccepted)return void y(e=>({...e,disclaimerAccepted:'Devam etmek için "Okudum, anladım ve kabul ediyorum" seçeneğini işaretleyin.'}));d(!0);const l=setTimeout(()=>{d(!1),y({publish:"Gönderi oluşturma işlemi zaman aşımına uğradı. Lütfen tekrar deneyin."})},3e4);try{const a=A(),n=e=>{if(!e)return{city:"İstanbul",district:""};const t=e.split(",").map(e=>e.trim()).filter(e=>e);return t.length>=2?{city:t[0],district:t[1]||""}:1===t.length?{city:t[0],district:""}:{city:"İstanbul",district:""}},o=w.pickupCity?{city:w.pickupCity,district:w.pickupDistrict||""}:n(w.pickupAddress),c=w.deliveryCity?{city:w.deliveryCity,district:w.deliveryDistrict||""}:n(w.deliveryAddress),m={title:(null==a?void 0:a.name)||"Kurumsal Gönderi",description:w.productDescription||"",productDescription:w.productDescription||"",category:w.mainCategory,pickupCity:o.city,pickupDistrict:o.district,pickupAddress:w.pickupAddress,pickupDate:w.pickupDate,deliveryCity:c.city,deliveryDistrict:c.district,deliveryAddress:w.deliveryAddress,deliveryDate:w.deliveryDate,weight:parseFloat(w.weight)||0,quantity:parseInt(w.quantity)||1,dimensions:w.dimensions.length&&w.dimensions.width&&w.dimensions.height?`${w.dimensions.length}x${w.dimensions.width}x${w.dimensions.height}`:null,specialRequirements:w.specialRequirements||"",publishType:w.publishType,targetNakliyeciId:"specific"===w.publishType?w.targetNakliyeciId:null,categoryData:{unitType:w.unitType,materialType:w.materialType,packagingType:w.packagingType,isPalletized:w.isPalletized,palletCount:w.palletCount,requiresColdChain:w.requiresColdChain,temperatureSetpoint:w.temperatureSetpoint,coldChainRequired:w.coldChainRequired,hazardClass:w.hazardClass,unNumber:w.unNumber,hasMSDS:w.hasMSDS,expiryDate:w.expiryDate,hasCertification:w.hasCertification,requiresSpecialPermit:w.requiresSpecialPermit,loadingEquipment:w.loadingEquipment,requiresSpecialVehicle:w.requiresSpecialVehicle,isFragile:w.isFragile,warehouseType:w.warehouseType,isBulkTransfer:w.isBulkTransfer,bulkType:w.bulkType,requiresCover:w.requiresCover,isOriginalPackaging:w.isOriginalPackaging,requiresAntiStatic:w.requiresAntiStatic,materialQuantity:w.materialQuantity,requiresWeatherProtection:w.requiresWeatherProtection,equipmentType:w.equipmentType,requiresAssembly:w.requiresAssembly,requiresPharmaLicense:w.requiresPharmaLicense,temperatureControlled:w.temperatureControlled,vehicleRequirements:{vehicleType:w.vehicleType||null,trailerType:w.trailerType||null,requiresCrane:w.requiresCrane||!1,requiresForklift:w.requiresForklift||!1,requiresHydraulicLifter:w.requiresHydraulicLifter||!1,heavyTonage:w.heavyTonage||!1,heavyTonageAmount:w.heavyTonageAmount||null,oversizedLoad:w.oversizedLoad||!1,oversizedDimensions:w.oversizedLoad?{length:w.oversizedDimensions.length||null,width:w.oversizedDimensions.width||null,height:w.oversizedDimensions.height||null}:null,temperatureControl:w.temperatureControl||!1,temperatureMin:w.temperatureMin||null,temperatureMax:w.temperatureMax||null}}};let u;try{u=await zr(m),clearTimeout(l)}catch(r){clearTimeout(l),d(!1);r instanceof Error&&r.message;return g("Sunucuya bağlanılamıyor. Lütfen internet bağlantınızı kontrol edin ve birkaç dakika sonra tekrar deneyin."),void y({publish:"Sunucuya bağlanılamıyor. Lütfen internet bağlantınızı kontrol edin."})}if((null==(t=u.data)?void 0:t.success)||u.success){const t=(null==(s=null==u?void 0:u.data)?void 0:s.shipment)||(null==u?void 0:u.data)||null;Ga("shipment_create_success",{shipmentId:(null==t?void 0:t.id)||null,category:w.mainCategory||null,publishType:w.publishType||null}),h("Gönderiniz başarıyla yayınlandı! Nakliyecilerden teklifler almaya başlayacaksınız."),x(!0),S({mainCategory:"",productDescription:"",unitType:"",weight:"",quantity:"",dimensions:{length:"",width:"",height:""},specialRequirements:"",pickupAddress:"",pickupDistrict:"",pickupCity:"",deliveryAddress:"",deliveryDistrict:"",deliveryCity:"",pickupDate:"",deliveryDate:"",publishType:"all",targetNakliyeciId:"",disclaimerAccepted:!1,materialType:"",packagingType:"",isPalletized:!1,palletCount:"",requiresColdChain:!1,temperatureSetpoint:"",expiryDate:"",hasCertification:!1,hazardClass:"",unNumber:"",hasMSDS:!1,requiresSpecialPermit:!1,coldChainRequired:!1,loadingEquipment:"",requiresSpecialVehicle:!1,isFragile:!1,warehouseType:"",isBulkTransfer:!1,bulkType:"",requiresCover:!1,isOriginalPackaging:!1,requiresAntiStatic:!1,materialQuantity:"",requiresWeatherProtection:!1,equipmentType:"",requiresAssembly:!1,requiresPharmaLicense:!1,temperatureControlled:!1,vehicleType:"",trailerType:"",requiresCrane:!1,requiresForklift:!1,requiresHydraulicLifter:!1,heavyTonage:!1,heavyTonageAmount:"",oversizedLoad:!1,oversizedDimensions:{length:"",width:"",height:""},temperatureControl:!1,temperatureMin:"",temperatureMax:""}),i(1),y({}),setTimeout(()=>{x(!1),e("/corporate/shipments")},2e3)}}catch(n){clearTimeout(l);const e=n instanceof Error?n.message:"Bilinmeyen hata";g(`Gönderi oluşturulurken bir hata oluştu: ${e}. Lütfen tekrar deneyin.`)}finally{clearTimeout(l),d(!1)}},disabled:r||!w.disclaimerAccepted,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 sm:px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:r?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),Ot.jsx("span",{className:"text-sm sm:text-base",children:"Yayınlanıyor..."})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ne,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"text-sm sm:text-base",children:"Gönderiyi Yayınla"})]})})]}),m&&Ot.jsx(Fl,{message:u,isVisible:m,onClose:()=>x(!1)})]})]})}function Ar(){var e;const[t,s]=l.useState("30days"),[a,i]=l.useState("all"),[r,n]=l.useState(!1),[d,o]=l.useState(null),[c,m]=l.useState([]),[x,u]=l.useState(null),h=async()=>{n(!0),u(null);try{const e=localStorage.getItem("authToken")||localStorage.getItem("token");if(!e)throw new Error("Oturum bulunamadı. Lütfen tekrar giriş yapın.");const s=localStorage.getItem("user"),a=s?JSON.parse(s):null,l=String((null==a?void 0:a.role)||(null==a?void 0:a.panel_type)||(null==a?void 0:a.userType)||(null==a?void 0:a.user_type)||"corporate").toLowerCase()||"corporate",i=Zs(`/api/analytics/dashboard/${l}?period=${t}`),r=await fetch(i,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),n=await gr(r);if(!r.ok){const e=String((null==n?void 0:n.message)||(null==n?void 0:n.error)||"").trim(),t=e?` (${e})`:"";throw new Error(`Analitik veriler yüklenemedi${t}`)}const d=(null==n?void 0:n.data)||n||{},c={totalShipments:d.totalShipments??0,totalRevenue:d.totalRevenue??d.revenue??0,customerSatisfaction:d.customerSatisfaction??d.averageRating??0,monthlyGrowth:d.monthlyGrowth??0,revenueGrowth:d.revenueGrowth??0,satisfactionImprovement:d.satisfactionImprovement??0,chartData:d.chartData??d.monthlyTrend??[]};o(c)}catch(e){ei("Analitik veriler yüklenirken hata:",e),u("Analitik veriler yüklenemedi. Lütfen daha sonra tekrar deneyin."),o({totalShipments:0,totalRevenue:0,customerSatisfaction:0,monthlyGrowth:0,revenueGrowth:0,satisfactionImprovement:0,chartData:[]})}finally{n(!1)}};l.useEffect(()=>{h(),(async()=>{var e;try{const t=await fetch(Zs("/api/carriers/corporate"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});if(t.ok){const s=await t.json(),a=(Array.isArray(s.carriers)?s.carriers:null)||(Array.isArray(s.data)?s.data:null)||(Array.isArray(null==(e=s.data)?void 0:e.carriers)?s.data.carriers:null)||[];m(a)}}catch(t){ei("Taşıyıcılar yüklenirken hata:",t)}})()},[t,a]);const p=[{label:"Analitik Dashboard",icon:Ot.jsx(ge,{className:"w-4 h-4"})}],g=e=>"up"===e?Ot.jsx(ut,{className:"w-4 h-4"}):Ot.jsx(ht,{className:"w-4 h-4"});return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Analitik Dashboard - YolNext Kargo"}),Ot.jsx("meta",{name:"description",content:"Kurumsal analitik ve performans raporları"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:p})}),r&&!d&&Ot.jsx(Pl,{message:"Analitik veriler yükleniyor..."}),x&&Ot.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:x}),Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(ge,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:["Analitik"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Dashboard"})]}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"İş performansınızı takip edin ve veri odaklı kararlar alın"})]}),Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-xl border border-slate-200 mb-6 sm:mb-8",children:Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx(xt,{className:"w-5 h-5 text-slate-600"}),Ot.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filtreler"})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full sm:w-auto",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($e,{className:"w-4 h-4 text-slate-600"}),Ot.jsxs("select",{value:t,onChange:e=>s(e.target.value),className:"px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500",children:[Ot.jsx("option",{value:"7days",children:"7 Gün"}),Ot.jsx("option",{value:"30days",children:"30 Gün"}),Ot.jsx("option",{value:"90days",children:"90 Gün"}),Ot.jsx("option",{value:"1year",children:"1 Yıl"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(R,{className:"w-4 h-4 text-slate-600"}),Ot.jsxs("select",{value:a,onChange:e=>i(e.target.value),className:"px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Nakliyeciler"}),c.map(e=>Ot.jsx("option",{value:e.id,children:e.name},e.id))]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{onClick:h,className:"p-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",title:"Verileri Yenile",children:Ot.jsx(y,{className:"w-4 h-4"})}),Ot.jsx("button",{onClick:()=>{const e={period:t,carrier:a,analytics:d},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(s),i=document.createElement("a");i.href=l,i.download=`analytics-${t}-${(new Date).toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(l)},className:"p-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",title:"Raporu İndir",children:Ot.jsx(Ge,{className:"w-4 h-4"})})]})]})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200 hover:shadow-xl transition-shadow",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-slate-100 rounded-lg",children:Ot.jsx(R,{className:"w-6 h-6 text-slate-700"})}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[g("up"),Ot.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",null==d?void 0:d.monthlyGrowth,"%"]})]})]}),Ot.jsxs("div",{className:"mb-2",children:[Ot.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:null==(e=null==d?void 0:d.totalShipments)?void 0:e.toLocaleString()}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Toplam Gönderi"})]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Bu dönem tamamlanan gönderi sayısı"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200 hover:shadow-xl transition-shadow",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-slate-100 rounded-lg",children:Ot.jsx(O,{className:"w-6 h-6 text-slate-700"})}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[g("up"),Ot.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",null==d?void 0:d.satisfactionImprovement]})]})]}),Ot.jsxs("div",{className:"mb-2",children:[Ot.jsxs("h3",{className:"text-2xl font-bold text-slate-900",children:[null==d?void 0:d.customerSatisfaction,"/5"]}),Ot.jsx("div",{className:"text-sm text-slate-500",children:"Henüz veri yok - gönderi oluşturun"})]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Ortalama müşteri puanı"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 sm:p-8 shadow-xl border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx(ge,{className:"w-6 h-6 text-slate-700"}),Ot.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Özet Bilgiler"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ot.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(M,{className:"w-5 h-5 text-green-600"}),Ot.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"En İyi Ay"})]}),(null==d?void 0:d.chartData)&&d.chartData.length>0?(()=>{const e=d.chartData.reduce((e,t)=>t.shipments>e.shipments?t:e);return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("p",{className:"text-lg font-bold text-green-900",children:e.month}),Ot.jsxs("p",{className:"text-xs text-green-600",children:[e.shipments," gönderi, ₺",(e.revenue/1e3).toFixed(0),"K gelir"]})]})})():Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("p",{className:"text-lg font-bold text-green-900",children:"-"}),Ot.jsx("p",{className:"text-xs text-green-600",children:"Veri yok"})]})]}),Ot.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(ge,{className:"w-5 h-5 text-blue-600"}),Ot.jsx("h3",{className:"text-sm font-semibold text-blue-800",children:"Ortalama"})]}),(null==d?void 0:d.chartData)&&d.chartData.length>0?(()=>{const e=Math.round(d.chartData.reduce((e,t)=>e+t.shipments,0)/d.chartData.length),t=Math.round(d.chartData.reduce((e,t)=>e+t.revenue,0)/d.chartData.length);return Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("p",{className:"text-lg font-bold text-blue-900",children:[e," gönderi/ay"]}),Ot.jsxs("p",{className:"text-xs text-blue-600",children:["₺",(t/1e3).toFixed(0),"K ortalama gelir"]})]})})():Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("p",{className:"text-lg font-bold text-blue-900",children:"-"}),Ot.jsx("p",{className:"text-xs text-blue-600",children:"Veri yok"})]})]}),Ot.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(M,{className:"w-5 h-5 text-purple-600"}),Ot.jsx("h3",{className:"text-sm font-semibold text-purple-800",children:"Büyüme"})]}),Ot.jsxs("p",{className:"text-lg font-bold text-purple-900",children:[(null==d?void 0:d.monthlyGrowth)>0?"+":"",(null==d?void 0:d.monthlyGrowth)||0,"%"]}),Ot.jsx("p",{className:"text-xs text-purple-600",children:"Aylık gönderi artışı"})]})]})]})]})]})}function Dr(){return Ot.jsx(Zi,{userType:"corporate"})}function Er(){const{showToast:e}=ka(),[t,s]=l.useState("profile"),[a,i]=l.useState(!1),[r,n]=l.useState(!1),[o,c]=l.useState({companyName:"ABC Teknoloji A.Ş.",contactPerson:"Mehmet Demir",email:"mehmet.demir@abcteknoloji.com",phone:"+90 212 555 0123",address:"Maslak Mahallesi, Büyükdere Caddesi No: 123, 34485 Sarıyer/İstanbul",taxNumber:"1234567890",website:"www.abcteknoloji.com",emailNotifications:!0,smsNotifications:!0,pushNotifications:!0,shipmentUpdates:!0,carrierMessages:!0,systemAlerts:!0,marketingEmails:!1,twoFactorAuth:!0,sessionTimeout:"30",loginAlerts:!0,language:"tr",timezone:"Europe/Istanbul",dateFormat:"DD/MM/YYYY",currency:"TRY",theme:"light",preferredContactTime:"09:00-18:00",contactMethod:"email",emergencyContact:"+90 212 555 9999",defaultShipmentType:"general_cargo",defaultWeight:"1000",defaultVolume:"5",autoAcceptOffers:!1,preferredCarriers:[],invoiceEmail:"fatura@abcteknoloji.com",invoiceFormat:"pdf",autoInvoice:!0,taxIncluded:!0}),m=[{id:"profile",name:"Profil",icon:Ot.jsx(xe,{className:"w-5 h-5"})}],x=(e,t)=>{c(s=>({...s,[e]:t}))};return Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Hesap Ayarları - YolNext Kurumsal"}),Ot.jsx("meta",{name:"description",content:"Kurumsal hesap ayarlarınızı yönetin"})]}),Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-800 to-blue-900 rounded-3xl flex items-center justify-center shadow-2xl",children:Ot.jsx(oe,{className:"w-10 h-10 text-white"})})}),Ot.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-slate-900 mb-4",children:["Hesap"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Ayarları"})]}),Ot.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Kurumsal hesap ayarlarınızı yönetin ve platformu ihtiyaçlarınıza göre özelleştirin"})]}),Ot.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-slate-200 overflow-hidden",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 border-b border-slate-200 px-8 py-6",children:Ot.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 justify-between items-start lg:items-center",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Ayarlar Merkezi"}),Ot.jsx("p",{className:"text-slate-600",children:"Hesap ve platform ayarlarınızı yönetin"})]}),Ot.jsx("div",{className:"hidden lg:block w-px h-12 bg-slate-300"}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[Ot.jsx(L,{className:"w-4 h-4"}),"Son güncelleme: ",(new Date).toLocaleString("tr-TR")]})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-3",children:[Ot.jsxs("button",{onClick:()=>{window.location.reload()},className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[Ot.jsx(y,{className:"w-4 h-4"}),"Sıfırla"]}),Ot.jsxs("button",{onClick:async()=>{i(!0),await new Promise(e=>setTimeout(e,2e3)),i(!1)},disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-slate-900 hover:to-blue-950 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[a?Ot.jsx(y,{className:"w-4 h-4 animate-spin"}):Ot.jsx(We,{className:"w-4 h-4"}),a?"Kaydediliyor...":"Kaydet"]})]})]})}),Ot.jsxs("div",{className:"flex",children:[Ot.jsx("div",{className:"w-80 border-r border-slate-200 bg-slate-50",children:Ot.jsx("nav",{className:"p-6",children:Ot.jsx("div",{className:"space-y-2",children:m.map(e=>Ot.jsxs("button",{onClick:()=>s(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all "+(t===e.id?"bg-gradient-to-r from-slate-800 to-blue-900 text-white shadow-lg":"text-slate-700 hover:bg-white hover:shadow-sm"),children:[e.icon,Ot.jsx("span",{className:"font-medium",children:e.name})]},e.id))})})}),Ot.jsx("div",{className:"flex-1 p-8",children:"profile"===t&&Ot.jsxs("div",{className:"space-y-8",children:[Ot.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-2xl p-8 border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(A,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Şirket Bilgileri"}),Ot.jsx("p",{className:"text-slate-600",children:"Temel şirket bilgilerinizi güncelleyin"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Şirket Adı *"}),Ot.jsx("input",{type:"text",value:o.companyName,onChange:e=>x("companyName",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"İletişim Kişisi *"}),Ot.jsx("input",{type:"text",value:o.contactPerson,onChange:e=>x("contactPerson",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"E-posta *"}),Ot.jsx("input",{type:"email",value:o.email,onChange:e=>x("email",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Telefon *"}),Ot.jsx("input",{type:"tel",value:o.phone,onChange:e=>x("phone",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700"})]}),Ot.jsxs("div",{className:"space-y-2 md:col-span-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Adres *"}),Ot.jsx("textarea",{value:o.address,onChange:e=>x("address",e.target.value),rows:3,className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700 resize-none"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Vergi Numarası *"}),Ot.jsx("input",{type:"text",value:o.taxNumber,onChange:e=>x("taxNumber",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Website"}),Ot.jsx("input",{type:"url",value:o.website,onChange:e=>x("website",e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm hover:shadow-md text-slate-700"})]})]})]}),Ot.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-2xl p-8 border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(W,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Yasal Belgeler"}),Ot.jsx("p",{className:"text-slate-600",children:"Kullanım Koşulları, Gizlilik, Çerez ve KVKK metinlerine erişin"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[Ot.jsx(d,{to:"/terms",target:"_blank",className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900",children:"Kullanım Koşulları"}),Ot.jsx(d,{to:"/privacy",target:"_blank",className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900",children:"Gizlilik Politikası"}),Ot.jsx(d,{to:"/cookie-policy",target:"_blank",className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900",children:"Çerez Politikası"}),Ot.jsx("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("yolnext:cookie-preferences")),className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900 text-left",children:"Çerez Tercihleri"}),Ot.jsx(d,{to:"/kvkk-aydinlatma",target:"_blank",className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900",children:"KVKK Aydınlatma Metni"}),Ot.jsx(d,{to:"/consumer-rights",target:"_blank",className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900",children:"Tüketici Hakları"}),Ot.jsx(d,{to:"/distance-selling-contract",target:"_blank",className:"bg-white border-2 border-slate-200 rounded-xl px-4 py-3 hover:border-blue-300 hover:shadow-sm transition-all text-sm font-semibold text-slate-900",children:"Mesafeli Satış Sözleşmesi"})]})]})]})})]})]})]})})]})}const _r=async()=>{try{const e=await fetch(Zs("/api/carriers/corporate"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),t=e.headers.get("content-type");if(!t||!t.includes("application/json")){const t=await e.text();return ei("JSON dışı yanıt:",t.substring(0,200)),{success:!1,data:{carriers:[]},message:"Endpoint bulunamadı"}}return e.json()}catch(e){return ei("Taşıyıcılar alınırken hata:",e),{success:!1,data:{carriers:[]},message:e.message}}},Ir=async e=>{try{const t=await fetch(Zs("/api/carriers/corporate/link"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),s=t.headers.get("content-type");if(!s||!s.includes("application/json")){const e=await t.text();return ei("JSON dışı yanıt:",e.substring(0,200)),{success:!1,message:404===t.status?"Endpoint bulunamadı. Lütfen backend'i kontrol edin.":"Beklenmeyen yanıt formatı",ok:!1}}const a=await t.json();return t.ok?{...a,ok:!0}:(ei("API hatası:",a),{...a,ok:!1})}catch(t){return ei("İstek hatası:",t),{success:!1,message:t.message||"Ağ hatası",ok:!1}}},Kr=async e=>{try{const t=await fetch(Zs(`/api/carriers/corporate/${e}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}}),s=t.headers.get("content-type");if(!s||!s.includes("application/json")){const e=await t.text();return ei("JSON dışı yanıt:",e.substring(0,200)),{success:!1,message:404===t.status?"Endpoint bulunamadı. Lütfen backend'i kontrol edin.":"Beklenmeyen yanıt formatı",ok:!1}}const a=await t.json();return t.ok?{...a,ok:!0}:(ei("API hatası:",a),{...a,ok:!1})}catch(t){return ei("İstek hatası:",t),{success:!1,message:t.message||"Ağ hatası",ok:!1}}};function Mr(){const e=o(),[t,s]=c(),a=t.get("details"),[i,r]=l.useState([]),[n,d]=l.useState(""),[m,x]=l.useState("all"),[u,h]=l.useState("rating"),[p,g]=l.useState("grid"),[b,f]=l.useState([]),[y,j]=l.useState(!1),[v,N]=l.useState(!1),[k,w]=l.useState(!1),[A,D]=l.useState(!1),[E,I]=l.useState(null),[K,M]=l.useState(null),[$,B]=l.useState(!1),[P,L]=l.useState(!1),[G,F]=l.useState(""),[Y,q]=l.useState(1),[H,U]=l.useState(""),[V,J]=l.useState(!1),[W,Z]=l.useState(null),[X,ee]=l.useState(null),[te,se]=l.useState(!1),[ae,le]=l.useState(null),[ie,re]=l.useState(!1),[ne,de]=l.useState(null),[oe,ce]=l.useState(!1),[xe,he]=l.useState(null),pe=e=>{de(e),re(!0),s({details:e.toString()})};l.useEffect(()=>{if(a&&i&&i.length>0){const e=parseInt(a);i.find(t=>t.id===e)&&(de(e),re(!0))}},[a,i]);const ge=(t,s)=>{e(`/corporate/messages?userId=${t}`)},be=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},fe=e=>{alert(`${e} işlemi ${b.length} nakliyeci için uygulanacak`)},ye=async()=>{B(!0);try{const e=await _r();if(e.success&&e.data){const t=e.data.carriers||e.data||[];r(t)}else r([])}catch(e){r([])}finally{B(!1)}};l.useEffect(()=>{ye()},[]),l.useEffect(()=>{q(1)},[m,n,u]);const je=l.useMemo(()=>i&&Array.isArray(i)?i.filter(e=>{var t,s,a,l,i,r,d,o;if(!e)return!1;let c=!1;if(n.startsWith("YN-"))c=e.nakliyeciCode===n||(null==(t=e.nakliyeciCode)?void 0:t.includes(n));else if(n.includes("@"))c=null==(s=e.email)?void 0:s.toLowerCase().includes(n.toLowerCase());else if(n.trim()){const t=n.toLowerCase();c=(null==(a=e.fullName)?void 0:a.toLowerCase().includes(t))||(null==(l=e.companyName)?void 0:l.toLowerCase().includes(t))||(null==(i=e.city)?void 0:i.toLowerCase().includes(t))||(null==(r=e.district)?void 0:r.toLowerCase().includes(t))||(null==(d=e.nakliyeciCode)?void 0:d.toLowerCase().includes(t))||(null==(o=e.email)?void 0:o.toLowerCase().includes(t))}else c=!0;return c&&!0}):[],[i,n,m]),ve=l.useMemo(()=>{const e=e=>{const t=Number(e);return Number.isFinite(t)?t:0},t=e=>String((null==e?void 0:e.companyName)||(null==e?void 0:e.fullName)||"").trim().toLowerCase();return je.slice().sort((s,a)=>{if("rating"===u){const l=e(null==a?void 0:a.averageRating)-e(null==s?void 0:s.averageRating);if(0!==l)return l;const i=e(null==a?void 0:a.totalShipments)-e(null==s?void 0:s.totalShipments);return 0!==i?i:t(s).localeCompare(t(a))}if("shipments"===u){const l=e(null==a?void 0:a.totalShipments)-e(null==s?void 0:s.totalShipments);if(0!==l)return l;const i=e(null==a?void 0:a.averageRating)-e(null==s?void 0:s.averageRating);return 0!==i?i:t(s).localeCompare(t(a))}return t(s).localeCompare(t(a))})},[je,u]),Ne=Math.ceil(ve.length/6),ke=6*(Y-1),we=ve.slice(ke,ke+6),Se=[{label:"Nakliyeciler",icon:Ot.jsx(C,{className:"w-4 h-4"})}],ze=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-red-100 text-red-800 border-red-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Nakliyeci Yönetimi - YolNext Kargo"}),Ot.jsx("meta",{name:"description",content:"Kurumsal nakliyeci yönetim sistemi"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:Se})}),Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(C,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:["Nakliyeci"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Yönetimi"})]}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"Anlaşmalı nakliyecilerinizi yönetin ve performanslarını takip edin"}),Ot.jsx("div",{className:"mt-4",children:Ot.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2 mx-auto",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Favori Nakliyeci Ekle"]})})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"corporate.carriers",isEmpty:!$&&0===i.length,icon:C,title:"Nakliyeci Yönetimi",description:"Düzenli çalıştığın nakliyecileri buradan ekle ve yönet. Yeni gönderi oluştururken hızlıca nakliyeci seçip teklif toplayabilirsin.",primaryAction:{label:"Yeni Nakliyeci Ekle",onClick:()=>j(!0)},secondaryAction:{label:"Gönderi Oluştur",to:"/corporate/create-shipment"}})}),Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl border border-slate-200 mb-6 sm:mb-8",children:Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Kod (YN-12345), İsim (Hızlı Kargo) veya Şehir (İstanbul) ara...",value:n,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base"})]}),Ot.jsx("select",{value:m,onChange:e=>x(e.target.value),disabled:!0,className:"px-3 sm:px-4 py-2 sm:py-3 border border-slate-200 rounded-lg bg-slate-50 text-slate-400 cursor-not-allowed text-sm sm:text-base",children:Ot.jsx("option",{value:"all",children:"Tüm Durumlar"})}),Ot.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[Ot.jsx("option",{value:"rating",children:"Puana Göre"}),Ot.jsx("option",{value:"shipments",children:"Gönderi Sayısına Göre"}),Ot.jsx("option",{value:"name",children:"İsme Göre"})]}),Ot.jsxs("div",{className:"flex items-center gap-2 sm:col-span-2 lg:col-span-1",children:[Ot.jsx("button",{onClick:()=>g("grid"),className:"p-2 rounded-lg transition-colors "+("grid"===p?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"text-slate-500 hover:bg-slate-100"),children:Ot.jsxs("div",{className:"w-4 h-4 grid grid-cols-2 gap-0.5",children:[Ot.jsx("div",{className:"bg-current rounded-sm"}),Ot.jsx("div",{className:"bg-current rounded-sm"}),Ot.jsx("div",{className:"bg-current rounded-sm"}),Ot.jsx("div",{className:"bg-current rounded-sm"})]})}),Ot.jsx("button",{onClick:()=>g("list"),className:"p-2 rounded-lg transition-colors "+("list"===p?"bg-gradient-to-r from-slate-800 to-blue-900 text-white":"text-slate-500 hover:bg-slate-100"),children:Ot.jsxs("div",{className:"w-4 h-4 flex flex-col gap-0.5",children:[Ot.jsx("div",{className:"bg-current rounded-sm h-1"}),Ot.jsx("div",{className:"bg-current rounded-sm h-1"}),Ot.jsx("div",{className:"bg-current rounded-sm h-1"})]})})]}),Ot.jsxs("button",{onClick:()=>{d(""),x("all"),h("rating"),q(1)},className:"px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:[Ot.jsx(_,{className:"w-4 h-4"}),"Sıfırla"]})]})}),b.length>0&&Ot.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6 mb-8",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[b.length," nakliyeci seçildi"]}),Ot.jsx("button",{onClick:()=>fe("message"),className:"px-3 py-1.5 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white text-sm rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"Toplu Mesaj"}),Ot.jsx("button",{onClick:()=>fe("contract"),className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Sözleşme Güncelle"})]}),Ot.jsx("button",{onClick:()=>f([]),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Seçimi Temizle"})]})}),$?Ot.jsx(Pl,{message:"Nakliyeciler yükleniyor..."}):je.length>0?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"hidden lg:block",children:"grid"===p?Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:we.map(t=>{var s;return Ot.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 border border-slate-200 hover:shadow-lg hover:border-slate-300 transition-all duration-300 group w-full max-w-full overflow-hidden flex flex-col",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4 gap-3",children:[Ot.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[Ot.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 flex-shrink-0 rounded-xl bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center text-white font-bold text-base sm:text-lg shadow-lg",children:null==(s=t.companyName||t.fullName||"N")?void 0:s.charAt(0).toUpperCase()}),Ot.jsxs("div",{className:"min-w-0 flex-1",children:[Ot.jsx("h3",{className:"text-base sm:text-lg font-bold text-slate-900 mb-1 truncate",children:t.companyName||t.fullName||"Nakliyeci"}),t.nakliyeciCode&&Ot.jsx("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:Ot.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium break-all",children:t.nakliyeciCode})}),(t.city||t.district)&&Ot.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[Ot.jsx(T,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs sm:text-sm text-slate-600 font-medium truncate",children:[t.city,t.district].filter(Boolean).join(", ")})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[Ot.jsx("input",{type:"checkbox",checked:b.includes(t.id),onChange:()=>be(t.id),className:"w-4 h-4 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),Ot.jsx("button",{onClick:()=>{le(t.id),se(!0)},className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Nakliyeciyi Kaldır",children:Ot.jsx(pt,{className:"w-4 h-4"})})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-4 mb-4",children:[Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[t.email&&Ot.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[Ot.jsx(S,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs sm:text-sm text-slate-600 font-medium truncate max-w-full",children:t.email})]}),t.phone&&Ot.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.email&&Ot.jsx("div",{className:"hidden sm:block w-px h-4 bg-slate-300"}),Ot.jsx(z,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs sm:text-sm text-slate-500 font-medium truncate max-w-full",children:t.phone})]})]}),Ot.jsx("span",{className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold rounded-lg border ${ze("active")} flex-shrink-0`,children:"Aktif"})]}),(t.totalShipments>0||t.averageRating>0)&&Ot.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-3 sm:p-4 mb-4 border border-blue-100",children:Ot.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.totalShipments>0&&Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-lg sm:text-xl font-bold text-slate-900",children:t.totalShipments}),Ot.jsx("div",{className:"text-xs text-slate-600",children:"Gönderi"}),t.completedShipments>0&&Ot.jsxs("div",{className:"text-xs text-green-600 font-medium mt-1",children:[Math.round(t.completedShipments/t.totalShipments*100),"% Başarı"]})]}),t.averageRating>0&&Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-lg sm:text-xl font-bold text-slate-900 flex items-center justify-center gap-1",children:[parseFloat(t.averageRating).toFixed(1),Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),Ot.jsx("div",{className:"text-xs text-slate-600",children:"Ortalama Puan"})]})]})}),Ot.jsx("div",{className:"mb-4",children:Ot.jsxs("button",{onClick:()=>e(`/corporate/create-shipment?nakliyeciId=${t.id}`),className:"w-full px-4 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[Ot.jsx(R,{className:"w-5 h-5"}),Ot.jsx("span",{children:"Bu Nakliyeciye Gönderi Oluştur"})]})}),Ot.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-slate-200",children:[Ot.jsxs("button",{onClick:()=>ge(t.id),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",title:"Mesajlaş",children:[Ot.jsx(Ee,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm",children:"Mesajlaş"})]}),Ot.jsxs("button",{onClick:()=>pe(t.id),className:"px-4 py-2.5 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",title:"Detayları Görüntüle",children:[Ot.jsx(Q,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline text-sm",children:"Detay"})]})]})]},t.id)})})}):Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200",children:[Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:Ot.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded"})}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Nakliyeci"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"İletişim"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Puan"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Gönderi"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Başarı Oranı"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"Durum"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-700",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:we.map(e=>{var t;return Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsx("input",{type:"checkbox",checked:b.includes(e.id),onChange:()=>be(e.id),className:"w-4 h-4 text-blue-600 rounded"})}),Ot.jsx("td",{className:"py-4 px-4 max-w-xs",children:Ot.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[Ot.jsx("div",{className:"w-10 h-10 flex-shrink-0 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold",children:null==(t=e.companyName||e.fullName||"N")?void 0:t.charAt(0).toUpperCase()}),Ot.jsxs("div",{className:"min-w-0 flex-1",children:[Ot.jsx("div",{className:"font-medium text-slate-900 truncate",title:e.companyName||e.fullName||"Nakliyeci",children:e.companyName||e.fullName||"Nakliyeci"}),Ot.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.nakliyeciCode&&Ot.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium break-all",children:e.nakliyeciCode}),(e.city||e.district)&&Ot.jsx("span",{className:"text-sm text-slate-500 truncate",children:[e.city,e.district].filter(Boolean).join(", ")})]})]})]})}),Ot.jsxs("td",{className:"py-4 px-4 max-w-xs",children:[Ot.jsx("div",{className:"text-sm text-slate-900 truncate",title:e.email||"",children:e.email||"-"}),e.phone&&Ot.jsx("div",{className:"text-xs text-slate-500 truncate",title:e.phone,children:e.phone})]}),Ot.jsx("td",{className:"py-4 px-4",children:Number.isFinite(Number(e.averageRating))&&Number(e.averageRating)>0?Ot.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-900",children:[Number(e.averageRating).toFixed(1),Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}):Ot.jsx("div",{className:"text-sm text-slate-500",children:"-"})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsx("div",{className:"text-sm text-slate-900",children:Math.max(0,Number(e.totalShipments)||0)})}),Ot.jsx("td",{className:"py-4 px-4",children:(()=>{const t=Math.max(0,Number(e.totalShipments)||0),s=Math.max(0,Number(e.completedShipments)||0);if(t<=0)return Ot.jsx("div",{className:"text-sm text-slate-500",children:"-"});const a=Math.round(s/t*100);return Ot.jsxs("div",{className:"text-sm text-slate-900",children:[a,"%"]})})()}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${ze("active")}`,children:"Aktif"})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Ot.jsxs("button",{onClick:()=>pe(e.id),className:"px-3 py-2 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white text-xs font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",children:[Ot.jsx(Q,{className:"w-3 h-3"}),"Detay"]}),Ot.jsxs("button",{onClick:()=>ge(e.id),className:"px-3 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white text-xs font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",children:[Ot.jsx(Ee,{className:"w-3 h-3"}),"Mesajlaş"]}),Ot.jsx("button",{onClick:()=>{le(e.id),se(!0)},className:"px-2 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",title:"Nakliyeciyi Kaldır",children:Ot.jsx(pt,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})}),Ot.jsx("div",{className:"lg:hidden space-y-4",children:we.map(t=>{var s;return Ot.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-slate-200 w-full max-w-full overflow-hidden",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[Ot.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[Ot.jsx("div",{className:"w-12 h-12 flex-shrink-0 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:null==(s=t.companyName||t.fullName||"N")?void 0:s.charAt(0).toUpperCase()}),Ot.jsxs("div",{className:"min-w-0 flex-1",children:[Ot.jsx("h3",{className:"font-bold text-slate-900 text-base sm:text-lg truncate",children:t.companyName||t.fullName||"Nakliyeci"}),t.nakliyeciCode&&Ot.jsx("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:Ot.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium break-all",children:t.nakliyeciCode})}),(t.city||t.district)&&Ot.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[Ot.jsx(T,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs sm:text-sm text-slate-500 truncate",children:[t.city,t.district].filter(Boolean).join(", ")})]}),t.email&&Ot.jsxs("div",{className:"flex items-center gap-2 mt-1 min-w-0",children:[Ot.jsx(S,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs sm:text-sm text-slate-500 truncate",children:t.email})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[Ot.jsx("input",{type:"checkbox",checked:b.includes(t.id),onChange:()=>be(t.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("button",{onClick:()=>{le(t.id),se(!0)},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Nakliyeciyi Kaldır",children:Ot.jsx(pt,{className:"w-4 h-4"})})]})]}),t.phone&&Ot.jsx("div",{className:"mb-4",children:Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[Ot.jsx(z,{className:"w-4 h-4"}),Ot.jsx("span",{children:t.phone})]})}),Ot.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Durum"}),Ot.jsx("div",{className:"text-lg font-bold text-green-600",children:"Aktif"})]}),Ot.jsx("div",{className:"text-right",children:Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:t.nakliyeciCode||"-"})})]}),(t.totalShipments>0||t.averageRating>0)&&Ot.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-3 mb-3 border border-blue-100",children:Ot.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.totalShipments>0&&Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900",children:t.totalShipments}),Ot.jsx("div",{className:"text-xs text-slate-600",children:"Gönderi"}),t.completedShipments>0&&Ot.jsxs("div",{className:"text-xs text-green-600 font-medium mt-1",children:[Math.round(t.completedShipments/t.totalShipments*100),"% Başarı"]})]}),t.averageRating>0&&Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"text-lg font-bold text-slate-900 flex items-center justify-center gap-1",children:[parseFloat(t.averageRating).toFixed(1),Ot.jsx(O,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),Ot.jsx("div",{className:"text-xs text-slate-600",children:"Ortalama Puan"})]})]})}),Ot.jsx("div",{className:"mb-3",children:Ot.jsxs("button",{onClick:()=>e(`/corporate/create-shipment?nakliyeciId=${t.id}`),className:"w-full px-4 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[Ot.jsx(R,{className:"w-5 h-5"}),Ot.jsx("span",{children:"Gönderi Oluştur"})]})}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs("button",{onClick:()=>ge(t.id),className:"flex-1 px-3 py-2.5 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[Ot.jsx(Ee,{className:"w-4 h-4"}),"Mesajlaş"]}),Ot.jsxs("button",{onClick:()=>pe(t.id),className:"flex-1 px-3 py-2.5 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[Ot.jsx(Q,{className:"w-4 h-4"}),"Detay"]})]})]},t.id)})}),Ne>1&&Ot.jsx("div",{className:"mt-8",children:Ot.jsx(rr,{currentPage:Y,totalPages:Ne,onPageChange:q})})]}):Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Ot.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 border border-slate-200 hover:shadow-lg hover:border-slate-300 transition-all duration-300 w-full max-w-full overflow-hidden flex flex-col col-span-full",children:Ot.jsx(ir,{icon:C,title:"Nakliyeci bulunamadı",description:"Arama kriterlerinize uygun nakliyeci bulunamadı",action:{label:"Yeni Nakliyeci Ekle",onClick:()=>j(!0)}})})})}),Ot.jsx(Fl,{message:G,isVisible:P,onClose:()=>L(!1)}),Ot.jsx(er,{isOpen:te,onClose:()=>{se(!1),le(null)},title:"Nakliyeciyi Kaldır",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Bu nakliyeciyi favorilerinizden kaldırmak istediğinizden emin misiniz? Bu işlem geri alınamaz."}),Ot.jsxs("div",{className:"flex gap-3 justify-end",children:[Ot.jsx("button",{onClick:()=>{se(!1),le(null)},className:"px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"İptal"}),Ot.jsx("button",{onClick:()=>ae&&(async e=>{ee(e);try{const t=await Kr(e);if(!t.ok||!1===t.success){const e=t.message||t.error||"Nakliyeci kaldırılamadı";return ei("Nakliyeci kaldırılırken hata:",e),F(e),void L(!0)}F(t.message||"✅ Nakliyeci çıkarıldı"),L(!0),ye(),se(!1),le(null)}catch(t){ei("Nakliyeci silme sırasında hata:",t),F(t.message||"❌ Bir hata oluştu, tekrar deneyin"),L(!0)}finally{ee(null)}})(ae),disabled:null!==X,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:null!==X?"Kaldırılıyor...":"Kaldır"})]})]})}),ne&&(()=>{var t;const a=i.find(e=>e.id===ne);return a?Ot.jsx(er,{isOpen:ie,onClose:()=>{re(!1),de(null),s({})},title:`${a.companyName||a.fullName||"Nakliyeci"} - Detaylar`,children:Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6 border border-slate-200",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center text-white font-bold text-2xl shadow-lg flex-shrink-0",children:null==(t=a.companyName||a.fullName||"N")?void 0:t.charAt(0).toUpperCase()}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:a.companyName||a.fullName||"Nakliyeci"}),a.nakliyeciCode&&Ot.jsx("div",{className:"flex items-center gap-2 mb-2",children:Ot.jsx("span",{className:"text-sm bg-blue-100 text-blue-800 px-3 py-1 rounded-lg font-semibold",children:a.nakliyeciCode})}),(a.city||a.district)&&Ot.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[Ot.jsx(T,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm",children:[a.city,a.district].filter(Boolean).join(", ")})]})]})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.email&&Ot.jsx("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(S,{className:"w-5 h-5 text-slate-400"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500 font-medium mb-1",children:"E-posta"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.email})]})]})}),a.phone&&Ot.jsx("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(z,{className:"w-5 h-5 text-slate-400"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500 font-medium mb-1",children:"Telefon"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.phone})]})]})})]}),(a.totalShipments>0||a.averageRating>0)&&Ot.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[Ot.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-4",children:"Performans Özeti"}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.totalShipments>0&&Ot.jsxs("div",{className:"text-center bg-white rounded-lg p-4 border border-blue-100",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:a.totalShipments}),Ot.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Toplam Gönderi"}),a.completedShipments>0&&Ot.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:[Math.round(a.completedShipments/a.totalShipments*100),"% Başarı Oranı"]})]}),a.averageRating>0&&Ot.jsxs("div",{className:"text-center bg-white rounded-lg p-4 border border-blue-100",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-slate-900 mb-1 flex items-center justify-center gap-1",children:[parseFloat(a.averageRating).toFixed(1),Ot.jsx(O,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"})]}),Ot.jsx("div",{className:"text-xs text-slate-600",children:"Ortalama Puan"})]})]})]}),Ot.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[Ot.jsxs("button",{onClick:()=>(e=>{(null==e?void 0:e.id)&&(he({id:String(e.id),name:e.companyName||e.fullName||"Nakliyeci",email:e.email||"",type:"nakliyeci"}),ce(!0))})(a),className:"px-4 py-3 bg-yellow-50 hover:bg-yellow-100 text-yellow-800 rounded-lg font-semibold transition-all duration-200 shadow-sm hover:shadow-md border border-yellow-200 flex items-center justify-center gap-2",children:[Ot.jsx(O,{className:"w-5 h-5"}),"Yorumları Gör"]}),Ot.jsxs("button",{onClick:()=>{re(!1),de(null),s({}),e(`/corporate/messages?userId=${a.id}`)},className:"flex-1 px-4 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[Ot.jsx(Ee,{className:"w-5 h-5"}),"Mesajlaş"]}),Ot.jsxs("button",{onClick:()=>{re(!1),de(null),s({}),e(`/corporate/create-shipment?nakliyeciId=${a.id}`)},className:"flex-1 px-4 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[Ot.jsx(R,{className:"w-5 h-5"}),"Gönderi Oluştur"]})]})]})}):null})(),oe&&xe&&Ot.jsx(tr,{isOpen:oe,onClose:()=>{ce(!1),he(null)},mode:"view",ratedUser:xe,currentUser:{id:"0",name:"Kullanıcı"}}),Ot.jsx(er,{isOpen:y,onClose:()=>{j(!1),U(""),Z(null)},title:"Favori Nakliyeci Ekle",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Nakliyeci kodunu veya e-posta adresini girerek favorilerinize ekleyebilirsiniz."}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nakliyeci Kodu veya E-posta"}),Ot.jsx("input",{type:"text",value:H,onChange:e=>{U(e.target.value),Z(null)},placeholder:"Örn: lojistik@firma.com veya YN-12345",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),W&&Ot.jsx("p",{className:"mt-2 text-sm text-red-600",children:W})]}),Ot.jsxs("div",{className:"flex gap-3 justify-end",children:[Ot.jsx("button",{onClick:()=>{j(!1),U(""),Z(null)},className:"px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"İptal"}),Ot.jsx("button",{onClick:async()=>{if(H.trim()){J(!0),Z(null);try{const e=await Ir({code:H.includes("@")?null:H,email:H.includes("@")?H:null});if(si("Response data:",e),!e.ok||!1===e.success){const t=e.message||e.error||"Nakliyeci eklenemedi";return ei("Nakliyeci eklenirken hata:",t),void Z(t)}F(e.message||"✅ Nakliyeci eklendi!"),L(!0),U(""),Z(null),ye(),j(!1)}catch(e){ei("Nakliyeci ekleme sırasında hata:",e),Z(e.message||"Beklenmeyen bir hata oluştu")}finally{J(!1)}}else Z("Lütfen nakliyeci kodu veya e-posta girin")},disabled:V||!H.trim(),className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:V?"Ekleniyor...":"Ekle"})]})]})})]})]})}const $r=()=>{const{showToast:e}=ka(),[t]=c(),[s,a]=l.useState(null),[i,r]=l.useState(""),[n,d]=l.useState(!1),[o,m]=l.useState([]),[x,u]=l.useState([]),[h,p]=l.useState(!1),[g,b]=l.useState({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),y=[{step:1,title:"Firma Profilini Tamamlayın",description:"Şirket bilgilerinizi, vergi/fatura bilgilerinizi ve yetkili kişileri ekleyin",icon:C},{step:2,title:"Ekip ve Yetkileri Ayarlayın",description:"Kullanıcı ekleyin, rol ve erişim yetkilerini tanımlayın",icon:R},{step:3,title:"Gönderi(leri) Oluşturun",description:"Tekli veya toplu gönderi oluşturun; teslimat kriterlerini belirleyin",icon:O},{step:4,title:"Teklifleri Değerlendirin",description:"Teklifleri karşılaştırın, gerekirse mesajlaşın ve uygun teklifi seçin",icon:Ee},{step:5,title:"Takip ve Raporlayın",description:"Canlı takip, teslimat doğrulama ve rapor/analitik ekranlarıyla süreci yönetin",icon:T}],j=[{category:"Başlangıç",icon:ve,items:[{question:"YolNext Kurumsal nasıl çalışır?",answer:"YolNext Kurumsal, şirketlerin gönderilerini tek panelden yönetmesini sağlayan B2B lojistik platformudur. Gönderi oluşturur, teklif toplar, ekip içinde rol/yetki yönetimi ile süreci koordine eder ve teslimat sürecini raporlayarak takip edersiniz."},{question:"Hesap oluşturmak ücretsiz mi?",answer:"Kurumsal hesap oluşturma ücretsizdir. Ücretlendirme, gönderiniz için alınan tekliflere ve seçtiğiniz taşıma hizmetine göre değişebilir."},{question:"Şirket içinde birden fazla kullanıcı ekleyebilir miyim?",answer:"Evet. Kurumsal panelde ekip üyeleri ekleyebilir, görev ve yetkilendirmeleri belirleyerek gönderi ve teklif süreçlerini ekip içinde yönetebilirsiniz."}]},{category:"Gönderi Oluşturma",icon:R,items:[{question:"Gönderi nasıl oluştururum?",answer:'Kurumsal panelden "Gönderi Oluştur" adımına gidin. Kategori/taşıma tipi, toplama ve teslimat adresleri, tarih aralığı ve yük detaylarını girip yayınlayın. Yayın sonrası nakliyeciler teklif göndermeye başlar.'},{question:"Toplu gönderi oluşturabilir miyim?",answer:"Evet. Birden fazla gönderiyi toplu şekilde oluşturup yönetebilirsiniz. Süreçleri tek panelden izleyebilir ve ekip içinde iş paylaşımı yapabilirsiniz."},{question:"Gönderi fiyatını kim belirler?",answer:"Fiyatı nakliyeciler teklif verirken belirler. Siz fiyat, koşul ve SLA’lara göre teklifleri karşılaştırıp seçim yapabilirsiniz."},{question:"Gönderi oluştururken hangi bilgiler gereklidir?",answer:"Kategori/taşıma tipi, adresler, tarih aralığı, yük detayı (ağırlık/hacim/paketleme) ve varsa özel talimatlar gereklidir. Kurumsal gönderilerde fatura/irsaliye gibi süreç bilgileri de istenebilir."}]},{category:"Teklifler ve Mesajlaşma",icon:$,items:[{question:"Teklifleri nasıl görüntülerim?",answer:"Gönderi detayından teklifleri görüntüleyebilirsiniz. Teklifleri fiyat, süre, kapasite ve performans kriterlerine göre karşılaştırabilirsiniz."},{question:"Teklif kabul etmeden önce nakliyeci ile görüşebilir miyim?",answer:"Evet. Teklif detayından mesajlaşarak şartları netleştirebilir, teslimat şartlarını ve evrak ihtiyaçlarını konuşabilirsiniz."},{question:"Teklifi seçince süreç nasıl başlar?",answer:"Uygun teklifi seçtiğinizde süreç başlar ve ilgili nakliyeciyle eşleşirsiniz. Bu aşamada mesajlaşma üzerinden teslimat kriterleri, zamanlama, evrak ihtiyaçları ve operasyon detayları netleştirilebilir."},{question:"Ücret/teklif detaylarını nasıl netleştiririm?",answer:"Teklif detaylarını mesajlaşma üzerinden netleştirebilir; fiyat, teslimat planı, paketleme/evrak koşulları ve SLA beklentilerinizi yazılı şekilde teyit edebilirsiniz."}]},{category:"Takip ve Teslimat",icon:T,items:[{question:"Gönderimi nasıl takip ederim?",answer:"Kurumsal panelde gönderi durumlarını ve teslimat adımlarını takip edebilirsiniz. Canlı takip ve bildirimler ile süreç boyunca görünürlük sağlanır."},{question:"Gönderi durumları nelerdir?",answer:"Genellikle teklif bekleniyor, teklif seçildi, yükleme, yolda, teslimat ve teslim edildi gibi adımlar bulunur. Her adım panelde görüntülenir."},{question:"Teslimat süresi ne kadar?",answer:"Teslimat süresi mesafe, taşıma tipi ve nakliyecinin planına göre değişir. Teklif içerisinde tahmini süre ve teslimat planı yer alır."}]},{category:"İptal",icon:te,items:[{question:"Gönderim iptal edilebilir mi?",answer:"Gönderi, taşıma başlamadan önce uygun durumdayken iptal edilebilir. Taşıma başladıktan sonra iptal koşulları değişebilir."},{question:"İptal sonrası süreç nasıl ilerler?",answer:"İptal koşulları; iptal zamanı, anlaşma şartları ve gönderinin hangi aşamada olduğuna göre değişebilir. Detay için ilgili gönderi kaydını inceleyebilir veya destek talebi oluşturabilirsiniz."}]}],v=async()=>{var e;try{p(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=await fetch(Zs("/api/support/tickets"),{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json(),a=(null==(e=null==t?void 0:t.data)?void 0:e.tickets)||(null==t?void 0:t.data)||(null==t?void 0:t.tickets)||[];m(Array.isArray(a)?a:[])}}catch(t){ei("Error loading tickets:",t)}finally{p(!1)}};l.useEffect(()=>{(async()=>{try{const e=await fetch(Zs("/api/support/categories"));if(e.ok){const t=await e.json(),s=(null==t?void 0:t.data)||(null==t?void 0:t.categories)||[];u(Array.isArray(s)?s:[])}}catch(e){ei("Error loading categories:",e)}})(),v()},[]),l.useEffect(()=>{const e=String(t.get("openSupport")||"").toLowerCase(),s="1"===e||"true"===e||"yes"===e,a=t.get("category"),l=t.get("priority"),i=t.get("subject"),r=t.get("description"),n=t.get("relatedShipmentId")||t.get("shipmentId");(a||l||i||r||n)&&b(e=>({...e,category:a??e.category,priority:l??e.priority,subject:i??e.subject,description:r??e.description,relatedShipmentId:n??e.relatedShipmentId})),s&&(d(!0),window.setTimeout(()=>{var e,t;null==(e=document.getElementById("support-section"))||e.scrollIntoView({behavior:"smooth",block:"start"});const s=document.getElementById("support-category")||document.getElementById("support-category-text");null==(t=null==s?void 0:s.focus)||t.call(s)},50))},[t]);const N=l.useCallback(()=>{d(!0),window.setTimeout(()=>{var e,t;null==(e=document.getElementById("support-section"))||e.scrollIntoView({behavior:"smooth",block:"start"});const s=document.getElementById("support-category")||document.getElementById("support-category-text");null==(t=null==s?void 0:s.focus)||t.call(s)},50)},[]),k=j.flatMap(e=>e.items),w=k.filter(e=>e.question.toLowerCase().includes(i.toLowerCase())||e.answer.toLowerCase().includes(i.toLowerCase()));return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Yardım ve Destek Merkezi - Kurumsal | YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext Yardım ve Destek Merkezi - SSS, kapsamlı rehberler ve profesyonel destek talebi hizmetleri"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/corporate/dashboard"},{label:"Yardım ve Destek Merkezi",href:"/corporate/help"}]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(ce,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"YolNext Yardım ve Destek Merkezi"}),Ot.jsx("p",{className:"text-slate-200 text-lg leading-relaxed",children:"Türkiye'nin lider lojistik platformunda size yardımcı olmak için buradayız. Hızlı cevaplar, kapsamlı rehberler ve profesyonel destek hizmetlerimizden faydalanın."})]})]}),Ot.jsx("div",{className:"max-w-2xl",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-300 w-5 h-5"}),Ot.jsx("input",{type:"text",placeholder:"Sorunuzu arayın...",value:i,onChange:e=>r(e.target.value),className:"w-full pl-12 pr-4 py-3.5 border border-white/20 bg-white/10 backdrop-blur-sm rounded-xl focus:border-white/40 focus:ring-2 focus:ring-white/20 outline-none transition-all text-white placeholder:text-slate-300"})]})})]})]}),!1,Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Hızlı Başlangıç Rehberi"}),Ot.jsx("p",{className:"text-slate-600",children:"5 adımda YolNext'i kullanmaya başlayın"})]})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:y.map((e,t)=>{const s=e.icon;return Ot.jsxs("div",{className:"relative",children:[Ot.jsxs("div",{className:"bg-slate-50 border border-gray-100 rounded-lg p-5 h-full",children:[Ot.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg mb-3 mx-auto",children:Ot.jsx(s,{className:"w-5 h-5 text-white"})}),Ot.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-slate-800 to-blue-900 text-white rounded-full flex items-center justify-center font-bold text-xs",children:e.step}),Ot.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2 text-center",children:e.title}),Ot.jsx("p",{className:"text-xs text-slate-600 text-center",children:e.description})]}),t<y.length-1&&Ot.jsx("div",{className:"hidden md:block absolute top-1/2 -right-2 transform -translate-y-1/2",children:Ot.jsx(K,{className:"w-4 h-4 text-slate-400"})})]},t)})})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx(W,{className:"w-6 h-6 text-slate-900"}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Sık Sorulan Sorular"})]}),i?Ot.jsxs("div",{className:"mb-4 text-slate-600 text-sm",children:[Ot.jsx("strong",{children:w.length})," sonuç bulundu"]}):Ot.jsx("div",{className:"mb-6",children:Ot.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((e,t)=>{const s=e.icon;return Ot.jsxs("button",{onClick:()=>{const t=j.findIndex(t=>t.category===e.category),s=j.slice(0,t).reduce((e,t)=>e+t.items.length,0);a(s)},className:"flex items-center gap-2 px-3 py-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 border border-gray-200 transition-colors text-sm font-medium",children:[Ot.jsx(s,{className:"w-4 h-4"}),e.category]},t)})})}),Ot.jsx("div",{className:"space-y-3",children:(i?w:k).map((e,t)=>{const l=s===t;return Ot.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:border-blue-300 transition-all",children:[Ot.jsxs("button",{onClick:()=>(e=>{a(s===e?null:e)})(t),className:"w-full p-4 flex items-center justify-between text-left hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-4 h-4 text-slate-600"})})}),Ot.jsx("div",{className:"flex-1",children:Ot.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1",children:e.question})})]}),l?Ot.jsx(Ue,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"}):Ot.jsx(Ve,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"})]}),l&&Ot.jsx("div",{className:"px-4 pb-4 pt-0 border-t border-gray-200",children:Ot.jsx("div",{className:"pl-11 pt-3",children:Ot.jsx("p",{className:"text-slate-600 leading-relaxed text-sm",children:e.answer})})})]},t)})}),i&&0===w.length&&Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(me,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),Ot.jsx("p",{className:"text-slate-600",children:"Aradığınız soru bulunamadı. Lütfen farklı bir arama terimi deneyin."})]})]}),!1,!1,n&&Ot.jsxs("div",{id:"support-section",className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsxs("div",{className:"relative z-10 text-center mb-8",children:[Ot.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:Ot.jsx(he,{className:"w-8 h-8 text-white"})}),Ot.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Profesyonel Destek Hizmeti"}),Ot.jsx("p",{className:"text-slate-200 max-w-2xl mx-auto text-lg",children:"FAQ bölümünde aradığınızı bulamadınız mı? Uzman destek ekibimizden kişiselleştirilmiş yardım alın."})]}),Ot.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(G,{className:"w-5 h-5 text-slate-900"}),"Mevcut Destek Talepleriniz (",o.length,")"]}),h?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-3"}),Ot.jsx("p",{className:"text-slate-600",children:"Destek talepleri yükleniyor..."})]}):0===o.length?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(f,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Henüz destek talebiniz bulunmuyor"}),Ot.jsx("p",{className:"text-slate-600",children:"İlk destek talebinizi oluşturarak başlayabilirsiniz."})]}):Ot.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:Array.isArray(o)&&o.map(e=>Ot.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsx("h4",{className:"font-medium text-slate-900 text-sm",children:e.subject}),Ot.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["#",e.ticket_number]})]}),Ot.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[Ot.jsx(L,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("tr-TR")]})]},e.id))})]}),Ot.jsxs("div",{id:"new-ticket-form",className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(ue,{className:"w-5 h-5 text-slate-900"}),"Yeni Destek Talebi Oluştur"]}),Ot.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),g.category&&g.subject&&g.description)try{p(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=new FormData;s.append("category",g.category),s.append("priority",g.priority),s.append("subject",g.subject),s.append("description",g.description),g.relatedShipmentId&&s.append("relatedShipmentId",g.relatedShipmentId);const a=await fetch(Zs("/api/support/tickets"),{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s});if(a.ok)yr(e,"SUPPORT_TICKET_CREATED","success"),b({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),v();else{const t=await a.json().catch(()=>null);yr(e,"OPERATION_FAILED","error",(null==t?void 0:t.message)||"Destek talebi oluşturulurken bir hata oluştu. Lütfen tekrar deneyin.")}}catch(s){yr(e,"NETWORK_ERROR","error")}finally{p(!1)}else yr(e,"REQUIRED_FIELDS","error")},className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Kategori *"}),x.length>0?Ot.jsxs("select",{id:"support-category",value:g.category,onChange:e=>b({...g,category:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",required:!0,children:[Ot.jsx("option",{value:"",children:"Kategori seçin"}),x.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]}):Ot.jsx("input",{id:"support-category-text",type:"text",value:g.category,onChange:e=>b({...g,category:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",placeholder:"Örn: İptal, Hasar, Ödeme, Şikâyet",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Konu *"}),Ot.jsx("input",{type:"text",value:g.subject,onChange:e=>b({...g,subject:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",placeholder:"Destek talebinizin konusu",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Açıklama *"}),Ot.jsx("textarea",{value:g.description,onChange:e=>b({...g,description:e.target.value}),rows:4,className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none bg-white text-slate-900",placeholder:"Sorununuzu detaylı olarak açıklayın",required:!0})]}),Ot.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Gönderiliyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ue,{className:"w-4 h-4"}),"Destek Talebi Oluştur"]})})]})]})]})]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-24 -translate-x-24"}),Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-white"}),Ot.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Hala Yardıma İhtiyacınız mı Var?"}),Ot.jsx("p",{className:"text-slate-200 mb-8 max-w-2xl mx-auto",children:"Sorularınız için bizimle iletişime geçebilirsiniz. Destek ekibimiz size yardımcı olmaktan mutluluk duyar."}),Ot.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:Ot.jsxs("button",{type:"button",onClick:N,className:"bg-white text-slate-900 px-6 py-3 rounded-lg font-semibold hover:bg-slate-100 transition-colors flex items-center gap-2 shadow-lg",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Destek Talebi Oluştur"]})})]})]})]})]})};function Br(){const e=o(),{user:t}=sa(),[s,a]=l.useState(()=>Date.now()),[i,r]=l.useState("pending"),[n,d]=l.useState(""),[c,m]=l.useState("date"),[x,u]=l.useState(!1),[h,p]=l.useState(!1),[g,b]=l.useState(!1),[f,y]=l.useState(!1),[j,v]=l.useState(!1),[N,k]=l.useState(null),[w,S]=l.useState(null),[z,C]=l.useState(""),[A,D]=l.useState(null),[E,_]=l.useState(null),[I,M]=l.useState(null),[B,P]=l.useState(!1),[F,Y]=l.useState(!1),[q,H]=l.useState(""),[V,Z]=l.useState([]),[X,ee]=l.useState({totalOffers:0,pendingOffers:0,acceptedOffers:0,rejectedOffers:0,averagePrice:0,unreadCount:0}),te=l.useRef(null),se=l.useRef(!1),ae=l.useRef(!1);l.useEffect(()=>{const e=setInterval(()=>a(Date.now()),3e4);return()=>clearInterval(e)},[]);const le=l.useCallback(async()=>{if(ae.current)return;ae.current=!0,P(!0);const e=setTimeout(()=>{P(!1),ae.current=!1},1e4);try{const e=localStorage.getItem("user")?(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}})():null,t=(null==e||e.id,localStorage.getItem("authToken")),s=new AbortController,a=setTimeout(()=>s.abort(),1e4),l=await fetch(Zs("/api/offers/corporate"),{headers:{Authorization:`Bearer ${t||""}`,"Content-Type":"application/json"},signal:s.signal});if(clearTimeout(a),!l.ok)throw new Error("Teklifler yüklenemedi");const i=await l.json(),r=i.data||i.offers||(Array.isArray(i)?i:[]),n=e=>{const t=String(e||"").toLowerCase();return"accepted"===t||"offer_accepted"===t?"accepted":"rejected"===t||"cancelled"===t||"canceled"===t?"rejected":"pending"},d=(e,t=0)=>{if("number"==typeof e)return Number.isFinite(e)?e:t;if("string"==typeof e){const s=parseFloat(e.replace(/[^0-9.,-]/g,"").replace(",","."));return Number.isFinite(s)?s:t}return t},o=e=>{if(!e)return"";const t=e instanceof Date?e:new Date(e);return Number.isFinite(t.getTime())?t.toISOString():""},c=e=>{const t=(null==e?void 0:e.expiresAt)||(null==e?void 0:e.expires_at)||(null==e?void 0:e.expiresat),s=String(t||"").trim();if(s)return s;const a=(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||(null==e?void 0:e.date),l=a?new Date(a):null;return l&&Number.isFinite(l.getTime())?new Date(l.getTime()+18e5).toISOString():""},m=r.map(e=>{var t,s,a,l,i;return{id:String(e.id),shipmentId:e.shipmentId?String(e.shipmentId):e.shipment_id?String(e.shipment_id):void 0,shipmentTitle:$l(e.shipmentTitle||e.title||"Gönderi"),carrierName:e.carrierName||(null==(t=e.carrier)?void 0:t.name)||"Nakliyeci",carrierId:e.carrierId?String(e.carrierId):(null==(s=e.carrier)?void 0:s.id)?String(e.carrier.id):void 0,carrierRating:Number(e.carrierRating||(null==(a=e.carrier)?void 0:a.rating)||0)||0,carrierVerified:e.carrierVerified||(null==(l=e.carrier)?void 0:l.verified)||!1,carrierReviews:Number(e.carrierReviews||(null==(i=e.carrier)?void 0:i.reviews)||0)||0,carrierExperience:String(e.carrierExperience||"").trim(),price:d(e.price??e.offerPrice??e.offer_price,0),estimatedDelivery:o(e.estimatedDelivery||e.estimated_delivery||e.deliveryDate||e.delivery_date),expiresAt:c(e),message:Bl(e.message||e.notes||""),status:n(e.status),createdAt:o(e.createdAt||e.created_at||e.date),pickupAddress:Rl(e.pickupAddress||e.pickup_address||""),deliveryAddress:Rl(e.deliveryAddress||e.delivery_address||""),weight:e.weight||"",dimensions:e.dimensions||e.size||"",specialFeatures:e.specialFeatures||e.special_features||[],tracking:e.tracking||!1,priority:e.priority||"medium",trackingCode:e.trackingCode||`SHP-${e.id}`,carrierLogo:e.carrierLogo||(e.carrierName?e.carrierName.charAt(0).toUpperCase():"N"),recentComments:e.recentComments||[],responseTime:String(e.responseTime||"").trim(),successRate:Number(e.successRate||0)||0}});Z(m);const x=m.length,u=m.filter(e=>"pending"===e.status).length,h=m.filter(e=>"accepted"===e.status).length,p=m.filter(e=>"rejected"===e.status).length,g=x>0?m.reduce((e,t)=>e+(Number.isFinite(t.price)?t.price:0),0)/x:0;ee(i.stats||{totalOffers:x,pendingOffers:u,acceptedOffers:h,rejectedOffers:p,averagePrice:g,unreadCount:0})}catch(t){Z([]),ee({totalOffers:0,pendingOffers:0,acceptedOffers:0,rejectedOffers:0,averagePrice:0,unreadCount:0})}finally{P(!1),ae.current=!1,clearTimeout(e)}},[]);l.useEffect(()=>{const e=null==t?void 0:t.id,s=String((null==t?void 0:t.role)||"corporate").toLowerCase();e&&(localStorage.setItem(`yolnext:lastSeen:offers:${e}:${s}`,(new Date).toISOString()),window.dispatchEvent(new Event("yolnext:refresh-badges")))},[t]),l.useEffect(()=>{se.current=j},[j]),l.useEffect(()=>{le()},[]),l.useEffect(()=>()=>{te.current&&clearTimeout(te.current)},[]);const re=[...V.filter(e=>{const t="all"===i||e.status===i,s=!n||""===n.trim()||(e.shipmentTitle||"").toLowerCase().includes(n.toLowerCase())||(e.carrierName||"").toLowerCase().includes(n.toLowerCase())||(e.trackingCode||"").toLowerCase().includes(n.toLowerCase());return t&&s})].sort((e,t)=>"price"===c?Number(e.price||0)-Number(t.price||0):"rating"===c?Number(t.carrierRating||0)-Number(e.carrierRating||0):new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),ne=e=>{switch(e){case"accepted":return{text:"Kabul Edildi",color:"bg-green-100 text-green-800"};case"rejected":return{text:"Reddedildi",color:"bg-red-100 text-red-800"};case"pending":return{text:"Beklemede",color:"bg-yellow-100 text-yellow-800"};default:return{text:"Bilinmiyor",color:"bg-gray-100 text-gray-800"}}},de=e=>{switch(e){case"accepted":return Ot.jsx(J,{className:"w-3 h-3 mr-1"});case"rejected":return Ot.jsx(ie,{className:"w-3 h-3 mr-1"});default:return Ot.jsx(L,{className:"w-3 h-3 mr-1"})}},oe=async e=>{M(e),await ce()},ce=async()=>{var t,s;if(!I)return;P(!0),b(!1);const a=setTimeout(()=>{P(!1),H("Teklif kabul işlemi zaman aşımına uğradı. Lütfen tekrar deneyin."),Y(!0)},1e4);try{const l=localStorage.getItem("authToken"),i=await fetch(Zs(`/api/offers/${I}/accept`),{method:"POST",headers:{Authorization:`Bearer ${l||""}`,"Content-Type":"application/json"}}),r=await i.json().catch(()=>null);if(!i.ok)throw clearTimeout(a),new Error((null==r?void 0:r.message)||"Teklif kabul edilemedi");clearTimeout(a);const n=V.find(e=>String(e.id)===String(I))||null,d=(null==(t=null==r?void 0:r.data)?void 0:t.carrierId)?String(r.data.carrierId):(null==n?void 0:n.carrierId)?String(n.carrierId):null,o=(null==(s=null==r?void 0:r.data)?void 0:s.shipmentId)?String(r.data.shipmentId):(null==n?void 0:n.shipmentId)?String(n.shipmentId):null;Ga("offer_accept_success",{offerId:I,shipmentId:o,carrierId:d}),k(d),S(o),C(`Merhaba, ödeme detaylarını netleştirelim. İş No: #${o||""}`.trim()),v(!0),H("Teklif başarıyla kabul edildi. Ödeme detaylarını mesajlaşma üzerinden yazılı olarak netleştirmenizi öneririz. Gönderilerinize yönlendiriliyorsunuz."),Y(!0),Z(e=>e.filter(e=>e.id!==I)),ee(e=>({...e,pendingOffers:Math.max(0,e.pendingOffers-1),acceptedOffers:e.acceptedOffers+1})),setTimeout(()=>{Y(!1),e("/corporate/shipments",{state:{refresh:!0}})},2e3)}catch(l){clearTimeout(a),H("Teklif kabul edilemedi. Lütfen tekrar deneyin."),Y(!0)}finally{clearTimeout(a),P(!1),M(null)}},xe=e=>"accepted"===String(e||"").trim();return B?Ot.jsx(Pl,{message:"Teklifler yükleniyor..."}):F?Ot.jsx(Fl,{isVisible:F,message:q,onClose:()=>Y(!1)}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Tekliflerim - YolNext Kurumsal"}),Ot.jsx("meta",{name:"description",content:"YolNext kurumsal panel teklifler sayfası"})]}),Ot.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(W,{className:"w-8 h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-3",children:["Tekliflerinizi"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Yönetin"})]}),Ot.jsx("p",{className:"text-lg text-slate-600",children:"Gönderileriniz için gelen teklifleri değerlendirin ve yönetin"})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"corporate.offers",isEmpty:!B&&0===V.length,icon:W,title:"Teklif Yönetimi",description:"Gelen teklifleri inceleyin, nakliyeci profillerini değerlendirin ve en uygun teklifi seçin. Teklif kabul edildiğinde süreç başlar; ödeme detaylarını mesajlaşma üzerinden yazılı netleştirmeniz önerilir.",primaryAction:{label:"Gönderi Oluştur",to:"/corporate/create-shipment"},secondaryAction:{label:"Gönderiler",to:"/corporate/shipments"}})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(W,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:X.totalOffers}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(K,{className:"w-3 h-3 text-blue-600"}),Ot.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Toplam Teklif"})]})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Toplam Teklif Sayısı"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Gelen tüm teklifler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-orange-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:X.pendingOffers}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(K,{className:"w-3 h-3 text-orange-600"}),Ot.jsx("span",{className:"text-xs text-orange-600 font-semibold",children:"Bekleyen Teklif"})]})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Bekleyen Teklif Sayısı"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Karar bekleyen teklifler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-green-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:Ot.jsx(J,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:X.acceptedOffers}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(K,{className:"w-3 h-3 text-green-600"}),Ot.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Kabul Edilen Teklif"})]})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Kabul Edilen Teklif Sayısı"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Onaylanan teklifler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-purple-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center",children:Ot.jsx($,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:["₺",X.averagePrice.toLocaleString()]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(K,{className:"w-3 h-3 text-purple-600"}),Ot.jsx("span",{className:"text-xs text-purple-600 font-semibold",children:"Ortalama Teklif Fiyatı"})]})]})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Tüm tekliflerin ortalaması"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"En uygun fiyatları yakalayın"})]})]}),Ot.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Teklif ara...",value:n,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ot.jsxs("select",{value:i,onChange:e=>r(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"pending",children:"Beklemede"}),Ot.jsx("option",{value:"accepted",children:"Kabul Edilen"}),Ot.jsx("option",{value:"rejected",children:"Reddedilen"})]}),Ot.jsxs("select",{value:c,onChange:e=>m(e.target.value),className:"px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ot.jsx("option",{value:"date",children:"Tarihe Göre"}),Ot.jsx("option",{value:"price",children:"Fiyata Göre"}),Ot.jsx("option",{value:"rating",children:"Nakliyeci Puanına Göre"})]})]})}),Ot.jsx("div",{className:"space-y-4",children:re.length>0?re.map(e=>Ot.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 hover:shadow-xl transition-all duration-300 group",children:Ot.jsxs("div",{className:"p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(W,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-600 transition-colors",children:e.shipmentTitle}),Ot.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[Ot.jsx("span",{className:"font-mono bg-slate-100 text-slate-800 px-2 py-1 rounded",children:e.trackingCode}),Ot.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("tr-TR")})]})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["₺",e.price.toLocaleString()]}),Ot.jsxs("div",{className:"text-sm text-slate-500",children:["Teslimat: ",e.estimatedDelivery]}),(()=>{const t=String(e.expiresAt||"").trim();if(!t)return null;const a=new Date(t).getTime();if(!Number.isFinite(a))return null;const l=a-s,i=Math.max(0,Math.ceil(l/6e4)),r=l<=0,n=r?"text-red-600":i<=5?"text-amber-700":"text-slate-500";return Ot.jsxs("div",{className:`mt-1 text-xs font-semibold ${n}`,children:["Teklif süresi: ",r?"Doldu":`${i} dk kaldı`]})})(),Ot.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:["Platform hizmet bedeli (nakliyeci): ₺",sr(Number(e.price||0)).toLocaleString("tr-TR")]})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(T,{className:"w-4 h-4"}),Ot.jsxs("span",{children:[e.pickupAddress," → ",e.deliveryAddress]})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(R,{className:"w-4 h-4"}),Ot.jsxs("span",{children:[e.weight," • ",e.dimensions]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ${ne(e.status).color}`,children:[de(e.status),ne(e.status).text]}),Ot.jsxs("span",{className:"px-3 py-1 rounded-lg text-xs font-semibold "+("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:["high"===e.priority?"Yüksek":"medium"===e.priority?"Orta":"Düşük"," ","Öncelik"]})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:e.carrierLogo}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"font-semibold text-slate-900",children:e.carrierName}),e.carrierVerified&&Ot.jsx(U,{className:"w-4 h-4 text-green-600"})]}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[Number(e.carrierRating||0)>0?Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(O,{className:"w-3 h-3 text-yellow-500 fill-current"}),Ot.jsx("span",{children:e.carrierRating})]}):Ot.jsx("span",{className:"text-slate-400",children:"Değerlendirme bekleniyor"}),Ot.jsx("span",{children:"•"}),Number(e.carrierReviews||0)>0?Ot.jsxs("span",{children:[e.carrierReviews," değerlendirme"]}):Ot.jsx("span",{className:"text-slate-400",children:"Değerlendirme bekleniyor"}),e.carrierExperience&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("span",{children:"•"}),Ot.jsxs("span",{children:[e.carrierExperience," deneyim"]})]})]})]})]}),Ot.jsx("div",{className:"flex items-center gap-2",children:e.tracking&&Ot.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-lg",children:"Takip ✓"})})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-sm text-slate-500",children:e.message.length>60?e.message.substring(0,60)+"...":e.message}),Ot.jsxs("div",{className:"flex items-center gap-2",children:["pending"===e.status&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("button",{onClick:()=>oe(e.id),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",children:[Ot.jsx(J,{className:"w-4 h-4"}),"Kabul Et"]}),Ot.jsxs("button",{onClick:()=>{_(e.id),u(!0)},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",children:[Ot.jsx(ie,{className:"w-4 h-4"}),"Reddet"]})]}),Ot.jsxs("button",{onClick:()=>(e=>{const t=V.find(t=>t.id===e);t&&(D(t),p(!0))})(e.id),className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 text-sm font-medium rounded-lg transition-colors flex items-center gap-1",children:[Ot.jsx(Q,{className:"w-4 h-4"}),"Detay"]}),Ot.jsxs("button",{onClick:()=>{return t=e.status,void(xe(t)&&y(!0));var t},disabled:!xe(e.status),title:xe(e.status)?"Nakliyeci ile mesajlaş":"Mesajlaşma teklif kabul edilince açılır",className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1 "+(xe(e.status)?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-gray-50 text-gray-400 cursor-not-allowed"),children:[Ot.jsx(Ee,{className:"w-4 h-4"}),"Mesajlaş"]})]})]})]})},e.id)):Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6 text-center col-span-full",children:Ot.jsx(ir,{icon:W,title:"Henüz Teklif Yok",description:"Gönderi oluşturun, nakliyeciler size teklif sunacak. Ortalama bekleme süresi 5-15 dakikadır. 24 saat içinde teklif gelmezse otomatik bildirim alırsınız.",action:{label:"Yeni Gönderi Oluştur",onClick:()=>e("/corporate/create-shipment")}})})}),Ot.jsx(er,{isOpen:h,onClose:()=>p(!1),title:"",size:"xl",children:A&&Ot.jsxs("div",{className:"p-0",children:[Ot.jsxs("div",{className:"relative bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 p-8 text-white rounded-t-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 to-transparent rounded-t-2xl"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-start justify-between mb-6",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:Ot.jsx(W,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-2xl font-bold mb-2",children:A.shipmentTitle}),Ot.jsxs("div",{className:"flex items-center gap-4 text-blue-200",children:[Ot.jsx("span",{className:"font-mono bg-white/20 backdrop-blur-sm text-white px-3 py-1 rounded-lg text-sm",children:A.trackingCode}),Ot.jsx("span",{className:"text-sm",children:new Date(A.createdAt).toLocaleDateString("tr-TR")})]})]})]}),Ot.jsx("div",{className:"flex items-center gap-6 text-blue-200",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(T,{className:"w-5 h-5"}),Ot.jsxs("span",{className:"font-medium",children:[A.pickupAddress," →"," ",A.deliveryAddress]})]})})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-4xl font-bold mb-2",children:["₺",A.price.toLocaleString()]}),Ot.jsxs("div",{className:"text-blue-200",children:["Teslimat: ",A.estimatedDelivery]})]})]})})]}),Ot.jsxs("div",{className:"p-8",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl p-8 mb-8 border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-800 to-blue-900 rounded-3xl flex items-center justify-center text-white font-bold text-2xl shadow-xl",children:A.carrierLogo}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ot.jsx("h4",{className:"text-2xl font-bold text-slate-900",children:A.carrierName}),A.carrierVerified&&Ot.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",children:[Ot.jsx(U,{className:"w-4 h-4"}),"Doğrulanmış"]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[Number(A.carrierRating||0)>0||Number(A.carrierReviews||0)>0?Ot.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Number(A.carrierRating||0)>0&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(O,{className:"w-5 h-5 text-yellow-500 fill-current"}),Ot.jsx("span",{className:"text-lg font-bold text-slate-900",children:A.carrierRating})]}),Number(A.carrierRating||0)<=0&&Ot.jsx("span",{className:"text-lg font-bold text-slate-900",children:"-"})]}),Ot.jsx("div",{className:"text-sm text-slate-500",children:Number(A.carrierReviews||0)>0?`${A.carrierReviews} değerlendirme`:"Değerlendirme bekleniyor"})]}):Ot.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:Ot.jsx("div",{className:"text-sm text-slate-500",children:"Henüz puan yok"})}),A.carrierExperience&&Ot.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mb-1",children:A.carrierExperience}),Ot.jsx("div",{className:"text-sm text-slate-500",children:"Deneyim"})]}),Number(A.successRate||0)>0&&Ot.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[Ot.jsxs("div",{className:"text-lg font-bold text-slate-900 mb-1",children:["%",A.successRate]}),Ot.jsx("div",{className:"text-sm text-slate-500",children:"Başarı Oranı"})]}),A.responseTime&&Ot.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mb-1",children:A.responseTime}),Ot.jsx("div",{className:"text-sm text-slate-500",children:"Yanıt Süresi"})]})]})]})]})}),Ot.jsxs("div",{className:"mb-8",children:[Ot.jsxs("h5",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[Ot.jsx(O,{className:"w-6 h-6 text-yellow-500"}),"Müşteri Değerlendirmeleri"]}),Array.isArray(A.recentComments)&&A.recentComments.length>0?Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.recentComments.map((e,t)=>Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold",children:t+1}),Ot.jsx("div",{children:Ot.jsxs("div",{className:"font-semibold text-slate-900",children:["Müşteri ",t+1]})})]}),Ot.jsxs("p",{className:"text-slate-600 italic",children:['"',e,'"']})]},t))}):Ot.jsx("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm",children:Ot.jsx("div",{className:"text-sm text-slate-600",children:"Değerlendirme bekleniyor"})})]}),"pending"===A.status&&Ot.jsx("div",{className:"mb-8 p-5 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(U,{className:"w-6 h-6 text-green-700 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h5",{className:"text-base font-semibold text-green-900 mb-2",children:"Ödeme (taraflar arasında)"}),Ot.jsx("p",{className:"text-sm text-green-800 leading-relaxed",children:"YolNext ödeme altyapısı sunmaz; ödeme işlemi gönderici ile nakliyeci arasında gerçekleşir. IBAN/alıcı adı/açıklama ve yükleme saatini mesajlaşma üzerinden yazılı olarak netleştirmeniz önerilir."})]})]})}),Ot.jsxs("div",{className:"mb-8",children:[Ot.jsxs("h5",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(G,{className:"w-5 h-5 text-blue-600"}),"Nakliyeci Mesajı"]}),Ot.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full flex items-center justify-center flex-shrink-0",children:Ot.jsx(G,{className:"w-4 h-4 text-white"})}),Ot.jsx("p",{className:"text-slate-700 leading-relaxed",children:A.message})]})})]}),Ot.jsxs("div",{className:"flex justify-end gap-4",children:[Ot.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium",children:"Kapat"}),"pending"===A.status&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("button",{onClick:()=>{p(!1),oe(A.id)},className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-700 text-white rounded-xl font-semibold hover:from-green-700 hover:to-emerald-800 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(J,{className:"w-5 h-5"}),"Kabul Et"]}),Ot.jsxs("button",{onClick:()=>{p(!1),_(A.id),u(!0)},className:"px-8 py-3 bg-gradient-to-r from-red-600 to-rose-700 text-white rounded-xl font-semibold hover:from-red-700 hover:to-rose-800 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(ie,{className:"w-5 h-5"}),"Reddet"]})]})]})]})]})}),Ot.jsx(er,{isOpen:j,onClose:()=>{v(!1),k(null),S(null),C("")},title:"Ödeme ve Süreç",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("div",{className:"text-sm text-slate-700",children:"Ödemenizi anlaştığınız nakliyeci ile mesajlaşma üzerinden konuşabilirsiniz. Tutar, yöntem ve açıklama bilgisini netleştirmeniz önerilir."}),Ot.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border border-slate-200 text-sm text-slate-700",children:["Hazır mesaj: ",Ot.jsx("span",{className:"font-semibold",children:z||"Merhaba, ödeme detaylarını netleştirelim."})]}),Ot.jsx("div",{className:"flex gap-2 justify-end",children:Ot.jsx("button",{className:"btn-primary",disabled:!N,onClick:()=>{const t=new URLSearchParams;N&&t.set("userId",String(N)),z&&t.set("prefill",z),e(`/corporate/messages?${t.toString()}`)},children:"Mesaj Gönder"})})]})})]})]})}function Rr({isOpen:e,onClose:t}){const{user:s}=sa(),[a,i]=l.useState([]),[r,n]=l.useState(!0),[d,o]=l.useState(""),[c,m]=l.useState("all"),[x,u]=l.useState("all"),h=e=>{const t=e instanceof Date?e:new Date(e||"");return Number.isFinite(t.getTime())?t.toLocaleDateString("tr-TR"):"—"};l.useEffect(()=>{e&&p()},[e]);const p=async()=>{var e;try{n(!0);const t=cl.getNotifications||cl.getAll,s=t?await t():null,a=(null==(e=null==s?void 0:s.data)?void 0:e.notifications)||(null==s?void 0:s.data)||(null==s?void 0:s.notifications)||s||[];i(Array.isArray(a)?a:[])}catch(t){i([])}finally{n(!1)}},g=a.filter(e=>{const t=e.title.toLowerCase().includes(d.toLowerCase())||e.message.toLowerCase().includes(d.toLowerCase()),s="all"===c||e.category===c,a="all"===x||"unread"===x&&!e.isRead||"read"===x&&e.isRead;return t&&s&&a}),b=e=>{switch(e){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"normal":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},y=(e,t)=>{switch(e){case"success":return Ot.jsx(J,{className:"w-4 h-4"});case"info":default:return Ot.jsx(H,{className:"w-4 h-4"});case"warning":case"error":return Ot.jsx(f,{className:"w-4 h-4"})}},j=a.filter(e=>!e.isRead).length;return e?Ot.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),Ot.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[80vh] mx-4 flex flex-col",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:Ot.jsx(H,{className:"w-5 h-5 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Bildirimler"}),Ot.jsxs("p",{className:"text-sm text-gray-500",children:[j," okunmamış bildirim"]})]})]}),Ot.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-colors",children:Ot.jsx(_,{className:"w-5 h-5 text-gray-500"})})]}),Ot.jsx("div",{className:"p-6 border-b border-gray-200",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Bildirim ara...",value:d,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ot.jsxs("select",{value:c,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Kategoriler"}),Ot.jsx("option",{value:"job",children:"İş"}),Ot.jsx("option",{value:"payment",children:"Ödeme"}),Ot.jsx("option",{value:"system",children:"Sistem"}),Ot.jsx("option",{value:"message",children:"Mesaj"}),Ot.jsx("option",{value:"alert",children:"Uyarı"})]}),Ot.jsxs("select",{value:x,onChange:e=>u(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"unread",children:"Okunmamış"}),Ot.jsx("option",{value:"read",children:"Okunmuş"})]})]})}),Ot.jsx("div",{className:"p-6 border-b border-gray-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("button",{onClick:async()=>{try{const e=cl.markAllAsRead||cl.markAllAsRead||cl.markAllAsRead||cl.markAllAsRead;e&&await e(),i(e=>e.map(e=>({...e,isRead:!0})))}catch(e){}},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[Ot.jsx(je,{className:"w-4 h-4"}),"Tümünü Okundu İşaretle"]}),Ot.jsxs("div",{className:"text-sm text-gray-500",children:[g.length," bildirim gösteriliyor"]})]})}),Ot.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r?Ot.jsx("div",{className:"flex items-center justify-center h-32",children:Ot.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g.length>0?Ot.jsx("div",{className:"space-y-3",children:g.map(e=>Ot.jsx("div",{className:"bg-white rounded-xl border transition-all hover:shadow-md "+(e.isRead?"border-gray-200":"border-blue-200 bg-blue-50/30"),children:Ot.jsx("div",{className:"p-4",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center "+(e.isRead?"bg-gray-100":"bg-blue-100"),children:Ot.jsx("div",{className:e.isRead?"text-gray-600":"text-blue-600",children:y(e.type,e.category)})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("h3",{className:"text-sm font-semibold "+(e.isRead,"text-gray-900"),children:e.title}),Ot.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(e.priority)}`,children:"urgent"===e.priority?"Acil":"high"===e.priority?"Yüksek":"normal"===e.priority?"Normal":"Düşük"}),!e.isRead&&Ot.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full"})]}),Ot.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[Ot.jsx(L,{className:"w-3 h-3"}),h(e.createdAt||e.created_at||e.createdat)]})]}),Ot.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.message}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs("button",{onClick:()=>(async e=>{try{await cl.markAsRead(e),i(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(t){}})(e.id),className:"px-2 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-1",children:[e.isRead?Ot.jsx(ae,{className:"w-3 h-3"}):Ot.jsx(Q,{className:"w-3 h-3"}),e.isRead?"Okundu":"Okundu İşaretle"]}),Ot.jsxs("button",{onClick:()=>(async e=>{try{const t=cl.deleteNotification||cl.delete;t&&await t(e),i(t=>t.filter(t=>t.id!==e))}catch(t){}})(e.id),className:"px-2 py-1 border border-red-300 text-red-700 text-xs rounded-lg hover:bg-red-50 transition-colors flex items-center gap-1",children:[Ot.jsx(pt,{className:"w-3 h-3"}),"Sil"]})]})]})]})})},e.id))}):Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(H,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Bildirim bulunamadı"}),Ot.jsx("p",{className:"text-gray-500",children:"Arama kriterlerinize uygun bildirim bulunamadı"})]})})]})]}):null}const Or=()=>{var e;const{user:t,updateUser:s}=sa(),a=o(),{showToast:i}=ka(),[r,n]=l.useState(!1),[c,m]=l.useState(!1),[x,u]=l.useState(!1),[h,p]=l.useState(0),[g,b]=l.useState({totalShipments:0,activeShipments:0,completedShipments:0,totalRevenue:0,pendingOffers:0,deliveredShipments:0,pendingShipments:0}),[f,y]=l.useState([]),[j,v]=l.useState(null),[N,k]=l.useState(!1);l.useEffect(()=>{(async()=>{var e;try{const a=localStorage.getItem("authToken");if(!a)return;if((null==t?void 0:t.nakliyeciCode)||(null==t?void 0:t.nakliyeci_code)||(null==t?void 0:t.carrierCode)||(null==t?void 0:t.carrier_code)||"")return;const l=await fetch(Zs("/api/users/profile"),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!l.ok)return;const i=await l.json().catch(()=>null),r=(null==(e=null==i?void 0:i.data)?void 0:e.user)||(null==i?void 0:i.user)||(null==i?void 0:i.data)||i,n=(null==r?void 0:r.nakliyeciCode)||(null==r?void 0:r.nakliyecicode)||(null==r?void 0:r.nakliyeci_code)||(null==r?void 0:r.carrierCode)||(null==r?void 0:r.carrier_code)||"";if(!n)return;try{s({nakliyeciCode:String(n)})}catch{}try{const e=localStorage.getItem("user"),t={...(e?JSON.parse(e):{})||{},nakliyeciCode:String(n)};localStorage.setItem("user",JSON.stringify(t))}catch{}}catch{}})()},[t,s]);const w=(null==t?void 0:t.nakliyeciCode)||(null==t?void 0:t.nakliyeci_code)||(null==t?void 0:t.carrierCode)||(null==t?void 0:t.carrier_code)||(null==t?void 0:t.code)||"",S=async()=>{if(w){try{await navigator.clipboard.writeText(String(w))}catch{try{window.prompt("Nakliyeci kodunu kopyala:",String(w))}catch{}}m(!0),setTimeout(()=>m(!1),1200)}},z=async()=>{try{const e=localStorage.getItem("authToken");await fetch(Zs("/api/notifications/mark-read"),{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),p(0)}catch(e){}};return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Nakliyeci Dashboard - YolNext"})}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(E,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:["Merhaba ",(null==t?void 0:t.firstName)||(null==(e=null==t?void 0:t.fullName)?void 0:e.split(" ")[0])||"Nakliyeci","! 👋"]}),Ot.jsxs("p",{className:"text-slate-200 text-lg leading-relaxed",children:["Yüklerinizi kolayca yönetin ve kazancınızı artırın.",Ot.jsx("br",{}),Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"Profesyonel, güvenilir ve karlı"})," taşımacılık hizmetleriyle yanınızdayız."]})]})]}),Ot.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:[Ot.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg"}),Ot.jsx("span",{className:"text-slate-200 font-medium",children:"Çevrimiçi"})]}),w?Ot.jsxs("div",{className:"relative flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:[Ot.jsxs("span",{className:"text-slate-200 font-medium",children:["Nakliyeci Kodu: ",Ot.jsx("span",{className:"text-white font-bold",children:String(w)})]}),Ot.jsx("button",{type:"button",onClick:S,className:"ml-1 inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 transition",title:"Kopyala",children:c?Ot.jsx(J,{className:"w-4 h-4 text-emerald-200"}):Ot.jsx(gt,{className:"w-4 h-4 text-white"})}),Ot.jsx("button",{type:"button",onClick:async()=>{w&&n(e=>!e)},className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 transition",title:"Paylaş",children:Ot.jsx(Ye,{className:"w-4 h-4 text-white"})}),r?Ot.jsxs("div",{className:"absolute left-0 top-full mt-3 w-64 rounded-2xl bg-white shadow-2xl border border-slate-200 overflow-hidden z-50",children:[Ot.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between",children:[Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:"Paylaş"}),Ot.jsx("button",{type:"button",onClick:()=>n(!1),className:"w-8 h-8 inline-flex items-center justify-center rounded-lg hover:bg-slate-100",title:"Kapat",children:Ot.jsx(_,{className:"w-4 h-4 text-slate-600"})})]}),Ot.jsxs("div",{className:"p-2",children:[Ot.jsx("a",{className:"block px-3 py-2 rounded-xl hover:bg-slate-50 text-sm font-semibold text-slate-800",target:"_blank",rel:"noreferrer",href:`https://wa.me/?text=${encodeURIComponent(`YolNext'te nakliyeci kodum: ${String(w)}`)}`,children:"WhatsApp"}),Ot.jsx("a",{className:"block px-3 py-2 rounded-xl hover:bg-slate-50 text-sm font-semibold text-slate-800",target:"_blank",rel:"noreferrer",href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(`YolNext'te nakliyeci kodum: ${String(w)}`)}`,children:"X (Twitter)"}),Ot.jsx("a",{className:"block px-3 py-2 rounded-xl hover:bg-slate-50 text-sm font-semibold text-slate-800",target:"_blank",rel:"noreferrer",href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(`${window.location.origin}/?ref=${encodeURIComponent(String(w))}`)}`,children:"LinkedIn"}),Ot.jsx("button",{type:"button",onClick:async()=>{await S(),n(!1)},className:"w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 text-sm font-semibold text-slate-800",children:"Kodu kopyala"})]})]}):null]}):null,null!==j&&Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:Ot.jsxs("span",{className:"text-slate-200 font-medium",children:["₺",j.toFixed(0)," Bakiye"]})})]})]}),Ot.jsxs("div",{className:"flex items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[Ot.jsxs("button",{onClick:()=>{u(!0),z()},className:"relative group min-w-[44px] min-h-[44px] w-12 h-12 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center hover:bg-white/20 transition-all duration-300 border border-white/20 group-hover:scale-110",children:[Ot.jsx(H,{size:20,className:"text-white"}),h>0&&Ot.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold shadow-lg",children:h>99?"99+":h})]}),Ot.jsx(d,{to:"/nakliyeci/jobs",children:Ot.jsxs("button",{className:"bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 flex items-center gap-2 text-base shadow-lg hover:shadow-xl w-full sm:w-auto",children:[Ot.jsx(ue,{size:20}),"Yük Pazarı"]})})]})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:g.totalShipments}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}),Ot.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Aktif"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Aktif Yükler"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Devam eden taşımalar"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(fe,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:g.deliveredShipments}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Ot.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Tamamlandı"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Tamamlanan Yükler"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Teslim edilen gönderiler"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:g.pendingShipments}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ot.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Beklemede"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Bekleyen Yükler"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Teklif bekleyen ilanlar"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(M,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:null!==j?`₺${j.toFixed(0)}`:"₺0"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ot.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ot.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Bakiye"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Cüzdan Bakiyesi"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Kazancınız"})]})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Hızlı İşlemler"}),Ot.jsx("p",{className:"text-slate-600",children:"Nakliyeci hizmetlerinize hızlı erişim"})]}),Ot.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(E,{className:"w-7 h-7 text-white"})})]}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[Ot.jsx(d,{to:"/nakliyeci/jobs",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-blue-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(Ne,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Yük Pazarı"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Açık ilanlar ve teklifler"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-gradient-to-r from-slate-800 to-blue-900 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/nakliyeci/route-planner",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-emerald-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-600 to-emerald-800 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(Z,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Akıllı Rota"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Yük optimizasyonu"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-emerald-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/nakliyeci/active-shipments",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-purple-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-purple-800 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Gönderilerim"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Aktif ve tamamlanan yükler"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-purple-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})}),Ot.jsx(d,{to:"/nakliyeci/drivers",children:Ot.jsx("div",{className:"group bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:shadow-xl hover:border-amber-300 transition-all duration-300 hover:-translate-y-2",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 mb-4",children:Ot.jsx(C,{className:"w-6 h-6 text-white"})}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Taşıyıcılarım"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Şoför ve araç yönetimi"}),Ot.jsx("div",{className:"mt-3 w-8 h-1 bg-amber-600 rounded-full group-hover:w-12 transition-all duration-300"})]})})})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Aktif Yükler"}),Ot.jsx("p",{className:"text-slate-600",children:"Devam eden yüklerinizin özeti (en son 5)"})]}),Ot.jsxs(d,{to:"/nakliyeci/active-shipments",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center gap-2",children:["Tümünü Gör",Ot.jsx(K,{className:"w-4 h-4"})]})]}),f.length>0?Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200 bg-gradient-to-r from-slate-50 to-blue-50",children:[Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Yük No"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Durum"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Güzergah"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Tutar"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"Tarih"}),Ot.jsx("th",{className:"text-left py-3 px-4 font-semibold text-slate-800",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:f.slice(0,5).map(e=>Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"text-sm text-slate-900",children:["#",Ri(e.trackingNumber,e.id)]})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${pi(e.status).color}`,children:pi(e.status).text})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"text-sm text-slate-900",children:[e.pickupCity||e.pickup_city||e.from||"İstanbul"," → ",e.deliveryCity||e.delivery_city||e.to||"Ankara"]})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["₺",(e.price||e.value||0).toLocaleString()]})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsx("div",{className:"text-sm text-slate-500",children:Kl(e.createdAt||e.created_at||e.date||e.updatedAt||e.updated_at||"","long")})}),Ot.jsx("td",{className:"py-4 px-4",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(d,{to:"/nakliyeci/active-shipments",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",title:"Aktif Yükler sayfasına git",children:Ot.jsx(Q,{className:"w-4 h-4"})}),"pending"===e.status&&Ot.jsx(d,{to:`/nakliyeci/jobs/${e.id}`,className:"text-slate-600 hover:text-slate-700 text-sm font-medium",title:"Yük detaylarını düzenle",children:Ot.jsx(bt,{className:"w-4 h-4"})})]})})]},e.id))})]})}):Ot.jsx(ir,{icon:R,title:"Aktif yük bulunmuyor",description:"Devam eden yükünüz yok. Yük pazarından yeni yükler alabilirsiniz.",action:{label:"Yük Pazarı",onClick:()=>a("/nakliyeci/jobs")}})]})]}),Ot.jsx(Rr,{isOpen:x,onClose:()=>{u(!1),z()}})]})};function Pr(){var e,t;const s=o(),[a,i]=l.useState(!0),[r,n]=l.useState(""),[d,c]=l.useState("pending"),[m,x]=l.useState("date"),[u,h]=l.useState("desc"),[p,g]=l.useState("grid");l.useEffect(()=>{try{const e=localStorage.getItem("user"),t=e?JSON.parse(e):null,s=null==t?void 0:t.id,a=String((null==t?void 0:t.role)||"nakliyeci").toLowerCase();if(!s)return;localStorage.setItem(`yolnext:lastSeen:offers:${s}:${a}`,(new Date).toISOString()),window.dispatchEvent(new Event("yolnext:refresh-badges"))}catch{}},[]);const[b,f]=l.useState(null),[y,j]=l.useState(!1),[v,N]=l.useState(!1),[k,w]=l.useState(!1),[S,z]=l.useState(!1),[T,C]=l.useState(!1),[A,D]=l.useState(!1),[E,_]=l.useState(null),[I,K]=l.useState(""),[M,B]=l.useState(""),[P,G]=l.useState(!1),[F,Y]=l.useState(""),[q,H]=l.useState(1),[U]=l.useState(10),V=[{label:"Ana Sayfa",icon:Ot.jsx($,{className:"w-4 h-4"})},{label:"Teklifler",icon:Ot.jsx($,{className:"w-4 h-4"})}],[W,Z]=l.useState([]),[X,ee]=l.useState(null),se=(!!(null==(t=null==(e=import.meta)?void 0:e.env)?void 0:t.DEV)&&(()=>{try{return"1"===localStorage.getItem("debug:api")}catch{return!1}})(),(e,t)=>{const s=String("").trim(),a=String(t??"").trim();if(!s){if(!a)return"";if(/^TRK/i.test(a))return a;const e=Number(a);return Number.isFinite(e)&&e>0?`TRK${Math.trunc(e).toString().padStart(6,"0")}`:a}if(/^TRK/i.test(s))return s;const l=Number(s);return Number.isFinite(l)&&l>0?`TRK${Math.trunc(l).toString().padStart(6,"0")}`:s}),ae=e=>{var t,s,a,l;const{from:i,to:r}=Vl(e),n=e.ownerName||e.owner_name||e.shipmentOwnerName||e.shipmentownername||e.shipmentownername||e.shipmentOwnerName||e.ownerName||e.owner_name||e.senderName||e.sender_name||e.sender||e.shipperName||e.shipper_name||e.userName||e.user_name||(null==(t=e.user)?void 0:t.fullName)||(null==(s=e.user)?void 0:s.name)||(null==(a=e.shipper)?void 0:a.fullName)||(null==(l=e.shipper)?void 0:l.name)||"Gönderici",d=((e,t=0)=>{if("number"==typeof e)return Number.isFinite(e)?e:t;if("string"==typeof e){const s=parseFloat(e.replace(/[^0-9.,-]/g,"").replace(",","."));return Number.isFinite(s)?s:t}return t})(e.price??e.offerPrice??e.offer_price??e.displayPrice??e.display_price??e.value,0);return{id:e.id,shipmentId:e.shipmentid||e.shipmentId,sender:n,from:i,to:r,status:e.status,date:e.createdat||e.createdAt,price:d,weight:e.weight?`${e.weight} kg`:e.shipmentWeight?`${e.shipmentWeight} kg`:"—",category:e.category||e.shipmentCategory||"Genel",estimatedDelivery:e.estimateddelivery||e.estimatedDelivery,description:e.message||e.description||"",priority:e.priority||"normal",matchScore:(()=>{const t=e.matchScore??e.match_score,s="number"==typeof t?t:"string"==typeof t?parseFloat(t):NaN;return Number.isFinite(s)?s:null})()}},le=async()=>{i(!0),ee(null);const e=setTimeout(()=>{i(!1)},1e4);try{const e=localStorage.getItem("user"),t=e?JSON.parse(e||"{}").id:void 0,s=localStorage.getItem("authToken"),a=d&&"all"!==d?`?status=${encodeURIComponent(d)}`:"",l=new AbortController,i=setTimeout(()=>l.abort(),1e4),r=Zs(`/api/offers${a}`),n=await fetch(r,{headers:{Authorization:`Bearer ${s||""}`,"X-User-Id":t||"","Content-Type":"application/json"},signal:l.signal});if(clearTimeout(i),!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const o=await gr(n),c=(null==o?void 0:o.data)&&Array.isArray(o.data)?o.data:Array.isArray(o)?o:(null==o?void 0:o.offers)||[];Z(c.map(ae))}catch(t){ee((null==t?void 0:t.message)||"Teklifler yüklenemedi"),Z([])}finally{clearTimeout(e),i(!1)}};l.useEffect(()=>{"true"===localStorage.getItem("commission_ack_v1")?C(!0):z(!0),le()},[d,q]),l.useEffect(()=>{H(1)},[r,d,m,u]);l.useEffect(()=>{const e=()=>{"visible"===document.visibilityState&&le()},t=()=>{le()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",e),window.addEventListener("yolnext:refresh-badges",t),()=>{window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",e),window.removeEventListener("yolnext:refresh-badges",t)}},[d]);const re=e=>{switch(e){case"accepted":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},ne=e=>{switch(e){case"accepted":return"Kabul Edildi";case"pending":return"Beklemede";case"rejected":return"Reddedildi";case"expired":return"Süresi Doldu";default:return"Bilinmiyor"}},de=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"normal":default:return"bg-slate-100 text-slate-800";case"low":return"bg-green-100 text-green-800"}},oe=e=>null!==e&&Number.isFinite(e)?e>=90?"text-green-600":e>=70?"text-yellow-600":"text-red-600":"text-slate-500",ce=e=>String(e??"").toLowerCase().trim().replace(/ı/g,"i").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ö/g,"o").replace(/ç/g,"c"),xe=W.filter(e=>{const t=ce(r).split(/\s+/).filter(Boolean),s=[e.shipmentId,e.sender,e.from,e.to,e.category,e.description,e.price].map(ce).join(" "),a=0===t.length||t.every(e=>s.includes(e)),l="all"===d||e.status===d;return a&&l}),he=q*U,pe=he-U,ge=[...xe].sort((e,t)=>"date"===m?"asc"===u?new Date(e.date).getTime()-new Date(t.date).getTime():new Date(t.date).getTime()-new Date(e.date).getTime():"price"===m?"asc"===u?e.price-t.price:t.price-e.price:"matchScore"===m?null===e.matchScore&&null===t.matchScore?0:null===e.matchScore?1:null===t.matchScore?-1:"asc"===u?e.matchScore-t.matchScore:t.matchScore-e.matchScore:0).slice(pe,he),be=e=>{const t=e instanceof Date?e:new Date(e||"");return Number.isFinite(t.getTime())?t.toLocaleDateString("tr-TR"):"—"},[fe,ye]=l.useState("");return a?Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:Ot.jsx(Pl,{message:"Teklifler yükleniyor..."})})}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Teklifler - Nakliyeci Panel - YolNext"}),Ot.jsx("meta",{name:"description",content:"Nakliyeci teklif yönetimi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[X&&Ot.jsx("div",{className:"mb-4 p-3 rounded-lg border border-red-200 bg-red-50 text-red-700",children:X}),Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:V})}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"nakliyeci.offers",isEmpty:!a&&0===W.length,icon:$,title:"Tekliflerim",description:'Beklemedeki tekliflerinizi buradan takip edebilir ve yönetebilirsiniz. Kabul edilen teklifler "Aktif Yükler" sayfasına aktarılır. Yeni iş almak için "Yük Pazarı" sayfasına geçebilirsiniz.',primaryAction:{label:"Yük Pazarına Git",to:"/nakliyeci/jobs"},secondaryAction:{label:"Aktif Yükler",to:"/nakliyeci/active-shipments"}})}),Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx($,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:"Tekliflerim"}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"Gönderilen ve alınan tüm tekliflerinizi yönetin"}),Ot.jsxs("div",{className:"mt-4 max-w-2xl mx-auto space-y-3",children:[Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:[Ot.jsx("p",{className:"font-semibold mb-1",children:"💡 Bilgi:"}),Ot.jsx("p",{children:'Beklemede olan tekliflerinizi düzenleyebilir veya iptal edebilirsiniz. Kabul edilen teklifler "Aktif Yükler" sayfasına otomatik olarak aktarılır.'})]}),Ot.jsxs("div",{className:"flex items-start gap-2 text-xs sm:text-sm text-slate-700",children:[Ot.jsx(te,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsxs("p",{className:"font-medium text-slate-900",children:["1% komisyon bilgisi — detaylar",Ot.jsx("button",{className:"ml-1 underline font-semibold hover:text-blue-700",type:"button",onClick:()=>z(!0),children:"burada"}),"."]}),Ot.jsx("p",{className:"text-slate-600",children:"Şeffaflık için kısa özet: Teklif verirken 1% komisyon için cüzdanınızda yeterli bakiye gerekir. Teklif beklemedeyken iptal ederseniz komisyon blokesi kaldırılır. Teklif kabul edildiğinde komisyon kesintisi kesinleşir."})]})]})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-0",children:[Ot.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx($,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Teklifler"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Nakliye tekliflerinizi yönetin"})]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:Ot.jsxs("button",{onClick:()=>{if(!T)return D(!0),void z(!0);s("/nakliyeci/jobs")},className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg sm:rounded-xl hover:shadow-lg transition-all duration-200 text-sm font-medium",children:[Ot.jsx(ue,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Yeni Teklif"})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Toplam Teklif"}),Ot.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:W.length})]}),Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx($,{className:"w-5 h-5 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Kabul Edilen"}),Ot.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:W.filter(e=>"accepted"===e.status).length})]}),Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:Ot.jsx(J,{className:"w-5 h-5 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Bekleyen"}),Ot.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:W.filter(e=>"pending"===e.status).length})]}),Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-5 h-5 text-white"})})]})}),Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-slate-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Reddedilen"}),Ot.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-red-600",children:W.filter(e=>"rejected"===e.status).length})]}),Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:Ot.jsx(ie,{className:"w-5 h-5 text-white"})})]})})]}),Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-slate-200 mb-6 sm:mb-8",children:Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ot.jsx("div",{className:"flex-1",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Teklif ara...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-3 border border-slate-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-slate-500 text-sm"})]})}),Ot.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[Ot.jsxs("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 border border-slate-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-slate-500 text-sm",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"pending",children:"Beklemede"}),Ot.jsx("option",{value:"accepted",children:"Kabul Edilen"}),Ot.jsx("option",{value:"rejected",children:"Reddedilen"}),Ot.jsx("option",{value:"expired",children:"Süresi Dolan"})]}),Ot.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 border border-slate-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-slate-500 text-sm",children:[Ot.jsx("option",{value:"date",children:"Tarihe Göre"}),Ot.jsx("option",{value:"price",children:"Fiyata Göre"}),Ot.jsx("option",{value:"matchScore",children:"Eşleşme Skoruna Göre"})]}),Ot.jsx("button",{onClick:()=>h("asc"===u?"desc":"asc"),className:"px-3 sm:px-4 py-2 sm:py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg sm:rounded-xl transition-colors",children:"asc"===u?Ot.jsx(ut,{className:"w-4 h-4"}):Ot.jsx(ht,{className:"w-4 h-4"})})]})]})}),0===ge.length?Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-10 text-center w-full max-w-2xl",children:Ot.jsx(ir,{icon:$,title:"Henüz Teklif Yok",description:"Yük Pazarı’ndan uygun ilanlara teklif verin, kabul edilince kazanın!",action:{label:"Yük Pazarına Git",onClick:()=>s("/nakliyeci/jobs")}})})}):Ot.jsx("div",{className:"space-y-4",children:ge.map(e=>Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-slate-200 hover:shadow-xl transition-all duration-200",children:Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx("span",{className:"text-sm font-medium text-slate-600",children:se(0,e.shipmentId)}),Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${re(e.status)}`,children:ne(e.status)}),Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${de(e.priority)}`,children:"high"===e.priority?"Yüksek":"normal"===e.priority?"Normal":"Düşük"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(O,{className:"w-3 h-3 text-yellow-500"}),Ot.jsx("span",{className:`text-xs font-medium ${oe(e.matchScore)}`,children:null===e.matchScore?"— Eşleşme":`%${e.matchScore} Eşleşme`})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Gönderen"}),Ot.jsx("p",{className:"text-sm font-medium text-slate-900",children:e.sender})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Güzergah"}),Ot.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[e.from," → ",e.to]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Fiyat"}),Ot.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["₺",e.price.toLocaleString()]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx($e,{className:"w-3 h-3"}),Ot.jsx("span",{children:new Date(e.date).toLocaleDateString("tr-TR")})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(L,{className:"w-3 h-3"}),Ot.jsxs("span",{children:["Teslimat:"," ",e.estimatedDelivery&&new Date(e.estimatedDelivery).getFullYear()>1971?new Date(e.estimatedDelivery).toLocaleDateString("tr-TR"):"Belirtilmedi"]})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(R,{className:"w-3 h-3"}),Ot.jsx("span",{children:e.category})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:["pending"===e.status&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("button",{onClick:()=>(e=>{_(e),K(e.price.toString()),B(e.description||""),N(!0)})(e),className:"px-3 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",title:"Teklifi düzenle",children:[Ot.jsx(bt,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Düzenle"})]}),Ot.jsxs("button",{onClick:()=>(e=>{_(e),w(!0)})(e),className:"px-3 py-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-1",title:"Teklifi iptal et",children:[Ot.jsx(ie,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"İptal Et"})]})]}),"accepted"===e.status&&Ot.jsx(Ot.Fragment,{children:Ot.jsx("button",{onClick:()=>(e=>{Y("Aktif Yükler sayfasına yönlendiriliyorsunuz..."),G(!0),setTimeout(()=>{G(!1),s(`/nakliyeci/active-shipments?shipmentId=${encodeURIComponent(String(e.shipmentId||""))}`)},2e3)})(e),className:"px-3 py-2 bg-slate-800 hover:bg-slate-900 text-white rounded-lg text-sm font-medium transition-colors",children:"Aktif Yüklere Git"})}),Ot.jsx("button",{onClick:()=>(e=>{f(e),j(!0)})(e),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",title:"Detayları görüntüle",children:Ot.jsx(Q,{className:"w-4 h-4"})})]})]})},e.id))}),xe.length>U&&Ot.jsx("div",{className:"mt-6 sm:mt-8",children:Ot.jsx(rr,{currentPage:q,totalPages:Math.ceil(xe.length/U),onPageChange:H})})]}),y&&b&&Ot.jsx(er,{isOpen:y,onClose:()=>j(!1),title:"Teklif Detayları",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Takip No"}),Ot.jsx("p",{className:"font-medium",children:se(0,b.shipmentId)})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Durum"}),Ot.jsx("p",{className:"font-medium",children:ne(b.status)})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Gönderen"}),Ot.jsx("p",{className:"font-medium",children:b.sender})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Güzergah"}),Ot.jsxs("p",{className:"font-medium",children:[b.from," → ",b.to]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Fiyat"}),Ot.jsxs("p",{className:"font-medium",children:["₺",b.price.toLocaleString()]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Eşleşme Skoru"}),Ot.jsx("p",{className:`font-medium ${oe(b.matchScore)}`,children:null===b.matchScore?"—":`%${b.matchScore}`})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Teklif Tarihi"}),Ot.jsx("p",{className:"font-medium",children:be(b.date)})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Tahmini Teslimat"}),Ot.jsx("p",{className:"font-medium",children:be(b.estimatedDelivery)})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Kategori"}),Ot.jsx("p",{className:"font-medium",children:b.category||"—"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Ağırlık"}),Ot.jsx("p",{className:"font-medium",children:b.weight||"—"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Öncelik"}),Ot.jsx("p",{className:"font-medium",children:"high"===b.priority?"Yüksek":"normal"===b.priority?"Normal":"low"===b.priority?"Düşük":"—"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Eşleşme"}),Ot.jsx("p",{className:`font-medium ${oe(b.matchScore)}`,children:null===b.matchScore?"—":`%${b.matchScore}`})]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-slate-500",children:"Açıklama"}),Ot.jsx("p",{className:"font-medium",children:b.description})]})]})}),v&&E&&Ot.jsx(er,{isOpen:v,onClose:()=>{N(!1),_(null),K(""),B("")},title:"Teklifi Düzenle",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fiyat (₺)"}),Ot.jsx("input",{type:"number",value:I,onChange:e=>K(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Fiyat girin",min:"0",step:"0.01"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mesaj"}),Ot.jsx("textarea",{value:M,onChange:e=>B(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Teklif mesajınızı yazın",rows:4})]}),Ot.jsxs("div",{className:"flex gap-3 justify-end",children:[Ot.jsx("button",{onClick:()=>{N(!1),_(null),K(""),B("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors",children:"İptal"}),Ot.jsx("button",{onClick:async()=>{if(E)try{const e=localStorage.getItem("authToken"),t=localStorage.getItem("user"),s=t?JSON.parse(t||"{}").id:void 0;if(!(await fetch(Zs(`/api/offers/${E.id}`),{method:"PUT",headers:{Authorization:`Bearer ${e||""}`,"X-User-Id":s||"","Content-Type":"application/json"},body:JSON.stringify({price:parseFloat(I),message:M})})).ok)throw new Error("Teklif güncellenemedi");Y("Teklif başarıyla güncellendi"),G(!0),setTimeout(()=>G(!1),2e3),N(!1),_(null),await le()}catch(e){Y((null==e?void 0:e.message)||"Teklif güncellenemedi. Lütfen tekrar deneyin."),G(!0),setTimeout(()=>G(!1),2e3)}},className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 transition-colors",children:"Kaydet"})]})]})}),k&&E&&Ot.jsx(er,{isOpen:k,onClose:()=>{w(!1),_(null),ye("")},title:"Teklifi İptal Et",children:Ot.jsxs("div",{className:"p-6",children:[Ot.jsx("p",{className:"text-slate-600 mb-4",children:"Bu teklifi iptal etmek istediğinizden emin misiniz?"}),Ot.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[Ot.jsxs("p",{className:"text-sm text-yellow-800",children:[Ot.jsx("strong",{children:"Gönderi:"})," ",se(0,E.shipmentId)]}),Ot.jsxs("p",{className:"text-sm text-yellow-800",children:[Ot.jsx("strong",{children:"Fiyat:"})," ₺",E.price.toLocaleString()]})]}),"accepted"===E.status&&Ot.jsxs("div",{className:"mb-4",children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İptal Sebebi (Opsiyonel)"}),Ot.jsx("textarea",{value:fe,onChange:e=>ye(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:3,placeholder:"İptal sebebinizi açıklayın..."})]}),Ot.jsxs("div",{className:"flex justify-end gap-3",children:[Ot.jsx("button",{onClick:()=>{w(!1),_(null),ye("")},className:"px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"Vazgeç"}),Ot.jsx("button",{onClick:async()=>{if(E)try{const t=localStorage.getItem("authToken"),s=localStorage.getItem("user"),a=s?JSON.parse(s||"{}").id:void 0;if("pending"!==E.status)throw new Error("Bu teklif artık iptal edilemez. Kabul edilen teklifler “Aktif Yükler” üzerinden yönetilir.");const l=await fetch(Zs(`/api/offers/${E.id}`),{method:"DELETE",headers:{Authorization:`Bearer ${t||""}`,"X-User-Id":a||"","Content-Type":"application/json"}});if(!l.ok)try{const e=await gr(l);throw new Error((null==e?void 0:e.message)||"Teklif iptal edilemedi")}catch(e){throw new Error("Teklif iptal edilemedi")}try{await gr(l)}catch{}Y("Teklif başarıyla iptal edildi"),G(!0),setTimeout(()=>G(!1),5e3),w(!1),_(null),ye(""),await le()}catch(t){Y((null==t?void 0:t.message)||"Teklif iptal edilemedi. Lütfen tekrar deneyin."),G(!0),setTimeout(()=>G(!1),5e3)}},className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"Teklifi İptal Et"})]})]})}),S&&Ot.jsx(er,{isOpen:S,onClose:()=>z(!1),title:"Komisyon Bilgisi",children:Ot.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[Ot.jsx("p",{className:"font-semibold text-slate-900",children:"Şeffaf bilgi:"}),Ot.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[Ot.jsx("li",{children:"Kabul edilen tekliften 1% komisyon cüzdandan düşülür."}),Ot.jsx("li",{children:"Teklif beklemedeyken iptal ederseniz komisyon blokesi kaldırılır."}),Ot.jsx("li",{children:"Teklif kabul edildiğinde komisyon kesintisi kesinleşir."})]}),Ot.jsx("p",{className:"text-slate-600",children:"Bu kural sürpriz maliyetleri önlemek ve platform maliyetlerini karşılamak içindir. Teklif vermeden önce lütfen kesinleşmiş işler için ilerleyin."}),Ot.jsx("div",{className:"flex justify-end",children:Ot.jsx("button",{onClick:()=>{localStorage.setItem("commission_ack_v1","true"),C(!0),z(!1),A&&(D(!1),s("/nakliyeci/jobs"))},className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 transition-colors",children:"Anladım"})})]})}),P&&Ot.jsx(Fl,{message:F,onClose:()=>G(!1),isVisible:P})]})}const Lr=e=>{switch(e){case"7days":return"7 Gün";case"30days":return"30 Gün";case"90days":return"90 Gün";case"1year":return"1 Yıl";default:return String(e)}},Gr=e=>{try{return Il(e||0,"TRY")}catch{return`₺${Math.round(e||0)}`}},Fr=e=>{try{return new Intl.NumberFormat("tr-TR",{notation:"compact",maximumFractionDigits:1}).format(e||0)}catch{return String(e||0)}},Yr=()=>{const[e,t]=l.useState("30days"),[s,a]=l.useState(!1),[i,r]=l.useState(null),[n,d]=l.useState(null),[o,c]=l.useState(null),[m,x]=l.useState(null),u=l.useMemo(()=>[{label:"Analitik",icon:Ot.jsx(ge,{className:"w-4 h-4"})}],[]),h=async()=>{a(!0),r(null);try{const t={Authorization:`Bearer ${localStorage.getItem("authToken")||""}`,"Content-Type":"application/json"},[s,a,l]=await Promise.all([fetch(Zs(`/api/analytics/dashboard/nakliyeci?period=${encodeURIComponent(e)}`),{headers:t}),fetch(Zs(`/api/analytics/shipments?period=${encodeURIComponent(e)}`),{headers:t}),fetch(Zs(`/api/analytics/performance?period=${encodeURIComponent(e)}`),{headers:t})]),i=s.ok?await gr(s).catch(()=>null):null,r=a.ok?await gr(a).catch(()=>null):null,n=l.ok?await gr(l).catch(()=>null):null,o=(null==i?void 0:i.data)||i||null,m=(null==r?void 0:r.data)||r||null,u=(null==n?void 0:n.data)||n||null;d(o),c(m),x(u)}catch(t){r((null==t?void 0:t.message)||"Analitik veriler yüklenemedi"),d(null),c(null),x(null)}finally{a(!1)}};l.useEffect(()=>{h()},[e]);const p=(null==n?void 0:n.dailyShipments)||[],g=Math.max(1,...p.map(e=>e.count||0));return!s||n||o||m?Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Analitik - Nakliyeci Panel - YolNext"}),Ot.jsx("meta",{name:"description",content:"Nakliyeci performans analizi ve trend raporları"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:u})}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-5 sm:p-7 mb-6",children:[Ot.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[Ot.jsx("div",{children:Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(ge,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:["Analitik"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Dashboard"})]}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Gerçek verilerle performans ve trend takibi"})]})]})}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($e,{className:"w-4 h-4 text-slate-600"}),Ot.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500",children:[Ot.jsx("option",{value:"7days",children:"7 Gün"}),Ot.jsx("option",{value:"30days",children:"30 Gün"}),Ot.jsx("option",{value:"90days",children:"90 Gün"}),Ot.jsx("option",{value:"1year",children:"1 Yıl"})]})]}),Ot.jsxs("button",{onClick:h,disabled:s,className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition disabled:opacity-60",children:[Ot.jsx(y,{className:"w-4 h-4 "+(s?"animate-spin":"")}),"Yenile"]})]})]}),i&&Ot.jsx("div",{className:"mt-4 p-3 rounded-lg border border-red-200 bg-red-50 text-sm text-red-800",children:i})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-slate-100 rounded-xl",children:Ot.jsx(E,{className:"w-6 h-6 text-slate-800"})}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded-lg",children:Lr(e)})]}),Ot.jsx("div",{className:"text-3xl font-bold text-slate-900",children:Fr((null==n?void 0:n.totalShipments)||0)}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Toplam İş"}),Ot.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[Ot.jsx(M,{className:"w-4 h-4 text-emerald-600"}),Ot.jsxs("span",{className:"text-emerald-700 font-semibold",children:["%",(null==n?void 0:n.monthlyGrowth)??0]}),Ot.jsx("span",{className:"text-slate-500",children:"son 30 gün büyüme"})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-slate-100 rounded-xl",children:Ot.jsx(fe,{className:"w-6 h-6 text-slate-800"})}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded-lg",children:"Tamamlanan"})]}),Ot.jsxs("div",{className:"text-3xl font-bold text-slate-900",children:["%",(null==n?void 0:n.successRate)??0]}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Başarı Oranı"}),Ot.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[(null==n?void 0:n.deliveredShipments)||0," teslim / ",(null==n?void 0:n.totalShipments)||0," toplam"]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-slate-100 rounded-xl",children:Ot.jsx(O,{className:"w-6 h-6 text-slate-800"})}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded-lg",children:"Ortalama"})]}),Ot.jsx("div",{className:"text-3xl font-bold text-slate-900",children:((null==n?void 0:n.averageRating)??0).toFixed(1)}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Puan"}),Ot.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Son değerlendirmelerin ortalaması"})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-slate-100 rounded-xl",children:Ot.jsx($,{className:"w-6 h-6 text-slate-800"})}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded-lg",children:"Teslimatlar"})]}),Ot.jsx("div",{className:"text-3xl font-bold text-slate-900",children:Gr((null==n?void 0:n.totalEarnings)||0)}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Toplam Kazanç"}),Ot.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Bu dönem teslim edilen işlerden"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6 lg:col-span-2",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center",children:Ot.jsx(ge,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"14 Günlük Aktivite"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Gün bazlı alınan/atanan işler"})]})]})}),Ot.jsx("div",{className:"h-56 flex items-end gap-2",children:0===p.length?Ot.jsx("div",{className:"text-sm text-slate-500",children:"Henüz veri yok - iş kabul edin"}):p.map((e,t)=>{var s;const a=Math.max(6,Math.round(e.count/g*100)),l=(null==(s=e.date)?void 0:s.slice(5))||String(t+1);return Ot.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[Ot.jsx("div",{className:"w-full rounded-t-lg bg-gradient-to-t from-slate-800 to-blue-900",style:{height:`${a}%`},title:`${e.date}: ${e.count}`}),Ot.jsx("div",{className:"mt-2 text-[11px] text-slate-500",children:l})]},`${e.date}-${t}`)})})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:Ot.jsx(Y,{className:"w-5 h-5 text-slate-800"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"En Çok Rotalar"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Dönem bazlı"})]})]}),Ot.jsx("div",{className:"space-y-3",children:0===((null==n?void 0:n.topRoutes)||[]).length?Ot.jsx("div",{className:"text-sm text-slate-500",children:"Henüz veri yok - iş kabul edin"}):((null==n?void 0:n.topRoutes)||[]).map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"text-sm text-slate-800 font-medium truncate pr-3",children:[e.fromCity||"-"," → ",e.toCity||"-"]}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 bg-slate-100 px-2 py-1 rounded-lg",children:e.count})]},`${e.fromCity}-${e.toCity}-${t}`))})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[Ot.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Aylık Trend"}),0===((null==o?void 0:o.monthlyTrend)||[]).length?Ot.jsx("div",{className:"text-sm text-slate-500",children:"Veri bulunamadı"}):Ot.jsx("div",{className:"space-y-3",children:((null==o?void 0:o.monthlyTrend)||[]).slice(-8).map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-sm text-slate-700",children:e.month}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs("div",{className:"text-xs text-slate-600",children:[e.shipments," iş"]}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-800",children:Gr(e.revenue)})]})]},`${e.month}-${t}`))})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[Ot.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Teklif Performansı"}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[Ot.jsxs("div",{className:"p-4 rounded-xl border border-slate-200 bg-slate-50",children:[Ot.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Toplam Teklif"}),Ot.jsx("div",{className:"text-xl font-bold text-slate-900",children:(null==m?void 0:m.totalOffers)||0})]}),Ot.jsxs("div",{className:"p-4 rounded-xl border border-slate-200 bg-slate-50",children:[Ot.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Kabul"}),Ot.jsx("div",{className:"text-xl font-bold text-slate-900",children:(null==m?void 0:m.acceptedOffers)||0})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ot.jsx("div",{className:"text-sm text-slate-700",children:"Kabul Oranı"}),Ot.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["%",(null==m?void 0:m.successRate)??0]})]}),Ot.jsx("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden mb-4",children:Ot.jsx("div",{className:"h-full bg-gradient-to-r from-slate-800 to-blue-900",style:{width:`${Math.min(100,Math.max(0,(null==m?void 0:m.successRate)||0))}%`}})}),Ot.jsxs("div",{className:"text-xs text-slate-500",children:["Ortalama Teklif: ",Gr((null==m?void 0:m.averageOffer)||0)]})]})]})]})]}):Ot.jsx(Pl,{message:"Analitik veriler yükleniyor..."})};function qr(){return Ot.jsx(Zi,{userType:"nakliyeci"})}const Hr=async e=>{const t=await fetch(Zs("/api/users/account"),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)});return await gr(t)};function Ur(){const{showToast:e}=ka(),{user:t,updateUser:s}=sa(),[a,i]=l.useState("company"),[r,n]=l.useState(!1),[o,c]=l.useState(!1),[m,x]=l.useState(""),[u,h]=l.useState(!1),[p,g]=l.useState(!1),[b,f]=l.useState(!1),[y,j]=l.useState(null),[w,S]=l.useState(!0),[z,T]=l.useState({company:{name:"Hızlı Lojistik A.Ş.",email:"info@hizlilojistik.com",phone:"+90 212 555 0123",address:"İstanbul, Türkiye",taxNumber:"1234567890",website:"www.hizlilojistik.com"},notifications:{email:!0,sms:!0,push:!0,jobAlerts:!0,messageAlerts:!0,paymentAlerts:!1,systemAlerts:!0},privacy:{showProfile:!0,showLocation:!1,showEarnings:!1,allowMessages:!0,showCompanyInfo:!0},security:{twoFactor:!1,biometric:!0,sessionTimeout:30,passwordExpiry:90},preferences:{theme:"light",language:"tr",timezone:"Europe/Istanbul",currency:"TRY"},business:{commissionRate:1,autoAcceptJobs:!1,maxDistance:100,workingHours:{start:"08:00",end:"18:00",days:["monday","tuesday","wednesday","thursday","friday"]}}}),D=[{label:"Ana Sayfa",icon:Ot.jsx(ge,{className:"w-4 h-4"}),href:"/nakliyeci/dashboard"},{label:"Ayarlar",icon:Ot.jsx(oe,{className:"w-4 h-4"})}],_=[{id:"company",name:"Şirket Bilgileri",icon:A},{id:"vehicles",name:"Araçlar & Ekipmanlar",icon:E},{id:"account",name:"Hesap",icon:U}],I=()=>{n(!0),setTimeout(()=>{x("Ayarlar başarıyla kaydedildi"),c(!0),n(!1)},1e3)},M=(e,t,s)=>{T(a=>({...a,[e]:{...a[e],[t]:s}}))};l.useEffect(()=>{(async()=>{if(t&&"nakliyeci"===t.role)try{S(!0);const e=localStorage.getItem("authToken"),t=await fetch(Zs("/api/carriers/nakliyeci/stats"),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await gr(t);e.success&&j(e.data)}}catch(e){}finally{S(!1)}else S(!1)})()},[t]),l.useEffect(()=>{(async()=>{var e;try{const a=localStorage.getItem("authToken");if(!a)return;if(!t||!t.nakliyeciCode){const t=await fetch(Zs("/api/users/profile"),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(t.ok){const a=await gr(t),l=(null==(e=a.data)?void 0:e.user)||a.user||a.data||a,i=(null==l?void 0:l.nakliyeciCode)||(null==l?void 0:l.nakliyecicode);i&&s({nakliyeciCode:i})}}}catch(a){}})()},[t,s]);const $=e=>{if(!(null==t?void 0:t.nakliyeciCode))return;const s=`YolNext platformunda nakliyeciyim! Kodum: ${t.nakliyeciCode} - Beni favorilerinize ekleyin ve birlikte çalışalım!`,a=window.location.origin,l={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}&quote=${encodeURIComponent(s)}`,twitter:`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}&url=${encodeURIComponent(a)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}&summary=${encodeURIComponent(s)}`,whatsapp:`https://wa.me/?text=${encodeURIComponent(s+" "+a)}`};l[e]&&window.open(l[e],"_blank","width=600,height=400")};return r?Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:Ot.jsx(Pl,{message:"Ayarlar kaydediliyor..."})})}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Ayarlar - Nakliyeci Panel - YolNext"}),Ot.jsx("meta",{name:"description",content:"Nakliyeci ayar yönetimi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:D})}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-0",children:[Ot.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(oe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Ayarlar"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Şirket ve uygulama ayarlarınızı yönetin"})]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:Ot.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg sm:rounded-xl hover:shadow-lg transition-all duration-200 text-sm font-medium",children:[Ot.jsx(We,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Kaydet"})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-200",children:Ot.jsx("nav",{className:"p-4",children:Ot.jsx("ul",{className:"space-y-2",children:_.map(e=>Ot.jsx("li",{children:Ot.jsxs("button",{onClick:()=>i(e.id),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors "+(a===e.id?"bg-slate-800 text-white":"text-slate-700 hover:bg-slate-100"),children:[Ot.jsx(e.icon,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm font-medium",children:e.name})]})},e.id))})})})}),Ot.jsx("div",{className:"lg:col-span-3",children:Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-200",children:Ot.jsxs("div",{className:"p-4 sm:p-6",children:["account"===a&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Hesap"}),Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 sm:p-5 shadow-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ot.jsx(W,{className:"w-5 h-5 text-slate-900"}),Ot.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Yasal Belgeler"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2",children:[Ot.jsx(d,{to:"/terms",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Kullanım Koşulları"}),Ot.jsx(d,{to:"/privacy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Gizlilik Politikası"}),Ot.jsx(d,{to:"/cookie-policy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Çerez Politikası"}),Ot.jsx("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("yolnext:cookie-preferences")),className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900 text-left",children:"Çerez Tercihleri"}),Ot.jsx(d,{to:"/kvkk-aydinlatma",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"KVKK Aydınlatma Metni"}),Ot.jsx(d,{to:"/consumer-rights",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Tüketici Hakları"}),Ot.jsx(d,{to:"/distance-selling-contract",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Mesafeli Satış Sözleşmesi"})]})]}),Ot.jsx("div",{className:"bg-white border border-slate-200 rounded-xl p-4 sm:p-5 shadow-sm",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(te,{className:"w-5 h-5 text-amber-600 mt-0.5"}),Ot.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[Ot.jsx("p",{className:"font-semibold text-slate-900",children:"Komisyon Bilgisi"}),Ot.jsx("p",{children:"Teklif verirken komisyon blokesi, teklif kabul edildiğinde komisyon kesintisi için detaylara bakabilirsiniz."}),Ot.jsxs("button",{type:"button",onClick:()=>window.location.href="/nakliyeci/offers",className:"inline-flex items-center gap-1 text-blue-700 font-semibold underline hover:text-blue-800",children:["Detayları görüntüle",Ot.jsx(K,{className:"w-3 h-3"})]})]})]})}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 sm:p-5 shadow-sm",children:[Ot.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Güvenlik Ayarları"}),Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Şirket Adı"}),Ot.jsx("input",{type:"text",value:z.company.name,onChange:e=>M("company","name",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]})})]}),"company"===a&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Şirket Bilgileri"}),Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 sm:p-5 shadow-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ot.jsx(W,{className:"w-5 h-5 text-slate-900"}),Ot.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Yasal Belgeler"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2",children:[Ot.jsx(d,{to:"/terms",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Kullanım Koşulları"}),Ot.jsx(d,{to:"/privacy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Gizlilik Politikası"}),Ot.jsx(d,{to:"/cookie-policy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Çerez Politikası"}),Ot.jsx(d,{to:"/kvkk-aydinlatma",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"KVKK Aydınlatma Metni"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Şirket Adı"}),Ot.jsx("input",{type:"text",value:z.company.name,onChange:e=>M("company","name",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"E-posta"}),Ot.jsx("input",{type:"email",value:z.company.email,onChange:e=>M("company","email",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefon"}),Ot.jsx("input",{type:"tel",value:z.company.phone,onChange:e=>M("company","phone",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Vergi Numarası"}),Ot.jsx("input",{type:"text",value:z.company.taxNumber,onChange:e=>M("company","taxNumber",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{className:"md:col-span-2",children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Adres"}),Ot.jsx("textarea",{value:z.company.address,onChange:e=>M("company","address",e.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Website"}),Ot.jsx("input",{type:"url",value:z.company.website,onChange:e=>M("company","website",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsx("div",{className:"md:col-span-2",children:Ot.jsxs("div",{className:"bg-gradient-to-br from-slate-800 via-blue-900 to-slate-800 rounded-xl p-6 shadow-2xl border-2 border-blue-500/30 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-500/10 rounded-full blur-2xl"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(Oe,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:["Nakliyeci Kodunuz",y&&y.favoriteCount>0&&Ot.jsxs("span",{className:"px-2 py-1 bg-emerald-500/20 border border-emerald-400/50 rounded-lg text-emerald-300 text-sm font-semibold flex items-center gap-1",children:[Ot.jsx(O,{className:"w-3 h-3 fill-emerald-400"}),y.badge]})]}),Ot.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Bu kodunuzu paylaşın, daha fazla iş fırsatı yakalayın!"})]})]})}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-4 border border-white/20",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-xs text-blue-200 mb-1 font-medium",children:"Benzersiz Kodunuz"}),Ot.jsx("div",{className:"text-3xl font-mono font-bold text-white tracking-wider",children:(null==t?void 0:t.nakliyeciCode)||"Kod yükleniyor..."})]}),Ot.jsx("button",{onClick:()=>{(null==t?void 0:t.nakliyeciCode)&&(navigator.clipboard.writeText(t.nakliyeciCode),f(!0),setTimeout(()=>f(!1),2e3))},className:"ml-4 px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-2 text-white font-medium shadow-lg hover:shadow-xl",children:b?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(J,{className:"w-5 h-5"}),Ot.jsx("span",{children:"Kopyalandı!"})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(gt,{className:"w-5 h-5"}),Ot.jsx("span",{children:"Kopyala"})]})})]})}),y&&Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-4 border border-white/20",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-green-500 rounded-lg flex items-center justify-center",children:Ot.jsx(C,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-white",children:y.favoriteCount}),Ot.jsx("div",{className:"text-xs text-blue-200",children:"Kurumsal Kullanıcı"})]})]}),Ot.jsx("div",{className:"text-right",children:Ot.jsx("div",{className:"text-sm text-blue-200 font-medium",children:y.message})})]})}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"text-sm font-semibold text-white mb-2 flex items-center gap-2",children:[Ot.jsx(Ye,{className:"w-4 h-4"}),"Sosyal Medyada Paylaş"]}),Ot.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[Ot.jsxs("button",{onClick:()=>$("facebook"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:[Ot.jsx(v,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Facebook"})]}),Ot.jsxs("button",{onClick:()=>$("twitter"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:[Ot.jsx(N,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Twitter"})]}),Ot.jsxs("button",{onClick:()=>$("linkedin"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-blue-700 hover:bg-blue-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:[Ot.jsx(k,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"LinkedIn"})]}),Ot.jsxs("button",{onClick:()=>$("whatsapp"),className:"flex items-center justify-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg font-medium text-sm",children:[Ot.jsx(Ee,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"WhatsApp"})]})]}),Ot.jsxs("button",{onClick:()=>{if(!(null==t?void 0:t.nakliyeciCode))return;const e=`${`YolNext platformunda nakliyeciyim! Kodum: ${t.nakliyeciCode} - Beni favorilerinize ekleyin ve birlikte çalışalım!`}\n\n${window.location.origin}`;navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg font-medium",children:[Ot.jsx(gt,{className:"w-4 h-4"}),"Paylaşım Metnini Kopyala"]})]})]})]})})]})]}),"vehicles"===a&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Araçlar & Ekipmanlar"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Sahip olduğunuz araç tipleri ve ekipmanları belirtin. Bu bilgiler göndericilerin doğru teklif vermesini sağlar."}),Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:[Ot.jsx(E,{className:"w-4 h-4 inline mr-2"}),"Sahip Olduğunuz Araç Tipleri"]}),Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[{id:"van",label:"Van"},{id:"kamyonet",label:"Kamyonet"},{id:"kamyon",label:"Kamyon"},{id:"refrigerated",label:"Soğutmalı Araç"},{id:"open_truck",label:"Açık Kasa Kamyon"},{id:"closed_truck",label:"Kapalı Kasa Kamyon"}].map(e=>Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("input",{type:"checkbox",id:`vehicle_${e.id}`,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:`vehicle_${e.id}`,className:"text-sm font-medium text-slate-700",children:e.label})]},e.id))})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Sahip Olduğunuz Dorse Tipleri"}),Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[{id:"tenteli",label:"Tenteli Dorse"},{id:"frigorific",label:"Frigorifik Dorse"},{id:"lowbed",label:"Lowbed Dorse"},{id:"kapalı",label:"Kapalı Dorse"},{id:"açık",label:"Açık Dorse"}].map(e=>Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("input",{type:"checkbox",id:`trailer_${e.id}`,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:`trailer_${e.id}`,className:"text-sm font-medium text-slate-700",children:e.label})]},e.id))})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Sahip Olduğunuz Özel Ekipmanlar"}),Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[{id:"crane",label:"Vinç"},{id:"forklift",label:"Forklift"},{id:"hydraulic_lifter",label:"Hidrolik Kaldırıcı"}].map(e=>Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("input",{type:"checkbox",id:`equipment_${e.id}`,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:`equipment_${e.id}`,className:"text-sm font-medium text-slate-700",children:e.label})]},e.id))})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Ağır Tonaj Kapasitesi"}),Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"heavy_tonage_capability",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"heavy_tonage_capability",className:"text-sm font-medium text-slate-700",children:"40+ ton taşıma kapasitesi"})]}),Ot.jsx("p",{className:"text-xs text-slate-500 mt-2 ml-7",children:"Ağır tonajlı yükler için özel izin ve ekipman gereklidir."})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Geniş Yük Kapasitesi"}),Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsx("input",{type:"checkbox",id:"oversized_capability",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),Ot.jsx("label",{htmlFor:"oversized_capability",className:"text-sm font-medium text-slate-700",children:"Geniş yük taşıma kapasitesi (özel izinli)"})]}),Ot.jsx("p",{className:"text-xs text-slate-500 mt-2 ml-7",children:"Geniş yükler için özel izin ve rota planlaması gereklidir."})]}),Ot.jsx("div",{className:"pt-4 border-t border-slate-200",children:Ot.jsx("button",{onClick:I,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Kaydediliyor...":"Kaydet"})})]})]}),"account"===a&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Hesap"}),Ot.jsxs("div",{className:"pt-2",children:[Ot.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5"}),"Tehlikeli Bölge"]}),Ot.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:[Ot.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Hesabı Sil"}),Ot.jsx("p",{className:"text-sm text-red-800 mb-4",children:"Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz. Tüm verileriniz silinecek ve hesabınıza bir daha erişemeyeceksiniz."}),Ot.jsx("button",{onClick:async()=>{if(window.confirm("Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!")){const s=window.prompt("Güvenlik için şifrenizi girin:");if(s)try{n(!0);(await Hr({password:s,reason:"Kullanıcı talebi"})).success?(yr(e,"ACTION_COMPLETED","success"),setTimeout(()=>{localStorage.clear(),window.location.href="/"},2e3)):yr(e,"OPERATION_FAILED","error")}catch(t){yr(e,"OPERATION_FAILED","error")}finally{n(!1)}}},disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Siliniyor...":"Hesabımı Sil"})]})]})]})]})})})]})]}),o&&Ot.jsx(Fl,{message:m,onClose:()=>c(!1),isVisible:o})]})}const Vr=()=>{const{showToast:e}=ka(),[t,s]=l.useState(null),[a,i]=l.useState(""),[r,n]=l.useState(!1),[d,o]=l.useState([]),[c,m]=l.useState([]),[x,u]=l.useState(!1),[h,p]=l.useState({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),g=[{step:1,title:"Profil ve Belgeleri Tamamlayın",description:"Firma bilgileri, araç/taşıyıcı detayları ve gerekli evrakları ekleyin",icon:C},{step:2,title:"Yük Pazarı’nı İnceleyin",description:"Açık işleri filtreleyin, uygun yükleri bulun",icon:R},{step:3,title:"Teklif Verin",description:"Fiyat ve teslimat planını belirleyip teklifinizi gönderin",icon:O},{step:4,title:"İşi Planlayın",description:"Kazanılan işleri Aktif Yükler’den yönetin, rota ve kaynak planı yapın",icon:T},{step:5,title:"Teslimat ve Kazanç",description:"Süreç durumlarını güncelleyin, teslimatı tamamlayın ve kazanç/komisyon durumunuzu takip edin",icon:$}],b=[{category:"Başlangıç",icon:ve,items:[{question:"Nakliyeci paneli ne işe yarar?",answer:"Nakliyeci paneli, yük pazarındaki işleri bulup teklif vermenizi, kazandığınız işleri aktif süreçte yönetmenizi ve rota/operasyon planlaması yapmanızı sağlar."},{question:"Hesap oluşturmak ücretsiz mi?",answer:"Hesap oluşturma ücretsizdir. Komisyon ve kazanç/hakediş detayları iş/süreç şartlarına göre değişebilir."},{question:"Hangi işler bana uygundur?",answer:"Yük pazarı ekranından rota, tarih, araç tipi ve yük özelliklerine göre filtreleyerek size uygun işleri listeleyebilirsiniz."}]},{category:"Yük Pazarı ve Teklif",icon:R,items:[{question:"Bir işe nasıl teklif veririm?",answer:"Yük pazarından işi açıp teklif adımlarını tamamlayın. Fiyat, tahmini teslimat planı ve varsa şartlarınızı ekleyerek teklifinizi gönderin."},{question:"Teklif vermeden önce göndericiyle konuşabilir miyim?",answer:"Evet. İş/ilan detayından mesajlaşarak yük detaylarını, teslimat şartlarını ve evrak ihtiyaçlarını netleştirebilirsiniz."},{question:"Fiyatı nasıl belirlemeliyim?",answer:"Mesafe, yakıt, operasyon maliyetleri, araç tipi ve teslimat süresini dikkate alarak teklifinizi oluşturabilirsiniz. Teklif koşullarını açık yazmanız süreci hızlandırır."},{question:"İş kazanınca ne olur?",answer:"Teklifiniz kabul edildiğinde iş, Aktif Yükler bölümüne düşer. Buradan süreç adımlarını, mesajlaşmaları ve planlamayı yönetirsiniz."}]},{category:"İş Yönetimi ve Takip",icon:$,items:[{question:"İş durumlarını nasıl güncellerim?",answer:"Aktif Yükler ekranından ilgili işi açıp süreç adımlarına göre durum güncellemelerini yapabilirsiniz. Böylece hem siz hem gönderici süreci şeffaf şekilde takip eder."},{question:"Rota planlayıcı ne işe yarar?",answer:"Akıllı rota ile birden fazla işi daha verimli planlayabilir, kilometre ve zaman optimizasyonu sağlayabilirsiniz."},{question:"Teslimat sonrası süreç nasıl ilerler?",answer:"Teslimat tamamlandıktan sonra iş kapanır ve kazanç/komisyon süreçleri iş koşullarına göre ilerler. Detayları cüzdan ekranından takip edebilir; sorun yaşarsanız destek talebi oluşturabilirsiniz."},{question:"Evrak ve teslimat doğrulaması gerekiyor mu?",answer:"Bazı işler için teslimat evrakı veya doğrulama gerekebilir. İlan/iş detayındaki talimatları takip edin."}]},{category:"Kazanç ve Komisyon",icon:$,items:[{question:"Komisyon ve kesintiler nasıl işler?",answer:"Komisyon ve kesintiler iş türüne ve süreç koşullarına göre değişebilir. Net bilgi için sözleşme/iş detaylarını inceleyebilir veya destek talebi oluşturabilirsiniz."},{question:"Kazanç ne zaman görünür?",answer:"Kazanç görünürlüğü teslimat doğrulaması ve süreç şartlarına göre değişebilir. Durumu ilgili iş veya cüzdan ekranından takip edebilirsiniz."},{question:"Fatura/evrak süreçlerini nasıl yönetirim?",answer:"Kurumsal işler için evrak akışı gerekebilir. İş detayındaki evrak listesini takip ederek süreci tamamlayabilirsiniz."}]},{category:"İptal ve Uyuşmazlık",icon:te,items:[{question:"İş iptal edilebilir mi?",answer:"İş, taşıma başlamadan önce uygun durumdayken iptal edilebilir. Taşıma başladıktan sonra iptal koşulları değişebilir."},{question:"İptal/uyuşmazlık durumunda ne yapmalıyım?",answer:"İş detayındaki kayıtlar (mesajlaşma, zaman çizelgesi) üzerinden inceleme yapılır. Destek talebi oluşturarak süreci hızlandırabilirsiniz."}]}],y=async()=>{var e;try{u(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=await fetch(Zs("/api/support/tickets"),{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await gr(s),a=(null==(e=null==t?void 0:t.data)?void 0:e.tickets)||(null==t?void 0:t.data)||(null==t?void 0:t.tickets)||[];o(Array.isArray(a)?a:[])}}catch(t){}finally{u(!1)}};l.useEffect(()=>{(async()=>{try{const e=await fetch(Zs("/api/support/categories"));if(e.ok){const t=await gr(e),s=(null==t?void 0:t.data)||(null==t?void 0:t.categories)||[];m(Array.isArray(s)?s:[])}}catch(e){}})(),y()},[]);const j=l.useCallback(()=>{n(!0),window.setTimeout(()=>{var e,t;null==(e=document.getElementById("support-section"))||e.scrollIntoView({behavior:"smooth",block:"start"}),null==(t=document.getElementById("support-category"))||t.focus()},50)},[]),v=b.flatMap(e=>e.items),N=v.filter(e=>e.question.toLowerCase().includes(a.toLowerCase())||e.answer.toLowerCase().includes(a.toLowerCase()));return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Yardım ve Destek Merkezi - Nakliyeci | YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext Yardım ve Destek Merkezi - SSS, kapsamlı rehberler ve profesyonel destek talebi hizmetleri"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/nakliyeci/dashboard"},{label:"Yardım ve Destek Merkezi",href:"/nakliyeci/help"}]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(ce,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"YolNext Yardım ve Destek Merkezi"}),Ot.jsx("p",{className:"text-slate-200 text-lg leading-relaxed",children:"Türkiye'nin lider lojistik platformunda size yardımcı olmak için buradayız. Hızlı cevaplar, kapsamlı rehberler ve profesyonel destek hizmetlerimizden faydalanın."})]})]}),Ot.jsx("div",{className:"max-w-2xl",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-300 w-5 h-5"}),Ot.jsx("input",{type:"text",placeholder:"Sorunuzu arayın...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-12 pr-4 py-3.5 border border-white/20 bg-white/10 backdrop-blur-sm rounded-xl focus:border-white/40 focus:ring-2 focus:ring-white/20 outline-none transition-all text-white placeholder:text-slate-300"})]})})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Hızlı Başlangıç Rehberi"}),Ot.jsx("p",{className:"text-slate-600",children:"5 adımda YolNext'i kullanmaya başlayın"})]})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:g.map((e,t)=>{const s=e.icon;return Ot.jsxs("div",{className:"relative",children:[Ot.jsxs("div",{className:"bg-slate-50 border border-gray-100 rounded-lg p-5 h-full",children:[Ot.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg mb-3 mx-auto",children:Ot.jsx(s,{className:"w-5 h-5 text-white"})}),Ot.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-slate-800 to-blue-900 text-white rounded-full flex items-center justify-center font-bold text-xs",children:e.step}),Ot.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2 text-center",children:e.title}),Ot.jsx("p",{className:"text-xs text-slate-600 text-center",children:e.description})]}),t<g.length-1&&Ot.jsx("div",{className:"hidden md:block absolute top-1/2 -right-2 transform -translate-y-1/2",children:Ot.jsx(K,{className:"w-4 h-4 text-slate-400"})})]},t)})})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx(W,{className:"w-6 h-6 text-slate-900"}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Sık Sorulan Sorular"})]}),a?Ot.jsxs("div",{className:"mb-4 text-slate-600 text-sm",children:[Ot.jsx("strong",{children:N.length})," sonuç bulundu"]}):Ot.jsx("div",{className:"mb-6",children:Ot.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((e,t)=>{const a=e.icon;return Ot.jsxs("button",{onClick:()=>{const t=b.findIndex(t=>t.category===e.category),a=b.slice(0,t).reduce((e,t)=>e+t.items.length,0);s(a)},className:"flex items-center gap-2 px-3 py-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 border border-gray-200 transition-colors text-sm font-medium",children:[Ot.jsx(a,{className:"w-4 h-4"}),e.category]},t)})})}),Ot.jsx("div",{className:"space-y-3",children:(a?N:v).map((e,a)=>{const l=t===a;return Ot.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:border-blue-300 transition-all",children:[Ot.jsxs("button",{onClick:()=>(e=>{s(t===e?null:e)})(a),className:"w-full p-4 flex items-center justify-between text-left hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-4 h-4 text-slate-600"})})}),Ot.jsx("div",{className:"flex-1",children:Ot.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1",children:e.question})})]}),l?Ot.jsx(Ue,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"}):Ot.jsx(Ve,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"})]}),l&&Ot.jsx("div",{className:"px-4 pb-4 pt-0 border-t border-gray-200",children:Ot.jsx("div",{className:"pl-11 pt-3",children:Ot.jsx("p",{className:"text-slate-600 leading-relaxed text-sm",children:e.answer})})})]},a)})}),a&&0===N.length&&Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(me,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),Ot.jsx("p",{className:"text-slate-600",children:"Aradığınız soru bulunamadı. Lütfen farklı bir arama terimi deneyin."})]})]}),!1,!1,r&&Ot.jsxs("div",{id:"support-section",className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsxs("div",{className:"relative z-10 text-center mb-8",children:[Ot.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:Ot.jsx(he,{className:"w-8 h-8 text-white"})}),Ot.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Profesyonel Destek Hizmeti"}),Ot.jsx("p",{className:"text-slate-200 max-w-2xl mx-auto text-lg",children:"FAQ bölümünde aradığınızı bulamadınız mı? Uzman destek ekibimizden kişiselleştirilmiş yardım alın."})]}),Ot.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(G,{className:"w-5 h-5 text-slate-900"}),"Mevcut Destek Talepleriniz (",d.length,")"]}),x?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-3"}),Ot.jsx("p",{className:"text-slate-600",children:"Destek talepleri yükleniyor..."})]}):0===d.length?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(f,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Henüz destek talebiniz bulunmuyor"}),Ot.jsx("p",{className:"text-slate-600",children:"İlk destek talebinizi oluşturarak başlayabilirsiniz."})]}):Ot.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:d.map(e=>Ot.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsx("h4",{className:"font-medium text-slate-900 text-sm",children:e.subject}),Ot.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["#",e.ticket_number]})]}),Ot.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[Ot.jsx(L,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("tr-TR")]})]},e.id))})]}),Ot.jsxs("div",{id:"new-ticket-form",className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(ue,{className:"w-5 h-5 text-slate-900"}),"Yeni Destek Talebi Oluştur"]}),Ot.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),h.category&&h.subject&&h.description)try{u(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=new FormData;s.append("category",h.category),s.append("priority",h.priority),s.append("subject",h.subject),s.append("description",h.description),h.relatedShipmentId&&s.append("relatedShipmentId",h.relatedShipmentId);const a=await fetch(Zs("/api/support/tickets"),{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s});if(a.ok)yr(e,"SUPPORT_TICKET_CREATED","success"),p({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),y();else{const t=a.ok?await gr(a).catch(()=>null):null;yr(e,"OPERATION_FAILED","error",(null==t?void 0:t.message)||"Destek talebi oluşturulurken bir hata oluştu. Lütfen tekrar deneyin.")}}catch(s){yr(e,"NETWORK_ERROR","error")}finally{u(!1)}else yr(e,"REQUIRED_FIELDS","error")},className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Kategori *"}),Ot.jsxs("select",{id:"support-category",value:h.category,onChange:e=>p({...h,category:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",required:!0,children:[Ot.jsx("option",{value:"",children:"Kategori seçin"}),c.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Konu *"}),Ot.jsx("input",{type:"text",value:h.subject,onChange:e=>p({...h,subject:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",placeholder:"Destek talebinizin konusu",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Açıklama *"}),Ot.jsx("textarea",{value:h.description,onChange:e=>p({...h,description:e.target.value}),rows:4,className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none bg-white text-slate-900",placeholder:"Sorununuzu detaylı olarak açıklayın",required:!0})]}),Ot.jsx("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Gönderiliyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ue,{className:"w-4 h-4"}),"Destek Talebi Oluştur"]})})]})]})]})]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-24 -translate-x-24"}),Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-white"}),Ot.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Hala Yardıma İhtiyacınız mı Var?"}),Ot.jsx("p",{className:"text-slate-200 mb-8 max-w-2xl mx-auto",children:"Sorularınız için bizimle iletişime geçebilirsiniz. Destek ekibimiz size yardımcı olmaktan mutluluk duyar."}),Ot.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:Ot.jsxs("button",{type:"button",onClick:j,className:"bg-white text-slate-900 px-6 py-3 rounded-lg font-semibold hover:bg-slate-100 transition-colors flex items-center gap-2 shadow-lg",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Destek Talebi Oluştur"]})})]})]})]})]})};function Jr(){return Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(Ne,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:["İş"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"İlanları"})]}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"Açık gönderiler için teklif verin ve iş alın"})]})}const Wr=()=>{var e,t;const{user:s}=sa(),{token:a}=sa(),[i,r]=l.useState([]),[n,d]=l.useState(!0),[o,c]=l.useState(null),[m,x]=l.useState(""),[u,h]=l.useState(null),[p,g]=l.useState(null),[b,f]=l.useState(""),[j,v]=l.useState(""),[N,k]=l.useState(""),[w,S]=l.useState("all"),[z,C]=l.useState("all"),[A,D]=l.useState("date"),[_,I]=l.useState("desc"),[K,M]=l.useState(!1),[B,O]=l.useState(!1),[P,G]=l.useState(null),[F,Y]=l.useState(""),[q,H]=l.useState(""),[V,J]=l.useState(!1),[W,Z]=l.useState(null),[X,Q]=l.useState(!1),[ee,se]=l.useState(""),ae=!!(null==(t=null==(e=import.meta)?void 0:e.env)?void 0:t.DEV)&&(()=>{try{return"1"===localStorage.getItem("debug:api")}catch{return!1}})(),[le,ie]=l.useState({page:1,pages:1,total:0,limit:50}),[re,ne]=l.useState(!0),[de,oe]=l.useState(!1);l.useEffect(()=>{ie(e=>e.limit<50?{...e,limit:50,page:1}:e)},[]),l.useEffect(()=>{const e=null==s?void 0:s.id,t=String((null==s?void 0:s.role)||"nakliyeci").toLowerCase();e&&(localStorage.setItem(`yolnext:lastSeen:market:${e}:${t}`,(new Date).toISOString()),window.dispatchEvent(new Event("yolnext:refresh-badges")))},[s]),l.useEffect(()=>{1===le.page?he(!1):he(!0)},[le.page]),l.useEffect(()=>{ie(e=>({...e,page:1})),r([]),ne(!0)},[w,b,j,N]),l.useEffect(()=>{1===le.page&&he(!1)},[w,b,j,N]);const ce={waiting_for_offers:"Teklif Bekliyor",open:"Teklif Bekliyor",pending:"Beklemede",offer_accepted:"Teklif Kabul Edildi",accepted:"Teklif Kabul Edildi",assigned:"Taşıyıcı Atandı",in_progress:"Yükleme",picked_up:"Yük Alındı",in_transit:"Yolda",delivered:"Teslim Edildi",completed:"Tamamlandı",cancelled:"İptal Edildi"},xe=e=>{const t=String(e||"").trim();return t?"open"===t?"waiting_for_offers":t:"waiting_for_offers"},ue=e=>{const t=xe(e);return ce[t]||t},he=async(e=!1)=>{var t;try{e?oe(!0):(d(!0),c(null)),ae&&Ql("[JOBS] Loading jobs...",e?"(load more)":"");const i=a||localStorage.getItem("authToken")||localStorage.getItem("token")||"",n=new URLSearchParams({page:le.page.toString(),limit:le.limit.toString()});"all"!==w&&n.append("status",w),b&&b.trim()&&n.append("search",b.trim()),j&&j.trim()&&n.append("fromCity",j.trim()),N&&N.trim()&&n.append("toCity",N.trim());const o=new AbortController,m=setTimeout(()=>o.abort(),1e4);let u;try{const e=`${Zs("/api/shipments/open")}?${n.toString()}`;ae&&si("[JOBS] Request URL:",e),x(e),u=await fetch(e,{headers:{Authorization:i?`Bearer ${i}`:"","Content-Type":"application/json; charset=utf-8",Accept:"application/json; charset=utf-8"},signal:o.signal}),ae&&si("[JOBS] Response status:",u.status),h(u.status)}catch(l){if(clearTimeout(m),"AbortError"===l.name)throw new Error("İstek zaman aşımına uğradı. Lütfen tekrar deneyin.");throw l}const p=await u.text(),f=JSON.parse(p);if(ae&&si("[JOBS] API response:",f),f.success){ae&&si("[JOBS] API returned rows:",Array.isArray(f.data)?f.data.length:0),g("number"==typeof(null==(t=null==f?void 0:f.pagination)?void 0:t.total)?f.pagination.total:null);const a=(f.data||[]).map(e=>{const t=null!=(null==s?void 0:s.id)&&""!==String(s.id).trim()?Number(s.id):NaN,a=e.pickupCity||e.pickup_city||e.pickupcity||e.fromCity||e.from_city||e.fromcity,l=e.pickupDistrict||e.pickup_district||e.pickupdistrict,i=e.deliveryCity||e.delivery_city||e.deliverycity||e.toCity||e.to_city||e.tocity,r=e.deliveryDistrict||e.delivery_district||e.deliverydistrict,n=e.pickupAddress||e.pickup_address||e.pickupaddress||e.from_address||e.fromaddress||"",d=e.deliveryAddress||e.delivery_address||e.deliveryaddress||e.to_address||e.toaddress||"",o=(e.category||e.cargoType||e.shipmentType||e.categoryType,e.description||e.productDescription||""),c=$l(e.title||`${a||"—"} → ${i||"—"}`),m=xe(e.status),x=e.trackingNumber||e.tracking_number||e.trackingnumber||e.trackingCode||e.tracking_code||e.trackingcode||e.shipmentCode||e.shipment_code||e.shipmentcode||e.code||e.trackingNo||e.tracking_no||e.tracking;let u=e.metadata??e.meta??e.shipment_meta??e.shipmentMeta;if("string"==typeof u)try{u=JSON.parse(u)}catch(S){}const h="number"==typeof e.weight?e.weight:"number"==typeof e.weight_kg?e.weight_kg:parseFloat(String(e.weight??e.weight_kg??0))||0,p=e.dimensions||e.dimension||e.size||e.dimensions_text||"",g="number"==typeof e.quantity?e.quantity:"number"==typeof e.quantity_count?e.quantity_count:"number"==typeof e.itemCount?e.itemCount:"number"==typeof e.item_count?e.item_count:null!=e.quantity?Number(e.quantity):null!=e.quantity_count?Number(e.quantity_count):null!=e.itemCount?Number(e.itemCount):null!=e.item_count?Number(e.item_count):void 0;let b=e.categoryData||e.category_data||void 0;if("string"==typeof b)try{b=JSON.parse(b)}catch(S){b=void 0}const f=e.publishType||e.publish_type||(null==u?void 0:u.publishType)||(null==u?void 0:u.publish_type)||null,y=String(f||"").trim().toLowerCase(),j=e.targetNakliyeciId||e.target_nakliyeci_id||(null==u?void 0:u.targetNakliyeciId)||(null==u?void 0:u.target_nakliyeci_id),v=null!=j&&""!==String(j).trim()?Number(j):null,N="specific"===y&&null!=v&&Number.isFinite(t)&&t===Number(v),k="number"==typeof e.volume?e.volume:"number"==typeof e.volume_m3?e.volume_m3:"number"==typeof e.cbm?e.cbm:parseFloat(String(e.volume??e.volume_m3??e.cbm??""))||void 0,w="number"==typeof e.price?e.price:"number"==typeof e.budget?e.budget:"number"==typeof e.targetPrice?e.targetPrice:"number"==typeof e.expectedPrice?e.expectedPrice:"number"==typeof e.displayPrice?e.displayPrice:parseFloat(String(e.price??e.budget??e.targetPrice??e.expectedPrice??e.displayPrice??"").replace(/[^0-9.,-]/g,"").replace(",","."))||0;return{...e,id:e.id,title:c,description:o,pickupAddress:Rl(n),deliveryAddress:Rl(d),pickupCity:a,pickupDistrict:l,deliveryCity:i,deliveryDistrict:r,status:m,trackingNumber:Ri(x,e.id),trackingCode:Ri(e.trackingCode||e.tracking_code||e.trackingcode,e.id),shipmentCode:e.shipmentCode||e.shipment_code||e.shipmentcode,code:e.code,metadata:u,weight:h,dimensions:p,quantity:g,categoryData:b,volume:k,price:w,createdAt:e.createdAt||e.created_at||"",specialRequirements:e.specialRequirements||e.special_requirements||"",shipperName:e.senderName||e.shipperName||e.ownerName||e.owner_name,shipperEmail:e.senderEmail||e.shipperEmail||e.ownerEmail||e.owner_email||e.email,shipperPhone:e.senderPhone||e.shipperPhone||e.ownerPhone||e.owner_phone||e.phone,senderType:e.senderType||e.userType||e.user_type||e.ownerRole||e.owner_role||e.role,isExclusiveToCarrier:!!e.isExclusiveToCarrier||N}});r(t=>e?[...t,...a]:a),ae&&(si("[JOBS] Jobs loaded:",a.length),si("[JOBS] Total jobs:",f.pagination.total)),f.pagination&&(ie(e=>({...e,page:f.pagination.page,pages:f.pagination.pages,total:f.pagination.total})),ne(f.pagination.page<f.pagination.pages))}else{const e=f.message||"İş ilanları yüklenirken bir hata oluştu.";ei("[JOBS] API Error:",e),c(e),r([]),g(null)}}catch(i){ei("[JOBS] Fetch error:",i);const e=i.message||"İş ilanları yüklenirken bir hata oluştu.";c(e),r([]),g(null)}finally{d(!1),oe(!1)}},pe=e=>(e||"").toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/İ/g,"i"),{type:be,free:fe}=(e=>{const t=pe(e||""),s=e=>{for(const s of e){const e=new RegExp(`${s}:("[^"]+"|[^\\s]+)`,"i"),a=t.match(e);if(a)return a[1].replace(/"/g,"").replace(/^"|"$/g,"")}return""};return{from:s(["from","cikis","çıkış"]),to:s(["to","varis","varış"]),type:s(["type","yuk","yük"]),free:t.replace(/(from|cikis|çıkış):("[^"]+"|\S+)/gi,"").replace(/(to|varis|varış):("[^"]+"|\S+)/gi,"").replace(/(type|yuk|yük):("[^"]+"|\S+)/gi,"").trim()}})(b),ye=i.filter(e=>{const t=pe(e.title),s=pe(e.description),a=pe(e.pickupAddress||""),l=pe(e.deliveryAddress||""),i=pe(e.pickupCity||""),r=pe(e.deliveryCity||""),n=pe(String(e.id??"")),d=pe(String(Ri(e.trackingNumber??e.trackingCode??e.shipmentCode??e.code,e.id))),o=pe("string"==typeof e.metadata?e.metadata:e.metadata&&"object"==typeof e.metadata?JSON.stringify(e.metadata):""),c=(fe?String(fe).replace(/\D/g,""):"").replace(/^0+/,""),m=String(e.id??"").replace(/^0+/,""),x=String(Ri(e.trackingNumber??e.trackingCode??e.shipmentCode??e.code,e.id).replace(/\D/g,"")).replace(/^0+/,""),u=!c||m&&c.includes(m)||x&&c.includes(x)||m&&c===m||x&&c===x,h=!fe||t.includes(fe)||s.includes(fe)||a.includes(fe)||l.includes(fe)||i.includes(fe)||r.includes(fe)||n.includes(fe)||d.includes(fe)||o.includes(fe)||u,p="all"===w||e.status===w,g="all"===z||"low"===z&&e.price<500||"medium"===z&&e.price>=500&&e.price<1e3||"high"===z&&e.price>=1e3,b=(e=>{const t=`${e.title} ${e.description}`.toLowerCase();return t.includes("mobilya")||t.includes("ev")?"mobilya":t.includes("beyaz eşya")||t.includes("buzdolabı")||t.includes("çamaşır")?"beyaz_esya":t.includes("palet")?"palet":t.includes("araç")||t.includes("oto")?"arac":"diger"})(e);return h&&p&&g&&(!be||b===be)}).sort((e,t)=>{const s=e.isExclusiveToCarrier?1:0,a=t.isExclusiveToCarrier?1:0;if(s!==a)return a-s;let l=0;if("date"===A){l=new Date(e.createdAt||0).getTime()-new Date(t.createdAt||0).getTime()}else if("price"===A)l=(e.price||0)-(t.price||0);else if("distance"===A){l=(e.pickupCity||"").length+(e.deliveryCity||"").length-((t.pickupCity||"").length+(t.deliveryCity||"").length)}return"asc"===_?l:-l}),je=Il,ve=e=>{const t=e.categoryData&&"object"==typeof e.categoryData?e.categoryData:null;if(!t)return[];const s=(e=>{const t=e.categoryData&&"object"==typeof e.categoryData?e.categoryData:null;if(!t)return[];const s=[],a=(e,t)=>{null!=t&&("string"==typeof t&&""===t.trim()||("boolean"!=typeof t?s.push({label:e,value:String(t)}):t&&s.push({label:e,value:"Evet"})))};if(a("Birim Tipi",t.unitType),a("Malzeme Tipi",t.materialType),a("Ambalaj Tipi",t.packagingType),a("Paletli",t.isPalletized),a("Palet Sayısı",t.palletCount),a("Tehlike Sınıfı",t.hazardClass),a("UN No",t.unNumber),a("MSDS",t.hasMSDS),a("Son Kullanma",t.expiryDate),a("Sıcaklık Seti",t.temperatureSetpoint),a("Soğuk Zincir",t.coldChainRequired??t.requiresColdChain??t.temperatureControlled),a("Yükleme Ekipmanı",t.loadingEquipment),a("Depo Tipi",t.warehouseType),a("Dökme Transfer",t.isBulkTransfer),a("Dökme Tipi",t.bulkType),a("Üst Örtü",t.requiresCover),a("Orijinal Ambalaj",t.isOriginalPackaging),a("Kırılgan",t.isFragile),a("Anti-Statik",t.requiresAntiStatic),a("Malzeme Miktarı",t.materialQuantity),a("Hava Koşulu Koruma",t.requiresWeatherProtection),a("Ekipman Tipi",t.equipmentType),a("Montaj",t.requiresAssembly),a("Özel Araç",t.requiresSpecialVehicle),a("Özel İzin",t.requiresSpecialPermit),a("Sertifika",t.hasCertification),t.vehicleRequirements&&"object"==typeof t.vehicleRequirements){const e=t.vehicleRequirements;if(e.vehicleType&&a("Araç Tipi",{van:"Van",kamyonet:"Kamyonet",kamyon:"Kamyon",refrigerated:"Soğutmalı Araç",open_truck:"Açık Kasa Kamyon",closed_truck:"Kapalı Kasa Kamyon"}[e.vehicleType]||e.vehicleType),e.trailerType&&a("Dorse Tipi",{tenteli:"Tenteli Dorse",frigorific:"Frigorifik Dorse",lowbed:"Lowbed Dorse","kapalı":"Kapalı Dorse","açık":"Açık Dorse",yok:"Dorse Gerekmiyor"}[e.trailerType]||e.trailerType),a("Vinç Gerekli",e.requiresCrane),a("Forklift Gerekli",e.requiresForklift),a("Hidrolik Kaldırıcı Gerekli",e.requiresHydraulicLifter),e.heavyTonage&&a("Ağır Tonaj",e.heavyTonageAmount?`${e.heavyTonageAmount} ton`:"40+ ton"),e.oversizedLoad){const t=e.oversizedDimensions;if(t&&(t.length||t.width||t.height)){const e=[t.length,t.width,t.height].filter(Boolean).join(" x ");a("Geniş Yük Boyutları",e?`${e} m`:"Özel izin gerektiren")}else a("Geniş Yük","Özel izin gerektiren")}if(e.temperatureControl){const t=[e.temperatureMin,e.temperatureMax].filter(Boolean).join(" - ");a("Sıcaklık Kontrolü",t?`${t} ℃`:"Gerekli")}}return s})(e),a=new Set(s.map(e=>e.label)),l=[],i=e=>String(e||"").replace(/[_\s]/g,"").toLowerCase(),r=new Set(["unitType","unNumber","hazardClass","hasMsds","requiresSpecialPermit","msds"].map(i)),n=(e,t)=>{if(null==t)return;if("string"==typeof t&&""===t.trim())return;if(r.has(i(e)))return;const s=(e=>{const t=String(e||"").replace(/_/g," ").replace(/\s+/g," ").trim();return t?t.charAt(0).toUpperCase()+t.slice(1):""})(e);if(s&&!a.has(s))if("boolean"!=typeof t)if("object"!=typeof t)l.push({label:s,value:String(t)});else try{l.push({label:s,value:JSON.stringify(t)})}catch(n){l.push({label:s,value:String(t)})}else t&&l.push({label:s,value:"Evet"})};return Object.keys(t).forEach(e=>n(e,t[e])),[...s,...l]},Ne=e=>{const t=[],s=(e,s)=>{if(null==s)return;const a=String(s).trim();a&&t.push({label:e,value:a})};s("Başlangıç",[e.pickupCity,e.pickupDistrict].filter(Boolean).join(", ")),s("Bitiş",[e.deliveryCity,e.deliveryDistrict].filter(Boolean).join(", ")),s("Yükleme Adresi",Rl(e.pickupAddress)),s("Teslim Adresi",Rl(e.deliveryAddress)),s("Yükleme Tarihi",e.pickupDate?Kl(e.pickupDate,"long"):""),s("Teslim Tarihi",e.deliveryDate?Kl(e.deliveryDate,"long"):""),s("Ağırlık",e.weight&&e.weight>0?`${e.weight} kg`:""),s("Hacim",e.volume&&Number(e.volume)>0?`${e.volume}`:""),s("Ölçüler",e.dimensions),s("Adet",e.quantity&&Number(e.quantity)>0?`${e.quantity}`:""),s("Özel İstekler",e.specialRequirements),s("Bütçe",e.price&&e.price>0?je(e.price):"");for(const a of ve(e))s(a.label,a.value);return t},ke=[{label:"Ana Sayfa",icon:Ot.jsx(ge,{className:"w-4 h-4"}),href:"/nakliyeci/dashboard"},{label:"İş İlanları",icon:Ot.jsx(E,{className:"w-4 h-4"})}];return n?Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"İş İlanları - Nakliyeci Panel - YolNext"})}),Ot.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:Ot.jsx(Pl,{message:"İş ilanları yükleniyor..."})})]}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"İş İlanları - Nakliyeci Panel - YolNext"}),Ot.jsx("meta",{name:"description",content:"Nakliyeci için açık iş ilanları ve gönderi teklifleri"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:ke})}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"nakliyeci.jobs",isEmpty:!n&&0===i.length,icon:R,title:"İş İlanları",description:"Açık gönderiler için teklif verin. Kural: Varsayılan olarak yalnızca profil şehrinizdeki yükler için teklif verilebilir; koridor istisnası için Route Planner kullanın. Teklif durumunuzu “Tekliflerim” sayfasından takip edebilirsiniz.",primaryAction:{label:"Route Planner",to:"/nakliyeci/route-planner"},secondaryAction:{label:"Tekliflerim",to:"/nakliyeci/offers"}})}),Ot.jsx(Jr,{}),Ot.jsx("div",{className:"flex justify-center mb-8",children:Ot.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[Ot.jsxs("button",{onClick:()=>{ie(e=>({...e,page:1,limit:Math.max(e.limit,50)}))},className:"flex items-center gap-2 px-4 py-2 bg-white text-slate-700 rounded-lg hover:bg-slate-50 transition-colors shadow-lg border border-slate-200",children:[Ot.jsx(y,{className:"w-4 h-4"}),"Yenile"]}),Ot.jsxs("button",{onClick:()=>M(!K),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:shadow-lg transition-all duration-200 font-medium",children:[Ot.jsx(xt,{className:"w-4 h-4"}),"Filtrele"]})]})}),ae&&Ot.jsxs("div",{className:"text-[11px] text-slate-500 break-all",children:["API: ",m||"—"," ",null!=u?`(${u})`:""]}),K&&Ot.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 shadow-lg border border-slate-200 mb-4 sm:mb-6",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[Ot.jsx(me,{className:"inline w-4 h-4 mr-1"}),"Genel Arama"]}),Ot.jsx("input",{type:"text",placeholder:"Başlık, açıklama veya adres ara...",value:b,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[Ot.jsx(T,{className:"inline w-4 h-4 mr-1 text-blue-600"}),"Başlangıç Şehri"]}),Ot.jsx("input",{type:"text",placeholder:"Örn: İstanbul, Ankara, İzmir...",value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),Ot.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Yükün alınacağı şehir"})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[Ot.jsx(T,{className:"inline w-4 h-4 mr-1 text-green-600"}),"Bitiş Şehri"]}),Ot.jsx("input",{type:"text",placeholder:"Örn: İstanbul, Ankara, İzmir...",value:N,onChange:e=>k(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),Ot.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Yükün teslim edileceği şehir"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Durum"}),Ot.jsxs("select",{value:w,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[Ot.jsx("option",{value:"all",children:"Tümü"}),Ot.jsx("option",{value:"pending",children:"Beklemede"}),Ot.jsx("option",{value:"open",children:"Açık"}),Ot.jsx("option",{value:"accepted",children:"Kabul Edildi"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fiyat Aralığı"}),Ot.jsxs("select",{value:z,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[Ot.jsx("option",{value:"all",children:"Tümü"}),Ot.jsx("option",{value:"low",children:"Düşük (< 500₺)"}),Ot.jsx("option",{value:"medium",children:"Orta (500-1000₺)"}),Ot.jsx("option",{value:"high",children:"Yüksek (> 1000₺)"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sıralama"}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs("select",{value:A,onChange:e=>D(e.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[Ot.jsx("option",{value:"date",children:"Tarih"}),Ot.jsx("option",{value:"price",children:"Fiyat"}),Ot.jsx("option",{value:"distance",children:"Mesafe"})]}),Ot.jsx("button",{onClick:()=>I("asc"===_?"desc":"asc"),className:"px-3 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",title:"asc"===_?"Artan":"Azalan",children:"asc"===_?"↑":"↓"})]})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200",children:[(j||N||b)&&Ot.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[j&&Ot.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-md",children:[Ot.jsx(T,{className:"w-3 h-3"}),"Başlangıç: ",j]}),N&&Ot.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-md",children:[Ot.jsx(T,{className:"w-3 h-3"}),"Bitiş: ",N]})]}),Ot.jsxs("button",{onClick:()=>{f(""),v(""),k(""),S("all"),C("all"),D("date"),I("desc")},className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-all duration-200 text-sm",children:[Ot.jsx(y,{className:"w-4 h-4"}),"Tümünü Temizle"]})]})]})}),o&&Ot.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 sm:mb-6",children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(te,{className:"w-5 h-5 text-red-400 mr-2"}),Ot.jsx("p",{className:"text-red-800",children:o})]})}),n||0!==ye.length?Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3 sm:gap-4",children:ye.map(e=>{const t=e.pickupCity||e.pickupDistrict||e.deliveryCity||e.deliveryDistrict?`${[e.pickupCity,e.pickupDistrict].filter(Boolean).join(", ")} → ${[e.deliveryCity,e.deliveryDistrict].filter(Boolean).join(", ")}`:"",s=e.price>0,a=!!e.pickupDate,l=(e=>{if(!e)return"Genel Gönderi";const t=String(e||"").trim(),s=t.toLowerCase(),a={house_move:"Ev Taşınması",warehouse_transfer:"Depo Transferi",raw_materials:"Hammadde",special_cargo:"Özel Yük",chemical_hazardous:"Kimyasal / Tehlikeli Madde",automotive_parts:"Otomotiv Parçaları",furniture:"Mobilya",furniture_goods:"Mobilya Taşıma",electronics:"Elektronik & Teknoloji",clothing:"Giyim & Tekstil",food:"Gıda & İçecek",construction:"İnşaat Malzemeleri",automotive:"Otomotiv",medical:"Tıbbi Malzemeler",other:"Diğer",general:"Genel Gönderi",retail_consumer:"Perakende & Tüketim Malı","retail consumer":"Perakende & Tüketim Malı",raw_materials_industrial:"Ham Madde & Endüstriyel Mal",textile:"Tekstil & Giyim",food_beverage:"Gıda & İçecek",furniture_home:"Mobilya & Ev Eşyası",chemical:"Kimyasal & Tehlikeli Madde",document:"Doküman & Önemli Kargo",warehouse:"Depo Transferi",bulk:"Dökme Yük",refrigerated:"Soğutmalı Yük",oversized:"Büyük Boy Yük",office:"Ofis Ekipmanı",machinery:"Makine & Ekipman",exhibition:"Vitrin & Sergi Malzemesi"}[s];if(a)return a;const l={general:"Genel",shipment:"Gönderi",cargo:"Kargo",load:"Yük",fragile:"Kırılabilir",heavy:"Ağır",pallet:"Palet",parcel:"Koli/Parça",container:"Konteyner",food:"Gıda",textile:"Tekstil",electronics:"Elektronik",furniture:"Mobilya",automotive:"Otomotiv",chemical:"Kimyasal",machinery:"Makine",construction:"İnşaat",house:"Ev",move:"Taşınma",transfer:"Transfer",warehouse:"Depo",materials:"Malzemeler",raw:"Hammadde",parts:"Parçaları",medical:"Tıbbi",clothing:"Giyim",hazardous:"Tehlikeli",special:"Özel",other:"Diğer"};return/^[a-z0-9_\-\s]+$/.test(s)?(i=s,i.replace(/[_-]+/g," ").replace(/\s+/g," ").trim()).split(" ").filter(Boolean).map(e=>l[e]||e).map(e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e).join(" ")||"Genel Gönderi":t;var i})(e.category),i=!!e.isExclusiveToCarrier;return Ot.jsx("div",{className:i?"h-full relative rounded-2xl ring-1 ring-amber-300/70 shadow-[0_10px_30px_-18px_rgba(245,158,11,0.65)]":"h-full relative",children:Ot.jsxs("div",{className:"h-full bg-white rounded-2xl border overflow-hidden relative "+(i?"border-amber-200/70 shadow-md":"border-slate-200 shadow-md"),children:[i?Ot.jsx("div",{className:"pointer-events-none absolute -top-3 -right-10 rotate-45",children:Ot.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[11px] font-extrabold px-10 py-1 shadow-lg",children:"Sana Özel"})}):null,Ot.jsxs("div",{className:"h-full p-4 flex flex-col",children:[Ot.jsx("div",{className:"flex items-start justify-between gap-2",children:Ot.jsxs("div",{className:"min-w-0 flex-1",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:t||l}),Ot.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[Ot.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold bg-slate-100 text-slate-800 border border-slate-200",children:l}),i&&Ot.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold bg-amber-50 text-amber-900 border border-amber-200 shadow-sm",children:"Sana Özel"}),Ot.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-medium "+("pending"===xe(e.status)?"bg-yellow-100 text-yellow-800":"offer_accepted"===xe(e.status)||"accepted"===xe(e.status)?"bg-green-100 text-green-800":"in_progress"===xe(e.status)||"in_transit"===xe(e.status)?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"),children:ue(e.status)})]})]})}),i&&Ot.jsx("div",{className:"mt-2 text-xs font-semibold text-orange-700",children:"Bu ilan sadece senin hesabına özel yayınlandı. Diğer nakliyeciler göremez."}),Ne(e).length>0?Ot.jsxs("div",{className:"mt-2 flex-1",children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-700 mb-1",children:"Hızlı Bilgiler"}),Ot.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] text-slate-700 max-h-[92px] overflow-auto pr-1",children:Ne(e).slice(0,16).map((e,t)=>Ot.jsxs("div",{className:"col-span-1 min-w-0",children:[Ot.jsxs("span",{className:"text-slate-500",children:[e.label,":"]})," ",Ot.jsx("span",{className:"font-medium break-words",children:e.value})]},t))})]}):Ot.jsx("div",{className:"mt-2 text-xs text-slate-600 line-clamp-3 flex-1",children:(e.description||"").trim()}),Ot.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-slate-600 flex-wrap",children:[a&&Ot.jsxs("span",{className:"inline-flex items-center gap-1",children:[Ot.jsx(L,{className:"w-3.5 h-3.5"}),Kl(e.pickupDate,"long")]}),s&&Ot.jsxs("span",{className:"inline-flex items-center gap-1",children:[Ot.jsx($,{className:"w-3.5 h-3.5"}),je(e.price)]}),!!e.weight&&e.weight>0&&Ot.jsxs("span",{className:"inline-flex items-center gap-1",children:[Ot.jsx(R,{className:"w-3.5 h-3.5"}),`${e.weight} kg`]})]}),Ot.jsxs("div",{className:"mt-auto pt-3 flex items-center gap-2",children:[Ot.jsx("button",{type:"button",onClick:()=>(e=>{Z(e),J(!0)})(e),className:"flex-1 px-3 py-2 bg-slate-100 text-slate-800 rounded-lg hover:bg-slate-200 transition-all duration-200 text-xs font-medium",children:"Detay"}),Ot.jsx("button",{onClick:()=>(e=>{G(e),Y(""),H(""),O(!0)})(e),className:"flex-1 px-3 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:shadow-lg transition-all duration-200 text-xs font-medium",children:"Teklif Ver"})]})]})]})},e.id)})}):Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-10 text-center w-full max-w-2xl",children:Ot.jsx(ir,{icon:R,title:"Şimdilik iş yok",description:"Yeni gönderiler gelince burada görünecek. Filtreleri temizleyip tekrar deneyebilirsiniz.",action:{label:"Filtreleri Temizle",onClick:()=>{f(""),v(""),k(""),S("all"),C("all"),D("date"),I("desc")}}})})}),!n&&re&&Ot.jsx("div",{className:"mt-6 sm:mt-8 flex justify-center",children:Ot.jsx("button",{onClick:()=>{re&&!de&&ie(e=>({...e,page:e.page+1}))},disabled:de,className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors font-medium",children:de?"Yükleniyor...":"Daha fazla yükle"})}),!n&&!re&&i.length>0&&Ot.jsx("div",{className:"mt-6 sm:mt-8 text-center text-slate-500 text-sm",children:"Tüm ilanlar yüklendi."}),V&&W&&Ot.jsx(er,{isOpen:V,onClose:()=>{J(!1),Z(null)},title:"İlan Detayı",children:Ot.jsxs("div",{className:"space-y-3",children:[W.isExclusiveToCarrier&&Ot.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Yayın Bilgisi"}),Ot.jsx("div",{className:"text-sm text-slate-700",children:"Bu ilan sana özel yayınlandı."})]}),Ot.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Gönderi Bilgileri"}),Ot.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"İlan No:"})," ","#",W.id]}),Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Kategori:"})," ",W.category||"Belirtilmemiş"]}),W.subcategory&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Alt Kategori:"})," ",W.subcategory]}),Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Durum:"})," ",Ot.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"pending"===W.status?"Teklif Bekliyor":"offer_accepted"===W.status?"Teklif Kabul Edildi":"in_progress"===W.status?"Devam Ediyor":"delivered"===W.status?"Teslim Edildi":W.status})]}),W.description&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Açıklama:"})," ",Ot.jsx("span",{className:"break-words",children:W.description})]})]})]}),(W.pickupAddress||W.deliveryAddress||W.pickupCity||W.deliveryCity)&&Ot.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Adres Bilgileri"}),Ot.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Yükleme Şehri:"})," ",W.pickupCity||"Belirtilmemiş"]}),W.pickupDistrict&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Yükleme İlçesi:"})," ",W.pickupDistrict]}),W.pickupAddress&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Yükleme Adresi:"})," ",Ot.jsx("span",{className:"break-words",children:Rl(W.pickupAddress)})]}),Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Teslimat Şehri:"})," ",W.deliveryCity||"Belirtilmemiş"]}),W.deliveryDistrict&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Teslimat İlçesi:"})," ",W.deliveryDistrict]}),W.deliveryAddress&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Teslimat Adresi:"})," ",Ot.jsx("span",{className:"break-words",children:Rl(W.deliveryAddress)})]})]})]}),(W.pickupDate||W.deliveryDate)&&Ot.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Zaman Bilgileri"}),Ot.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[W.pickupDate&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Yükleme Tarihi:"})," ",Kl(W.pickupDate,"long")]}),W.deliveryDate&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Teslimat Tarihi:"})," ",Kl(W.deliveryDate,"long")]})]})]}),(W.weight||W.dimensions||W.volume||"number"==typeof W.quantity&&Number.isFinite(W.quantity))&&Ot.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Yük Özellikleri"}),Ot.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[W.weight&&W.weight>0&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Ağırlık:"})," ",W.weight," kg"]}),"number"==typeof W.quantity&&Number.isFinite(W.quantity)&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Miktar:"})," ",W.quantity," adet"]}),W.volume&&W.volume>0&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Hacim:"})," ",W.volume.toFixed(2)," m³"]}),!!W.dimensions&&""!==String(W.dimensions).trim()&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Ölçüler:"})," ",Ot.jsx("span",{className:"break-words",children:String(W.dimensions)})]})]})]}),W.price&&W.price>0&&Ot.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Fiyat Bilgisi"}),Ot.jsx("div",{className:"space-y-1 text-sm text-slate-700",children:Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Bütçe:"})," ",Ot.jsxs("span",{className:"font-bold text-green-600",children:["₺",W.price.toLocaleString("tr-TR")]})]})})]}),W.specialRequirements&&Ot.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Özel Gereksinimler"}),Ot.jsx("div",{className:"text-sm text-slate-600 break-words whitespace-pre-wrap",children:W.specialRequirements})]}),ve(W).length>0&&Ot.jsxs("div",{className:"p-3 bg-white rounded-lg border border-slate-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Ek Bilgiler"}),Ot.jsx("div",{className:"space-y-1 text-sm text-slate-700",children:ve(W).map((e,t)=>Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs("span",{className:"font-semibold text-slate-700 min-w-[110px]",children:[e.label,":"]}),Ot.jsx("span",{className:"break-words",children:e.value})]},t))})]}),W.shipperName&&Ot.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Gönderici Bilgileri"}),Ot.jsxs("div",{className:"space-y-1 text-sm text-slate-700",children:[Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"Gönderici Adı:"})," ",W.shipperName]}),W.shipperEmail&&Ot.jsxs("div",{children:[Ot.jsx("span",{className:"font-semibold",children:"E-posta:"})," ",W.shipperEmail]})]}),Ot.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[Ot.jsx("strong",{children:"Not:"}),' Gönderici telefon numarası gizlilik nedeniyle gösterilmemektedir. İletişim için "Teklif Ver" butonunu kullanarak mesaj gönderebilirsiniz.']})]}),Ot.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"İletişim"}),Ot.jsx("div",{className:"text-sm text-slate-700",children:"Göndericiye teklif mesajı üzerinden ulaşabilirsiniz."}),Ot.jsx("div",{className:"mt-2 text-xs text-blue-700",children:'İletişim kurmak için "Teklif Ver" butonunu kullanın'})]})]})}),B&&P&&Ot.jsx(er,{isOpen:B,onClose:()=>{O(!1),Y(""),H(""),G(null)},title:"Teklif Ver",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[Ot.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:P.title}),Ot.jsx("p",{className:"text-sm text-slate-600",children:`${P.pickupCity?P.pickupDistrict?`${P.pickupCity}, ${P.pickupDistrict}`:P.pickupCity:P.pickupAddress||"Adres belirtilmemiş"} → ${P.deliveryCity?P.deliveryDistrict?`${P.deliveryCity}, ${P.deliveryDistrict}`:P.deliveryCity:P.deliveryAddress||"Adres belirtilmemiş"}`})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Teklif Fiyatı (₺)"}),Ot.jsx("input",{type:"text",inputMode:"decimal",autoComplete:"off",value:F,onChange:e=>{Y(e.target.value)},onBlur:e=>{const t=String(e.target.value||"").trim();if(!t)return;const s=t.replace(/\s+/g,"").replace(",",".").replace(/[^0-9.]/g,""),a=parseFloat(s);Number.isFinite(a)&&a>0&&Y(String(a))},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 text-slate-900 caret-slate-900",placeholder:"Teklif fiyatınızı girin"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mesaj (Opsiyonel)"}),Ot.jsx("textarea",{value:q,onChange:e=>H(e.target.value.trimStart()),onBlur:e=>H(e.target.value.trim()),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 text-slate-900 caret-slate-900",rows:3,placeholder:"Göndericiye mesajınızı yazın..."})]}),Ot.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(U,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Ödeme (taraflar arasında)"}),Ot.jsxs("div",{className:"text-xs text-blue-800 leading-relaxed space-y-2",children:[Ot.jsx("p",{children:"YolNext ödeme altyapısı sunmaz; ödeme işlemi gönderici ile nakliyeci arasında gerçekleşir."}),Ot.jsx("p",{className:"font-semibold mt-2",children:"Önemli: Ödeme detaylarını (IBAN, alıcı adı, açıklama) ve yükleme saatini gönderici ile mesajlaşma üzerinden yazılı olarak netleştirmeniz önerilir. Platform sadece tarafları buluşturan bir pazaryeridir."})]})]})]})}),Ot.jsxs("div",{className:"flex gap-3 pt-4",children:[Ot.jsx("button",{onClick:async()=>{const e=F.trim();if(P&&e&&!isNaN(parseFloat(e))&&!(parseFloat(e)<=0))try{const t=a||localStorage.getItem("authToken")||localStorage.getItem("token")||"",s={shipmentId:P.id,price:parseFloat(e),message:q.trim(),estimatedDelivery:new Date(Date.now()+2592e5).toISOString()},l=await fetch(Zs("/api/offers"),{method:"POST",headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"},body:JSON.stringify(s)}),i=l.ok?await gr(l).catch(()=>({})):{};if(l.ok)se((null==i?void 0:i.message)||"Teklifiniz başarıyla iletilmiştir. Gönderici tarafından değerlendirilecektir. Kabul edilirse mesajlaşma açılır; ödeme detaylarını gönderici ile yazılı olarak netleştirmeniz önerilir."),Q(!0),c(null),r(e=>e.filter(e=>e.id!==P.id)),O(!1),Y(""),H(""),G(null),await he();else{const e=(null==i?void 0:i.message)||(null==i?void 0:i.error)||(null==i?void 0:i.details)||(402===l.status?"Teklif oluşturulamadı: Cüzdan bakiyesi yetersiz":`Teklif gönderilemedi (HTTP ${l.status})`);c(e)}}catch(t){const e=t instanceof Error?t.message:"Teklif gönderilirken bir hata oluştu";c(e)}},disabled:!F||""===F.trim()||isNaN(parseFloat(F.trim()))||parseFloat(F.trim())<=0,className:"flex-1 py-2 px-4 rounded-lg transition-all duration-200 font-medium "+(!F||""===F.trim()||isNaN(parseFloat(F.trim()))||parseFloat(F.trim())<=0?"bg-slate-300 text-slate-500 cursor-not-allowed":"bg-gradient-to-r from-slate-800 to-blue-900 text-white hover:shadow-lg"),children:"Teklif Gönder"}),Ot.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"İptal"})]})]})}),X&&Ot.jsx(Fl,{message:ee,isVisible:X,onClose:()=>Q(!1)})]})]})},Zr=({message:e,type:t="error",duration:s=5e3,onClose:a})=>{l.useEffect(()=>{const e=setTimeout(()=>{a()},s);return()=>clearTimeout(e)},[s,a]);return e&&""!==e.trim()?Ot.jsx("div",{className:`fixed top-4 right-4 z-50 animate-slide-in-right ${(()=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-red-50 border-red-200 text-red-800"}})()} border-l-4 rounded-lg shadow-lg p-4 min-w-[300px] max-w-md`,children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"flex-shrink-0",children:(()=>{switch(t){case"success":return Ot.jsx(J,{className:"w-5 h-5"});case"warning":return Ot.jsx(te,{className:"w-5 h-5"});case"info":return Ot.jsx(ve,{className:"w-5 h-5"});default:return Ot.jsx(ie,{className:"w-5 h-5"})}})()}),Ot.jsx("div",{className:"flex-1",children:Ot.jsx("p",{className:"text-sm font-medium",children:e})}),Ot.jsx("button",{onClick:a,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:Ot.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:Ot.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}):null};function Xr(){return Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(Y,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:["Akıllı"," ",Ot.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-blue-900",children:"Rota"})]}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"Akıllı rota planlama ve yol üstü yük arama sistemi"})]})}function Qr({drivers:e,driversLoading:t,selectedDriverId:s,corridor:a,onDriverClick:l}){return Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx(E,{className:"w-6 h-6 text-slate-700"}),Ot.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Taşıyıcı Seçin"})]}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Bir taşıyıcı seçin, sistem otomatik olarak o taşıyıcının güzergahındaki yükleri gösterecek."}),t?Ot.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ot.jsx(y,{className:"w-5 h-5 animate-spin text-slate-600"}),Ot.jsx("span",{className:"ml-2 text-slate-600",children:"Taşıyıcılar yükleniyor..."})]}):0===e.length?Ot.jsxs("div",{className:"text-center py-8 text-slate-500",children:[Ot.jsx(E,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),Ot.jsx("p",{className:"text-sm",children:"Henüz taşıyıcı bulunmuyor"})]}):Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.map(e=>Ot.jsx("div",{onClick:()=>l(e.id),className:"p-4 rounded-lg border-2 cursor-pointer transition-all "+(s===e.id?"border-blue-500 bg-blue-50 shadow-md":"border-slate-200 hover:border-blue-300 hover:shadow-sm"),children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:e.name||e.email||e.phone||e.id}),e.code&&Ot.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:["Kod: ",e.code]}),e.status&&Ot.jsx("div",{className:"text-xs font-medium "+("available"===e.status?"text-green-600":"text-orange-600"),children:"available"===e.status?"✓ Müsait":"⚠ Meşgul"})]}),a&&s===e.id&&Ot.jsx("div",{className:"ml-3 px-3 py-1 bg-gradient-to-r from-slate-800 to-blue-900 text-white text-xs font-medium rounded-full",children:"Aktif"})]})},e.id))})]})}function en({corridor:e,selectedDriverId:t}){return e&&t?Ot.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-blue-900 rounded-xl p-6 text-white shadow-lg",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx(Y,{className:"w-6 h-6 text-white"}),Ot.jsx("h3",{className:"text-lg font-bold",children:"Aktif Güzergah"})]}),Ot.jsx("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:Ot.jsxs("div",{className:"flex items-center justify-center gap-3",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-xs text-blue-200 mb-1",children:"Başlangıç"}),Ot.jsx("div",{className:"text-lg font-bold",children:e.pickupCity||"—"})]}),Ot.jsx(K,{className:"w-5 h-5 text-white"}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-xs text-blue-200 mb-1",children:"Hedef"}),Ot.jsx("div",{className:"text-lg font-bold",children:e.deliveryCity||"—"})]})]})}),Ot.jsx("p",{className:"text-xs text-blue-200 mt-3 text-center",children:"Bu güzergahtaki yükler aşağıda gösteriliyor"})]}):t&&!e?Ot.jsxs("div",{className:"bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx(te,{className:"w-6 h-6 text-yellow-600"}),Ot.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Güzergah Bulunamadı"})]}),Ot.jsx("p",{className:"text-sm text-yellow-800",children:"Bu taşıyıcının henüz aktif bir yükü yok. Taşıyıcıya bir yük atandığında güzergah otomatik olarak oluşacak."})]}):null}function tn({corridor:e,selectedDriverId:t,corridorLoads:s,corridorLoading:a,onLoadClick:l}){return e&&t?Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Ot.jsx(R,{className:"w-6 h-6 text-slate-700"}),Ot.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Güzergah Yükleri"})]}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Bu güzergahtaki yüklere teklif vererek taşıyıcınızın dolu gidip dolu gelmesini sağlayın."}),a?Ot.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ot.jsx(y,{className:"w-5 h-5 animate-spin text-slate-600"}),Ot.jsx("span",{className:"ml-3 text-slate-600",children:"Yükler yükleniyor..."})]}):0===s.length?Ot.jsxs("div",{className:"text-center py-8 text-slate-500",children:[Ot.jsx(R,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),Ot.jsx("p",{className:"text-base font-medium mb-1",children:"Bu güzergahta yük bulunamadı"}),Ot.jsx("p",{className:"text-sm",children:"Başka bir taşıyıcı seçebilir veya daha sonra tekrar kontrol edebilirsiniz."})]}):Ot.jsx("div",{className:"space-y-3",children:s.map(e=>Ot.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-slate-300 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsx("div",{className:"min-w-0",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("h4",{className:"font-medium text-slate-900 truncate",children:e.title}),"outbound"===e.corridorDirection&&Ot.jsx("span",{className:"px-2 py-0.5 rounded-md text-[11px] font-semibold bg-blue-100 text-blue-800",children:"Gidiş"}),"backhaul"===e.corridorDirection&&Ot.jsx("span",{className:"px-2 py-0.5 rounded-md text-[11px] font-semibold bg-emerald-100 text-emerald-800",children:"Dönüş"})]})}),l&&Ot.jsx("button",{onClick:t=>{t.stopPropagation(),l(e)},className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Teklif Ver"})]}),Ot.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(T,{className:"w-4 h-4"}),Ot.jsxs("span",{children:[e.pickupAddress," → ",e.deliveryAddress]})]}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(_e,{className:"w-4 h-4"}),e.weight.toLocaleString(),"kg"]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx($,{className:"w-4 h-4"}),"₺",e.price.toLocaleString()]})]})]})]},e.id))})]}):Ot.jsxs("div",{className:"bg-slate-50 rounded-xl p-8 border-2 border-dashed border-slate-300 text-center",children:[Ot.jsx(E,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),Ot.jsx("p",{className:"text-slate-600 font-medium",children:"Bir taşıyıcı seçin, güzergah yükleri görüntülenecek"})]})}function sn(){const{user:e}=sa(),[t]=c(),s=t.get("shipmentId"),a=l.useRef(null),[i,r]=l.useState(!0),[n,d]=l.useState(!0),[o,m]=l.useState(!0),[x,u]=l.useState(!1),[h,p]=l.useState([{key:"unassigned",driver:null,vehicle:null,points:[],isOptimized:!1}]),[g,b]=l.useState("unassigned"),[f,y]=l.useState([]),[j,v]=l.useState(""),[N,k]=l.useState("all"),[w,S]=l.useState("all"),[z,T]=l.useState("all"),[C,A]=l.useState(null),[D,_]=l.useState(!1),[I,K]=l.useState(""),[M,$]=l.useState("error"),[B,O]=l.useState([]),[P,G]=l.useState(!1),[F,q]=l.useState(null),[H,U]=l.useState(null),[V,J]=l.useState([]),[W,Z]=l.useState(!1),[X,Q]=l.useState(!1),[ee,te]=l.useState(null),[se,ae]=l.useState(""),[le,ie]=l.useState(""),[re,ne]=l.useState(!1),de=Ri,oe=s?de(s):"",ce=[...s?[{label:"Aktif Yükler",href:"/nakliyeci/active-shipments",icon:Ot.jsx(E,{className:"w-4 h-4"})},{label:oe||`#${s}`,href:`/nakliyeci/active-shipments?shipmentId=${s}`,icon:Ot.jsx(R,{className:"w-4 h-4"})}]:[],{label:"Akıllı Rota",icon:Ot.jsx(Y,{className:"w-4 h-4"})}],[me,xe]=l.useState([]),ue=e=>(null==e?void 0:e.id)?`driver:${String(e.id)}`:"unassigned",he=l.useMemo(()=>{const e=h.find(e=>e.key===g);return e||(h[0]||null)},[h,g]);l.useEffect(()=>{he&&he.key!==g&&b(he.key)},[he,g]);const pe=(null==he?void 0:he.vehicle)||null,ge=(null==he?void 0:he.points)||[];Boolean(null==he?void 0:he.isOptimized);const be=(e,t,s)=>{p(a=>{var l;if(a.some(t=>t.key===e))return a;const i=s||(null==(l=a.find(e=>e.key===g))?void 0:l.vehicle)||me[0]||null;return[...a,{key:e,driver:t,vehicle:i,points:[],isOptimized:!1}]})},fe=(e,t)=>{p(s=>s.map(s=>s.key===e?{...s,vehicle:t}:s))},ye=e=>e.map((e,t)=>({...e,order:t+1})),je=async e=>{Z(!0);try{const t=localStorage.getItem("authToken"),s=await fetch(Zs(`/api/loads/corridor-loads/${e}`),{headers:{Authorization:`Bearer ${t||""}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Koridor yükleri yüklenemedi");const a=await gr(s);J(a.data||[])}catch(t){J([])}finally{Z(!1)}};l.useEffect(()=>{(async()=>{d(!0);try{const t=(null==e?void 0:e.id)||(localStorage.getItem("user")?(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id}catch{return}})():null),s=localStorage.getItem("authToken");if(!t)throw new Error("Kullanıcı ID bulunamadı");const a=await fetch(Zs("/api/vehicles/nakliyeci"),{headers:{Authorization:`Bearer ${s||""}`,"X-User-Id":t,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Araçlar yüklenemedi");const l=await gr(a),i=l.vehicles||l.data||[];xe(i),i.length>0&&p(e=>e.map(e=>e.vehicle?e:{...e,vehicle:i[0]}))}catch(t){xe([])}finally{d(!1)}})(),(async()=>{m(!0);try{const t=(null==e?void 0:e.id)||(localStorage.getItem("user")?(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id}catch{return}})():null),s=localStorage.getItem("authToken"),a=await fetch(Zs("/api/loads/available?scope=mine"),{headers:{Authorization:`Bearer ${s||""}`,"X-User-Id":t||"","Content-Type":"application/json"}});if(!a.ok)throw new Error("Uygun yükler yüklenemedi");const l=await gr(a),i=l.data||l.loads||[];y(i)}catch(t){y([])}finally{m(!1)}})(),(async()=>{G(!0);try{const t=(null==e?void 0:e.id)||(localStorage.getItem("user")?(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id}catch{return}})():null),s=localStorage.getItem("authToken");if(!t)throw new Error("Kullanıcı ID bulunamadı");const a=await fetch(Zs("/api/drivers/nakliyeci"),{headers:{Authorization:`Bearer ${s||""}`,"X-User-Id":t,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Taşıyıcılar yüklenemedi");const l=await gr(a),i=l.drivers||l.data||[];O(i)}catch(t){O([])}finally{G(!1)}})()},[]),l.useEffect(()=>{r(n||o)},[n,o]),l.useMemo(()=>{const e=ge.filter(e=>"pickup"===e.type),t=e.reduce((e,t)=>e+(t.weight||0),0),s=e.reduce((e,t)=>e+(t.price||0),0);let a=0;if(ge.length>1)for(let l=0;l<ge.length-1;l++){const e=ge[l],t=ge[l+1];if(e.coordinates&&t.coordinates&&0!==e.coordinates.lat&&0!==t.coordinates.lat){const s=6371,l=(t.coordinates.lat-e.coordinates.lat)*Math.PI/180,i=(t.coordinates.lng-e.coordinates.lng)*Math.PI/180,r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e.coordinates.lat*Math.PI/180)*Math.cos(t.coordinates.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);a+=s*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}}return{totalWeight:t,totalEarnings:s,totalDistance:a}},[ge]);const ve=(e,t)=>{const s=ue(e.driver),a=t||pe;if(be(s,e.driver,a),g!==s&&b(s),!a)return;const l=`pickup-${e.id}`,i=`delivery-${e.id}`,r=h.find(e=>e.key===s),n=(null==r?void 0:r.points)||[];if(n.some(e=>e.id===l||e.id===i))return $("info"),K("Bu yük zaten rotada"),_(!0),void setTimeout(()=>_(!1),2500);const d=n.reduce((e,t)=>e+("pickup"===t.type&&t.weight||0),0),o=n.reduce((e,t)=>e+("pickup"===t.type&&t.volume||0),0),c=d+e.weight,m=o+e.volume;if(c>a.maxWeight)return $("error"),K(`Ağırlık limiti aşıldı! Maksimum: ${a.maxWeight}kg, Mevcut: ${c}kg`),_(!0),void setTimeout(()=>_(!1),5e3);if(m>a.maxVolume)return $("error"),K(`Hacim limiti aşıldı! Maksimum: ${a.maxVolume}m³, Mevcut: ${m}m³`),_(!0),void setTimeout(()=>_(!1),5e3);const x={id:`pickup-${e.id}`,name:`Yükleme - ${e.title}`,address:e.pickupAddress,coordinates:{lat:0,lng:0},order:0,type:"pickup",weight:e.weight,volume:e.volume,price:e.price,deadline:e.deadline},u={id:`delivery-${e.id}`,name:`Teslimat - ${e.title}`,address:e.deliveryAddress,coordinates:{lat:0,lng:0},order:0,type:"delivery",weight:e.weight,volume:e.volume,price:e.price,deadline:e.deadline};fe(s,a),((e,t,s)=>{p(a=>a.map(a=>a.key===e?{...a,points:ye(t),isOptimized:s}:a))})(s,[...n,x,u],!1)};return l.useEffect(()=>{if(!s)return;const e=String(s);if(a.current===e||a.current===`pending:${e}`)return;if(n||o)return;const t=Number(s);if(!Number.isFinite(t)||t<=0)return void(a.current=e);a.current=`pending:${e}`;let l=!1;return(async()=>{var s;const i=localStorage.getItem("authToken"),r=(e,...t)=>{for(const s of t)if(e&&null!=e[s]&&""!==String(e[s]).trim())return e[s];return null};let n=f.find(e=>Number(e.id)===t)||null,d=null,o=null;if(!n||i)try{if(i){const e=await fetch(Zs(`/api/shipments/${t}`),{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(e.ok){const s=e.ok?await gr(e).catch(()=>({})):{},a=(null==s?void 0:s.data)||(null==s?void 0:s.shipment)||null,l=r(a,"vehicleType","vehicle_type"),i=r(a,"vehiclePlate","vehicle_plate");if(d=null!=l?String(l):null,o=null!=i?String(i):null,!n&&a){const e=r(a,"pickupCity","pickup_city","fromCity","from_city","pickupAddress","pickup_address")||"",s=r(a,"deliveryCity","delivery_city","toCity","to_city","deliveryAddress","delivery_address")||"",l=r(a,"title","name")||`Yük #${t}`,i=Number(r(a,"weight")||0),d=Number(r(a,"volume")||0),o=Number(r(a,"price","agreed_price","agreedPrice")||0),c=String(r(a,"deadline","deliveryDate","delivery_date","pickupDate","pickup_date")||""),m=r(a,"assignedDriverId","driver_id","driverId","driverID"),x=r(a,"driverName"),u=r(a,"driverPhone"),h=r(a,"driverEmail"),p=r(a,"ownerName"),g=r(a,"ownerPhone"),b=r(a,"ownerEmail");n={id:t,title:String(l),pickupAddress:String(e),deliveryAddress:String(s),weight:Number.isFinite(i)?i:0,volume:Number.isFinite(d)?d:0,price:Number.isFinite(o)?o:0,deadline:c,distance:0,driver:m?{id:String(m),name:String(x||""),phone:String(u||""),email:String(h||"")}:null,shipper:{name:String(p||"Gönderici"),phone:String(g||""),email:String(b||"")}},y(e=>e.some(e=>Number(e.id)===Number(null==n?void 0:n.id))||!n?e:[n,...e])}}}}catch{d=null,o=null}if(l)return;if(!n)return a.current=e,$("info"),K("Yük bulunamadı (listeye dahil değil)."),_(!0),void setTimeout(()=>_(!1),3500);const c=n;A(c.id),v((e=>{const t=String(e??"").trim(),s=Number(t);if(Number.isFinite(s)&&s>0)return Math.trunc(s).toString();const a=t.match(/(\d+)/);return a&&a[1]?String(Number(a[1])):""})(c.id)),k("all"),S("all"),T((null==(s=c.driver)?void 0:s.id)?String(c.driver.id):"all");const m=ue(c.driver);be(m,c.driver,pe),g!==m&&b(m);try{requestAnimationFrame(()=>{const e=document.getElementById(`load-card-${null==n?void 0:n.id}`);null==e||e.scrollIntoView({block:"center",behavior:"smooth"})})}catch{}const x=h.find(e=>e.key===m),u=(null==x?void 0:x.points)||[];if(u.length>0)return void(a.current=e);const p=u.reduce((e,t)=>e+("pickup"===t.type&&t.weight||0),0),j=u.reduce((e,t)=>e+("pickup"===t.type&&t.volume||0),0),N=e=>!!e&&(p+c.weight<=e.maxWeight&&j+c.volume<=e.maxVolume),w=e=>String(e??"").trim().toLowerCase().replace(/\s+/g,"").replace(/ı/g,"i").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ö/g,"o").replace(/ç/g,"c"),z=e=>{if(!d)return!0;const t=w(e.type),s=w(d);return!t||!s||(t===s||t.includes(s)||s.includes(t))},C=o?w(o):"",D=e=>{if(!C)return!0;return w(e.name).includes(C)},E=[...me].filter(e=>N(e)),I=E.filter(e=>z(e)&&D(e)),M=E.filter(e=>z(e)),B=e=>e.slice().sort((e,t)=>e.maxWeight-t.maxWeight||e.maxVolume-t.maxVolume||e.id-t.id)[0]||null,R=(pe&&N(pe)&&z(pe)&&D(pe)?pe:null)||B(I)||B(M)||B(E)||null;if(!R)return a.current=e,$("warning"),K("Uygun araç bulunamadı. Önce bir araç seçin veya aracınızın kapasitesini kontrol edin."),_(!0),void setTimeout(()=>_(!1),4500);R&&(null==pe?void 0:pe.id)!==R.id&&fe(m,R),ve(c,R),a.current=e})(),()=>{l=!0,a.current===`pending:${e}`&&(a.current=null)}},[s,n,o,pe,ge,f,ve,me,h,g]),l.useMemo(()=>{var e;const t=new Map;for(const s of f)(null==(e=s.driver)?void 0:e.id)&&t.set(String(s.driver.id),s.driver);return Array.from(t.values()).sort((e,t)=>(e.name||"").localeCompare(t.name||"","tr-TR"))},[f]),l.useMemo(()=>f.filter(e=>{var t,s;const a=j.toLowerCase(),l=String(e.id),i=de(e.id).toLowerCase(),r=!a||l.includes(a)||i.includes(a)||e.title.toLowerCase().includes(a)||e.pickupAddress.toLowerCase().includes(a)||e.deliveryAddress.toLowerCase().includes(a),n="all"===N||"light"===N&&e.weight<3e3||"medium"===N&&e.weight>=3e3&&e.weight<7e3||"heavy"===N&&e.weight>=7e3,d="all"===w||"low"===w&&e.price<2e3||"medium"===w&&e.price>=2e3&&e.price<4e3||"high"===w&&e.price>=4e3,o="all"===z||("unassigned"===z?!(null==(t=e.driver)?void 0:t.id):String(null==(s=e.driver)?void 0:s.id)===z);return r&&n&&d&&o}),[f,j,N,w,z]),i?Ot.jsx(Pl,{message:"Akıllı rota yükleniyor..."}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Akıllı Rota - YolNext Nakliyeci"}),Ot.jsx("meta",{name:"description",content:"Akıllı rota planlama ve yol üstü yük arama sistemi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:ce})}),Ot.jsx(Xr,{}),Ot.jsx("div",{className:"max-w-4xl mx-auto mt-4",children:Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm text-blue-800",children:[Ot.jsx("strong",{children:"Kural:"})," Varsayılan olarak yalnızca profil şehrindeki yükler için teklif verilebilir.",Ot.jsx("br",{}),Ot.jsx("strong",{children:"İstisna:"})," Bu ekrandaki koridor (gidiş/dönüş) yükleri, rota üzerinde olduğu için teklif verebilmenizi sağlar."]})}),Ot.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[Ot.jsx(Qr,{drivers:B,driversLoading:P,selectedDriverId:F,corridor:H,onDriverClick:async e=>{q(e);const t=await(async e=>{try{const t=localStorage.getItem("authToken"),s=await fetch(Zs(`/api/loads/corridor/${e}`),{headers:{Authorization:`Bearer ${t||""}`,"Content-Type":"application/json"}});return s.ok&&(await gr(s)).corridor||null}catch(t){return null}})(e);U(t),t&&t.deliveryCity?await je(e):J([])}}),Ot.jsx(en,{corridor:H,selectedDriverId:F}),Ot.jsx(tn,{corridor:H,selectedDriverId:F,corridorLoads:V,corridorLoading:W,onLoadClick:e=>{te(e),ae(e.price>0?String(e.price):""),Q(!0)}})]})]}),X&&ee&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ot.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-2xl",children:[Ot.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Teklif Ver"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yük"}),Ot.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-sm",children:[Ot.jsx("div",{className:"font-medium",children:ee.title}),Ot.jsxs("div",{className:"text-slate-600 mt-1",children:[ee.pickupAddress," → ",ee.deliveryAddress]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fiyat (₺) *"}),Ot.jsx("input",{type:"number",value:se,onChange:e=>ae(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Fiyat girin",min:"0",step:"0.01"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Mesaj (Opsiyonel)"}),Ot.jsx("textarea",{value:le,onChange:e=>ie(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Göndericiye mesajınız..."})]}),Ot.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(L,{className:"w-4 h-4"}),Ot.jsx("span",{className:"font-medium",children:"Teklif Süresi"})]}),Ot.jsx("p",{children:"Bu teklif 30 dakika içinde yanıtlanmalıdır. Aksi halde otomatik olarak iptal edilir."})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("button",{onClick:()=>{Q(!1),te(null),ae(""),ie("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",disabled:re,children:"İptal"}),Ot.jsx("button",{onClick:async()=>{if(!ee||!se||!F)return $("error"),K("Lütfen tüm alanları doldurun"),_(!0),void setTimeout(()=>_(!1),3e3);const e=parseFloat(se);if(isNaN(e)||e<=0)return $("error"),K("Geçerli bir fiyat girin"),_(!0),void setTimeout(()=>_(!1),3e3);ne(!0);try{const t=localStorage.getItem("authToken"),s=await fetch(Zs("/api/offers"),{method:"POST",headers:{Authorization:`Bearer ${t||""}`,"Content-Type":"application/json"},body:JSON.stringify({shipmentId:ee.id,price:e,message:le||"",driverId:F})}),a=await gr(s);if(!s.ok||!a.success)throw new Error(a.message||"Teklif gönderilemedi");Ga("offer_create_success",{shipmentId:(null==ee?void 0:ee.id)||null,driverId:F||null,source:"route_planner"}),$("success"),K("Teklif başarıyla gönderildi. 30 dakika içinde yanıt bekleniyor."),_(!0),setTimeout(()=>_(!1),5e3),Q(!1),te(null),ae(""),ie(""),F&&await je(F)}catch(t){$("error"),K((null==t?void 0:t.message)||"Teklif gönderilemedi"),_(!0),setTimeout(()=>_(!1),5e3)}finally{ne(!1)}},disabled:re||!se,className:"flex-1 px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:re?"Gönderiliyor...":"Teklif Gönder"})]})]})]})}),D&&I&&Ot.jsx(Zr,{message:I,onClose:()=>_(!1),type:M})]})}const an=async e=>{const t=await fetch(Zs("/api/drivers/link"),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)});return await gr(t)},ln=async e=>{const t=await fetch(Zs(`/api/drivers/${e}`),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});return await gr(t)},rn=e=>{const t=(e||"").trim();if(!t)return"";if(t.includes("@"))return t.toLowerCase();const s=t.replace(/[ıİ]/g,"I").toUpperCase(),a=s.replace(/[^A-Z0-9]/g,""),l=a.match(/^(?:YD)?(\d{4,6})$/);if(l){return`YD-${l[1].padStart(5,"0")}`}if(a.startsWith("YD")&&a.length>=4){return`YD-${a.slice(2).padStart(5,"0")}`}return s},nn=()=>{const e=o(),[t,s]=l.useState([]),[a,i]=l.useState(!0),[r,n]=l.useState(""),[c,m]=l.useState("all"),[x,u]=l.useState("new"),[h,p]=l.useState(""),g=rn(h),[b,f]=l.useState(!1),[y,j]=l.useState(null),v=l.useRef(null),[N,k]=l.useState(!1),[w,A]=l.useState(null),[D,_]=l.useState(null),[I,K]=l.useState(null),[M,$]=l.useState(null),[B,R]=l.useState(!1),[P,F]=l.useState(null);l.useEffect(()=>{Y()},[]);const Y=async()=>{try{i(!0);const e=localStorage.getItem("authToken"),t=localStorage.getItem("user"),a=t?JSON.parse(t||"{}").id:"",l=await fetch(Zs("/api/drivers/nakliyeci"),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","X-User-Id":String(a||"")}});if(l.ok){const e=await gr(l);s((e.drivers||[]).map(e=>({id:String(e.id),name:e.name||e.fullName||e.full_name||"-",code:e.code||e.driverCode||e.driver_code||void 0,phone:e.phone||"-",email:e.email||"-",licenseNumber:e.licenseNumber||"-",licenseExpiry:e.licenseExpiry||"-",vehicle:e.vehicle||{plate:"-",type:"-",capacity:0,volume:0},status:e.status||(e.activeJobs&&e.activeJobs>0?"busy":"available"),rating:"number"==typeof e.rating?e.rating:parseFloat(String(e.rating||0))||0,totalJobs:"number"==typeof e.totalJobs?e.totalJobs:parseInt(String(e.totalJobs||0))||0,completedJobs:"number"==typeof e.completedJobs?e.completedJobs:parseInt(String(e.completedJobs||0))||0,successRate:"number"==typeof e.successRate?e.successRate:parseFloat(String(e.successRate||0))||0,joinDate:e.joinDate||e.createdAt||(new Date).toISOString(),lastActive:e.lastActive||e.updatedAt||(new Date).toISOString(),location:e.location||[e.city,e.district].filter(Boolean).join(" / ")||"-",specialties:e.specialties||[]})))}else s([])}catch(e){}finally{i(!1)}},q=async()=>{try{f(!0),j(null),_(null);const e=await an({code:g||h});e.success?(j(e.message||"Taşıyıcı başarıyla eklendi"),A(null),_(null),p(""),Y()):(j(e.message||"Kod doğrulanamadı"),_(e.message||"Kod doğrulanamadı"))}catch(e){const t=e instanceof Error?e.message:"Beklenmeyen bir hata oluştu";j(t),_(t)}finally{f(!1)}};l.useEffect(()=>{A(null),_(null);const e=h.trim(),t=rn(e);if(!t)return;const s=setTimeout(async()=>{try{k(!0);const e=await fetch(Zs(`/api/drivers/lookup/${encodeURIComponent(t)}`),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}}),s=e.ok?await gr(e).catch(()=>({})):{};e.ok&&!1!==s.success?(A(s.data||null),_(null)):(A(null),_(s.message||"Kod bulunamadı"))}catch{A(null),_("Bağlantı hatası")}finally{k(!1)}},350);return()=>clearTimeout(s)},[h]);const H=e=>{switch(e){case"available":return"text-green-600 bg-green-100";case"busy":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},U=e=>{switch(e){case"available":return"Müsait";case"busy":return"Meşgul";case"offline":return"Çevrimdışı";default:return e}},V=t.filter(e=>{const t=e.name.toLowerCase().includes(r.toLowerCase())||e.phone.includes(r)||e.vehicle.plate.toLowerCase().includes(r.toLowerCase())||e.location.toLowerCase().includes(r.toLowerCase()),s="all"===c||e.status===c;return t&&s}).sort((e,t)=>"rating"===x?(t.rating||0)-(e.rating||0):"jobs"===x?(t.totalJobs||0)-(e.totalJobs||0):new Date(t.joinDate).getTime()-new Date(e.joinDate).getTime()),J=t.length,W=t.filter(e=>"available"===e.status).length,Z=t.filter(e=>"busy"===e.status).length,X=t.length>0?(t.reduce((e,t)=>e+t.rating,0)/t.length).toFixed(1):"0.0";if(a)return Ot.jsx(Pl,{});const ee=e=>{if(null==e)return!1;if("number"==typeof e)return Number.isFinite(e)&&0!==e;const t=String(e).trim();return!!t&&("-"!==t&&"0"!==t&&"null"!==t.toLowerCase()&&"undefined"!==t.toLowerCase())},te=e=>{try{return new Date(e).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"})}catch{return""}};return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Taşıyıcılarım - YolNext Nakliyeci"}),Ot.jsx("meta",{name:"description",content:"Şoför ve araç yönetimi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Taşıyıcılarım",icon:Ot.jsx(C,{className:"w-4 h-4"})}]})}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"nakliyeci.drivers",isEmpty:!a&&0===t.length,icon:C,title:"Taşıyıcı Yönetimi",description:"Taşıyıcı kodunu girerek ekle, müsait/aktif durumlarını takip et. Taşıyıcı ataması yapacağın yükleri “Aktif Yükler”de yönetirsin.",primaryAction:{label:"Taşıyıcı Ekle",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var e;return null==(e=v.current)?void 0:e.focus()},350)}},secondaryAction:{label:"Aktif Yükler",to:"/nakliyeci/active-shipments"}})}),Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(C,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:"Taşıyıcılarım"}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"Şoför ve araç yönetimi"})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-blue-900 px-5 sm:px-6 py-4",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center",children:Ot.jsx(C,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-white text-lg font-bold",children:"Taşıyıcı Ekle"}),Ot.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:"Sözleşmeli taşıyıcınızın benzersiz kodunu girin, doğrulayıp hemen ekleyin."})]})]})}),Ot.jsxs("div",{className:"px-5 sm:px-6 py-4",children:[Ot.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-end gap-2",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Taşıyıcı Kodu"}),Ot.jsx("input",{ref:v,type:"text",value:h,onChange:e=>{p(e.target.value)},placeholder:"Örn: YD-12345 veya mehmet.kaya@example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ot.jsx("button",{onClick:q,disabled:b||!h.trim(),className:"px-5 py-2 rounded-lg text-white md:self-end "+(b||!h?"bg-slate-300 cursor-not-allowed":"bg-gradient-to-r from-slate-900 to-blue-900 hover:from-slate-800 hover:to-blue-800"),children:b?"Ekleniyor…":"Ekle"})]}),!!h.trim()&&Ot.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Algılanan: ",Ot.jsx("span",{className:"font-semibold text-slate-900",children:g||h.trim()})]}),y&&Ot.jsx("div",{className:"mt-3 rounded-xl border p-4 "+(y.includes("Zaten")?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"),children:Ot.jsx("div",{className:"text-sm "+(y.includes("Zaten")?"text-yellow-800":"text-green-800"),children:y})}),(N||w||D)&&Ot.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 bg-white p-4",children:[N&&Ot.jsx("div",{className:"text-slate-600 text-sm",children:"Kod kontrol ediliyor…"}),D&&!N&&Ot.jsx("div",{className:"text-red-600 text-sm",children:D}),w&&!N&&Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-100 flex items-center justify-center",children:Ot.jsx(C,{className:"w-6 h-6 text-slate-700"})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("h4",{className:"text-base font-semibold text-slate-900 truncate",children:w.name||w.fullName||"Taşıyıcı"}),Ot.jsx("span",{className:"px-2 py-0.5 text-[11px] rounded-full bg-slate-100 text-slate-700 border border-slate-200",children:"Yeni"})]}),Ot.jsxs("div",{className:"text-sm text-slate-600",children:[w.vehicleType||w.vehicle&&w.vehicle.type||"Araç"," • ",w.location||w.city||"Konum"]})]}),Ot.jsx("button",{onClick:q,disabled:b||!h||!w,className:"shrink-0 px-4 py-2 rounded-lg text-white "+(b||!h?"bg-slate-300 cursor-not-allowed":"bg-gradient-to-r from-slate-900 to-blue-900 hover:from-slate-800 hover:to-blue-800"),children:b?"Ekleniyor…":"Ekle"})]})]})]})]})}),t.length>0&&Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ot.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Taşıyıcı"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:J})]}),Ot.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:Ot.jsx(C,{className:"w-6 h-6 text-blue-600"})})]})}),Ot.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Müsait"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W})]}),Ot.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:Ot.jsx(fe,{className:"w-6 h-6 text-green-600"})})]})}),Ot.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Meşgul"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z})]}),Ot.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-yellow-600"})})]})}),Ot.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ortalama Puan"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:X})]}),Ot.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:Ot.jsx(O,{className:"w-6 h-6 text-purple-600"})})]})})]}),t.length>0&&Ot.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 mb-6",children:Ot.jsxs("div",{className:"flex flex-col gap-3",children:[Ot.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs("button",{onClick:()=>m("all"),className:"px-3 py-1.5 rounded-lg text-sm "+("all"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:["Tümü (",J,")"]}),Ot.jsxs("button",{onClick:()=>m("available"),className:"px-3 py-1.5 rounded-lg text-sm "+("available"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:["Müsait (",W,")"]}),Ot.jsxs("button",{onClick:()=>m("busy"),className:"px-3 py-1.5 rounded-lg text-sm "+("busy"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:["Meşgul (",Z,")"]}),Ot.jsx("button",{onClick:()=>m("offline"),className:"px-3 py-1.5 rounded-lg text-sm "+("offline"===c?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:"Çevrimdışı"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("label",{className:"text-sm text-slate-600",children:"Sırala:"}),Ot.jsxs("select",{value:x,onChange:e=>u(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm",children:[Ot.jsx("option",{value:"new",children:"En Yeni"}),Ot.jsx("option",{value:"rating",children:"Puan Yüksek"}),Ot.jsx("option",{value:"jobs",children:"İş Sayısı"})]})]})]}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Taşıyıcı ara...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),V.length>0?Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:V.map(t=>{var s,a,l,i,r,n,o,c,m,x;const u=ee(t.email)||ee(t.location)||ee(t.totalJobs)||ee(t.completedJobs)||ee(t.successRate)||ee(null==(s=t.vehicle)?void 0:s.plate)||ee(null==(a=t.vehicle)?void 0:a.type);return Ot.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 hover:shadow-xl transition-shadow overflow-hidden",children:Ot.jsxs("div",{className:"p-4 sm:p-5",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[Ot.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-slate-800 to-blue-900 flex items-center justify-center shrink-0",children:Ot.jsx(C,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{className:"min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Ot.jsx("h3",{className:"text-base sm:text-lg font-bold text-slate-900 truncate max-w-[180px] sm:max-w-[240px]",children:t.name}),ee(t.code)&&Ot.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold bg-slate-100 text-slate-800 border border-slate-200",children:t.code})]}),Ot.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H(t.status)}`,children:U(t.status)}),ee(t.rating)&&Ot.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-600",children:[Ot.jsx(O,{className:"w-4 h-4 text-yellow-400 fill-current"}),Ot.jsx("span",{children:t.rating})]})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[u&&Ot.jsx("button",{onClick:()=>K(e=>e===t.id?null:t.id),className:"px-3 py-2 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-800 text-sm font-medium",children:I===t.id?"Kapat":"Detay"}),Ot.jsx("button",{onClick:()=>{F(t.id),R(!0)},className:"px-3 py-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 text-sm font-medium",title:"Taşıyıcıyı Kaldır",children:Ot.jsx(pt,{className:"w-4 h-4"})})]})]}),Ot.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[ee(t.location)&&Ot.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs bg-slate-50 border border-slate-200 text-slate-700",children:[Ot.jsx(T,{className:"w-3.5 h-3.5 text-slate-500"}),t.location]}),(ee(null==(l=t.vehicle)?void 0:l.type)||ee(null==(i=t.vehicle)?void 0:i.plate))&&Ot.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs bg-slate-50 border border-slate-200 text-slate-700",children:[Ot.jsx(E,{className:"w-3.5 h-3.5 text-slate-500"}),(null==(r=t.vehicle)?void 0:r.type)||"Araç",(null==(n=t.vehicle)?void 0:n.plate)?` • ${t.vehicle.plate}`:""]}),ee(t.lastActive)&&Ot.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs bg-slate-50 border border-slate-200 text-slate-700",children:[Ot.jsx(ke,{className:"w-3.5 h-3.5 text-slate-500"}),"Son aktif: ",te(t.lastActive)]})]}),Ot.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[Ot.jsxs("div",{className:"text-sm text-slate-700",children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Telefon"}),Ot.jsx("div",{className:"font-semibold",children:t.phone})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{onClick:()=>e(`/nakliyeci/messages?userId=${t.id}`),className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-white bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 shadow-md hover:shadow-lg",title:"Mesajlaş",children:Ot.jsx(G,{className:"w-4 h-4"})}),Ot.jsxs("a",{href:`tel:${t.phone}`,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-white bg-gradient-to-r from-slate-900 to-blue-900 hover:from-slate-800 hover:to-blue-800 shadow-md hover:shadow-lg",title:"Ara",children:[Ot.jsx(z,{className:"w-4 h-4"}),"Ara"]})]})]}),I===t.id&&Ot.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 space-y-3",children:[(ee(t.email)||ee(t.location))&&Ot.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm text-slate-700",children:[ee(t.email)&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(S,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"truncate",children:t.email})]}),ee(t.location)&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(T,{className:"w-4 h-4 text-slate-500"}),Ot.jsx("span",{className:"truncate",children:t.location})]})]}),(ee(t.totalJobs)||ee(t.successRate)||ee(t.completedJobs))&&Ot.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[Ot.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-2",children:[Ot.jsx("div",{className:"text-[11px] text-slate-500",children:"Toplam İş"}),Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:t.totalJobs})]}),Ot.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-2",children:[Ot.jsx("div",{className:"text-[11px] text-slate-500",children:"Tamamlanan"}),Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:t.completedJobs})]}),Ot.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-2",children:[Ot.jsx("div",{className:"text-[11px] text-slate-500",children:"Başarı Oranı"}),Ot.jsxs("div",{className:"text-sm font-bold text-slate-900",children:[t.successRate,"%"]})]})]}),ee(t.rating)&&Ot.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-3",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(O,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-600",children:"Ortalama Puan"}),Ot.jsx("div",{className:"text-lg font-bold text-slate-900",children:t.rating.toFixed(1)})]})]})}),(ee(null==(o=t.vehicle)?void 0:o.plate)||ee(null==(c=t.vehicle)?void 0:c.type))&&Ot.jsxs("div",{className:"text-sm text-slate-700",children:[Ot.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Araç Bilgileri"}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(E,{className:"w-4 h-4 text-slate-500"}),Ot.jsxs("span",{className:"truncate",children:[(null==(m=t.vehicle)?void 0:m.plate)||"-"," ",(null==(x=t.vehicle)?void 0:x.type)?`• ${t.vehicle.type}`:""]})]})]}),Ot.jsx("div",{className:"pt-2 border-t border-slate-200",children:Ot.jsxs(d,{to:`/nakliyeci/drivers/${t.id}`,className:"inline-flex items-center justify-center gap-2 w-full px-4 py-2 rounded-lg text-white bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 shadow-md hover:shadow-lg transition-all",children:[Ot.jsx(Q,{className:"w-4 h-4"}),"Detaylı Görüntüle"]})})]})]})},t.id)})}):Ot.jsxs("div",{className:"py-14 text-center",children:[Ot.jsx(C,{className:"w-10 h-10 text-slate-400 mx-auto mb-3"}),Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Taşıyıcı bulunamadı"}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-5",children:"Henüz taşıyıcınız yok. Kodu yazarak hemen ekleyin."}),Ot.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{var e;return null==(e=v.current)?void 0:e.focus()},350)},className:"inline-flex items-center px-4 py-2 rounded-lg text-white bg-gradient-to-r from-slate-900 to-blue-900 hover:from-slate-800 hover:to-blue-800",children:"Taşıyıcı Ekle"})]}),Ot.jsx(er,{isOpen:B,onClose:()=>{R(!1),F(null)},title:"Taşıyıcıyı Kaldır",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("p",{className:"text-sm text-slate-600",children:"Bu taşıyıcıyı listeden kaldırmak istediğinizden emin misiniz? Bu işlem geri alınamaz."}),Ot.jsxs("div",{className:"flex gap-3 justify-end",children:[Ot.jsx("button",{onClick:()=>{R(!1),F(null)},className:"px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:"İptal"}),Ot.jsx("button",{onClick:()=>P&&(async e=>{$(e);try{const t=await ln(e);t.success?(j("Taşıyıcı başarıyla kaldırıldı"),Y(),R(!1),F(null)):j(t.message||"Taşıyıcı kaldırılamadı")}catch(t){const e=t instanceof Error?t.message:"Beklenmeyen bir hata oluştu";j(e)}finally{$(null)}})(P),disabled:null!==M,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:null!==M?"Kaldırılıyor...":"Kaldır"})]})]})})]})]})},dn=()=>{const{user:e}=sa(),[t,s]=l.useState({balance:0,pendingCommissions:0,totalCommissions:0,commissionRate:1}),[a,i]=l.useState([]),[r,n]=l.useState(!0),[d,o]=l.useState(null),[c,m]=l.useState(!1),[x,u]=l.useState("");l.useEffect(()=>{h()},[]);const h=async()=>{try{n(!0),o(null);const t=(null==e?void 0:e.id)||localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}").id:null,a=localStorage.getItem("authToken"),l=await fetch(Zs("/api/wallet/nakliyeci"),{headers:{Authorization:`Bearer ${a||""}`,"X-User-Id":t||"","Content-Type":"application/json"}});if(!l.ok)throw new Error("Cüzdan verileri yüklenemedi");const r=await gr(l);if(!r.success)throw new Error(r.message||"Cüzdan verileri yüklenemedi");{const e=r.data||{};s({balance:e.balance||0,pendingCommissions:e.pendingCommissions||0,totalCommissions:e.totalCommissions||0,commissionRate:e.commissionRate||1}),i(e.transactions||r.transactions||[])}}catch(t){o(t instanceof Error?t.message:"Bilinmeyen hata")}finally{n(!1)}},p=Il,g=Ml,b=e=>{switch(e){case"completed":return Ot.jsx(J,{className:"w-4 h-4 text-green-500"});case"pending":return Ot.jsx(L,{className:"w-4 h-4 text-yellow-500"});default:return Ot.jsx(te,{className:"w-4 h-4 text-gray-500"})}},j=e=>{switch(e){case"completed":return"Tamamlandı";case"pending":return"Bekliyor";default:return"Bilinmiyor"}},v=e=>{switch(e){case"completed":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}};return r?Ot.jsx(Pl,{message:"Cüzdan verileri yükleniyor..."}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Cüzdan - Nakliyeci Paneli | YolNext"}),Ot.jsx("meta",{name:"description",content:"Nakliyeci cüzdan yönetimi ve komisyon takibi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/nakliyeci/dashboard"},{label:"Cüzdan",href:"/nakliyeci/wallet"}]})}),Ot.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:Ot.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(ze,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})}),Ot.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:"Cüzdan"}),Ot.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 px-4",children:"Bakiye yönetimi ve komisyon takibi"})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"nakliyeci.wallet",isEmpty:!r&&0===a.length,icon:ze,title:"Cüzdan",description:"Teklif verirken komisyon blokesini, teklif kabul edildiğinde komisyon kesintisini buradan takip edebilirsin. Yeni iş almak için “Yük Pazarı”na, aktif operasyon için “Aktif Yükler”e geç.",primaryAction:{label:"Yük Pazarı",to:"/nakliyeci/jobs"},secondaryAction:{label:"Aktif Yükler",to:"/nakliyeci/active-shipments"}})}),Ot.jsx("div",{className:"flex justify-center mb-8",children:Ot.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[Ot.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[Ot.jsx(y,{className:"w-4 h-4"}),"Yenile"]}),Ot.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg sm:rounded-xl hover:shadow-lg transition-all duration-200 text-sm font-medium",children:[Ot.jsx(F,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Para Yatır"})]})]})}),d&&Ot.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 sm:mb-6",children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(te,{className:"w-5 h-5 text-red-400 mr-2"}),Ot.jsx("p",{className:"text-red-800",children:d})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[Ot.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:Ot.jsx(ze,{className:"w-6 h-6 text-blue-600"})}),Ot.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(y,{className:"w-4 h-4 text-gray-500"})})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Mevcut Bakiye"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p((null==t?void 0:t.balance)||0)})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:Ot.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:Ot.jsx(L,{className:"w-6 h-6 text-yellow-600"})})}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Bekleyen Komisyonlar"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p((null==t?void 0:t.pendingCommissions)||0)})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:Ot.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:Ot.jsx(ft,{className:"w-6 h-6 text-green-600"})})}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Toplam Komisyon"}),Ot.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p((null==t?void 0:t.totalCommissions)||0)})]})]}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:Ot.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:Ot.jsx(ve,{className:"w-6 h-6 text-purple-600"})})}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Komisyon Oranı"}),Ot.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["%",(null==t?void 0:t.commissionRate)||0]})]})]})]}),((null==t?void 0:t.balance)||0)<100&&Ot.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx(f,{className:"w-5 h-5 text-yellow-500 mr-2"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-yellow-800 font-medium",children:"Düşük Bakiye Uyarısı"}),Ot.jsx("p",{className:"text-yellow-700 text-sm",children:"Bakiyeniz düşük. Teklif verebilmek için cüzdanınıza para yatırın."})]})]})}),Ot.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[Ot.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Le,{className:"w-5 h-5 text-gray-600"}),Ot.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Komisyon Geçmişi"})]})}),Ot.jsx("div",{className:"p-4 sm:p-6",children:0===a.length?Ot.jsx("div",{className:"min-h-[320px] lg:min-h-[50vh] flex items-center justify-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8 text-center w-full max-w-2xl",children:Ot.jsx(ir,{icon:Le,title:"Henüz komisyon işlemi yok",description:"Teklif verdiğinizde komisyon işlemleri burada görünecek"})})}):Ot.jsx("div",{className:"space-y-4",children:a.map(e=>Ot.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[b(e.status),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium text-gray-900",children:e.shipmentTitle}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"completed"===e.status&&e.completedAt?g(e.completedAt):g(e.createdAt)})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-semibold text-gray-900",children:["-",p(e.amount)]}),Ot.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${v(e.status)}`,children:j(e.status)})]})]},e.id))})})]}),c&&Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ot.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:Ot.jsxs("div",{className:"p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Para Yatır"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yatırılacak Miktar (₺)"}),Ot.jsx("input",{type:"number",value:x,onChange:e=>u(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",step:"0.01"})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"İptal"}),Ot.jsx("button",{onClick:async()=>{var e,t;if(!x||parseFloat(x)<=0)o("Geçerli bir miktar girin");else try{o(null);const s=localStorage.getItem("authToken"),a=parseFloat(x),l=await fetch(Zs("/api/wallet/topup/intent"),{method:"POST",headers:{Authorization:`Bearer ${s||""}`,"Content-Type":"application/json"},body:JSON.stringify({amount:a})}),i=l.ok?await gr(l).catch(()=>null):null;if(!l.ok||!(null==i?void 0:i.success))return void o((null==i?void 0:i.message)||"Para yatırma işlemi başarısız");const r=null==(e=null==i?void 0:i.data)?void 0:e.provider,n=null==(t=null==i?void 0:i.data)?void 0:t.providerIntentId;if("mock"===r&&n){const e=await fetch(Zs("/api/wallet/topup/confirm"),{method:"POST",headers:{Authorization:`Bearer ${s||""}`,"Content-Type":"application/json"},body:JSON.stringify({providerIntentId:n})}),t=e.ok?await gr(e).catch(()=>null):null;return e.ok&&(null==t?void 0:t.success)?(u(""),m(!1),void h()):void o((null==t?void 0:t.message)||"Ödeme doğrulanamadı")}o("Ödeme adımı gerekli. Lütfen ödeme ekranını tamamlayın.")}catch(s){o("Para yatırma işlemi başarısız")}},className:"flex-1 px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 transition-colors",children:"Yatır"})]})]})]})})})]})]})},on=({isOpen:e,onClose:t,mode:s="edit",shipment:a,currentUser:i})=>{const[r,n]=l.useState([]),[d,o]=l.useState(!1),[c,m]=l.useState({status:"",location:"",notes:""}),[x,u]=l.useState(!1);l.useEffect(()=>{e&&a.id&&h()},[e,a.id]),l.useEffect(()=>{if(!e)return;const s=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e,t]);const h=async()=>{try{o(!0);const e=localStorage.getItem("authToken"),t=await fetch(Zs(`/api/shipments/${a.id}/tracking`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json(),s=Array.isArray(e)?e:Array.isArray(null==e?void 0:e.data)?e.data:Array.isArray(null==e?void 0:e.updates)?e.updates:Array.isArray(null==e?void 0:e.rows)?e.rows:[];n(s)}}catch(e){}finally{o(!1)}},p=e=>{switch(e){case"pending":return Ot.jsx(te,{className:"w-5 h-5 text-yellow-500"});case"offer_accepted":case"accepted":return Ot.jsx(J,{className:"w-5 h-5 text-blue-500"});case"picked_up":case"in_progress":return Ot.jsx(R,{className:"w-5 h-5 text-orange-500"});case"in_transit":return Ot.jsx(E,{className:"w-5 h-5 text-blue-600"});case"delivered":return Ot.jsx(J,{className:"w-5 h-5 text-green-500"});case"completed":return Ot.jsx(J,{className:"w-5 h-5 text-green-600"});default:return Ot.jsx(te,{className:"w-5 h-5 text-gray-500"})}},g=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"offer_accepted":case"accepted":case"in_transit":return"bg-blue-100 text-blue-800";case"picked_up":case"in_progress":return"bg-orange-100 text-orange-800";case"delivered":case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},b=e=>{const t=gi(e);return"Bilinmiyor"!==t?t:e};if(!e)return null;const f="view"===s,y=Array.isArray(r)?r:[];return Ot.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:Ot.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gönderi Takibi"}),Ot.jsxs("p",{className:"text-sm text-gray-600",children:["#",a.id," - ",a.title]}),Ot.jsxs("p",{className:"text-sm text-gray-500",children:[a.from_city," → ",a.to_city]})]}),Ot.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:Ot.jsx(_,{className:"w-5 h-5 text-gray-500"})})]}),Ot.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[Ot.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Takip Geçmişi"}),d?Ot.jsx("div",{className:"flex justify-center items-center h-32",children:Ot.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):0===y.length?Ot.jsxs("div",{className:"text-center text-gray-500 py-8",children:[Ot.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),Ot.jsx("p",{children:"Henüz takip güncellemesi yok"})]}):Ot.jsx("div",{className:"space-y-4",children:y.map((e,t)=>{return Ot.jsxs("div",{className:"flex gap-4",children:[Ot.jsxs("div",{className:"flex flex-col items-center",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:p(e.status)}),t<y.length-1&&Ot.jsx("div",{className:"w-0.5 h-8 bg-gray-200 mt-2"})]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(e.status)}`,children:b(e.status)}),Ot.jsx("span",{className:"text-xs text-gray-500",children:(s=e.created_at,new Date(s).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})]}),e.location&&Ot.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-1",children:[Ot.jsx(T,{className:"w-3 h-3"}),Ot.jsx("span",{children:e.location})]}),e.notes&&Ot.jsx("p",{className:"text-sm text-gray-700",children:e.notes}),Ot.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[Ot.jsx(xe,{className:"w-3 h-3"}),Ot.jsx("span",{children:e.updated_by_name})]})]})]},e.id);var s})})]}),!f&&Ot.jsxs("div",{className:"w-80 border-l border-gray-200 p-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Güncelleme Ekle"}),Ot.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.status&&!x)try{u(!0);const e=localStorage.getItem("authToken"),t=await fetch(Zs(`/api/shipments/${a.id}/tracking`),{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(c)});if(t.ok){const e=await t.json();n(t=>[...t,{id:e.data.id,shipment_id:a.id,status:c.status,location:c.location,notes:c.notes,updated_by:i.id,updated_by_name:i.name,created_at:e.data.created_at}]),m({status:"",location:"",notes:""})}}catch(t){}finally{u(!1)}},className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum"}),Ot.jsxs("select",{value:c.status,onChange:e=>m({...c,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[Ot.jsx("option",{value:"",children:"Durum Seçin"}),Ot.jsx("option",{value:"accepted",children:"Kabul Edildi"}),Ot.jsx("option",{value:"picked_up",children:"Alındı"}),Ot.jsx("option",{value:"in_transit",children:"Yolda"}),Ot.jsx("option",{value:"delivered",children:"Teslim Edildi"}),Ot.jsx("option",{value:"completed",children:"Tamamlandı"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Konum (Opsiyonel)"}),Ot.jsx("input",{type:"text",value:c.location,onChange:e=>m({...c,location:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: İstanbul Depo"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar (Opsiyonel)"}),Ot.jsx("textarea",{value:c.notes,onChange:e=>m({...c,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Güncelleme notları..."})]}),Ot.jsx("button",{type:"submit",disabled:!c.status||x,className:"w-full px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg hover:from-blue-900 hover:to-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:x?Ot.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(L,{className:"w-4 h-4"}),"Güncelleme Ekle"]})})]})]})]})]})})};function cn(){return Ot.jsxs("div",{className:"text-center mb-6 sm:mb-8 md:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-3 sm:mb-4 md:mb-6",children:Ot.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg sm:rounded-xl md:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(R,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-white"})})}),Ot.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:"Aktif Yükler"}),Ot.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg text-slate-600 px-2 sm:px-4",children:"Tüm gönderilerinizi tek ekranda görüntüleyin ve yönetin"})]})}function mn({searchTerm:e,statusFilter:t,onSearchChange:s,onStatusFilterChange:a}){return Ot.jsx("div",{className:"bg-white rounded-xl p-3 sm:p-4 md:p-6 shadow-lg border border-gray-200 mb-4 sm:mb-6",children:Ot.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[Ot.jsx("div",{className:"flex-1",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsx("input",{type:"text",placeholder:"Yük ara...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-8 sm:pl-10 pr-3 sm:pr-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),Ot.jsx("div",{className:"flex gap-2",children:Ot.jsxs("select",{value:t,onChange:e=>a(e.target.value),className:"flex-1 px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ot.jsx("option",{value:"all",children:"Tümü"}),Ot.jsx("option",{value:"waiting_driver",children:"Taşıyıcı Bekliyor"}),Ot.jsx("option",{value:"active",children:"Aktif"}),Ot.jsx("option",{value:"delivered",children:"Tamamlanan"}),Ot.jsx("option",{value:"cancelled",children:"İptal Edilen"})]})})]})})}const xn=()=>{var e;const{user:t}=sa(),s=o(),[a]=c(),i=a.get("shipmentId"),r=l.useRef(!1),n=e=>{const t=String(e??"").trim();return t?t.includes("@")?"Gönderici":$l(t):"Gönderici"},m=Ri,[x,u]=l.useState([]),[h,p]=l.useState(!0),[g,b]=l.useState(""),[f,j]=l.useState("all"),[v,N]=l.useState({page:1,pages:1,total:0,limit:20}),[k,w]=l.useState(!1),[S,A]=l.useState(null),[D,I]=l.useState("direct"),[K,M]=l.useState([]),[B,P]=l.useState(!1),[L,F]=l.useState(""),[q,H]=l.useState(""),[U,V]=l.useState(!1),[J,W]=l.useState(!1),[Z,X]=l.useState(""),[Q,ee]=l.useState(!1),[se,ae]=l.useState(""),[ie,re]=l.useState(!1),[ne,de]=l.useState(null),[oe,ce]=l.useState(null),[me,xe]=l.useState(!1),[ue,he]=l.useState(null),[pe,ge]=l.useState(!1),[be,ye]=l.useState(null);l.useEffect(()=>{je()},[v.page,f]),l.useEffect(()=>{if(!i)return;if(!x||0===x.length)return;if(r.current)return;const e=document.getElementById(`shipment-${i}`);e&&"function"==typeof e.scrollIntoView&&(e.scrollIntoView({behavior:"smooth",block:"start"}),r.current=!0)},[i,x]),l.useEffect(()=>{k&&"direct"===D&&ve()},[k,D]);const je=async()=>{try{p(!0);const e=new URLSearchParams({page:v.page.toString(),limit:v.limit.toString()});"all"!==f&&"delivered"!==f&&new Set(["pending","open","waiting_for_offers","offer_accepted","accepted","assigned","in_progress","picked_up","in_transit","delivered","completed","cancelled"]).has(f)&&e.append("status",f);const t=await fetch(`${Zs("/api/shipments/nakliyeci")}?${e.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});if(t.ok){const e=await gr(t),s=e.data||e.shipments||(Array.isArray(e)?e:[]),a=(e,t=0)=>{if("number"==typeof e)return Number.isFinite(e)?e:t;if("string"==typeof e){const s=parseFloat(e.replace(/[^0-9.,-]/g,"").replace(",","."));return Number.isFinite(s)?s:t}return t},l=(Array.isArray(s)?s:[]).filter(Boolean).map(e=>{var t,s,l,i,r,n,d,o,c,x,u,h,p,g,b,f,y;const j=!!(e.carrier_id||e.carrierId||e.nakliyeci_id||e.nakliyeciId||null)&&("waiting_for_offers"===e.status||"pending"===e.status||"open"===e.status),v=e.driver_id||e.driverId||e.driver&&e.driver.id?{name:e.driver&&(e.driver.name||e.driver.fullName)||e.assignedDriverName||e.driverName||e.driver_full_name||"Atanmadı",phone:e.driver&&(e.driver.phone||e.driverPhone)||e.assignedDriverPhone||e.driverPhone||e.driver_phone||"",vehicle:e.driver&&(e.driver.vehicle||e.driverVehicle)||e.driverVehicle||e.driver_vehicle||[e.vehiclePlate,e.vehicleType].filter(Boolean).join(" ")||""}:null,N=e.userId||e.user_id||e.userid||e.ownerId||e.owner_id||(null==(t=e.shipper)?void 0:t.id)||(null==(s=e.shipper)?void 0:s.userId),k=(null==(l=e.shipper)?void 0:l.name)||(null==(i=e.shipper)?void 0:i.fullName)||(null==(r=e.shipper)?void 0:r.fullname)||(null==(n=e.shipper)?void 0:n.companyName)||e.shipperName||e.shipper_name||e.ownerName||e.owner_name||e.shipmentOwnerName||e.shipmentownername||e.senderName||e.sender_name||e.sender||(null==(d=e.user)?void 0:d.fullName)||(null==(o=e.user)?void 0:o.name)||(null==(c=e.owner)?void 0:c.fullName)||(null==(x=e.owner)?void 0:x.name)||e.ownerEmail||e.owner_email||e.email||e.contactPerson||"Bilinmiyor",w=(null==(u=e.shipper)?void 0:u.company)||(null==(h=e.shipper)?void 0:h.companyName)||(null==(p=e.shipper)?void 0:p.company_name)||e.ownerCompany||e.owner_company||e.shipperCompany||e.shipper_company||e.companyName||"",S=(null==(g=e.shipper)?void 0:g.email)||e.shipperEmail||e.shipper_email||e.ownerEmail||e.owner_email||e.senderEmail||e.sender_email||e.email||"",z=(String(e.ownerRole||e.owner_role||(null==(b=e.shipper)?void 0:b.role)||(null==(f=e.shipper)?void 0:f.type)||"individual"),e.shipper?{id:N||e.shipper.id||e.shipper.userId,name:k,company:w,email:S}:{id:N,name:k,company:w,email:S}),{from:T,to:C}=Vl(e),A=e.trackingNumber||e.tracking_number||e.trackingnumber||e.trackingCode||e.tracking_code||e.trackingcode||e.tracking||void 0,D=m(A,e.id),E=a(e.displayPrice??e.display_price??e.price??e.value??e.offerPrice??e.offer_price,0);return{id:(null==(y=e.id)?void 0:y.toString())||"",trackingNumber:D,title:e.title||void 0,description:e.description||void 0,category:e.category||e.categoryType||e.shipmentType||void 0,categoryData:e.categoryData||e.category_data||void 0,metadata:e.metadata??e.meta??void 0,from:T,to:C,pickupAddress:e.pickupAddress||e.pickup_address||e.pickupCity||e.pickup_city||e.from_address||void 0,deliveryAddress:e.deliveryAddress||e.delivery_address||e.deliveryCity||e.delivery_city||e.to_address||void 0,pickupDistrict:e.pickupDistrict||e.pickup_district||void 0,deliveryDistrict:e.deliveryDistrict||e.delivery_district||void 0,status:e.status||"pending",priority:e.priority||"normal",weight:e.weight?"number"==typeof e.weight?e.weight:parseFloat(e.weight)||0:0,volume:e.volume?"number"==typeof e.volume?e.volume:parseFloat(e.volume)||0:0,dimensions:e.dimensions||void 0,requiresInsurance:"boolean"==typeof e.requiresInsurance?e.requiresInsurance:"boolean"==typeof e.requires_insurance?e.requires_insurance:"boolean"==typeof e.insurance_required?e.insurance_required:void 0,specialRequirements:e.specialRequirements||e.special_requirements||void 0,value:E,isExclusiveToCarrier:j,pickupDate:e.pickupDate||e.pickup_date||"",deliveryDate:e.deliveryDate||e.delivery_date||"",driver_id:e.driver_id||e.driverId||null,driver:v,shipper:z,createdAt:e.createdAt||e.created_at||(new Date).toISOString()}});u(l),e.pagination?N(t=>({...t,page:e.pagination.page,pages:e.pagination.pages,total:e.pagination.total})):e.meta&&N(t=>({...t,page:Number(e.meta.page||t.page),pages:Number(e.meta.totalPages||t.pages),total:Number(e.meta.total||t.total),limit:Number(e.meta.limit||t.limit)}))}else ei("Aktif gönderiler yüklenemedi"),u([])}catch(e){ei("Aktif gönderiler yüklenirken hata:",e)}finally{p(!1)}},ve=async()=>{var e;try{P(!0);const t=localStorage.getItem("user"),s=t&&(null==(e=JSON.parse(t))?void 0:e.id)||"";si("[DEBUG] ActiveShipments - Loading drivers for userId:",s);const a=await fetch(Zs("/api/drivers/nakliyeci"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json","X-User-Id":s}});if(si("[DEBUG] ActiveShipments - Drivers API response status:",a.status),a.ok){const e=await gr(a);si("[DEBUG] ActiveShipments - Drivers API response data:",e),M(e.drivers||[]),si("[DEBUG] ActiveShipments - Set drivers count:",(e.drivers||[]).length)}else{const e=await a.text();ei("[DEBUG] ActiveShipments - Taşıyıcı API hatası:",a.status,e),M([])}}catch(t){ei("[DEBUG] ActiveShipments - Taşıyıcılar yüklenirken hata:",t),M([])}finally{P(!1)}},Ne=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"normal":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},ke=e=>{switch(e){case"high":return"Yüksek";case"normal":return"Normal";case"low":return"Düşük";default:return e}},Se=e=>{const t=String(e||"").trim().toLowerCase();return t?"warehouse_transfer"===t||"warehouse transfer"===t?"Depo Transferi":"house_move"===t||"house move"===t||"home_move"===t?"Ev Taşıma":"furniture"===t||"furniture_transport"===t?"Mobilya":"general"===t||"general_cargo"===t?"Genel Yük":e:null},ze=e=>{const t=(e=>{if(!e)return null;if("object"==typeof e)return e;if("string"==typeof e)try{return JSON.parse(e)}catch{return null}return null})(e.metadata),s=t&&"object"==typeof t?t.driverOffer:null;return s&&"object"==typeof s?s:null},Te=x.filter(e=>{var t;const s=!g||""===g.trim()||(e.trackingNumber||"").toLowerCase().includes(g.toLowerCase())||(e.from||"").toLowerCase().includes(g.toLowerCase())||(e.to||"").toLowerCase().includes(g.toLowerCase())||((null==(t=e.driver)?void 0:t.name)||"").toLowerCase().includes(g.toLowerCase());let a=!0;if("all"!==f)switch(f){case"waiting_driver":a=("offer_accepted"===e.status||"accepted"===e.status)&&!e.driver_id;break;case"active":a=("in_progress"===e.status||"in_transit"===e.status||"delivered"===e.status)&&!!e.driver_id;break;case"delivered":a="delivered"===e.status||"completed"===e.status;break;case"cancelled":a="cancelled"===e.status;break;default:a=e.status===f}return s&&a});return h?Ot.jsx(Pl,{}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Aktif Yükler - YolNext Nakliyeci"}),Ot.jsx("meta",{name:"description",content:"Aktif yüklerinizi takip edin"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Aktif Yükler",icon:Ot.jsx(R,{className:"w-4 h-4"})}]})}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"nakliyeci.active-shipments",isEmpty:!h&&0===x.length,icon:E,title:"Aktif Yükler",description:'Kabul edilen yüklerinizi burada yönetebilirsiniz: taşıyıcı atama, mesajlaşma ve takip işlemleri. Yeni yük almak için "Yük Pazarı" sayfasına geçebilirsiniz.',primaryAction:{label:"Yük Pazarına Git",to:"/nakliyeci/jobs"},secondaryAction:{label:"Yenile",onClick:()=>je()}})}),Ot.jsx(cn,{}),Ot.jsx("div",{className:"flex justify-center mb-6 sm:mb-8",children:Ot.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:Ot.jsxs("button",{onClick:je,disabled:h,className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 bg-white text-slate-700 rounded-lg hover:bg-slate-50 transition-colors shadow-lg border border-slate-200 text-sm sm:text-base disabled:opacity-60 disabled:cursor-not-allowed",children:[Ot.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Yenile"}),Ot.jsx("span",{className:"sm:hidden",children:"↻"})]})})}),Ot.jsx(mn,{searchTerm:g,statusFilter:f,onSearchChange:b,onStatusFilterChange:j}),Te.length>0?Ot.jsx("div",{className:"grid gap-6",children:Te.map((e,t)=>{var a,l,r;const d=ze(e),o=(null==d?void 0:d.expiresAt)?Date.parse(String(d.expiresAt)):NaN,c=!!Number.isFinite(o)&&o<=Date.now(),m=d&&"pending"===d.status&&!c?d:null,x=m&&Number.isFinite(o)?Math.max(0,Math.ceil((o-Date.now())/6e4)):null,u=(()=>{const t=String(e.status||"");return"cancelled"===t||"canceled"===t?null:"waiting_for_offers"!==t&&"open"!==t&&"pending"!==t||e.driver_id?"offer_accepted"!==t&&"accepted"!==t||e.driver_id?"assigned"!==t&&"in_progress"!==t||!e.driver_id?"picked_up"===t?"Sıradaki adım: Yola çıkış / takip.":"in_transit"===t?"Sıradaki adım: Teslimat.":"delivered"===t?"Sıradaki adım: Teslimat onayı / kapanış.":"completed"===t?"Süreç tamamlandı.":null:"Sıradaki adım: Yükleme (taşıyıcı “Yükü Aldım”).":m?"Sıradaki adım: Taşıyıcı 30 dk içinde kabul edecek.":"Sıradaki adım: Taşıyıcıya teklif gönder.":"Sıradaki adım: Teklifleri yönet veya kabul ettir."})();return Ot.jsx("div",{id:`shipment-${e.id}`,className:"bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-shadow"+(i&&String(e.id)===String(i)?" ring-2 ring-blue-400 ring-offset-2":""),children:Ot.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[Ot.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Ot.jsx("span",{className:"text-sm sm:text-base md:text-lg font-bold text-blue-600",children:e.trackingNumber}),e.isExclusiveToCarrier&&Ot.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-purple-50 text-purple-700 border border-purple-200",children:"Sana Özel"}),Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${pi(e.status).color}`,title:(h=e.status,pi(h).description),children:pi(e.status).text}),Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ne(e.priority)}`,children:ke(e.priority)}),Se(e.category)&&Ot.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-slate-50 text-slate-700 border border-slate-200",children:Se(e.category)})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:Il(e.value||e.price||0)}),Ot.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Tutar"})]})]}),(e.title||e.description)&&Ot.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3 sm:p-4",children:[e.title&&Ot.jsx("div",{className:"text-sm sm:text-base font-semibold text-slate-900",children:$l(e.title)}),e.description&&Ot.jsx("div",{className:"text-xs sm:text-sm text-slate-700 mt-1 whitespace-pre-line",children:Bl($l(e.description))})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:"Güzergah"}),Ot.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 text-xs sm:text-sm",children:[Ot.jsx(T,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsxs("span",{className:"break-words",children:[e.from," → ",e.to]})]}),(e.pickupAddress||e.deliveryAddress)&&Ot.jsxs("div",{className:"mt-2 text-xs sm:text-sm text-gray-600 space-y-1",children:[e.pickupAddress&&Ot.jsxs("div",{className:"break-words",children:[Ot.jsx("strong",{children:"Yükleme:"})," ",Rl(e.pickupAddress)]}),e.deliveryAddress&&Ot.jsxs("div",{className:"break-words",children:[Ot.jsx("strong",{children:"Teslim:"})," ",Rl(e.deliveryAddress)]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:"Yük Bilgileri"}),Ot.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600",children:[null!=e.weight&&Number(e.weight)>0&&Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(_e,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsxs("span",{children:[e.weight," kg"]})]}),null!=e.volume&&Number(e.volume)>0&&Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Ie,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsxs("span",{children:["number"==typeof e.volume?e.volume.toFixed(2):e.volume," m³"]})]}),e.dimensions&&Ot.jsxs("div",{className:"text-gray-700",children:[Ot.jsx("strong",{children:"Ölçüler:"})," ","string"==typeof e.dimensions?e.dimensions:JSON.stringify(e.dimensions)]}),(!e.volume||0===e.volume)&&Ot.jsx("span",{className:"text-gray-400 text-xs",children:"Hacim bilgisi yok"})]}),(e.requiresInsurance||e.specialRequirements)&&Ot.jsxs("div",{className:"mt-2 text-xs sm:text-sm text-gray-600 space-y-1",children:[e.requiresInsurance&&Ot.jsxs("div",{children:[Ot.jsx("strong",{children:"Sigorta:"})," İsteniyor"]}),e.specialRequirements&&Ot.jsxs("div",{className:"break-words",children:[Ot.jsx("strong",{children:"Özel İstek:"})," ",Bl($l(e.specialRequirements))]})]})]})]}),(e.pickupDate||e.deliveryDate)&&Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:"Tarihler"}),Ot.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[e.pickupDate&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($e,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsxs("span",{children:[Ot.jsx("strong",{children:"Yükleme:"})," ",Kl(e.pickupDate)]})]}),e.deliveryDate&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($e,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsxs("span",{children:[Ot.jsx("strong",{children:"Teslim:"})," ",Kl(e.deliveryDate)]})]})]})]})}),u&&Ot.jsxs("div",{className:"text-xs sm:text-sm text-slate-700 bg-slate-50 border border-slate-200 rounded-lg p-2 sm:p-3",children:[Ot.jsx("strong",{children:"Şimdi ne olacak?"})," ",u]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:"Taşıyıcı Bilgileri"}),e.driver_id?Ot.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[e.driver&&"Atanmadı"!==e.driver.name?Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Ad:"})," ",e.driver.name]}):Ot.jsxs("p",{className:"text-gray-500",children:[Ot.jsx("strong",{children:"Durum:"})," Taşıyıcı atandı (bilgiler yükleniyor). Birazdan görünmezse “Yenile”ye basın."]}),(null==(a=e.driver)?void 0:a.vehicle)&&Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Araç:"})," ",e.driver.vehicle]}),(null==(l=e.driver)?void 0:l.phone)&&Ot.jsxs("p",{className:"break-words",children:[Ot.jsx("strong",{children:"Tel:"})," ",e.driver.phone]})]}):m?Ot.jsxs("div",{className:"text-xs sm:text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-lg p-2 sm:p-3",children:[Ot.jsx("p",{className:"font-medium",children:"⏳ Taşıyıcı Onayı Bekleniyor"}),Ot.jsx("p",{className:"text-xs mt-1 text-amber-700",children:null!=x?`Kalan süre: ${x} dk`:"30 dk içinde kabul etmesi gerekiyor."})]}):Ot.jsxs("div",{className:"text-xs sm:text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-2 sm:p-3",children:[Ot.jsx("p",{className:"font-medium",children:"⏳ Taşıyıcı Bekleniyor"}),Ot.jsx("p",{className:"text-xs mt-1 text-amber-700",children:"Taşıyıcı ataması yapılmadı"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:"Gönderici Bilgileri"}),Ot.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Ad:"})," ",n(e.shipper.name)]}),e.shipper.company&&Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Şirket:"})," ",$l(e.shipper.company)]}),Ot.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[Ot.jsx("strong",{children:"Not:"})," Gönderici telefon numarası gizlilik nedeniyle gösterilmemektedir. İletişim için mesaj sistemi kullanın. Platform sadece tarafları buluşturan bir pazaryeridir."]})]})]})]}),"cancelled"===e.status||"canceled"===e.status?Ot.jsx("div",{className:"text-xs sm:text-sm text-red-700 text-center bg-red-50 border border-red-200 rounded-lg p-2 sm:p-3",children:"Bu gönderi iptal edildi. İşlem yapılamaz."}):Ot.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3",children:[("waiting_for_offers"===e.status||"offer_accepted"===e.status||"accepted"===e.status)&&!e.driver_id&&Ot.jsxs("button",{onClick:()=>{A(e),I("listing"),w(!0)},className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-700 hover:to-indigo-700 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 text-sm sm:text-base",children:[Ot.jsx(we,{className:"w-4 h-4"}),"Teklifleri Yönet"]}),e.driver_id?Ot.jsxs("div",{className:"text-xs sm:text-sm text-green-600 mb-2 text-center bg-green-50 border border-green-200 rounded-lg p-2",children:[Ot.jsx(fe,{className:"w-3 h-3 sm:w-4 sm:h-4 inline mr-1"}),"Taşıyıcı Atandı"]}):"waiting_for_offers"!==e.status?Ot.jsxs("button",{onClick:()=>(e=>{A(e),I("direct"),w(!0),ve()})(e),disabled:!!m,className:"w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 text-sm sm:text-base "+(m?"opacity-60 cursor-not-allowed hover:shadow-lg":""),children:[Ot.jsx(yt,{className:"w-4 h-4"}),m?"Onay Bekleniyor":"Taşıyıcıya Teklif Gönder"]}):null,Ot.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Ot.jsxs("button",{onClick:()=>(e=>{if(!e.shipper)return;const t=e.shipper.id||e.userId||e.user_id||e.userid||e.ownerId||e.owner_id||e.shipperId||e.shipper_id||e.senderId||e.sender_id;if(!t||""===String(t).trim())return ae("Gönderici bilgisi bulunamadı, mesajlaşamazsınız."),ee(!0),void setTimeout(()=>ee(!1),5e3);de({id:String(t||""),name:n(e.shipper.name),email:String(e.shipper.email||""),type:String(e.ownerRole||e.owner_role||"individual")}),ce(e.id),re(!0)})(e),className:"bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-2 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-1 text-xs sm:text-sm",children:[Ot.jsx(G,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Mesaj"]}),e.driver_id&&Ot.jsxs("button",{onClick:()=>(e=>{ye(e),ge(!0)})(e),className:"bg-white border border-blue-200 text-blue-700 hover:bg-blue-50 px-2 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow flex items-center justify-center gap-1 text-xs sm:text-sm",children:[Ot.jsx(T,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsx("span",{className:"hidden xs:inline",children:"Takip / ETA"}),Ot.jsx("span",{className:"xs:hidden",children:"📍"})]}),(null==(r=e.driver)?void 0:r.phone)&&Ot.jsxs("a",{href:`tel:${e.driver.phone}`,className:"bg-white border border-blue-200 text-blue-700 hover:bg-blue-50 px-2 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow flex items-center justify-center gap-1 text-xs sm:text-sm",children:[Ot.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"}),Ot.jsx("span",{className:"hidden xs:inline",children:"Ara"}),Ot.jsx("span",{className:"xs:hidden",children:"📞"})]})]}),e.driver_id&&Ot.jsxs("button",{onClick:()=>s(`/nakliyeci/route-planner?shipmentId=${e.id}`),className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-3 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2 text-sm sm:text-base",title:"Rota üzerinde ek gönderiler bul ve optimize et",children:[Ot.jsx(Y,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Rota Optimize Et"}),Ot.jsx("span",{className:"sm:hidden",children:"🗺️ Optimize"})]}),"delivered"===e.status&&e.shipper.id&&!e.hasRatedShipper&&Ot.jsxs("button",{onClick:()=>{he({id:e.shipper.id||"",name:e.shipper.name,email:e.shipper.email||"",type:e.shipper.company?"corporate":"individual"}),ce(e.id),xe(!0)},className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-3 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2 text-sm sm:text-base",children:[Ot.jsx(O,{className:"w-4 h-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Taşıyıcıyı Değerlendir"}),Ot.jsx("span",{className:"sm:hidden",children:"⭐ Değerlendir"})]})]})]})},`${e.id}-${e.trackingNumber}-${t}`);var h})}):Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-10 text-center w-full max-w-2xl",children:Ot.jsx(ir,{icon:R,title:"Henüz aktif yük yok",description:"Teklif kabul edilince aktif yükler burada görünecek. Yük Pazarı sayfasından teklif verebilirsiniz.",action:{label:"Yük Pazarı",onClick:()=>s("/nakliyeci/jobs")}})})}),!h&&v.pages>1&&Ot.jsx("div",{className:"mt-6 sm:mt-8",children:Ot.jsx(rr,{currentPage:v.page,totalPages:v.pages,onPageChange:e=>N(t=>({...t,page:e}))})}),Ot.jsx(er,{isOpen:k,onClose:()=>{w(!1),A(null),I("direct"),F(""),H("")},title:"Taşıyıcıya Ata",size:"lg",children:S&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[Ot.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Gönderi Bilgisi"}),Ot.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Takip No:"})," ",S.trackingNumber]}),Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Güzergah:"})," ",S.from," → ",S.to]})]})]}),(null==(e=S.categoryData)?void 0:e.vehicleRequirements)&&Ot.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border-2 border-amber-200",children:[Ot.jsxs("h4",{className:"font-semibold text-amber-900 mb-3 flex items-center gap-2",children:[Ot.jsx(E,{className:"w-5 h-5 text-amber-600"}),"Göndericinin Araç Gereksinimleri"]}),Ot.jsx("div",{className:"text-sm text-amber-800 space-y-2",children:(()=>{const e=S.categoryData.vehicleRequirements,t=[];if(e.vehicleType){const s={van:"Van",kamyonet:"Kamyonet",kamyon:"Kamyon",refrigerated:"Soğutmalı Araç",open_truck:"Açık Kasa Kamyon",closed_truck:"Kapalı Kasa Kamyon"};t.push(`Araç Tipi: ${s[e.vehicleType]||e.vehicleType}`)}if(e.trailerType){const s={tenteli:"Tenteli Dorse",frigorific:"Frigorifik Dorse",lowbed:"Lowbed Dorse","kapalı":"Kapalı Dorse","açık":"Açık Dorse"};t.push(`Dorse: ${s[e.trailerType]||e.trailerType}`)}if(e.requiresCrane&&t.push("Vinç Gerekli"),e.requiresForklift&&t.push("Forklift Gerekli"),e.requiresHydraulicLifter&&t.push("Hidrolik Kaldırıcı Gerekli"),e.heavyTonage&&t.push("Ağır Tonaj: "+(e.heavyTonageAmount?e.heavyTonageAmount+" ton":"40+ ton")),e.oversizedLoad){const s=e.oversizedDimensions;if(s&&(s.length||s.width||s.height)){const e=[s.length,s.width,s.height].filter(Boolean).join(" x ");t.push(`Geniş Yük: ${e} m`)}else t.push("Geniş Yük (Özel izin gerektiren)")}if(e.temperatureControl){const s=[e.temperatureMin,e.temperatureMax].filter(Boolean).join(" - ");t.push("Sıcaklık Kontrolü: "+(s?s+" ℃":"Gerekli"))}return t.length>0?Ot.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.map((e,t)=>Ot.jsx("li",{children:e},t))}):null})()}),Ot.jsx("p",{className:"text-xs text-amber-700 mt-3 font-semibold",children:"⚠️ Bu gereksinimlere uygun taşıyıcı seçin veya ilan açarken bu bilgileri belirtin."})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsxs("button",{onClick:()=>I("direct"),className:"flex-1 p-4 rounded-xl border-2 transition-all duration-300 "+("direct"===D?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"),children:[Ot.jsx(C,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:"Doğrudan Ata"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Taşıyıcılarınızdan seçin"})]}),Ot.jsxs("button",{onClick:()=>I("listing"),className:"flex-1 p-4 rounded-xl border-2 transition-all duration-300 "+("listing"===D?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"),children:[Ot.jsx(we,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:"İlan Aç"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Teklifler alsın"})]})]}),"direct"===D&&Ot.jsx("div",{className:"space-y-4",children:B?Ot.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ot.jsx(le,{className:"w-6 h-6 animate-spin text-blue-600"}),Ot.jsx("span",{className:"ml-2 text-slate-600",children:"Taşıyıcılar yükleniyor..."})]}):0===K.length?Ot.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-xl",children:[Ot.jsx(C,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),Ot.jsx("p",{className:"text-slate-600 font-medium",children:"Müsait taşıyıcı bulunmuyor"}),Ot.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Taşıyıcı eklemek için ",Ot.jsx(d,{to:"/nakliyeci/drivers",className:"text-blue-600 hover:underline",children:"Taşıyıcılarım"})," sayfasına gidin"]})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Taşıyıcı Seçin *"}),Ot.jsxs("select",{value:L,onChange:e=>F(e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm",children:[Ot.jsx("option",{value:"",children:"Taşıyıcı seçiniz"}),K.map(e=>{var t,s;return Ot.jsxs("option",{value:e.id,children:[e.name," ",(null==(t=e.vehicle)?void 0:t.plate)?`- ${e.vehicle.plate}`:""," ",(null==(s=e.vehicle)?void 0:s.type)?`(${e.vehicle.type})`:""]},e.id)})]})]})}),"listing"===D&&Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[Ot.jsx($,{className:"w-4 h-4 inline mr-2"}),"Taşıyıcı Bütçesi (Tavan) (₺) - Opsiyonel"]}),Ot.jsx("input",{type:"number",step:"0.01",value:q,onChange:e=>H(e.target.value),className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm",placeholder:"Örn: 5000"}),Ot.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Taşıyıcı teklifleri bu tutarı aşamaz"})]})}),Ot.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[Ot.jsx("button",{onClick:()=>{w(!1),A(null),I("direct"),F(""),H("")},className:"flex-1 px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-colors",children:"İptal"}),Ot.jsx("button",{onClick:"direct"===D?async()=>{if(!L||!S)return;V(!0);const e=setTimeout(()=>{V(!1),ae("Taşıyıcı atama işlemi zaman aşımına uğradı. Lütfen tekrar deneyin."),ee(!0),setTimeout(()=>ee(!1),5e3)},1e4);try{const t=await fetch(Zs(`/api/shipments/${S.id}/assign-driver`),{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify({driverId:L})});if(t.ok)clearTimeout(e),X("Taşıyıcıya iş teklifi gönderildi. 30 dk içinde kabul etmesi bekleniyor."),W(!0),setTimeout(()=>W(!1),3e3),w(!1),A(null),F(""),await je();else{clearTimeout(e);try{const e=await gr(t);ae((null==e?void 0:e.message)||"Taşıyıcı atanamadı. Lütfen tekrar deneyin.")}catch{ae("Taşıyıcı atanamadı. Lütfen tekrar deneyin.")}ee(!0),setTimeout(()=>ee(!1),5e3)}}catch(t){clearTimeout(e),ei("Taşıyıcı atanırken hata:",t),ae("Taşıyıcı atanamadı. Lütfen tekrar deneyin."),ee(!0),setTimeout(()=>ee(!1),5e3)}finally{clearTimeout(e),V(!1)}}:async()=>{if(S)try{V(!0);const e={shipmentId:Number(S.id),minPrice:q?Number(q):void 0},t=localStorage.getItem("authToken"),s=await fetch(Zs("/api/carrier-market/listings"),{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)});let a=null;if(!s.ok){try{a=await gr(s)}catch{a={}}const e=String((null==a?void 0:a.message)||"").toLowerCase();if(501===s.status||e.includes("carrier-market routes not available")||e.includes("carrier marketing routes not available")||e.includes("routes not available")){const e=await fetch(Zs(`/api/shipments/${S.id}/open-broadcast`),{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({})});if(e.ok)return X("📢 İlan yayınlandı! Taşıyıcılar teklif verecek."),W(!0),setTimeout(()=>W(!1),3e3),w(!1),A(null),H(""),void(await je());try{const t=await gr(e);ae((null==t?void 0:t.message)||"❌ İlan oluşturulamadı, tekrar dene.")}catch{ae("❌ İlan oluşturulamadı, tekrar dene.")}return ee(!0),void setTimeout(()=>ee(!1),5e3)}}s.ok?(X("İlan başarıyla oluşturuldu! Taşıyıcılar teklif vermeye başlayacak."),W(!0),setTimeout(()=>W(!1),3e3),w(!1),A(null),H(""),await je()):(ae((null==a?void 0:a.message)||"İlan oluşturulamadı. Lütfen tekrar deneyin."),ee(!0),setTimeout(()=>ee(!1),5e3))}catch(e){ei("İlan oluşturulurken hata:",e),ae("İlan oluşturulamadı. Lütfen tekrar deneyin."),ee(!0),setTimeout(()=>ee(!1),5e3)}finally{V(!1)}},disabled:U||"direct"===D&&!L||"listing"===D&&!1,className:"flex-1 px-4 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:U?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(le,{className:"w-5 h-5 animate-spin"}),"direct"===D?"Atanıyor...":"Oluşturuluyor..."]}):Ot.jsx(Ot.Fragment,{children:"direct"===D?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(fe,{className:"w-5 h-5"}),"Ata"]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(we,{className:"w-5 h-5"}),"İlan Oluştur"]})})})]})]})}),J&&Ot.jsx(Fl,{message:Z,isVisible:J,onClose:()=>W(!1)}),ie&&ne&&t&&Ot.jsx(mr,{isOpen:ie,onClose:()=>{re(!1),de(null),ce(null)},otherUser:ne,currentUser:{id:t.id||"",name:t.fullName||"Kullanıcı"},shipmentId:oe||void 0}),pe&&be&&(()=>{const e=(()=>{try{const e=localStorage.getItem("user");if(!e)return null;const t=JSON.parse(e),s=null!=(null==t?void 0:t.id)?String(t.id):"",a=String((null==t?void 0:t.fullName)||(null==t?void 0:t.name)||`${(null==t?void 0:t.firstName)||""} ${(null==t?void 0:t.lastName)||""}`.trim()||"Nakliyeci").trim();return s?{id:s,name:a}:null}catch{return null}})();return e?Ot.jsx(on,{isOpen:pe,onClose:()=>{ge(!1),ye(null)},mode:"view",shipment:{id:String(be.id),title:`Takip No: ${be.trackingNumber}`,from_city:String(be.from||""),to_city:String(be.to||""),status:String(be.status||"")},currentUser:e}):null})(),me&&ue&&t&&Ot.jsx(tr,{isOpen:me,onClose:()=>{xe(!1),he(null),ce(null),je()},ratedUser:ue,currentUser:{id:t.id||"",name:t.fullName||"Kullanıcı"},shipmentId:oe||void 0}),Q&&Ot.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 border border-red-200 text-red-600 px-6 py-4 rounded-xl shadow-xl flex items-center gap-3 z-50 animate-slide-up",children:[Ot.jsx(te,{className:"w-5 h-5"}),Ot.jsx("span",{className:"font-medium",children:se}),Ot.jsx("button",{onClick:()=>ee(!1),className:"ml-4 text-red-400 hover:text-red-600",children:Ot.jsx(_,{className:"w-5 h-5"})})]})]})]})},un=()=>{const e=o(),[t,s]=l.useState([]),[a,i]=l.useState(!0),[r,n]=l.useState(null),[c,m]=l.useState([]),[x,u]=l.useState({}),[h,p]=l.useState(!1),[g,b]=l.useState(!1),[f,y]=l.useState(""),[j,v]=l.useState(""),[N,k]=l.useState(!1),[w,S]=l.useState(!1),[C,A]=l.useState(null),[D,I]=l.useState(null),[M,B]=l.useState(!1),O=e=>{const t=e instanceof Date?e:new Date(e||"");return Number.isFinite(t.getTime())?t.toLocaleDateString("tr-TR"):"—"},P=()=>{const e=localStorage.getItem("user"),t=e?JSON.parse(e||"{}").id:void 0;return{Authorization:`Bearer ${localStorage.getItem("authToken")||""}`,"X-User-Id":t||"","Content-Type":"application/json"}},G=async()=>{var e;try{i(!0);const t=await fetch(Zs("/api/carrier-market/listings?mine=1"),{headers:P()});if(!t.ok)throw new Error("İlanlar alınamadı");const a=await gr(t),l=Array.isArray(a)?a:Array.isArray(null==a?void 0:a.data)?a.data:(null==(e=null==a?void 0:a.data)?void 0:e.listings)||(null==a?void 0:a.listings)||[];s(Array.isArray(l)?l:[])}catch(t){s([])}finally{i(!1)}};l.useEffect(()=>{G()},[]);const F=async e=>{var t;if(r===e)return n(null),void m([]);try{p(!0),n(e);const s=await fetch(Zs(`/api/carrier-market/bids?listingId=${e}`),{headers:P()});if(!s.ok)throw new Error("Teklifler alınamadı");const a=await gr(s),l=Array.isArray(a)?a:Array.isArray(null==a?void 0:a.data)?a.data:(null==(t=null==a?void 0:a.data)?void 0:t.bids)||(null==a?void 0:a.bids)||[],i=Array.isArray(l)?l:[];m(i);const r=Array.from(new Set(i.map(e=>e.carrierId).filter(e=>"number"==typeof e&&Number.isFinite(e))));if(r.length){const e=localStorage.getItem("authToken");await Promise.all(r.map(async t=>{const s=String(t);if(!x[s])try{const a=await fetch(Zs(`/api/ratings/${t}`),{headers:{Authorization:`Bearer ${e||""}`,"Content-Type":"application/json"}});if(!a.ok)return;const l=await gr(a),i=(null==l?void 0:l.data)?{averageRating:Number(l.data.averageRating||0),totalRatings:Number(l.data.totalRatings||0)}:null;if(!i)return;u(e=>({...e,[s]:i}))}catch{}}))}}catch(s){m([])}finally{p(!1)}},Y=e=>{switch(e){case"accepted":return Ot.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[Ot.jsx(J,{className:"w-3 h-3 mr-1"}),"Kabul Edildi"]});case"pending":return Ot.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[Ot.jsx(L,{className:"w-3 h-3 mr-1"}),"Beklemede"]});default:return Ot.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Ot.jsx(L,{className:"w-3 h-3 mr-1"}),"Aktif"]})}},q=[{label:"Ana Sayfa",icon:Ot.jsx(R,{className:"w-4 h-4"})},{label:"Taşıyıcı İlanlarım",icon:Ot.jsx(we,{className:"w-4 h-4"})}];return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Taşıyıcı İlanlarım - YolNext Nakliyeci"}),Ot.jsx("meta",{name:"description",content:"Gönderilerinizi taşıyıcılara alt iş olarak verin, teklifleri yönetin"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:q})}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"nakliyeci.listings",isEmpty:!a&&0===t.length,icon:we,title:"İlan Yönetimi",description:'Aktif yüklerini taşıyıcılara alt iş olarak ilanla ve gelen teklifleri buradan yönet. Teklif kabul edince operasyonu "Aktif Yükler"de takip edebilirsin.',primaryAction:{label:"Aktif Yükler",to:"/nakliyeci/active-shipments"},secondaryAction:{label:"Yük Pazarı",to:"/nakliyeci/jobs"}})}),Ot.jsxs("div",{className:"text-center mb-6 sm:mb-8 md:mb-12",children:[Ot.jsx("div",{className:"flex justify-center mb-3 sm:mb-4 md:mb-6",children:Ot.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg sm:rounded-xl md:rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(we,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-white"})})}),Ot.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-slate-900 mb-2 sm:mb-3",children:"Taşıyıcı İlanlarım"}),Ot.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg text-slate-600 px-2 sm:px-4",children:"Açık ilanlarınızı yönetin ve taşıyıcılardan gelen teklifleri kabul edin"}),t.length>0&&Ot.jsx("div",{className:"mt-4 flex justify-center",children:Ot.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[Ot.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),Ot.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[t.length," Aktif İlan"]})]})})]}),Ot.jsx("div",{className:"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 rounded-2xl p-6 sm:p-8 shadow-xl border border-blue-200 mb-6 sm:mb-8",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"İlan Nasıl Oluşturulur?"}),Ot.jsxs("p",{className:"text-slate-700 mb-3",children:["Gönderilerinizi taşıyıcılara alt iş olarak vermek için ",Ot.jsx("strong",{children:"Aktif Yükler"})," sayfasına gidin."]}),Ot.jsxs(d,{to:"/nakliyeci/active-shipments",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-900 hover:to-indigo-900 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:[Ot.jsx(K,{className:"w-4 h-4"}),"Aktif Yükler Sayfasına Git"]})]})]})}),a?Ot.jsx(Pl,{message:"İlanlar yükleniyor..."}):0===t.length?Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-10 text-center w-full max-w-2xl",children:Ot.jsx(ir,{icon:we,title:"Henüz İlan Yok",description:"Aktif gönderilerinizi taşıyıcılara alt iş olarak vermek için Aktif Yükler sayfasına gidin ve gönderilerinize taşıyıcı atayın",action:{label:"Aktif Yükler Sayfasına Git",onClick:()=>{e("/nakliyeci/active-shipments")}}})})}):Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Aktif İlanlar"}),Ot.jsxs("span",{className:"text-sm text-slate-600",children:["Toplam ",t.length," ilan"]})]}),Ot.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:t.map(e=>Ot.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-slate-200 hover:shadow-2xl transition-all duration-300",children:[Ot.jsx("div",{className:"flex items-start justify-between mb-4",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["İlan #",e.id]}),Ot.jsx("p",{className:"text-sm text-slate-600",children:e.shipmentTitle||`Gönderi #${e.shipmentId}`})]})]}),(e.pickupCity||e.deliveryCity||e.pickupAddress||e.deliveryAddress)&&Ot.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-700 mb-3",children:[Ot.jsx(T,{className:"w-4 h-4 mt-0.5 text-slate-500"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"font-semibold text-slate-800",children:[(e.pickupCity||"").toString().trim()||"—"," → ",(e.deliveryCity||"").toString().trim()||"—"]}),(e.pickupAddress||e.deliveryAddress)&&Ot.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[(e.pickupAddress||"").toString().trim()||e.pickupCity||"—","  ","→","  ",(e.deliveryAddress||"").toString().trim()||e.deliveryCity||"—"]})]})]}),e.minPrice&&Ot.jsxs("div",{className:"flex items-center gap-2 mb-3 p-3 bg-green-50 rounded-xl border border-green-200",children:[Ot.jsx($,{className:"w-5 h-5 text-green-600"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Taşıyıcı Bütçesi (Tavan)"}),Ot.jsxs("div",{className:"text-lg font-bold text-green-700",children:["₺",e.minPrice.toLocaleString("tr-TR")]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($e,{className:"w-4 h-4"}),Ot.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(L,{className:"w-4 h-4"}),Ot.jsx("span",{children:new Date(e.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})]}),Y(e.status)]})}),Ot.jsxs("button",{onClick:()=>F(e.id),className:"w-full mt-4 px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 border border-slate-200",children:[Ot.jsx(Q,{className:"w-5 h-5"}),r===e.id?Ot.jsxs(Ot.Fragment,{children:["Teklifleri Gizle",Ot.jsx(Ue,{className:"w-4 h-4"})]}):Ot.jsxs(Ot.Fragment,{children:["Teklifleri Gör",Ot.jsx(Ve,{className:"w-4 h-4"})]})]}),r===e.id&&Ot.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:h?Ot.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ot.jsx(le,{className:"w-6 h-6 animate-spin text-blue-600"}),Ot.jsx("span",{className:"ml-2 text-slate-600",children:"Teklifler yükleniyor..."})]}):0===c.length?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(R,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),Ot.jsx("p",{className:"text-slate-600 font-medium",children:"Henüz teklif yok"}),Ot.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Taşıyıcılar teklif vermeye başladığında burada görünecek"})]}):Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Teklifler (",c.length,")"]}),c.map(e=>{var t,s;return Ot.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 hover:shadow-lg transition-all duration-300",children:Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1 space-y-2",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center shadow-lg",children:Ot.jsx($,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:["₺",e.bidPrice.toLocaleString("tr-TR")]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Teklif Fiyatı"}),Ot.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:O(e.createdAt||e.created_at||e.createdat)})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[Ot.jsx(xe,{className:"w-4 h-4"}),Ot.jsx("span",{className:"font-medium",children:e.carrierName||"Taşıyıcı bilgisi bekleniyor"}),null!=e.carrierId&&x[String(e.carrierId)]&&Ot.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] bg-amber-50 text-amber-700 border border-amber-200",children:["⭐ ",x[String(e.carrierId)].averageRating.toFixed(2)," (",x[String(e.carrierId)].totalRatings,")"]})]}),Ot.jsx("div",{className:"space-y-3",children:Ot.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(xe,{className:"w-4 h-4 text-slate-600"}),Ot.jsx("span",{className:"font-semibold text-slate-900",children:e.carrierName||"Bilinmeyen Taşıyıcı"})]}),e.carrierId?Ot.jsxs("span",{className:"text-xs text-slate-500",children:["ID: #",e.carrierId]}):Ot.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-600 rounded-full",children:"Kimlik Doğrulanmamış"})]}),e.carrierId?Ot.jsx("div",{className:"mb-3",children:Ot.jsx(Mi,{userId:String(e.carrierId),userType:"tasiyici",averageRating:(null==(t=x[String(e.carrierId)])?void 0:t.averageRating)||0,totalRatings:(null==(s=x[String(e.carrierId)])?void 0:s.totalRatings)||0,isVerified:"Kullanıcı"!==e.carrierName,completedJobs:Math.floor(50*Math.random())+10,successRate:Math.floor(20*Math.random())+80,className:"text-sm"})}):Ot.jsxs("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center gap-2 text-yellow-700",children:[Ot.jsx(te,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Güven Bilgisi Yok"})]}),Ot.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Bu taşıyıcı henüz kimlik doğrulaması yapmamış. Dikkatli değerlendirin."})]}),Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[Ot.jsx(L,{className:"w-4 h-4"}),Ot.jsx("span",{children:e.etaHours?`${e.etaHours} saat`:"Süre yok"})]}),e.carrierPhone&&Ot.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[Ot.jsx(z,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-xs",children:"accepted"===e.status?"✓ İletişim Mevcut":"Kabul sonrası"})]})]})]})})]}),Ot.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:["pending"===e.status&&Ot.jsxs(Ot.Fragment,{children:[!e.carrierId&&Ot.jsxs("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[Ot.jsx(te,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-xs font-medium",children:"Riskli Teklif"})]}),Ot.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Bu taşıyıcı doğrulanmamış. Kabul etmeden önce dikkatli değerlendirin."})]}),Ot.jsxs("div",{className:"flex flex-col gap-2",children:[Ot.jsxs("button",{onClick:()=>{return t=e.id,A(t),void S(!0);var t},className:"px-4 py-2 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-2 "+(e.carrierId?"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white":"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white"),children:[Ot.jsx(J,{className:"w-5 h-5"}),e.carrierId?"Güvenle Kabul Et":"Riskli Kabul Et"]}),Ot.jsxs("button",{onClick:()=>{return t=e.id,I(t),void B(!0);var t},className:"px-4 py-2 bg-white border border-red-200 text-red-700 hover:bg-red-50 rounded-xl font-semibold transition-all duration-300 shadow-sm hover:shadow flex items-center justify-center gap-2",children:[Ot.jsx(_,{className:"w-5 h-5"}),"Reddet"]})]})]}),"accepted"===e.status&&Ot.jsxs("span",{className:"inline-flex items-center px-3 py-2 rounded-xl text-sm font-medium bg-green-100 text-green-800",children:[Ot.jsx(J,{className:"w-4 h-4 mr-1"}),"Kabul Edildi"]}),"rejected"===e.status&&Ot.jsxs("span",{className:"inline-flex items-center px-3 py-2 rounded-xl text-sm font-medium bg-red-100 text-red-700",children:[Ot.jsx(_,{className:"w-4 h-4 mr-1"}),"Reddedildi"]}),"pending"!==e.status&&"accepted"!==e.status&&"rejected"!==e.status&&Ot.jsx("span",{className:"inline-flex items-center px-3 py-2 rounded-xl text-sm font-medium bg-slate-100 text-slate-600",children:e.status})]})]})},e.id)})]})})]},e.id))})]}),g&&Ot.jsx(Fl,{message:f,isVisible:g,onClose:()=>b(!1)}),N&&Ot.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 border border-red-200 text-red-600 px-6 py-4 rounded-xl shadow-xl flex items-center gap-3 z-50 animate-slide-up",children:[Ot.jsx(te,{className:"w-5 h-5"}),Ot.jsx("span",{className:"font-medium",children:j}),Ot.jsx("button",{onClick:()=>k(!1),className:"ml-4 text-red-400 hover:text-red-600",children:Ot.jsx(_,{className:"w-5 h-5"})})]}),Ot.jsx(er,{isOpen:w,onClose:()=>{S(!1),A(null)},title:"Teklifi Kabul Et",size:"md",children:Ot.jsxs("div",{className:"p-6 space-y-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center flex-shrink-0",children:Ot.jsx(J,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Teklifi Kabul Etmek İstediğinize Emin misiniz?"}),Ot.jsx("p",{className:"text-slate-600",children:"Bu teklifi kabul ettiğinizde, iş taşıyıcıya atanacak ve ilan kapatılacaktır. Bu işlem geri alınamaz."})]})]}),Ot.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[Ot.jsx("button",{onClick:()=>{S(!1),A(null)},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors font-medium",children:"İptal"}),Ot.jsxs("button",{onClick:async()=>{if(C)try{const e=await fetch(Zs(`/api/carrier-market/bids/${C}/accept`),{method:"POST",headers:P()});if(!e.ok)try{const t=await gr(e);throw new Error((null==t?void 0:t.message)||"Kabul edilemedi")}catch{throw new Error("Kabul edilemedi")}y("Teklif kabul edildi! İş taşıyıcıya atandı."),b(!0),setTimeout(()=>b(!1),3e3),S(!1),A(null),await G(),r&&await F(r)}catch(e){v(e instanceof Error?e.message:"Teklif kabul edilemedi. Lütfen tekrar deneyin."),k(!0),setTimeout(()=>k(!1),3e3),S(!1),A(null)}},className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-2",children:[Ot.jsx(J,{className:"w-5 h-5"}),"Evet, Kabul Et"]})]})]})}),Ot.jsx(er,{isOpen:M,onClose:()=>{B(!1),I(null)},title:"Teklifi Reddet",size:"md",children:Ot.jsxs("div",{className:"p-6 space-y-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:Ot.jsx(_,{className:"w-6 h-6 text-red-600"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Teklifi Reddetmek İstediğinize Emin misiniz?"}),Ot.jsx("p",{className:"text-slate-600",children:"Bu teklif “reddedildi” olarak işaretlenecek. Daha sonra tekrar değerlendiremezsiniz."})]})]}),Ot.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[Ot.jsx("button",{onClick:()=>{B(!1),I(null)},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors font-medium",children:"İptal"}),Ot.jsxs("button",{onClick:async()=>{if(D)try{const e=await fetch(Zs(`/api/carrier-market/bids/${D}/reject`),{method:"POST",headers:P()});if(!e.ok)try{const t=await gr(e);throw new Error((null==t?void 0:t.message)||"Reddedilemedi")}catch{throw new Error("Reddedilemedi")}y("Teklif reddedildi."),b(!0),setTimeout(()=>b(!1),3e3),B(!1),I(null),r&&await F(r)}catch(e){v(e instanceof Error?e.message:"Teklif reddedilemedi. Lütfen tekrar deneyin."),k(!0),setTimeout(()=>k(!1),3e3),B(!1),I(null)}},className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-2",children:[Ot.jsx(_,{className:"w-5 h-5"}),"Evet, Reddet"]})]})]})})]})]})},hn=()=>{var e;const{user:t,updateUser:s}=sa(),a=(e,t=0)=>{if("number"==typeof e)return Number.isFinite(e)?e:t;if("string"==typeof e){const s=parseFloat(e.replace(/[^0-9.,-]/g,"").replace(",","."));return Number.isFinite(s)?s:t}return t},[i,r]=l.useState({totalJobs:0,completedJobs:0,activeJobs:0,rating:0,completedDeliveries:0,workHours:0,documentsCount:0}),[n,o]=l.useState([]),[c,m]=l.useState(!0),[x,u]=l.useState(null),[h,p]=l.useState(0),[g,b]=l.useState(!1);l.useEffect(()=>{f()},[]);const f=async()=>{var e,l;if(!(null==t?void 0:t.id))return void m(!1);m(!0),u(null);const i=setTimeout(()=>{m(!1)},1e4);try{const i=localStorage.getItem("authToken");if(!i)throw new Error("No auth token found");const n=(null==t?void 0:t.id)||(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}").id:null),d=await fetch(Zs("/api/users/profile"),{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(d.ok){const t=await d.json(),a=(null==(e=t.data)?void 0:e.user)||t.user||t.data||t;a&&s&&s({...a,driverCode:a.driverCode||a.drivercode||void 0})}const[c,m]=await Promise.all([fetch(Zs("/api/dashboard/stats/tasiyici"),{headers:{Authorization:`Bearer ${i}`,"X-User-Id":n||""}}),fetch(Zs("/api/shipments/tasiyici"),{headers:{Authorization:`Bearer ${i}`,"X-User-Id":n||""}})]);if(c.ok){const e=await c.json(),t=(null==(l=e.data)?void 0:l.stats)||e.stats||{};r({totalJobs:t.totalJobs||t.totalShipments||0,completedJobs:t.completedJobs||t.completedShipments||0,activeJobs:t.activeJobs||t.acceptedOffers||0,rating:0,completedDeliveries:t.completedShipments||0,workHours:0,documentsCount:0})}if(m.ok){const e=await m.json(),t=e.data||e.shipments||(Array.isArray(e)?e:[]),s=Array.isArray(t)?t:[];o(s.slice(0,5).map(e=>({id:String((null==e?void 0:e.id)??""),title:(null==e?void 0:e.title)||(null==e?void 0:e.productDescription)||"Gönderi",status:null==e?void 0:e.status,pickup:`${(null==e?void 0:e.pickupCity)||(null==e?void 0:e.fromCity)||""}, ${(null==e?void 0:e.pickupAddress)||(null==e?void 0:e.pickupDistrict)||""}`,delivery:`${(null==e?void 0:e.deliveryCity)||(null==e?void 0:e.toCity)||""}, ${(null==e?void 0:e.deliveryAddress)||(null==e?void 0:e.deliveryDistrict)||""}`,price:a((null==e?void 0:e.price)??(null==e?void 0:e.displayPrice)??(null==e?void 0:e.value),0),date:(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||(null==e?void 0:e.updatedAt)||(null==e?void 0:e.updated_at)})))}}catch(n){u("Ana Sayfa verileri yüklenemedi"),r({totalJobs:0,completedJobs:0,activeJobs:0,rating:0,completedDeliveries:0,workHours:0,documentsCount:0}),o([])}finally{clearTimeout(i),m(!1)}},y=e=>{switch(e){case"completed":return"text-green-600 bg-green-50";case"in_progress":return"text-blue-600 bg-blue-50";case"pending":return"text-yellow-600 bg-yellow-50";case"cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},j=e=>{const t=gi(e);return"Bilinmiyor"!==t?t:e};return c?Ot.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ot.jsx(Pl,{message:"Ana Sayfa yükleniyor...",size:"lg",className:"py-12"})}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Ana Sayfa - YolNext Taşıyıcı"}),Ot.jsx("meta",{name:"description",content:"YolNext taşıyıcı panel ana sayfası"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/tasiyici/dashboard"}]})}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(E,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:["Merhaba"," ",(null==t?void 0:t.firstName)||(null==(e=null==t?void 0:t.fullName)?void 0:e.split(" ")[0])||"Kullanıcı"]}),Ot.jsxs("p",{className:"text-slate-200 text-lg leading-relaxed",children:["Nakliyecilerden iş alarak kazanç elde edin.",Ot.jsx("br",{}),Ot.jsx("span",{className:"text-blue-300 font-semibold",children:"Güvenilir nakliyecilerden"})," ","iş fırsatlarıyla yanınızdayız."]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:[Ot.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg"}),Ot.jsx("span",{className:"text-slate-200 font-medium",children:"Çevrimiçi"})]}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/20",children:Ot.jsxs("span",{className:"text-slate-200 font-medium",children:[i.totalJobs," İş"]})}),((null==t?void 0:t.driverCode)||(null==t?void 0:t.drivercode))&&Ot.jsxs("div",{className:"bg-gradient-to-r from-slate-800/30 to-blue-900/30 backdrop-blur-sm rounded-2xl px-4 py-2 border border-slate-400/30 flex items-center gap-2",children:[Ot.jsx("span",{className:"text-slate-200 font-medium text-sm",children:"Kodum:"}),Ot.jsx("span",{className:"text-white font-mono font-bold text-base",children:(null==t?void 0:t.driverCode)||(null==t?void 0:t.drivercode)}),Ot.jsx("button",{onClick:()=>{const e=(null==t?void 0:t.driverCode)||(null==t?void 0:t.drivercode);e&&(navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3))},className:"ml-1 p-1.5 hover:bg-white/10 rounded-lg transition-colors",title:"Kodu Kopyala",children:g?Ot.jsx(J,{className:"w-4 h-4 text-emerald-300"}):Ot.jsx(gt,{className:"w-4 h-4 text-slate-300"})})]})]})]}),Ot.jsx("div",{className:"flex items-center gap-3",children:Ot.jsx(d,{to:"/tasiyici/market",children:Ot.jsxs("button",{className:"bg-white text-slate-800 px-6 py-3 rounded-xl font-bold transition-all duration-300 flex items-center gap-2 text-base shadow-lg hover:shadow-xl hover:bg-green-50",children:[Ot.jsx(ue,{size:20}),"Yeni İş Ara"]})})})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(R,{className:"w-6 h-6 text-white"})}),Ot.jsx("div",{className:"text-right",children:Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:i.totalJobs})})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Toplam İş"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Nakliyecilerden aldığınız iş sayısı"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(J,{className:"w-6 h-6 text-white"})}),Ot.jsx("div",{className:"text-right",children:Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:i.completedJobs})})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Tamamlanan"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Nakliyecilerden başarıyla tamamlanan işler"})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-6 h-6 text-white"})}),Ot.jsx("div",{className:"text-right",children:Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-1",children:i.activeJobs})})]}),Ot.jsx("div",{className:"text-slate-700 font-semibold text-sm",children:"Aktif İş"}),Ot.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Nakliyecilerden devam eden işler"})]})]}),0===i.activeJobs&&Ot.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 border border-slate-200 rounded-3xl p-8 sm:p-10 shadow-xl mb-8 text-center",children:[Ot.jsxs("div",{className:"mb-4",children:[Ot.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-slate-800 to-blue-900 rounded-2xl flex items-center justify-center shadow-lg",children:Ot.jsx(jt,{className:"w-10 h-10 text-white"})}),Ot.jsx("h2",{className:"text-3xl font-bold mb-2 text-slate-900",children:"Yeni İş Fırsatları"}),Ot.jsx("p",{className:"text-slate-600 text-lg",children:"Nakliyecilerden iş al, yeni fırsatlar yakala!"})]}),Ot.jsx(d,{to:"/tasiyici/market",children:Ot.jsx("button",{className:"bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"🚚 İş Pazarına Git"})})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-gray-100",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Son İşler"}),Ot.jsx("p",{className:"text-slate-600",children:"En son aldığınız işler"})]}),Ot.jsx(d,{to:"/tasiyici/islerim",children:Ot.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-medium transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:["Tümünü Gör",Ot.jsx(K,{className:"w-4 h-4"})]})})]}),0===n.length?Ot.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[Ot.jsx(R,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Henüz iş yok"}),Ot.jsx("p",{className:"text-gray-600",children:"Nakliyecilerden atanan işler burada görünecek"})]}):Ot.jsx("div",{className:"space-y-4",children:n.map(e=>Ot.jsx("div",{className:"group bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(E,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:e.title}),Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(T,{className:"w-4 h-4"}),Ot.jsxs("span",{children:[e.pickup," → ",e.delivery]})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(L,{className:"w-4 h-4"}),Ot.jsx("span",{children:Kl(e.date)})]})]})]})]}),Ot.jsx("div",{className:"text-right ml-4",children:Ot.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${y(e.status)} border`,children:j(e.status)})})]})},e.id))})]})]})]})},pn=(e,t="date")=>{if(!e)return"Belirtilmemiş";try{if("date"===t){return Kl(e,"long")||"Belirtilmemiş"}return Ml(e)||"Belirtilmemiş"}catch(s){return"Belirtilmemiş"}},gn=e=>{const t=String(e||"").trim();return t?t.replace(/İ/g,"I").replace(/ı/g,"i").toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim():""},bn=()=>{try{const e=localStorage.getItem("user"),t=e?JSON.parse(e):null;return String((null==t?void 0:t.city)||(null==t?void 0:t.City)||(null==t?void 0:t.il)||(null==t?void 0:t.province)||"").trim()}catch{return""}},fn=()=>{var e,t,s,a,i;const{showToast:r}=ka(),{id:c}=h(),m=o(),[x,u]=l.useState(null),[p,g]=l.useState(!0),[b,f]=l.useState(!1),[y,j]=l.useState(!1),[v,N]=l.useState(!1),k=n.useCallback(async()=>{var e,t,s,a,l,i;if(c)try{g(!0);const n=localStorage.getItem("authToken"),d=localStorage.getItem("user"),o=d?JSON.parse(d||"{}").id:void 0,x=await fetch(Zs(`/api/shipments/${c}`),{headers:{Authorization:`Bearer ${n||""}`,"X-User-Id":o||"","Content-Type":"application/json"}});if(x.ok){const r=await x.json(),n=r.data||r;n.pickupCity=n.pickupCity??n.pickup_city??n.pickupcity??n.fromCity??n.from_city??"Şehir Belirtilmemiş",n.deliveryCity=n.deliveryCity??n.delivery_city??n.deliverycity??n.toCity??n.to_city??"Şehir Belirtilmemiş",n.pickupAddress=n.pickupAddress??n.pickup_address??n.pickupaddress??n.from_address??n.fromAddress??n.senderAddress??n.sender_address??`${n.pickupCity||"Şehir Belirtilmemiş"} - Detaylı adres belirtilmemiş`,n.deliveryAddress=n.deliveryAddress??n.delivery_address??n.deliveryaddress??n.to_address??n.toAddress??n.receiverAddress??n.receiver_address??`${n.deliveryCity||"Şehir Belirtilmemiş"} - Detaylı adres belirtilmemiş`,n.pickupDate=n.pickupDate??n.pickup_date??n.pickupdate??n.createdAt??n.created_at??n.createdat??(new Date).toISOString(),n.deliveryDate=n.deliveryDate??n.delivery_date??n.deliverydate??n.expectedDelivery??n.expected_delivery,n.createdAt=n.createdAt??n.created_at??n.createdat??n.updatedAt??n.updated_at??n.updatedat??(new Date).toISOString(),n.title=n.title??n.description??`${n.pickupCity||"Başlangıç"} → ${n.deliveryCity||"Varış"}`.trim(),n.price=n.displayPrice??n.price??n.offerPrice??n.offer_price??n.amount??n.totalAmount??0,n.weight=n.weight??n.totalWeight??n.total_weight??0,n.volume=n.volume??n.totalVolume??n.total_volume??0,n.nakliyeciName=n.nakliyeciName??n.carrierName??"",n.nakliyeciCompany=n.nakliyeciCompany??n.carrierCompany??"",n.nakliyeciPhone=n.nakliyeciPhone??n.carrierPhone??"",n.nakliyeciEmail=n.nakliyeciEmail??n.carrierEmail??"",n.carrierId=n.carrierId??n.nakliyeci_id??n.carrier_id??void 0,n.nakliyeci&&"object"==typeof n.nakliyeci&&(n.nakliyeciName=n.nakliyeci.name||n.nakliyeciName,n.nakliyeciCompany=n.nakliyeci.company||n.nakliyeciCompany,n.nakliyeciPhone=n.nakliyeci.phone||n.nakliyeciPhone,n.nakliyeciEmail=n.nakliyeci.email||n.nakliyeciEmail),n.shipperName=n.shipperName||n.ownerName||n.owner_name||n.senderName||n.sender_name||(null==(e=n.shipper)?void 0:e.name)||(null==(t=n.sender)?void 0:t.name)||(null==(s=n.owner)?void 0:s.name)||"",n.shipperCompany=n.shipperCompany||n.ownerCompany||n.owner_company||n.senderCompany||n.sender_company||(null==(a=n.shipper)?void 0:a.company)||(null==(l=n.sender)?void 0:l.company)||(null==(i=n.owner)?void 0:i.company)||"",u(n)}else{if(404!==x.status)throw new Error("İş yüklenemedi");yr(r,"JOB_NOT_FOUND","error"),m("/tasiyici/islerim")}}catch(n){yr(r,"REQUEST_FAILED","error"),m("/tasiyici/islerim")}finally{g(!1)}},[c,m]);l.useEffect(()=>{k()},[k]);const w=async e=>{f(!0);const t=setTimeout(()=>{f(!1),yr(r,"TIMEOUT_ERROR","error")},1e4);try{const s=localStorage.getItem("authToken"),a=localStorage.getItem("user"),l=a?JSON.parse(a||"{}").id:void 0;Ql("🔄 Status güncelleniyor:",{id:c,newStatus:e,userId:l});const i=await fetch(Zs(`/api/shipments/${c}`),{method:"PUT",headers:{Authorization:`Bearer ${s||""}`,"X-User-Id":l||"","Content-Type":"application/json"},body:JSON.stringify({status:e})}),n=await i.json();if(Ql("📥 API Response:",{status:i.status,data:n}),i.ok&&n.success)clearTimeout(t),"picked_up"===e?(yr(r,"PICKUP_CONFIRMED","success"),await k()):"in_transit"===e?(yr(r,"TRANSIT_STARTED","success"),await k()):"delivered"===e?(yr(r,"DELIVERY_CONFIRMED","success"),await k()):(yr(r,"STATUS_UPDATED","success"),await k());else{clearTimeout(t);const e=n.message||"Bu işlem şu an yapılamıyor.";ei("❌ Status güncelleme hatası:",e),yr(r,"UPDATE_FAILED","error")}}catch(s){clearTimeout(t),ei("❌ Status güncelleme exception:",s),yr(r,"NETWORK_ERROR","error")}finally{clearTimeout(t),f(!1)}},S=()=>{if(!x)return null;let e=x.metadata;if("string"==typeof e)try{e=JSON.parse(e)}catch{e=null}const t=e&&"object"==typeof e?e.routePlan:null;if(!t||"object"!=typeof t)return null;const s=Array.isArray(t.points)?t.points:[];return s.length?{createdAt:t.createdAt,vehicle:t.vehicle,summary:t.summary,points:s}:null},C=async()=>{if(x)try{j(!0);const e=bn(),t=gn(e),s=gn(x.pickupCity);if(t&&s&&t!==s)return void r({type:"error",title:"İş kabul edilemedi",message:`Şehir kuralı: Yükleme şehri profil şehrinle aynı olmalı. Profil: ${e||"—"} • Yükleme: ${x.pickupCity||"—"}`,duration:5e3});const a=localStorage.getItem("authToken"),l=localStorage.getItem("user"),i=l?JSON.parse(l||"{}").id:void 0,n=await fetch(Zs(`/api/shipments/${x.id}/assignment/accept`),{method:"POST",headers:{Authorization:`Bearer ${a||""}`,"X-User-Id":i||"","Content-Type":"application/json"}}),d=await n.json().catch(()=>null);if(!n.ok||!(null==d?void 0:d.success)){const e=(null==d?void 0:d.message)||"İş kabul edilemedi";return void r({type:"error",title:"İş kabul edilemedi",message:e,duration:4500})}Ga("driver_assignment_offer_accepted",{shipmentId:x.id}),r({type:"success",title:"İş kabul edildi",message:"İş başlatıldı.",duration:3e3}),await k()}finally{j(!1)}},A=async()=>{if(x)try{N(!0);const e=window.prompt("Reddetme sebebi (opsiyonel):")||"",t=localStorage.getItem("authToken"),s=localStorage.getItem("user"),a=s?JSON.parse(s||"{}").id:void 0,l=await fetch(Zs(`/api/shipments/${x.id}/assignment/reject`),{method:"POST",headers:{Authorization:`Bearer ${t||""}`,"X-User-Id":a||"","Content-Type":"application/json"},body:JSON.stringify({reason:e})}),i=await l.json().catch(()=>null);if(!l.ok||!(null==i?void 0:i.success)){const e=(null==i?void 0:i.message)||"İş reddedilemedi";return void r({type:"error",title:"İş reddedilemedi",message:e,duration:4500})}Ga("driver_assignment_offer_rejected",{shipmentId:x.id,reason:e||void 0}),r({type:"success",title:"Teklif reddedildi",message:"Nakliyeci bilgilendirildi.",duration:3e3}),await k()}finally{N(!1)}};return p?Ot.jsx(Pl,{message:"İş yükleniyor..."}):x?Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:[Ot.jsx(Rs,{children:Ot.jsxs("title",{children:["İş Detayı - ",x.title," - Taşıyıcı Panel"]})}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"İşlerim",href:"/tasiyici/islerim"},{label:x.title||`İş #${x.id}`,href:`/tasiyici/jobs/${x.id}`}]})}),Ot.jsxs(d,{to:"/tasiyici/islerim",className:"inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-all duration-300 shadow-md hover:shadow-lg border border-gray-200 mb-6",children:[Ot.jsx(re,{className:"w-4 h-4"}),"İşlerime Dön"]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsx("div",{className:"flex items-start justify-between mb-4",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(R,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:x.title||`Gönderi #${x.id}`}),Ot.jsxs("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${(e=>{switch(e){case"offer_accepted":case"assigned":case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"picked_up":case"in_transit":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"delivered":case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(x.status)}`,children:[Ot.jsx(J,{className:"w-4 h-4 mr-2"}),(e=>{const t=gi(e);return"Bilinmiyor"!==t?t:e})(x.status)]})]})]}),x.description&&Ot.jsx("p",{className:"text-slate-200 text-base leading-relaxed",children:x.description})]})})})]}),(()=>{var e;const t=(()=>{if(!x)return null;let e=x.metadata;if("string"==typeof e)try{e=JSON.parse(e)}catch{e=null}const t=e&&"object"==typeof e?e.driverOffer:null;return t&&"object"==typeof t?t:null})(),s=localStorage.getItem("user"),a=s?String((null==(e=JSON.parse(s||"{}"))?void 0:e.id)||""):"",l=t&&a&&String(t.driverId||"")===a,i=(null==t?void 0:t.expiresAt)?Date.parse(String(t.expiresAt)):NaN,r=Number.isFinite(i)?Math.max(0,Math.ceil((i-Date.now())/6e4)):null,n="pending"===(null==t?void 0:t.status)&&(null==r||r>0);if(!t||!l||!n)return null;const d=bn(),o=Boolean(gn(d))&&Boolean(gn(x.pickupCity))&&gn(d)!==gn(x.pickupCity);return Ot.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 sm:p-6 mb-6",children:Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-lg font-bold text-amber-900",children:"Yeni İş Teklifi"}),Ot.jsxs("div",{className:"text-sm text-amber-800",children:["30 dakika içinde kabul etmelisin",null!=r?` • Kalan: ${r} dk`:"","."]}),o&&Ot.jsxs("div",{className:"text-xs text-rose-700 font-semibold mt-2",children:["Şehir kuralı: Yükleme şehri profil şehrinle aynı olmalı. Profil: ",d||"—"," • Yükleme: ",x.pickupCity||"—"]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[Ot.jsx("button",{type:"button",onClick:C,disabled:y||v||o,className:"px-5 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-xl font-bold transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",children:"Kabul Et"}),Ot.jsxs("button",{type:"button",onClick:A,disabled:y||v,className:"px-5 py-3 bg-white border border-rose-200 text-rose-700 hover:bg-rose-50 rounded-xl font-bold transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[Ot.jsx(ie,{className:"w-5 h-5"}),"Reddet"]})]})]})})})(),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ot.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 sm:p-8",children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[Ot.jsx(T,{className:"w-5 h-5 text-blue-600"}),"Rota Bilgileri"]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-700 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-xs text-slate-500 mb-1 font-medium",children:"📍 YÜKLEME ADRESİ"}),Ot.jsx("div",{className:"font-bold text-slate-900 text-lg",children:x.pickupCity}),Ot.jsx("div",{className:"text-sm text-slate-700 mt-1 bg-slate-50 p-2 rounded-lg border",children:x.pickupAddress||`${x.pickupCity} - Detaylı adres yüklemeden önce nakliyeci ile koordine edilecek`})]})]}),Ot.jsx("div",{className:"flex justify-center my-2",children:Ot.jsx("div",{className:"w-0.5 h-12 bg-gradient-to-b from-blue-600 to-blue-400"})}),Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-600 to-pink-700 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-xs text-slate-500 mb-1 font-medium",children:"🎯 TESLİMAT ADRESİ"}),Ot.jsx("div",{className:"font-bold text-slate-900 text-lg",children:x.deliveryCity}),Ot.jsx("div",{className:"text-sm text-slate-700 mt-1 bg-slate-50 p-2 rounded-lg border",children:x.deliveryAddress||`${x.deliveryCity} - Detaylı adres teslimat öncesi nakliyeci ile koordine edilecek`})]})]})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 sm:p-8",children:[Ot.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"İş Detayları"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx($e,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Yükleme Tarihi"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:pn(x.pickupDate)})]})]}),x.deliveryDate&&Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(L,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Teslimat Tarihi"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:pn(x.deliveryDate)})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(E,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Ağırlık"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:x.weight&&x.weight>0?`${x.weight} kg`:"Belirtilmemiş (Nakliyeci ile koordine edilecek)"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(R,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Hacim"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:x.volume&&x.volume>0?`${x.volume} m³`:"Belirtilmemiş (Nakliyeci ile koordine edilecek)"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(R,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Ücret"}),Ot.jsx("div",{className:"font-semibold text-green-700 text-lg",children:x.price>0?`₺${x.price.toLocaleString("tr-TR",{minimumFractionDigits:2})}`:"Teklif Verilecek"})]})]})]})]}),S()&&Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 sm:p-8",children:[Ot.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[Ot.jsx(T,{className:"w-5 h-5 text-blue-600"}),"Rota Planı"]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx($e,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Oluşturulma Tarihi"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:pn(null==(e=S())?void 0:e.createdAt)})]})]}),(null==(s=null==(t=S())?void 0:t.vehicle)?void 0:s.name)&&Ot.jsxs("div",{className:"text-sm text-slate-700 mb-3",children:["Araç: ",Ot.jsx("span",{className:"font-semibold",children:String(null==(a=S())?void 0:a.vehicle.name)})]}),Ot.jsx("div",{className:"space-y-2",children:null==(i=S())?void 0:i.points.slice().sort((e,t)=>Number(e.order||0)-Number(t.order||0)).map((e,t)=>Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-r from-slate-800 to-blue-900 text-white flex items-center justify-center text-xs font-bold flex-shrink-0",children:t+1}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["pickup"===e.type?"📦 Yük Al":"delivery"===e.type?"🏠 Teslim Et":"Durak",e.name?` - ${String(e.name)}`:""]}),e.address&&Ot.jsxs("div",{className:"text-xs text-slate-600 font-medium",children:["📍 ",String(e.address)]}),e.price&&e.price>0&&Ot.jsxs("div",{className:"text-xs text-green-600 font-bold mt-1",children:["💰 ₺",Number(e.price).toLocaleString("tr-TR")," (bilgi)"]})]})]},String(e.id||t)))})]})]})]}),Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 sm:p-8",children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Aksiyonlar"}),Ot.jsxs("div",{className:"space-y-4",children:[("offer_accepted"===x.status||"accepted"===x.status)&&Ot.jsxs("button",{onClick:()=>w("assigned"),disabled:b,className:"w-full px-4 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-bold text-base transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50",children:[Ot.jsx(J,{className:"w-6 h-6"}),"✅ İşi Kabul Et"]}),("assigned"===x.status||"in_progress"===x.status)&&Ot.jsxs("button",{onClick:()=>w("picked_up"),disabled:b,className:"w-full px-4 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-bold text-base transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50",children:[Ot.jsx(E,{className:"w-6 h-6"}),"✅ Yükü Aldım"]}),"picked_up"===x.status&&Ot.jsxs("button",{onClick:()=>w("in_transit"),disabled:b,className:"w-full px-4 py-4 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-bold text-base transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50",children:[Ot.jsx(E,{className:"w-6 h-6"}),"Yola Çıktım"]}),"in_transit"===x.status&&Ot.jsxs("button",{onClick:()=>w("delivered"),disabled:b,className:"w-full px-4 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-bold text-base transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50",children:[Ot.jsx(R,{className:"w-6 h-6"}),"📦 Teslimatı Tamamladım"]}),x.nakliyeciPhone&&Ot.jsxs("a",{href:`tel:${x.nakliyeciPhone}`,className:"block w-full px-4 py-3 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2 border-2 border-blue-200",children:[Ot.jsx(z,{className:"w-5 h-5"}),"Nakliyeciyi Ara"]})]})]}),x.price>0&&Ot.jsxs("div",{className:"bg-green-50 rounded-2xl shadow-lg border border-green-200 p-6 sm:p-8",children:[Ot.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx($,{className:"w-5 h-5 text-green-600"}),"Ödeme Bilgisi"]}),Ot.jsxs("div",{className:"space-y-3 text-sm",children:[Ot.jsxs("div",{children:[Ot.jsx("span",{className:"text-slate-500 block mb-1",children:"İş Ücreti"}),Ot.jsxs("span",{className:"font-bold text-green-700 text-lg",children:["₺",x.price.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),Ot.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg text-xs text-blue-700",children:[Ot.jsx("strong",{children:"Önemli:"})," Ödeme işlemi nakliyeci ile gönderici arasında gerçekleşir. İş tamamlandığında nakliyeci ödemeyi yapar. Ödeme detaylarını nakliyeci ile koordine edin. Platform sadece tarafları buluşturan bir pazaryeridir."]})]})]}),Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 sm:p-8",children:[Ot.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"İş Bilgileri"}),Ot.jsxs("div",{className:"space-y-3 text-sm",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-500",children:"İş No"}),Ot.jsxs("span",{className:"font-semibold text-slate-900",children:["#",x.id]})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-slate-500",children:"Oluşturulma"}),Ot.jsx("span",{className:"font-semibold text-slate-900",children:pn(x.createdAt)})]})]})]})]})]})]})]}):Ot.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"İş bulunamadı"}),Ot.jsx(d,{to:"/tasiyici/islerim",className:"inline-block mt-4 px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-medium transition-all duration-300",children:"İşlerime Dön"})]})})},yn=()=>{const[e,t]=l.useState([]),[s,a]=l.useState(!0);l.useEffect(()=>{try{const e=localStorage.getItem("user"),t=e?JSON.parse(e):null,s=null==t?void 0:t.id,a=String((null==t?void 0:t.role)||"tasiyici").toLowerCase();if(!s)return;localStorage.setItem(`yolnext:lastSeen:offers:${s}:${a}`,(new Date).toISOString()),window.dispatchEvent(new Event("yolnext:refresh-badges"))}catch{}},[]);const i=async()=>{var e;try{a(!0);const s=localStorage.getItem("authToken"),l=localStorage.getItem("user"),i=l?JSON.parse(l||"{}").id:void 0,r=Zs("/api/carrier-market/bids?mine=1"),n={Authorization:`Bearer ${s||""}`,"X-User-Id":i||"","Content-Type":"application/json"},d=e=>new Promise(t=>setTimeout(t,e));let o=await fetch(r,{headers:n});if(429===o.status&&(await d(800),o=await fetch(r,{headers:n})),!o.ok)throw new Error("Teklifler alınamadı");const c=await o.json(),m=Array.isArray(c)?c:(null==(e=null==c?void 0:c.data)?void 0:e.bids)||(null==c?void 0:c.data)||(null==c?void 0:c.offers)||(null==c?void 0:c.bids)||[];t(m.map(e=>({id:e.id,shipmentId:Number(e.shipmentId||e.shipment_id||e.listingId||e.listing_id||0),price:e.bidPrice||e.price||0,status:e.status||"pending",createdAt:e.createdAt||"",shipmentTitle:e.shipmentTitle||e.title,pickupAddress:e.pickupAddress||e.pickup_address,deliveryAddress:e.deliveryAddress||e.delivery_address,weight:e.weight})))}catch(s){t([])}finally{a(!1)}};l.useEffect(()=>{i()},[]),l.useEffect(()=>{const e=()=>{"visible"===document.visibilityState&&i()},t=()=>{i()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",e),window.addEventListener("yolnext:refresh-badges",t),()=>{window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",e),window.removeEventListener("yolnext:refresh-badges",t)}},[]);const r=e=>{switch(e){case"accepted":return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 inline-flex items-center gap-1",children:[Ot.jsx(J,{className:"w-3 h-3"}),"Kabul"]});case"rejected":return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 inline-flex items-center gap-1",children:[Ot.jsx(ie,{className:"w-3 h-3"}),"Red"]});default:return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 inline-flex items-center gap-1",children:[Ot.jsx(L,{className:"w-3 h-3"}),"Beklemede"]})}};return s?Ot.jsx(Pl,{}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Tekliflerim - Taşıyıcı - YolNext"})}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Tekliflerim",href:"/tasiyici/my-offers"}]})}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(J,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Tekliflerim"}),Ot.jsx("p",{className:"text-slate-200 text-lg leading-relaxed",children:"Verdiğiniz tekliflerin durumunu buradan takip edin"})]})]})})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"tasiyici.my-offers",isEmpty:!s&&0===e.length,icon:$,title:"Tekliflerim",description:"Verdiğin tekliflerin durumunu buradan takip et. Kabul edilen işleri “İşlerim”de yönet; yeni iş almak için “Pazar”a dön.",primaryAction:{label:"İşlerim",to:"/tasiyici/islerim"},secondaryAction:{label:"Pazar",to:"/tasiyici/market"}})}),0===e.length?Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-12 text-center w-full max-w-2xl",children:[Ot.jsx($,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"💰 Henüz teklif vermedin"}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:"Pazarda uygun işlere teklif ver, kabul edilince kazanmaya başla!"}),Ot.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:Ot.jsx(d,{to:"/tasiyici/market",children:Ot.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:"Pazara Git"})})})]})}):Ot.jsx("div",{className:"space-y-4",children:e.map(e=>Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:e.shipmentTitle||`Gönderi #${e.shipmentId}`}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Rota"}),Ot.jsxs("div",{className:"font-medium text-slate-900",children:[e.pickupAddress||"—"," → ",e.deliveryAddress||"—"]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx($,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Teklif"}),Ot.jsxs("div",{className:"font-medium text-slate-900",children:["₺",e.price.toLocaleString("tr-TR")]})]})]})]})]}),Ot.jsx("span",{className:"px-4 py-2 bg-slate-100 text-slate-800 rounded-full text-sm font-semibold border border-slate-200",children:r(e.status)})]}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[Ot.jsxs("span",{className:"text-sm text-slate-500",children:["#",e.id,e.shipmentId?` • İş #${e.shipmentId}`:""]}),e.shipmentId?Ot.jsxs(d,{to:`/tasiyici/jobs/${e.shipmentId}`,className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-medium transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(Q,{className:"w-4 h-4"}),"Detayları Gör"]}):Ot.jsx("span",{className:"px-4 py-2 bg-slate-100 text-slate-500 rounded-lg font-medium border border-slate-200",children:"Detay Hazırlanıyor"})]})]},e.id))})]})]})};function jn(){return Ot.jsx(Zi,{userType:"tasiyici"})}const vn=async e=>(await fetch(Zs("/api/users/account"),{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)})).json();function Nn(){const{showToast:e}=ka(),{user:t,updateUser:s}=sa(),[a,i]=l.useState("profile"),[r,n]=l.useState(!1),[o,c]=l.useState(!1),[m,x]=l.useState(""),[u,h]=l.useState(!1),[p,g]=l.useState(!1),[b,f]=l.useState(!1),[y,j]=l.useState({profile:{name:"Mehmet Kaya",email:"mehmet.kaya@email.com",phone:"+90 532 123 45 67",address:"İstanbul, Türkiye"},notifications:{email:!0,sms:!0,push:!0,jobAlerts:!0,messageAlerts:!0},privacy:{showProfile:!0,allowMessages:!0},security:{twoFactor:!1,biometric:!0,sessionTimeout:30},preferences:{theme:"light",language:"tr",timezone:"Europe/Istanbul",currency:"TRY"},vehicle:{type:"Kamyon",plate:"34 ABC 123",capacity:"10 ton",features:["Klima","Forklift"]}}),v=[{label:"Ana Sayfa",icon:Ot.jsx(ge,{className:"w-4 h-4"}),href:"/tasiyici/dashboard"},{label:"Ayarlar",icon:Ot.jsx(oe,{className:"w-4 h-4"})}],N=[{id:"profile",name:"Profil",icon:xe},{id:"vehicle",name:"Araç",icon:E}],k=(e,t,s)=>{j(a=>({...a,[e]:{...a[e],[t]:s}}))};return l.useEffect(()=>{(async()=>{var e;try{const a=localStorage.getItem("authToken");if(!a)return;if(!t||!t.driverCode){const t=await fetch(Zs("/api/users/profile"),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(t.ok){const a=await t.json(),l=(null==(e=a.data)?void 0:e.user)||a.user||a.data||a,i=(null==l?void 0:l.driverCode)||(null==l?void 0:l.drivercode);i&&s({driverCode:i})}}}catch(a){}})()},[t,s]),r?Ot.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:Ot.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:Ot.jsx(Pl,{message:"Ayarlar kaydediliyor..."})})}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-50",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Ayarlar - Taşıyıcı Panel - YolNext"}),Ot.jsx("meta",{name:"description",content:"Taşıyıcı ayar yönetimi"})]}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:v})}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-0",children:[Ot.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-xl flex items-center justify-center shadow-lg",children:Ot.jsx(oe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Ayarlar"}),Ot.jsx("p",{className:"text-sm text-slate-600",children:"Hesap ve uygulama ayarlarınızı yönetin"})]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:Ot.jsxs("button",{onClick:()=>{n(!0),setTimeout(()=>{x("Ayarlar başarıyla kaydedildi"),c(!0),n(!1)},1e3)},className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 bg-gradient-to-r from-slate-800 to-blue-900 text-white rounded-lg sm:rounded-xl hover:shadow-lg transition-all duration-200 text-sm font-medium",children:[Ot.jsx(We,{className:"w-4 h-4 sm:w-5 sm:h-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Kaydet"})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-200",children:Ot.jsx("nav",{className:"p-4",children:Ot.jsx("ul",{className:"space-y-2",children:N.map(e=>Ot.jsx("li",{children:Ot.jsxs("button",{onClick:()=>i(e.id),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors "+(a===e.id?"bg-slate-800 text-white":"text-slate-700 hover:bg-slate-100"),children:[Ot.jsx(e.icon,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm font-medium",children:e.name})]})},e.id))})})})}),Ot.jsx("div",{className:"lg:col-span-3",children:Ot.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-200",children:Ot.jsxs("div",{className:"p-4 sm:p-6",children:["profile"===a&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Profil Bilgileri"}),((null==t?void 0:t.driverCode)||(null==t?void 0:t.drivercode))&&Ot.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-blue-900 rounded-xl p-6 mb-6 border border-slate-700",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-4",children:Ot.jsxs("div",{children:[Ot.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[Ot.jsx(vt,{className:"w-5 h-5"}),"Taşıyıcı Kodunuz"]}),Ot.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Bu kodunuzu nakliyecilerle paylaşın, daha fazla iş fırsatı yakalayın!"})]})}),Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-4 border border-white/20",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-xs text-blue-200 mb-1 font-medium",children:"Benzersiz Kodunuz"}),Ot.jsx("div",{className:"text-3xl font-mono font-bold text-white tracking-wider",children:(null==t?void 0:t.driverCode)||(null==t?void 0:t.drivercode)||"Kod yükleniyor..."})]}),Ot.jsx("button",{onClick:()=>{const e=(null==t?void 0:t.driverCode)||(null==t?void 0:t.drivercode);e&&(navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3))},className:"ml-4 px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-2 text-white font-medium shadow-lg hover:shadow-xl",children:b?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(J,{className:"w-5 h-5"}),Ot.jsx("span",{children:"Kopyalandı!"})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(gt,{className:"w-5 h-5"}),Ot.jsx("span",{children:"Kopyala"})]})})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ad Soyad"}),Ot.jsx("input",{type:"text",value:y.profile.name,onChange:e=>k("profile","name",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"E-posta"}),Ot.jsx("input",{type:"email",value:y.profile.email,onChange:e=>k("profile","email",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefon"}),Ot.jsx("input",{type:"tel",value:y.profile.phone,onChange:e=>k("profile","phone",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Adres"}),Ot.jsx("input",{type:"text",value:y.profile.address,onChange:e=>k("profile","address",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]})]}),Ot.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 sm:p-5 shadow-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ot.jsx(W,{className:"w-5 h-5 text-slate-900"}),Ot.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Yasal Belgeler"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2",children:[Ot.jsx(d,{to:"/terms",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Kullanım Koşulları"}),Ot.jsx(d,{to:"/privacy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Gizlilik Politikası"}),Ot.jsx(d,{to:"/cookie-policy",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Çerez Politikası"}),Ot.jsx("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("yolnext:cookie-preferences")),className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900 text-left",children:"Çerez Tercihleri"}),Ot.jsx(d,{to:"/kvkk-aydinlatma",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"KVKK Aydınlatma Metni"}),Ot.jsx(d,{to:"/consumer-rights",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Tüketici Hakları"}),Ot.jsx(d,{to:"/distance-selling-contract",target:"_blank",className:"bg-slate-50 border border-gray-200 rounded-lg px-3 py-2 hover:border-blue-300 hover:bg-white transition-colors text-sm font-semibold text-slate-900",children:"Mesafeli Satış Sözleşmesi"})]})]}),Ot.jsxs("div",{className:"mt-8 pt-8 border-t border-red-200",children:[Ot.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5"}),"Tehlikeli Bölge"]}),Ot.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:[Ot.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Hesabı Sil"}),Ot.jsx("p",{className:"text-sm text-red-800 mb-4",children:"Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz. Tüm verileriniz silinecek ve hesabınıza bir daha erişemeyeceksiniz."}),Ot.jsx("button",{onClick:async()=>{if(window.confirm("Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!")){const s=window.prompt("Güvenlik için şifrenizi girin:");if(s)try{n(!0);(await vn({password:s,reason:"Kullanıcı talebi"})).success?(yr(e,"ACTION_COMPLETED","success"),setTimeout(()=>{localStorage.clear(),window.location.href="/"},2e3)):yr(e,"OPERATION_FAILED","error")}catch(t){yr(e,"OPERATION_FAILED","error")}finally{n(!1)}}},disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Siliniyor...":"Hesabımı Sil"})]})]})]}),"vehicle"===a&&Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Araç Bilgileri"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Araç Tipi"}),Ot.jsxs("select",{value:y.vehicle.type,onChange:e=>k("vehicle","type",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500",children:[Ot.jsx("option",{value:"Kamyon",children:"Kamyon"}),Ot.jsx("option",{value:"Kamyonet",children:"Kamyonet"}),Ot.jsx("option",{value:"Minibüs",children:"Minibüs"}),Ot.jsx("option",{value:"Van",children:"Van"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Plaka"}),Ot.jsx("input",{type:"text",value:y.vehicle.plate,onChange:e=>k("vehicle","plate",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Kapasite"}),Ot.jsx("input",{type:"text",value:y.vehicle.capacity,onChange:e=>k("vehicle","capacity",e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Özellikler"}),Ot.jsx("div",{className:"space-y-2",children:["Klima","Forklift","Vinç","Soğutma"].map(e=>Ot.jsxs("label",{className:"flex items-center",children:[Ot.jsx("input",{type:"checkbox",checked:y.vehicle.features.includes(e),onChange:t=>{t.target.checked?k("vehicle","features",[...y.vehicle.features,e]):k("vehicle","features",y.vehicle.features.filter(t=>t!==e))},className:"mr-2"}),Ot.jsx("span",{className:"text-sm text-slate-700",children:e})]},e))})]}),Ot.jsxs("div",{className:"mt-8 pt-8 border-t border-red-200",children:[Ot.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[Ot.jsx(te,{className:"w-5 h-5"}),"Tehlikeli Bölge"]}),Ot.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:[Ot.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Hesabı Sil"}),Ot.jsx("p",{className:"text-sm text-red-800 mb-4",children:"Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz. Tüm verileriniz silinecek ve hesabınıza bir daha erişemeyeceksiniz."}),Ot.jsx("button",{onClick:async()=>{if(window.confirm("Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!")){const s=window.prompt("Güvenlik için şifrenizi girin:");if(s)try{n(!0);(await vn({password:s,reason:"Kullanıcı talebi"})).success?(yr(e,"ACTION_COMPLETED","success"),setTimeout(()=>{localStorage.clear(),window.location.href="/"},2e3)):yr(e,"OPERATION_FAILED","error")}catch(t){yr(e,"OPERATION_FAILED","error")}finally{n(!1)}}},disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Siliniyor...":"Hesabımı Sil"})]})]})]})]})]})})})]})]}),o&&Ot.jsx(Fl,{message:m,onClose:()=>c(!1),isVisible:o})]})}const kn=e=>{if(!e)return"-";const t=new Date(e);return Number.isFinite(t.getTime())?t.toLocaleDateString("tr-TR"):"-"},wn=()=>{const{user:e}=sa(),[t,s]=l.useState([]),[a,i]=l.useState(!0),[r,n]=l.useState(!1),[o,c]=l.useState(null),[m,x]=l.useState(null);l.useEffect(()=>{u()},[]);const u=async()=>{try{i(!0);const t=localStorage.getItem("user");let a;try{a=t?JSON.parse(t).id:void 0}catch(e){a=void 0}const l=localStorage.getItem("authToken"),r=await fetch(Zs("/api/shipments/tasiyici/completed"),{headers:{Authorization:`Bearer ${l||""}`,"X-User-Id":a||"","Content-Type":"application/json"}});if(r.ok){const e=await r.json(),t=Array.isArray(e)?e:e.shipments||e.data||[],a=(Array.isArray(t)?t:[]).map(e=>({id:"number"==typeof e.id?e.id:parseInt(String(e.id||0),10),title:String(e.title||e.shipmentTitle||"Gönderi"),pickupCity:String(e.pickupCity||e.pickup_city||""),deliveryCity:String(e.deliveryCity||e.delivery_city||""),completedDate:String(e.actualdeliverydate||e.actualDeliveryDate||e.actual_delivery_date||e.deliveredAt||e.delivered_at||e.completedAt||e.completed_at||e.updatedAt||e.updated_at||e.createdAt||e.created_at||""),price:"number"==typeof e.price?e.price:parseFloat(String(e.price||e.displayPrice||0))||0,rating:"number"==typeof e.rating?e.rating:parseFloat(String(e.rating||0))||0,carrierId:null!=e.carrierId?Number(e.carrierId):null!=e.nakliyeci_id?Number(e.nakliyeci_id):void 0,carrierName:String(e.carrierName||e.carrier_name||e.nakliyeciName||e.nakliyeci_name||e.carrierEmail||e.carrier_email||""),hasRatedCarrier:Boolean(e.hasRatedCarrier||e.has_rated_carrier)}));s(a)}}catch(e){}finally{i(!1)}};return a?Ot.jsx(Pl,{}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Tamamlanan İşler - Taşıyıcı Panel - YolNext"})}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Tamamlanan İşler",href:"/tasiyici/completed-jobs"}]})}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(J,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Tamamlanan İşler"}),Ot.jsx("p",{className:"text-slate-200 text-lg leading-relaxed",children:"Başarıyla tamamladığınız işlerin geçmişi"})]})]}),Ot.jsx("div",{className:"grid grid-cols-1 gap-4",children:Ot.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm text-slate-300 mb-1",children:"Tamamlanan İş"}),Ot.jsx("div",{className:"text-2xl font-bold text-white",children:t.length})]}),Ot.jsx(J,{className:"w-8 h-8 text-blue-300"})]})})})]})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"tasiyici.completed-jobs",isEmpty:!a&&0===t.length,icon:J,title:"Tamamlanan İşler",description:"Tamamlanan işlerini buradan inceleyebilirsin. Yeni iş almak için “Pazar”a geç; devam eden operasyonlar için “İşlerim”e bak.",primaryAction:{label:"Pazar",to:"/tasiyici/market"},secondaryAction:{label:"İşlerim",to:"/tasiyici/islerim"}})}),t.length>0?Ot.jsx("div",{className:"space-y-4",children:t.map(e=>Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:e.title}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-slate-600",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(T,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Rota"}),Ot.jsxs("div",{className:"font-medium text-slate-900",children:[e.pickupCity," → ",e.deliveryCity]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx($e,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Tamamlanma"}),Ot.jsx("div",{className:"font-medium text-slate-900",children:kn(e.completedDate)})]})]}),e.rating&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(O,{className:"w-5 h-5 text-yellow-400 fill-current"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-slate-500",children:"Puan"}),Ot.jsxs("div",{className:"font-medium text-slate-900",children:[e.rating,"/5"]})]})]})]})]}),Ot.jsxs("span",{className:"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-semibold border border-green-200 flex items-center gap-2",children:[Ot.jsx(J,{className:"w-4 h-4"}),"Tamamlandı"]})]}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[Ot.jsxs("span",{className:"text-sm text-slate-500",children:["#",e.id]}),Ot.jsxs("div",{className:"flex gap-2",children:[e.carrierId&&!e.hasRatedCarrier&&Ot.jsxs("button",{onClick:()=>{var t;c({id:(null==(t=e.carrierId)?void 0:t.toString())||"",name:e.carrierName||"Nakliyeci",email:"",type:"nakliyeci"}),x(e.id.toString()),n(!0)},className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(O,{className:"w-4 h-4"}),"Değerlendir"]}),Ot.jsxs(d,{to:`/tasiyici/jobs/${e.id}`,className:"px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-medium transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[Ot.jsx(Q,{className:"w-4 h-4"}),"Detayları Gör"]})]})]})]},e.id))}):Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-12 text-center w-full max-w-2xl",children:[Ot.jsx(R,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tamamlanan işin yok"}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:"Tamamlanan işler burada listelenir. Önce “İşlerim” sayfasından iş alıp tamamlayabilirsin."}),Ot.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:Ot.jsx(d,{to:"/tasiyici/islerim",children:Ot.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:"İşlerime Git"})})})]})}),r&&o&&e&&Ot.jsx(tr,{isOpen:r,onClose:()=>{n(!1),c(null),x(null),u()},ratedUser:o,currentUser:{id:e.id||"",name:e.fullName||"Kullanıcı"},shipmentId:m||void 0})]})]})},Sn=()=>{const{showToast:e}=ka(),[t,s]=l.useState([]),[a,i]=l.useState(!0),[r,n]=l.useState({}),[d,o]=l.useState({}),[c,m]=l.useState(""),[x,u]=l.useState(""),[h,p]=l.useState(""),[g,b]=l.useState("date"),[f,y]=l.useState("desc"),[j,v]=l.useState(!1),[N,k]=l.useState(null),[w,S]=l.useState(""),[z,C]=l.useState("");l.useEffect(()=>{var e;try{const t=localStorage.getItem("user");if(!t)return;const s=JSON.parse(t),a=null==s?void 0:s.id,l=String((null==s?void 0:s.role)||"tasiyici").toLowerCase();a&&(localStorage.setItem(`yolnext:lastSeen:market:${a}:${l}`,(new Date).toISOString()),window.dispatchEvent(new Event("yolnext:refresh-badges")));const i=((null==s?void 0:s.city)||(null==(e=null==s?void 0:s.profile)?void 0:e.city)||"").toString().trim();i&&!x&&u(i)}catch{}},[]);const A=async()=>{try{i(!0);const e=localStorage.getItem("authToken"),t=new URLSearchParams;x&&x.trim()&&t.set("fromCity",x.trim()),h&&h.trim()&&t.set("toCity",h.trim());const a=t.toString()?`${Zs("/api/carrier-market/available")}?${t.toString()}`:Zs("/api/carrier-market/available"),l=await fetch(a,{headers:{Authorization:`Bearer ${e||""}`,"Content-Type":"application/json"}});if(!l.ok)throw new Error("Açık ilanlar alınamadı");const r=await l.json(),n=Array.isArray(r)?r:r.data||[],d=e=>{if(!e||"object"!=typeof e)return{};if(e.categoryData||e.category_data)return e.categoryData||e.category_data;let t=e.metadata;if("string"==typeof t)try{t=JSON.parse(t)}catch{t=null}return t&&"object"==typeof t&&t.categoryData?t.categoryData:{}},o=n.map(e=>{const t=e.shipment||{},s=d(t),a=t.pickupCity||t.pickup_city||t.pickupcity||t.fromCity||t.from_city||t.from_city_name||t.from||"",l=t.deliveryCity||t.delivery_city||t.deliverycity||t.toCity||t.to_city||t.to_city_name||t.to||"",i=t.pickupAddress||t.pickup_address||t.pickupaddress||t.from_address||t.fromAddress||a||"",r=t.deliveryAddress||t.delivery_address||t.deliveryaddress||t.to_address||t.toAddress||l||"",n=t.weight??t.weight_kg??t.total_weight,o=t.volume??t.volume_m3,c="number"==typeof n?n:parseFloat(String(n||0))||0,m="number"==typeof o?o:parseFloat(String(o||0))||0,x=Number(e.shipmentId??e.shipment_id??t.id??t.shipment_id??0),u=e.createdAt||e.created_at||"",h=e.minPrice??e.min_price,p=e.price??e.price_try??e.total_price??t.displayPrice??t.display_price??t.price??t.value,g="number"==typeof p?p:null!=p&&""!==String(p).trim()?Number(p):void 0,b=`${String(a||"").trim()} → ${String(l||"").trim()}`.trim(),f=String((t.title||e.title||"")??"").trim(),y=!!b&&(!f||/teklif\s*akışı/i.test(f));return{id:e.id,shipmentId:x,pickupCity:String(a||"").trim()||void 0,deliveryCity:String(l||"").trim()||void 0,carrierBudgetMax:h,title:(y?b:f)||`${String(a||I(i)||"").trim()} → ${String(l||I(r)||"").trim()}`.trim()||`Gönderi #${x||e.shipmentId}`,pickupAddress:i,deliveryAddress:r,weight:c,volume:m,unitType:s.unitType||t.unitType,temperatureSetpoint:s.temperatureSetpoint||s.temperature_setpoint||t.temperatureSetpoint||t.temperature_setpoint||void 0,unNumber:s.unNumber||s.un_number||t.unNumber||t.un_number||void 0,loadingEquipment:s.loadingEquipment||s.loading_equipment||t.loadingEquipment||t.loading_equipment||void 0,price:"number"==typeof g&&Number.isFinite(g)?g:0,pickupDate:t.pickupDate||t.pickup_date||t.pickupdate||"",createdAt:u}});s(o)}catch(e){s([])}finally{i(!1)}};l.useEffect(()=>{A()},[x,h]);const D=()=>{v(!1),k(null),S(""),C("")},I=e=>{var t;if(!e)return"";const s=e.split(",");return((null==(t=s[s.length-1])?void 0:t.trim())||"").replace(/\s*(İl|İli|Şehri)$/i,"").trim()},M=t.filter(e=>{var t,s,a,l;const i=!c||(e.title||`Gönderi #${e.shipmentId}`).toLowerCase().includes(c.toLowerCase())||(null==(t=e.pickupAddress)?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null==(s=e.deliveryAddress)?void 0:s.toLowerCase().includes(c.toLowerCase())),r=I(e.pickupAddress),n=I(e.deliveryAddress),d=!x||r.toLowerCase().includes(x.toLowerCase())||(null==(a=e.pickupAddress)?void 0:a.toLowerCase().includes(x.toLowerCase())),o=!h||n.toLowerCase().includes(h.toLowerCase())||(null==(l=e.deliveryAddress)?void 0:l.toLowerCase().includes(h.toLowerCase()));return i&&d&&o}).sort((e,t)=>{let s=0;if("date"===g){s=new Date(e.createdAt||0).getTime()-new Date(t.createdAt||0).getTime()}else if("price"===g){s=(e.price||e.carrierBudgetMax||0)-(t.price||t.carrierBudgetMax||0)}else if("distance"===g){const a=I(e.pickupAddress),l=I(e.deliveryAddress),i=I(t.pickupAddress),r=I(t.deliveryAddress);s=a.length+l.length-(i.length+r.length)}return"asc"===f?s:-s});return a?Ot.jsx(Pl,{}):Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Taşıyıcı Pazarı - YolNext"})}),Ot.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"Pazar",href:"/tasiyici/market"}]})}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 sm:p-8 text-white shadow-2xl mb-6",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(E,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Taşıyıcı Pazarı"}),Ot.jsx("p",{className:"text-slate-200 text-base sm:text-lg leading-relaxed",children:"Açık ilanlara teklif verin ve yeni iş fırsatları yakalayın"})]})]})})})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"tasiyici.market",isEmpty:!a&&0===t.length,icon:E,title:"Taşıyıcı Pazarı",description:"Pazardaki ilanlara uygun bütçe/tarih kriterleriyle teklif ver. Verdiğin teklifleri “Tekliflerim”den, kabul edilen işleri “İşlerim”den yönetebilirsin.",primaryAction:{label:"Tekliflerim",to:"/tasiyici/my-offers"},secondaryAction:{label:"İşlerim",to:"/tasiyici/islerim"}})}),Ot.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 shadow-lg border border-gray-100 mb-6",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[Ot.jsx(me,{className:"inline w-4 h-4 mr-1"}),"Genel Arama"]}),Ot.jsx("input",{type:"text",placeholder:"Başlık, açıklama veya adres ara...",value:c,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[Ot.jsx(T,{className:"inline w-4 h-4 mr-1 text-blue-600"}),"Başlangıç Şehri"]}),Ot.jsx("input",{type:"text",placeholder:"Örn: İstanbul, Ankara, İzmir...",value:x,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),Ot.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Yükün alınacağı şehir"})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[Ot.jsx(T,{className:"inline w-4 h-4 mr-1 text-green-600"}),"Bitiş Şehri"]}),Ot.jsx("input",{type:"text",placeholder:"Örn: İstanbul, Ankara, İzmir...",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),Ot.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Yükün teslim edileceği şehir"})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[Ot.jsxs("div",{className:"flex-1 sm:flex-initial sm:w-48",children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sıralama"}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs("select",{value:g,onChange:e=>b(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[Ot.jsx("option",{value:"date",children:"Tarih"}),Ot.jsx("option",{value:"price",children:"Fiyat"}),Ot.jsx("option",{value:"distance",children:"Mesafe"})]}),Ot.jsx("button",{onClick:()=>y("asc"===f?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"asc"===f?"Artan":"Azalan",children:"asc"===f?"↑":"↓"})]})]}),(x||h||c)&&Ot.jsxs("button",{onClick:()=>{u(""),p(""),m("")},className:"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 whitespace-nowrap",children:[Ot.jsx(_,{className:"w-4 h-4"}),"Filtreleri Temizle"]})]}),(x||h)&&Ot.jsx("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:Ot.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[x&&Ot.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-md",children:[Ot.jsx(T,{className:"w-3 h-3"}),"Başlangıç: ",x]}),h&&Ot.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-md",children:[Ot.jsx(T,{className:"w-3 h-3"}),"Bitiş: ",h]})]})})]})}),Ot.jsx("div",{children:0===M.length?Ot.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:Ot.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-10 text-center w-full max-w-2xl",children:Ot.jsx(ir,{icon:E,title:0===t.length?"Şimdilik İş Yok":"Filtreye Uygun İş Yok",description:0===t.length?"Şu anda açık ilan bulunmuyor. Birkaç dakika sonra tekrar deneyebilirsin.":"Filtreleri temizleyip tekrar deneyebilirsin.",action:0===t.length?{label:"Yenile",onClick:A}:{label:"Filtreleri Temizle",onClick:()=>{u(""),p(""),m(""),b("date"),y("desc")}}})})}):Ot.jsxs(Ot.Fragment,{children:[M.length!==t.length&&Ot.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200 text-sm text-blue-800 mb-4",children:[M.length," ilan bulundu (toplam ",t.length,")"]}),Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:M.map(e=>{var t,s,a,l,i,n,o,c;return Ot.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-md border border-gray-100 hover:shadow-lg hover:border-blue-300 transition-all duration-300 flex flex-col",children:[Ot.jsx("h3",{className:"text-sm font-bold text-slate-900 mb-2 line-clamp-1",children:e.title||`Gönderi #${e.shipmentId}`}),Ot.jsxs("div",{className:"mb-2.5",children:[Ot.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[Ot.jsx(T,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs font-medium text-slate-900 truncate",children:(e.pickupCity||I(e.pickupAddress)||e.pickupAddress||"Belirtilmemiş").toString()})]}),e.pickupAddress&&Ot.jsx("div",{className:"text-[10px] text-slate-500 truncate pl-4",children:e.pickupAddress}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(K,{className:"w-2.5 h-2.5 text-slate-400 mx-1.5"}),Ot.jsx(T,{className:"w-3 h-3 text-green-600 flex-shrink-0"}),Ot.jsx("span",{className:"text-xs font-medium text-slate-900 truncate",children:(e.deliveryCity||I(e.deliveryAddress)||e.deliveryAddress||"Belirtilmemiş").toString()})]}),e.deliveryAddress&&Ot.jsx("div",{className:"text-[10px] text-slate-500 truncate pl-8",children:e.deliveryAddress})]}),Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5 mb-2.5",children:[Ot.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(R,{className:"w-3 h-3 text-blue-600"}),Ot.jsx("span",{className:"font-semibold text-blue-800",children:e.weight&&e.weight>0?`${e.weight.toLocaleString("tr-TR")} kg`:(null==(t=e.title)?void 0:t.includes("ev"))||(null==(s=e.title)?void 0:s.includes("mobilya"))?"Tahmini 800-1500 kg":(null==(a=e.title)?void 0:a.includes("kargo"))||(null==(l=e.title)?void 0:l.includes("koli"))?"Tahmini 50-200 kg":"Ağırlık belirtilmemiş"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(R,{className:"w-3 h-3 text-purple-600"}),Ot.jsx("span",{className:"font-semibold text-purple-800",children:e.volume&&e.volume>0?`${e.volume.toLocaleString("tr-TR")} m³`:(null==(i=e.title)?void 0:i.includes("ev"))||(null==(n=e.title)?void 0:n.includes("mobilya"))?"Tahmini 8-15 m³":(null==(o=e.title)?void 0:o.includes("kargo"))||(null==(c=e.title)?void 0:c.includes("koli"))?"Tahmini 1-3 m³":"Hacim belirtilmemiş"})]})]}),(!e.weight||0===e.weight)&&(!e.volume||0===e.volume)&&Ot.jsx("p",{className:"text-xs text-blue-600 mt-1 font-medium",children:"📞 Teklif kabul edilirse nakliyeci ile direkt konuşarak kesin ölçüler alabilirsiniz"})]}),(e.unitType||e.temperatureSetpoint||e.unNumber||e.loadingEquipment)&&Ot.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2.5",children:[e.unitType&&Ot.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full border border-gray-200 text-[10px]",children:e.unitType}),e.temperatureSetpoint&&Ot.jsxs("span",{className:"px-2 py-0.5 bg-cyan-50 text-cyan-700 rounded-full border border-cyan-200 text-[10px]",children:[e.temperatureSetpoint,"℃"]}),e.unNumber&&Ot.jsx("span",{className:"px-2 py-0.5 bg-red-50 text-red-700 rounded-full border border-red-200 text-[10px]",children:e.unNumber}),e.loadingEquipment&&Ot.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 rounded-full border border-indigo-200 text-[10px]",children:e.loadingEquipment})]}),Ot.jsxs("div",{className:"mt-auto",children:[Ot.jsx("div",{className:"mb-2.5 pb-2.5 border-b border-gray-200",children:"number"==typeof e.price&&e.price>0?Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"text-lg font-bold text-green-600",children:["₺",e.price.toLocaleString("tr-TR")]}),e.carrierBudgetMax&&e.carrierBudgetMax<e.price&&Ot.jsxs("div",{className:"text-[10px] text-slate-500 mt-0.5",children:["Bütçe (Tavan): ₺",e.carrierBudgetMax.toLocaleString("tr-TR")]})]}):e.carrierBudgetMax?Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-[10px] text-slate-500 mb-0.5",children:"Bütçe (Tavan)"}),Ot.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["₺",e.carrierBudgetMax.toLocaleString("tr-TR")]})]}):Ot.jsx("div",{className:"text-sm text-slate-500",children:"Fiyat belirtilmemiş"})}),Ot.jsxs("button",{onClick:()=>{return k(t=e),S(r[t.id]||""),C(d[t.id]||""),void v(!0);var t},className:"w-full px-4 py-4 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg text-sm font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-md hover:shadow-lg touch-manipulation min-h-[48px]",children:[Ot.jsx($,{className:"w-3 h-3"}),"Teklif Ver"]})]})]},e.id)})})]})})]}),Ot.jsx(er,{isOpen:j,onClose:D,title:`Teklif Ver - ${(null==N?void 0:N.title)||`Gönderi #${null==N?void 0:N.shipmentId}`}`,children:N&&Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:Ot.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(T,{className:"w-4 h-4"}),Ot.jsx("span",{className:"font-medium",children:N.pickupAddress}),Ot.jsx(K,{className:"w-3 h-3 mx-1"}),Ot.jsx("span",{className:"font-medium",children:N.deliveryAddress})]}),N.carrierBudgetMax&&Ot.jsxs("div",{className:"text-xs text-blue-700 mt-2",children:["Bütçe (Tavan): ₺",N.carrierBudgetMax.toLocaleString()]})]})}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Teklif Fiyatı (₺) ",Ot.jsx("span",{className:"text-red-500",children:"*"})]}),Ot.jsx("input",{type:"number",value:w,onChange:e=>S(e.target.value),placeholder:"Örn: 3500",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",max:N.carrierBudgetMax||void 0}),N.carrierBudgetMax&&Number(w)>N.carrierBudgetMax&&Ot.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Teklif ",N.carrierBudgetMax.toLocaleString()," ₺ tavanını aşamaz"]})]}),Ot.jsxs("div",{children:[Ot.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Tahmini Süre (saat) ",Ot.jsx("span",{className:"text-slate-400",children:"(Opsiyonel)"})]}),Ot.jsx("input",{type:"number",value:z,onChange:e=>C(e.target.value),placeholder:"Örn: 24",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ot.jsxs("div",{className:"flex gap-3 pt-4",children:[Ot.jsx("button",{onClick:D,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-all duration-300",children:"İptal"}),Ot.jsx("button",{onClick:async()=>{if(!N||!w||Number(w)<=0)yr(e,"INVALID_AMOUNT","error");else try{const t=localStorage.getItem("user"),a=(t&&JSON.parse(t||"{}").id,localStorage.getItem("authToken")),l={listingId:N.id,bidPrice:Number(w),etaHours:z?Number(z):void 0},i=await fetch(Zs("/api/carrier-market/bids"),{method:"POST",headers:{Authorization:`Bearer ${a||""}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(!i.ok){const e=await i.json().catch(()=>({message:"Teklif gönderilemedi"}));throw new Error(e.message||"Teklif gönderilemedi")}yr(e,"OFFER_SENT","success"),n(e=>({...e,[N.id]:w})),z&&o(e=>({...e,[N.id]:z})),D();const r=await fetch(Zs("/api/carrier-market/available"),{headers:{Authorization:`Bearer ${a||""}`,"Content-Type":"application/json"}});if(r.ok){const e=await r.json(),t=(Array.isArray(e)?e:e.data||[]).map(e=>{const t=e.shipment||{},s=t.categoryData||t.category_data||(()=>{let e=t.metadata;if("string"==typeof e)try{e=JSON.parse(e)}catch{e=null}return e&&"object"==typeof e&&e.categoryData||{}})();return{id:e.id,shipmentId:e.shipmentId,carrierBudgetMax:e.minPrice,title:t.title||e.title||`Gönderi #${e.shipmentId}`,pickupAddress:t.pickupAddress||t.from||t.pickupCity||"",deliveryAddress:t.deliveryAddress||t.to||t.deliveryCity||"",weight:t.weight||0,volume:t.volume||0,unitType:s.unitType||t.unitType,temperatureSetpoint:s.temperatureSetpoint||s.temperature_setpoint||t.temperatureSetpoint||t.temperature_setpoint||void 0,unNumber:s.unNumber||s.un_number||t.unNumber||t.un_number||void 0,loadingEquipment:s.loadingEquipment||s.loading_equipment||t.loadingEquipment||t.loading_equipment||void 0,price:e.minPrice||0,pickupDate:t.pickupDate||"",createdAt:e.createdAt||""}});s(t)}}catch(t){yr(e,"OPERATION_FAILED","error")}},disabled:!w||Number(w)<=0||void 0!==N.carrierBudgetMax&&N.carrierBudgetMax>0&&Number(w)>N.carrierBudgetMax,className:"flex-1 px-4 py-2 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-lg font-medium transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:"Teklifi Gönder"})]})]})})]})};function zn(e){const t=String(e||"").trim();return t?t.replace(/İ/g,"I").replace(/ı/g,"i").toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim():""}function Tn(e){var t;const s=String(e||"").trim();if(!s)return"";return(null==(t=s.split(",")[0])?void 0:t.trim())||s}const Cn=e=>{const t=gi(e);return"Bilinmiyor"!==t?t:"offer_accepted"===e?"Teklif Kabul":e?String(e):"Aktif"},An=(e,t)=>{switch(e){case"pending":case"assignments":return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 inline-flex items-center gap-1",children:[Ot.jsx(L,{className:"w-3 h-3"}),"Beklemede"]});case"accepted":return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 inline-flex items-center gap-1",children:[Ot.jsx(J,{className:"w-3 h-3"}),"Kabul"]});case"completed":return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-800 inline-flex items-center gap-1",children:[Ot.jsx(J,{className:"w-3 h-3"}),"Tamamlandı"]});default:return Ot.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 inline-flex items-center gap-1",children:[Ot.jsx(E,{className:"w-3 h-3"}),t?Cn(t):"Aktif"]})}},Dn=()=>{const e=o(),{showToast:t}=ka(),s=l.useMemo(()=>function(){try{const e=localStorage.getItem("user"),t=e?JSON.parse(e):null;return String((null==t?void 0:t.city)||(null==t?void 0:t.City)||(null==t?void 0:t.il)||(null==t?void 0:t.province)||"").trim()}catch{return""}}(),[]),a=l.useMemo(()=>zn(s),[s]),[i,r]=l.useState("active"),[n,c]=l.useState(!0),[m,x]=l.useState([]),[u,h]=l.useState([]),[p,g]=l.useState([]),[b,f]=l.useState([]),y=async()=>{var e;try{c(!0);const t=localStorage.getItem("authToken"),s=localStorage.getItem("user"),a={Authorization:`Bearer ${t||""}`,"X-User-Id":(s?JSON.parse(s||"{}").id:void 0)||"","Content-Type":"application/json"},[l,i,n,d]=await Promise.all([fetch(Zs("/api/shipments/tasiyici/assignment-offers"),{headers:a}),fetch(Zs("/api/carrier-market/bids?mine=1"),{headers:a}),fetch(Zs("/api/shipments/tasiyici"),{headers:a}),fetch(Zs("/api/shipments/tasiyici/completed"),{headers:a})]),o=l.ok?await l.json().catch(()=>null):null,m=i.ok?await i.json().catch(()=>null):null,u=n.ok?await n.json().catch(()=>null):null,p=d.ok?await d.json().catch(()=>null):null,b=Array.isArray(o)?o:(null==o?void 0:o.data)||(null==o?void 0:o.shipments)||[],y=(Array.isArray(b)?b:[]).map(e=>{const t=e.metadata;let s=null;if(t&&"object"==typeof t)s=t;else if("string"==typeof t)try{s=JSON.parse(t)}catch{s=null}const a=null==s?void 0:s.driverOffer;return{kind:"assignment_offer",shipmentId:Number(e.id||e.shipmentId||e.shipment_id||0),status:"pending",title:String(e.title||`${e.pickupcity||e.pickupCity||e.pickup_city||""} → ${e.deliverycity||e.deliveryCity||e.delivery_city||""}`.trim()||"İş"),pickupAddress:e.pickupAddress||e.pickup_address||e.pickupaddress||e.pickupcity||e.pickupCity||e.pickup_city,deliveryAddress:e.deliveryAddress||e.delivery_address||e.deliveryaddress||e.deliverycity||e.deliveryCity||e.delivery_city,price:Number(e.displayPrice||e.price||e.offerPrice||e.offer_price||0),createdAt:e.createdAt||e.created_at,expiresAt:null==a?void 0:a.expiresAt}}).filter(e=>e.shipmentId),j=Array.isArray(m)?m:(null==(e=null==m?void 0:m.data)?void 0:e.bids)||(null==m?void 0:m.data)||(null==m?void 0:m.bids)||[],v=(Array.isArray(j)?j:[]).map(e=>({kind:"bid",bidId:Number(e.id||0),shipmentId:Number(e.shipmentId||e.shipment_id||0),status:e.status||"pending",title:String(e.shipmentTitle||e.title||(e.shipmentId?`Gönderi #${e.shipmentId}`:"Gönderi")).replace(/Advanced Regression Shipment/gi,"Kargo Nakliyesi").replace(/MCP E2E Test/gi,"Test Gönderisi").replace(/Regression/gi,"Nakliye"),pickupAddress:e.pickupAddress||e.pickup_address||e.pickupaddress||e.pickupcity||e.pickup_city,deliveryAddress:e.deliveryAddress||e.delivery_address||e.deliveryaddress||e.deliverycity||e.delivery_city,price:Number(e.bidPrice||e.price||0),createdAt:e.createdAt||e.created_at})),N=Array.isArray(u)?u:(null==u?void 0:u.data)||[],k=(Array.isArray(N)?N:[]).map(e=>({kind:"job",shipmentId:Number(e.id||e.shipmentId||e.shipment_id||0),status:String(e.status||"active"),title:String(e.title||`${e.pickupcity||e.pickupCity||e.pickup_city||""} → ${e.deliverycity||e.deliveryCity||e.delivery_city||""}`.trim()||"İş").replace(/Advanced Regression Shipment/gi,"Kargo Nakliyesi").replace(/MCP E2E Test/gi,"Test Gönderisi").replace(/Regression/gi,"Nakliye"),pickupAddress:e.pickupAddress||e.pickup_address||e.pickupaddress||e.pickupcity||e.pickupCity||e.pickup_city,deliveryAddress:e.deliveryAddress||e.delivery_address||e.deliveryaddress||e.deliverycity||e.deliveryCity||e.delivery_city,price:Number(e.displayPrice||e.price||e.offerPrice||e.offer_price||0),createdAt:e.createdAt||e.created_at})),w=new Set(["offer_accepted","accepted","assigned","in_progress","picked_up","in_transit","delivered"]),S=k.filter(e=>e.shipmentId&&w.has(String(e.status||"").trim())),z=Array.isArray(p)?p:(null==p?void 0:p.shipments)||(null==p?void 0:p.data)||[],T=(Array.isArray(z)?z:[]).map(e=>({kind:"job",shipmentId:Number(e.id||e.shipmentId||e.shipment_id||0),status:String(e.status||"completed"),title:String(e.title||e.shipmentTitle||`${e.pickupcity||e.pickupCity||e.pickup_city||""} → ${e.deliverycity||e.deliveryCity||e.delivery_city||""}`.trim()||"İş").replace(/Advanced Regression Shipment/gi,"Kargo Nakliyesi").replace(/MCP E2E Test/gi,"Test Gönderisi").replace(/Regression/gi,"Nakliye"),pickupAddress:e.pickupAddress||e.pickup_address||e.pickupaddress||e.pickupcity||e.pickupCity||e.pickup_city,deliveryAddress:e.deliveryAddress||e.delivery_address||e.deliveryaddress||e.deliverycity||e.deliveryCity||e.delivery_city,price:Number(e.displayPrice||e.price||e.offerPrice||e.offer_price||0),createdAt:e.updatedAt||e.updated_at||e.createdAt||e.created_at}));x(v),h(y),g(S),f(T.filter(e=>e.shipmentId));const C=S.some(e=>e.shipmentId),A=v.some(e=>"accepted"===e.status&&e.shipmentId),D=v.some(e=>"pending"===e.status),E=y.some(e=>e.shipmentId);!C&&E?r("assignments"):!C&&A?r("accepted"):C||A||!D||r("pending")}catch(t){x([]),h([]),g([]),f([])}finally{c(!1)}};l.useEffect(()=>{y()},[]);const j=l.useMemo(()=>m.filter(e=>"pending"===e.status),[m]),v=l.useMemo(()=>m.filter(e=>"accepted"===e.status),[m]),N=l.useMemo(()=>{switch(i){case"assignments":return u;case"pending":return j;case"accepted":return v;case"completed":return b;default:return p}},[i,u,j,v,p,b]),k=(e,t,s)=>Ot.jsxs("button",{type:"button",onClick:()=>r(e),className:"px-3 py-2 rounded-xl text-sm font-semibold border transition-colors "+(i===e?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"),children:[Ot.jsx("span",{children:t}),Ot.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full "+(i===e?"bg-white/20":"bg-slate-100"),children:s})]});return n?Ot.jsx(Pl,{}):Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"İşlerim - Taşıyıcı - YolNext"})}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx("div",{className:"mb-4 sm:mb-6",children:Ot.jsx(Ol,{items:[{label:"İşlerim",href:"/tasiyici/islerim"}]})}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-6",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(R,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"İşlerim"}),Ot.jsx("p",{className:"text-slate-200 text-base sm:text-lg leading-relaxed",children:"Tekliflerini ve işlerini tek yerden yönet"})]})]})})]}),Ot.jsx("div",{className:"mb-6",children:Ot.jsx(ql,{storageKey:"tasiyici.islerim",isEmpty:!n&&0===m.length&&0===p.length&&0===b.length,icon:E,title:"İşlerim",description:"Yoldayken hızlı işlem için burası tek merkez: tekliflerini kontrol et, kabul edilen işi aç, aktif işi güncelle.",primaryAction:{label:"Pazar",to:"/tasiyici/market"},secondaryAction:{label:"Yenile",onClick:()=>y()}})}),Ot.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[k("assignments","Atama Teklifleri",u.length),k("pending","Beklemede",j.length),k("accepted","Kabul",v.length),k("active","Aktif",p.length),k("completed","Tamamlanan",b.length)]}),0===N.length?Ot.jsx("div",{className:"min-h-[45vh] flex items-center justify-center",children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-10 text-center w-full max-w-2xl",children:[Ot.jsx(R,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Burada bir kayıt yok"}),Ot.jsx("p",{className:"text-gray-600 mb-6",children:"Pazardan ilana teklif vererek başlayabilirsin."}),Ot.jsx(d,{to:"/tasiyici/market",children:Ot.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl",children:"Pazara Git"})})]})}):Ot.jsx("div",{className:"space-y-4",children:N.map(e=>{var l,n;const o="bid"===e.kind?`#${e.bidId} • İş #${e.shipmentId}`:"assignment_offer"===e.kind?`Atama Teklifi • İş #${e.shipmentId}`:`İş #${e.shipmentId}`,c=Boolean(e.shipmentId)?`/tasiyici/jobs/${e.shipmentId}`:void 0,m="assignment_offer"===e.kind,x=m&&e.expiresAt?Date.parse(String(e.expiresAt)):NaN,u=m&&Number.isFinite(x)?Math.max(0,Math.ceil((x-Date.now())/6e4)):null,h=Tn(e.pickupCity||e.pickupAddress),p=zn(h),g=Boolean(m)&&Boolean(a)&&Boolean(p)&&a!==p,b=Boolean(m)&&0===u;return Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:border-blue-300 transition-all duration-300",children:[Ot.jsx("div",{className:"flex items-start justify-between gap-3 mb-4",children:Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"flex items-start justify-between mb-3",children:Ot.jsx("h3",{className:"text-lg font-semibold text-slate-900 line-clamp-2 flex-1 leading-tight",children:e.title})}),Ot.jsxs("div",{className:"space-y-3 mb-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"İş Durumu:"}),An(i,e.status)]}),Ot.jsx("span",{className:"text-sm text-slate-600 font-medium bg-slate-50 px-2 py-1 rounded",children:o})]}),m&&Ot.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg border border-amber-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between gap-2",children:[Ot.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"30dk kabul süresi"}),Ot.jsx("div",{className:"text-sm font-bold text-amber-700",children:null!=u?`${u} dk`:"—"})]}),Ot.jsx("div",{className:"text-xs text-amber-700 mt-1",children:"Bu işi kabul edersen iş başlatılır. Reddedersen nakliyeci başka taşıyıcı seçebilir."}),g&&Ot.jsxs("div",{className:"mt-2 text-xs text-rose-700 font-semibold",children:["Şehir kuralı: Yükleme şehri profil şehrinle aynı olmalı. Profil: ",s||"—"," • Yükleme: ",h||"—"]}),b&&Ot.jsx("div",{className:"mt-2 text-xs text-rose-700 font-semibold",children:"Bu teklifin süresi doldu."})]}),Ot.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-200",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(T,{className:"w-4 h-4 text-blue-600"}),Ot.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Güzergah"})]}),Ot.jsx("div",{className:"text-sm font-semibold text-blue-900",children:e.pickupAddress&&e.deliveryAddress?`${e.pickupAddress.split(",")[0].trim()} → ${e.deliveryAddress.split(",")[0].trim()}`:e.pickupAddress||e.deliveryAddress?e.pickupAddress||e.deliveryAddress:"Adres bilgisi yok"}),e.pickupAddress&&e.pickupAddress.length>40||e.deliveryAddress&&e.deliveryAddress.length>40?Ot.jsxs("div",{className:"text-xs text-blue-600 mt-1 truncate",children:[(null==(l=e.pickupAddress)?void 0:l.substring(0,40))||""," → ",(null==(n=e.deliveryAddress)?void 0:n.substring(0,40))||""]}):null]}),Ot.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-3 rounded-lg border border-green-200",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($,{className:"w-4 h-4 text-green-600"}),Ot.jsx("span",{className:"text-xs font-medium text-green-800",children:"Kazanılacak Tutar"})]}),Ot.jsxs("div",{className:"font-bold text-green-700 text-xl",children:["₺",Number(e.price||0).toLocaleString("tr-TR")]})]})})]})]})}),Ot.jsx("div",{className:"flex items-center justify-end pt-4 border-t border-gray-200",children:m?Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[Ot.jsxs("button",{type:"button",onClick:()=>(async(e,l)=>{try{const i=zn(Tn(l));if(a&&i&&a!==i)return void t({type:"error",title:"İş kabul edilemedi",message:`Yükleme şehri profil şehrinle aynı olmalı. Profil: ${s||"—"}, Yükleme: ${Tn(l)||"—"}`,duration:5e3});const n=localStorage.getItem("authToken"),d=localStorage.getItem("user"),o=d?JSON.parse(d||"{}").id:void 0,c=await fetch(Zs(`/api/shipments/${e}/assignment/accept`),{method:"POST",headers:{Authorization:`Bearer ${n||""}`,"X-User-Id":o||"","Content-Type":"application/json"}}),m=await c.json().catch(()=>null);if(!c.ok||!(null==m?void 0:m.success)){const e=(null==m?void 0:m.message)||"İş kabul edilemedi";return void t({type:"error",title:"İş kabul edilemedi",message:e,duration:4500})}Ga("driver_assignment_offer_accepted",{shipmentId:e}),t({type:"success",title:"İş kabul edildi",message:"İş başlatıldı.",duration:3e3}),r("active"),await y()}catch{t({type:"error",title:"İş kabul edilemedi",message:"Lütfen tekrar deneyin.",duration:4500})}})(e.shipmentId,h),disabled:g||b,className:"px-5 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2",children:[Ot.jsx(J,{className:"w-5 h-5"}),"Kabul Et"]}),Ot.jsxs("button",{type:"button",onClick:()=>(async e=>{try{const s=window.prompt("Reddetme sebebi (opsiyonel):")||"",a=localStorage.getItem("authToken"),l=localStorage.getItem("user"),i=l?JSON.parse(l||"{}").id:void 0,r=await fetch(Zs(`/api/shipments/${e}/assignment/reject`),{method:"POST",headers:{Authorization:`Bearer ${a||""}`,"X-User-Id":i||"","Content-Type":"application/json"},body:JSON.stringify({reason:s})}),n=await r.json().catch(()=>null);if(!r.ok||!(null==n?void 0:n.success)){const e=(null==n?void 0:n.message)||"İş reddedilemedi";return void t({type:"error",title:"İş reddedilemedi",message:e,duration:4500})}Ga("driver_assignment_offer_rejected",{shipmentId:e,reason:s||void 0}),t({type:"success",title:"Teklif reddedildi",message:"Nakliyeci bilgilendirildi.",duration:3e3}),await y()}catch{t({type:"error",title:"İş reddedilemedi",message:"Lütfen tekrar deneyin.",duration:4500})}})(e.shipmentId),className:"px-5 py-3 bg-white border border-rose-200 text-rose-700 hover:bg-rose-50 rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2",children:[Ot.jsx(ie,{className:"w-5 h-5"}),"Reddet"]}),c?Ot.jsxs(d,{to:c,className:"px-5 py-3 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2",children:[Ot.jsx(Q,{className:"w-5 h-5"}),"Detay"]}):null]}):c?Ot.jsxs(d,{to:c,className:"px-6 py-4 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-slate-700 hover:to-blue-800 text-white rounded-xl font-bold text-lg transition-all duration-300 flex items-center gap-3 shadow-lg hover:shadow-xl min-h-[48px]",children:[Ot.jsx(Q,{className:"w-6 h-6"}),"İşi Detayları"]}):Ot.jsx("span",{className:"px-6 py-4 bg-slate-100 text-slate-600 rounded-xl font-bold text-lg border-2 border-slate-300 min-h-[48px] flex items-center justify-center",children:"Hazırlanıyor"})})]},`${e.kind}-${"bid"===e.kind?e.bidId:e.shipmentId}`)})}),Ot.jsx("div",{className:"mt-8 flex justify-end",children:Ot.jsx("button",{type:"button",onClick:()=>e("/tasiyici/market"),className:"px-8 py-4 bg-gradient-to-r from-slate-800 to-blue-900 hover:from-blue-900 hover:to-slate-800 text-white border-2 border-blue-700 rounded-xl font-bold text-xl shadow-lg hover:shadow-xl min-h-[56px] transition-all duration-200",children:"Pazara Git"})})]})]})},En=()=>{const{showToast:e}=ka(),[t,s]=l.useState(null),[a,i]=l.useState(""),[r,n]=l.useState(!1),[d,o]=l.useState([]),[c,m]=l.useState([]),[x,u]=l.useState(!1),[h,p]=l.useState({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),g=[{step:1,title:"Profil ve Araç Bilgileri",description:"Araç bilgilerinizi ve gerekli belgeleri ekleyerek hesabınızı tamamlayın",icon:C},{step:2,title:"İşleri Görüntüleyin",description:"Size uygun işleri inceleyin veya atanan işleri kontrol edin",icon:R},{step:3,title:"İşi Kabul Edin",description:"İş detaylarını kontrol edin ve kabul ederek süreci başlatın",icon:O},{step:4,title:"Yükleme ve Takip",description:"Alım/teslim süreçlerinde durum güncellemelerini yapın",icon:T},{step:5,title:"Teslimat ve Kazanç",description:"Teslimatı tamamlayın, kazancınızı cüzdandan takip edin",icon:$}],b=[{category:"Başlangıç",icon:ve,items:[{question:"Taşıyıcı paneli ne işe yarar?",answer:"Taşıyıcı paneli, kabul ettiğiniz işleri yönetmenizi, alım/teslim adımlarını takip etmenizi ve kazanç/hakediş durumunuzu görmenizi sağlar."},{question:"Hesap oluşturmak ücretsiz mi?",answer:"Evet, hesap oluşturma ücretsizdir. Komisyon ve kazanç/hakediş detayları iş türü ve süreç koşullarına göre değişebilir."},{question:"Hangi işler bana uygun?",answer:"Araç tipi, rota ve tarih kriterlerine göre uygun işleri listeleyebilir veya size atanan işleri görüntüleyebilirsiniz."}]},{category:"İş Kabulü",icon:R,items:[{question:"Bir işi nasıl kabul ederim?",answer:"İş detayına girip şartları kontrol edin. Uygunsa kabul ederek işi aktif listenize alabilirsiniz."},{question:"İşi kabul etmeden önce soru sorabilir miyim?",answer:"Evet. İş detayından mesajlaşarak yük, adres, teslimat zamanı ve evrak detaylarını netleştirebilirsiniz."},{question:"İş detaylarında nelere dikkat etmeliyim?",answer:"Adresler, zaman aralığı, yük tipi/ölçüleri, araç gereksinimi ve özel talimatları kontrol edin. Uygun olmayan koşullarda işi kabul etmeden önce mutlaka mesajlaşın."},{question:"Aktif işlerimi nereden yönetirim?",answer:"Panelinizdeki “İşlerim” alanından kabul ettiğiniz işleri görüntüleyip süreç adımlarını yönetebilirsiniz."}]},{category:"Teslimat Süreci",icon:$,items:[{question:"Durum güncellemelerini nasıl yaparım?",answer:"Aktif iş detayından süreç adımlarını takip ederek durum güncellemelerini yapabilirsiniz. Bu sayede gönderici/nakliyeci süreci anlık izler."},{question:"Teslimat kanıtı gerekiyor mu?",answer:"Bazı işler için teslimat doğrulaması veya evrak gerekebilir. İş detayındaki talimatları takip edin."},{question:"Teslimat süresi ne kadar?",answer:"Teslimat süresi mesafe ve teslimat planına göre değişir. İş detayında tahmini süre/plan bilgisi yer alır."},{question:"İş sırasında problem olursa ne yapmalıyım?",answer:"Önce mesajlaşma üzerinden bilgilendirme yapın. Çözülemezse destek talebi oluşturarak süreci kayıt altına alabilirsiniz."}]},{category:"Kazanç ve Cüzdan",icon:$,items:[{question:"Kazancımı nereden takip ederim?",answer:"Cüzdan/Gelir ekranından kazanç ve hakediş durumunuzu takip edebilirsiniz."},{question:"Kazanç ne zaman görünür?",answer:"Kazanç görünürlüğü teslimat doğrulaması ve süreç koşullarına göre değişebilir. Durumu cüzdan ekranından takip edebilirsiniz."},{question:"Kesinti/komisyon var mı?",answer:"Komisyon ve kesintiler iş türü ve süreç koşullarına göre değişebilir. Detay için iş/sözleşme koşullarını inceleyebilirsiniz."}]},{category:"İptal",icon:te,items:[{question:"İş iptal edilebilir mi?",answer:"İş, taşıma başlamadan önce uygun durumdayken iptal edilebilir. Taşıma başladıktan sonra iptal koşulları değişebilir."},{question:"İptal durumunda ne yapmalıyım?",answer:"İptal sebebini iş kaydı üzerinden paylaşın ve gerekirse destek talebi oluşturun. Süreç koşullarına göre değerlendirme yapılır."}]}],y=async()=>{var e;try{u(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=await fetch(Zs("/api/support/tickets"),{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json(),a=(null==(e=null==t?void 0:t.data)?void 0:e.tickets)||(null==t?void 0:t.data)||(null==t?void 0:t.tickets)||[];o(Array.isArray(a)?a:[])}}catch(t){}finally{u(!1)}};l.useEffect(()=>{(async()=>{try{const e=await fetch(Zs("/api/support/categories"));if(e.ok){const t=await e.json(),s=(null==t?void 0:t.data)||(null==t?void 0:t.categories)||[];m(Array.isArray(s)?s:[])}}catch(e){}})(),y()},[]);const j=l.useCallback(()=>{n(!0),window.setTimeout(()=>{var e,t;null==(e=document.getElementById("support-section"))||e.scrollIntoView({behavior:"smooth",block:"start"}),null==(t=document.getElementById("support-category"))||t.focus()},50)},[]),v=b.flatMap(e=>e.items),N=v.filter(e=>e.question.toLowerCase().includes(a.toLowerCase())||e.answer.toLowerCase().includes(a.toLowerCase()));return Ot.jsxs("div",{className:"min-h-screen bg-white",children:[Ot.jsxs(Rs,{children:[Ot.jsx("title",{children:"Yardım ve Destek Merkezi - Taşıyıcı | YolNext"}),Ot.jsx("meta",{name:"description",content:"YolNext Yardım ve Destek Merkezi - SSS, kapsamlı rehberler ve profesyonel destek talebi hizmetleri"})]}),Ot.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[Ot.jsx(Ol,{items:[{label:"Ana Sayfa",href:"/tasiyici/dashboard"},{label:"Yardım ve Destek Merkezi",href:"/tasiyici/help"}]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-6 text-white shadow-2xl mb-8",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-40 translate-x-40"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-32 -translate-x-32"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Ot.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl border border-white/20",children:Ot.jsx(ce,{className:"w-8 h-8 text-white"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"YolNext Yardım ve Destek Merkezi"}),Ot.jsx("p",{className:"text-slate-200 text-lg leading-relaxed",children:"Türkiye'nin lider lojistik platformunda size yardımcı olmak için buradayız. Hızlı cevaplar, kapsamlı rehberler ve profesyonel destek hizmetlerimizden faydalanın."})]})]}),Ot.jsx("div",{className:"max-w-2xl",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-300 w-5 h-5"}),Ot.jsx("input",{type:"text",placeholder:"Sorunuzu arayın...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-12 pr-4 py-3.5 border border-white/20 bg-white/10 backdrop-blur-sm rounded-xl focus:border-white/40 focus:ring-2 focus:ring-white/20 outline-none transition-all text-white placeholder:text-slate-300"})]})})]})]}),!1,Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Hızlı Başlangıç Rehberi"}),Ot.jsx("p",{className:"text-slate-600",children:"5 adımda YolNext'i kullanmaya başlayın"})]})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:g.map((e,t)=>{const s=e.icon;return Ot.jsxs("div",{className:"relative",children:[Ot.jsxs("div",{className:"bg-slate-50 border border-gray-100 rounded-lg p-5 h-full",children:[Ot.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-slate-800 to-blue-900 rounded-lg mb-3 mx-auto",children:Ot.jsx(s,{className:"w-5 h-5 text-white"})}),Ot.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-slate-800 to-blue-900 text-white rounded-full flex items-center justify-center font-bold text-xs",children:e.step}),Ot.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2 text-center",children:e.title}),Ot.jsx("p",{className:"text-xs text-slate-600 text-center",children:e.description})]}),t<g.length-1&&Ot.jsx("div",{className:"hidden md:block absolute top-1/2 -right-2 transform -translate-y-1/2",children:Ot.jsx(K,{className:"w-4 h-4 text-slate-400"})})]},t)})})]}),Ot.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 mb-6",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ot.jsx(W,{className:"w-6 h-6 text-slate-900"}),Ot.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Sık Sorulan Sorular"})]}),a?Ot.jsxs("div",{className:"mb-4 text-slate-600 text-sm",children:[Ot.jsx("strong",{children:N.length})," sonuç bulundu"]}):Ot.jsx("div",{className:"mb-6",children:Ot.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((e,t)=>{const a=e.icon;return Ot.jsxs("button",{onClick:()=>{const t=b.findIndex(t=>t.category===e.category),a=b.slice(0,t).reduce((e,t)=>e+t.items.length,0);s(a)},className:"flex items-center gap-2 px-3 py-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 border border-gray-200 transition-colors text-sm font-medium",children:[Ot.jsx(a,{className:"w-4 h-4"}),e.category]},t)})})}),Ot.jsx("div",{className:"space-y-3",children:(a?N:v).map((e,a)=>{const l=t===a;return Ot.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:border-blue-300 transition-all",children:[Ot.jsxs("button",{onClick:()=>(e=>{s(t===e?null:e)})(a),className:"w-full p-4 flex items-center justify-between text-left hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:Ot.jsx(ve,{className:"w-4 h-4 text-slate-600"})})}),Ot.jsx("div",{className:"flex-1",children:Ot.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1",children:e.question})})]}),l?Ot.jsx(Ue,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"}):Ot.jsx(Ve,{className:"w-5 h-5 text-slate-400 flex-shrink-0 ml-4"})]}),l&&Ot.jsx("div",{className:"px-4 pb-4 pt-0 border-t border-gray-200",children:Ot.jsx("div",{className:"pl-11 pt-3",children:Ot.jsx("p",{className:"text-slate-600 leading-relaxed text-sm",children:e.answer})})})]},a)})}),a&&0===N.length&&Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(me,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),Ot.jsx("p",{className:"text-slate-600",children:"Aradığınız soru bulunamadı. Lütfen farklı bir arama terimi deneyin."})]})]}),!1,!1,r&&Ot.jsxs("div",{id:"support-section",className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 mb-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsxs("div",{className:"relative z-10 text-center mb-8",children:[Ot.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:Ot.jsx(he,{className:"w-8 h-8 text-white"})}),Ot.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Profesyonel Destek Hizmeti"}),Ot.jsx("p",{className:"text-slate-200 max-w-2xl mx-auto text-lg",children:"FAQ bölümünde aradığınızı bulamadınız mı? Uzman destek ekibimizden kişiselleştirilmiş yardım alın."})]}),Ot.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(G,{className:"w-5 h-5 text-slate-900"}),"Mevcut Destek Talepleriniz (",d.length,")"]}),x?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-3"}),Ot.jsx("p",{className:"text-slate-600",children:"Destek talepleri yükleniyor..."})]}):0===d.length?Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(f,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),Ot.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Henüz destek talebiniz bulunmuyor"}),Ot.jsx("p",{className:"text-slate-600",children:"İlk destek talebinizi oluşturarak başlayabilirsiniz."})]}):Ot.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:d.map(e=>Ot.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsx("h4",{className:"font-medium text-slate-900 text-sm",children:e.subject}),Ot.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["#",e.ticket_number]})]}),Ot.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[Ot.jsx(L,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("tr-TR")]})]},e.id))})]}),Ot.jsxs("div",{id:"new-ticket-form",className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:[Ot.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[Ot.jsx(ue,{className:"w-5 h-5 text-slate-900"}),"Yeni Destek Talebi Oluştur"]}),Ot.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),h.category&&h.subject&&h.description)try{u(!0);const t=localStorage.getItem("authToken")||localStorage.getItem("token"),s=new FormData;s.append("category",h.category),s.append("priority",h.priority),s.append("subject",h.subject),s.append("description",h.description),h.relatedShipmentId&&s.append("relatedShipmentId",h.relatedShipmentId);const a=await fetch(Zs("/api/support/tickets"),{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s});if(a.ok)yr(e,"SUPPORT_TICKET_CREATED","success"),p({category:"",priority:"medium",subject:"",description:"",relatedShipmentId:""}),y();else{const t=await a.json().catch(()=>null);yr(e,"OPERATION_FAILED","error",(null==t?void 0:t.message)||"Destek talebi oluşturulurken bir hata oluştu. Lütfen tekrar deneyin.")}}catch(s){yr(e,"NETWORK_ERROR","error")}finally{u(!1)}else yr(e,"REQUIRED_FIELDS","error")},className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Kategori *"}),Ot.jsxs("select",{id:"support-category",value:h.category,onChange:e=>p({...h,category:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",required:!0,children:[Ot.jsx("option",{value:"",children:"Kategori seçin"}),c.map(e=>Ot.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Konu *"}),Ot.jsx("input",{type:"text",value:h.subject,onChange:e=>p({...h,subject:e.target.value}),className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white text-slate-900",placeholder:"Destek talebinizin konusu",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Açıklama *"}),Ot.jsx("textarea",{value:h.description,onChange:e=>p({...h,description:e.target.value}),rows:4,className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none bg-white text-slate-900",placeholder:"Sorununuzu detaylı olarak açıklayın",required:!0})]}),Ot.jsx("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-slate-800 to-blue-900 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Gönderiliyor..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ue,{className:"w-4 h-4"}),"Destek Talebi Oluştur"]})})]})]})]})]}),Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 rounded-3xl p-8 text-white shadow-2xl",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-indigo-400/10 rounded-full -translate-y-32 translate-x-32"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-slate-400/10 to-blue-400/10 rounded-full translate-y-24 -translate-x-24"}),Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-white"}),Ot.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Hala Yardıma İhtiyacınız mı Var?"}),Ot.jsx("p",{className:"text-slate-200 mb-8 max-w-2xl mx-auto",children:"Sorularınız için bizimle iletişime geçebilirsiniz. Destek ekibimiz size yardımcı olmaktan mutluluk duyar."}),Ot.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:Ot.jsxs("button",{type:"button",onClick:j,className:"bg-white text-slate-900 px-6 py-3 rounded-lg font-semibold hover:bg-slate-100 transition-colors flex items-center gap-2 shadow-lg",children:[Ot.jsx(ue,{className:"w-5 h-5"}),"Destek Talebi Oluştur"]})})]})]})]})]})},_n=()=>{var e,t;const[s,a]=l.useState(""),[i,r]=l.useState(""),[n,d]=l.useState(!1),[c,x]=l.useState(!1),[u,h]=l.useState(""),{login:p,logout:g}=sa(),b=o(),f=(null==(t=null==(e=m().state)?void 0:e.from)?void 0:t.pathname)||`${Aa()}/assistant`;return Ot.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-10",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Admin Giriş - YolNext"})}),Ot.jsx("div",{className:"w-full max-w-md",children:Ot.jsxs("div",{className:"card p-8",children:[Ot.jsxs("div",{className:"flex flex-col items-center mb-6",children:[Ot.jsx(Da,{size:"xl",variant:"normal",showText:!1,className:"text-white"}),Ot.jsxs("div",{className:"mt-4 flex items-center gap-2 text-slate-900 font-bold",children:[Ot.jsx(U,{className:"w-5 h-5"}),"Admin Girişi"]}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Gizli yönetim girişi"})]}),u&&Ot.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[Ot.jsx(te,{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),Ot.jsx("p",{className:"text-sm text-red-700",children:u})]}),Ot.jsxs("form",{onSubmit:async e=>{var t;e.preventDefault(),x(!0),h("");try{const e=await p(s,i);if(!e.success)return void h("Giriş bilgileri hatalı");if("admin"!==(null==(t=e.user)?void 0:t.role))return g(),void h("Bu giriş sadece admin kullanıcılar içindir");b(f,{replace:!0})}catch{h("Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.")}finally{x(!1)}},className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"E-posta"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),Ot.jsx("input",{className:"input pl-10",type:"email",value:s,onChange:e=>a(e.target.value),required:!0})]})]}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Şifre"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),Ot.jsx("input",{className:"input pl-10 pr-12",type:n?"text":"password",value:i,onChange:e=>r(e.target.value),required:!0}),Ot.jsx("button",{type:"button",onClick:()=>d(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:n?Ot.jsx(ae,{className:"w-5 h-5"}):Ot.jsx(Q,{className:"w-5 h-5"})})]})]}),Ot.jsx("button",{type:"submit",className:"w-full btn-primary "+(c?"opacity-75 cursor-not-allowed":""),disabled:c,children:c?"Giriş yapılıyor...":"Giriş Yap"})]})]})})]})},In=()=>{const e=m(),[t,s]=l.useState(!0),[a,i]=l.useState(""),[r,n]=l.useState([]),[d,o]=l.useState(""),[c,x]=l.useState(""),[u,h]=l.useState(1),[p]=l.useState(20),[g,b]=l.useState("all"),[f,y]=l.useState("all"),[j,v]=l.useState(!1),[N,k]=l.useState(null),[w,S]=l.useState(""),[z,T]=l.useState(!1),[C,A]=l.useState("active"),[D,E]=l.useState(""),[I,K]=l.useState(!1),[M,$]=l.useState(null),[B,R]=l.useState(!1),[O,P]=l.useState(""),[L,G]=l.useState(null),[F,Y]=l.useState([]),[q,H]=l.useState("summary");l.useEffect(()=>{const e=setTimeout(()=>x(d.trim()),350);return()=>clearTimeout(e)},[d]);const U=l.useMemo(()=>{const e=new URLSearchParams;return c&&e.set("search",c),"all"!==g&&e.set("role",g),"all"!==f&&e.set("status",f),e.set("page",String(u)),e.set("limit",String(p)),e.toString()},[c,g,f,u,p]),V=async()=>{try{s(!0),i("");const e=localStorage.getItem("authToken"),t=await fetch(Zs(`/api/admin/users?${U}`),{headers:{Authorization:`Bearer ${e||""}`,"Content-Type":"application/json"}}),a=await t.json().catch(()=>null);if(!t.ok){const e=(null==a?void 0:a.message)||`Users yüklenemedi (HTTP ${t.status})`;throw new Error(e)}n(Array.isArray(null==a?void 0:a.data)?a.data:[])}catch(e){i((null==e?void 0:e.message)||"Users yüklenemedi")}finally{s(!1)}};l.useEffect(()=>{V()},[U]),l.useEffect(()=>{const t=new URLSearchParams(e.search).get("openUserId");if(!t)return;const s=r.find(e=>String(e.id)===String(t));Z(s||{id:t,email:t,role:"-",isActive:!0})},[e.search,r]),l.useEffect(()=>{if(!D)return;const e=setTimeout(()=>E(""),2500);return()=>clearTimeout(e)},[D]);const J=e=>{z||(A("active"),k(e),S(""),v(!0))},W=e=>{z||(A("flag"),k(e),S(""),v(!0))},Z=async e=>{var t,s,a;K(!0),$(e),P(""),G(null),Y([]),H("summary");try{R(!0);const l=localStorage.getItem("authToken"),i=await fetch(Zs(`/api/admin/users/${encodeURIComponent(String(e.id))}/summary`),{headers:{Authorization:`Bearer ${l||""}`,"Content-Type":"application/json"}}),r=await i.json().catch(()=>null);if(!i.ok)throw new Error((null==r?void 0:r.message)||`User detail yüklenemedi (HTTP ${i.status})`);G((null==(t=null==r?void 0:r.data)?void 0:t.summary)||null),Y(Array.isArray(null==(s=null==r?void 0:r.data)?void 0:s.lastAudit)?r.data.lastAudit:[]),(null==(a=null==r?void 0:r.data)?void 0:a.user)&&$(e=>({...e,...r.data.user}))}catch(l){P((null==l?void 0:l.message)||"User detail yüklenemedi")}finally{R(!1)}},X=()=>{z||(K(!1),$(null),G(null),Y([]),P(""),H("summary"))},Q=()=>{z||(v(!1),k(null),S(""),A("active"))},ee=e=>{const t=e.toLowerCase();return["pending","waiting","onay bekliyor"].includes(t)?Ot.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:"Onay Bekliyor"}):["disabled","banned","blocked","engelli"].includes(t)?Ot.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:"Engelli"}):Ot.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Aktif"})},te=e=>{const t=(e||"").toLowerCase();return"tasiyici"===t||"carrier"===t?"Taşıyıcı":"nakliyeci"===t||"shipper"===t?"Nakliyeci":"corporate"===t?"Kurumsal":"Bireysel"},se=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("tr-TR")};return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Kullanıcılar - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-10",children:[Ot.jsx("div",{className:"mb-6 flex items-start justify-between gap-4",children:Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Kullanıcılar"}),Ot.jsx("p",{className:"text-slate-600",children:"Arama, filtre ve hızlı aksiyonlar"})]})}),D&&Ot.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:D}),a&&Ot.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:a}),Ot.jsxs("div",{className:"card p-6 lg:p-7",children:[Ot.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:Ot.jsxs("div",{className:"card p-6 space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(me,{className:"w-4 h-4 text-slate-400"}),Ot.jsx("input",{type:"text",placeholder:"isim / e-posta / telefon / userId",value:d,onChange:e=>o(e.target.value),className:"input flex-1"})]}),Ot.jsxs("select",{value:g,onChange:e=>{b(e.target.value),h(1)},className:"input",children:[Ot.jsx("option",{value:"all",children:"Tüm Roller"}),Ot.jsx("option",{value:"tasiyici",children:"Taşıyıcı"}),Ot.jsx("option",{value:"nakliyeci",children:"Nakliyeci"}),Ot.jsx("option",{value:"corporate",children:"Kurumsal"}),Ot.jsx("option",{value:"individual",children:"Bireysel"})]}),Ot.jsxs("select",{value:f,onChange:e=>{y(e.target.value),h(1)},className:"input",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"active",children:"Aktif"}),Ot.jsx("option",{value:"pending",children:"Onay Bekliyor"}),Ot.jsx("option",{value:"banned",children:"Engelli"})]})]}),Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[Ot.jsx("th",{className:"py-3 font-semibold",children:"ID"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Ad Soyad"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Rol"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"E-posta"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Telefon"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Kayıt Tarihi"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Durum"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:t?Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"Yükleniyor..."})}):a?Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,className:"py-6 text-center text-red-600",children:a})}):0===r.length?Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"Kayıt bulunamadı"})}):r.map(e=>{const t=(e.status||"").toLowerCase(),s="pending"===t||"waiting"===t||"unapproved"===t,a="banned"===t||"blocked"===t||!1===e.isActive;return Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsx("td",{className:"py-3",children:e.id}),Ot.jsx("td",{className:"py-3 font-semibold text-slate-900",children:e.fullName||`${e.firstName||""} ${e.lastName||""}`.trim()||"-"}),Ot.jsx("td",{className:"py-3",children:te(e.role)}),Ot.jsx("td",{className:"py-3",children:Ot.jsx("button",{onClick:()=>Z(e),className:"text-blue-600 hover:text-blue-700 font-semibold",children:e.email||"-"})}),Ot.jsx("td",{className:"py-3 text-slate-700",children:e.phone||e.phoneNumber||"-"}),Ot.jsx("td",{className:"py-3 text-slate-700",children:se(e.createdAt||e.created_at)}),Ot.jsx("td",{className:"py-3",children:ee(e.status||(!1===e.isActive?"disabled":"active"))}),Ot.jsx("td",{className:"py-3",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{onClick:()=>Z(e),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-50 hover:bg-blue-100 text-blue-700 font-semibold",children:"Detay"}),s&&Ot.jsxs("button",{onClick:()=>{A("active"),k({...e,isActive:!0}),S("Onaylandı"),v(!0)},className:"px-3 py-1.5 text-xs rounded-lg bg-green-50 hover:bg-green-100 text-green-700 font-semibold flex items-center gap-1",children:[Ot.jsx(fe,{className:"w-3 h-3"}),"Onayla"]}),Ot.jsxs("button",{onClick:()=>J(e),className:"px-3 py-1.5 text-xs rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold flex items-center gap-1",children:[a?Ot.jsx(Nt,{className:"w-3 h-3"}):Ot.jsx(kt,{className:"w-3 h-3"}),a?"Engeli Kaldır":"Engelle"]}),Ot.jsxs("button",{onClick:()=>W(e),className:"px-3 py-1.5 text-xs rounded-lg bg-amber-50 hover:bg-amber-100 text-amber-800 font-semibold flex items-center gap-1",children:[Ot.jsx(wt,{className:"w-3 h-3"}),"Flag"]})]})})]},e.id)})})]})}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 text-sm text-slate-600",children:[Ot.jsxs("div",{children:[D&&Ot.jsx("span",{className:"text-green-700 font-semibold",children:D}),!D&&Ot.jsxs("span",{children:["Toplam ",r.length," kayıt"]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{disabled:1===u||t,onClick:()=>h(e=>Math.max(1,e-1)),className:"px-3 py-1 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50",children:"Önceki"}),Ot.jsxs("span",{children:["Sayfa: ",u]}),Ot.jsx("button",{disabled:r.length<p||t,onClick:()=>h(e=>e+1),className:"px-3 py-1 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50",children:"Sonraki"})]})]})]})}),j&&N&&Ot.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Q}),Ot.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-2xl shadow-xl border border-gray-200 p-6",children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900",children:"flag"===C?"Flag oluştur":!1===N.isActive?"Kullanıcıyı aç":"Kullanıcıyı banla"}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:N.email||N.id}),Ot.jsxs("div",{className:"mt-4",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Sebep"}),Ot.jsx("textarea",{className:"input mt-2 min-h-[90px]",value:w,onChange:e=>S(e.target.value),placeholder:"Sebep yaz (zorunlu)"})]}),Ot.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[Ot.jsx("button",{className:"btn-secondary",onClick:Q,disabled:z,children:"Vazgeç"}),Ot.jsx("button",{className:"btn-primary",onClick:"flag"===C?async()=>{const e=N||M;if(!e)return void i("Kullanıcı bulunamadı");const t=w.trim();if(t.length<3)i("Sebep en az 3 karakter olmalı");else try{T(!0),i("");const s=localStorage.getItem("authToken"),a=await fetch(Zs("/api/admin/flags"),{method:"POST",headers:{Authorization:`Bearer ${s||""}`,"Content-Type":"application/json"},body:JSON.stringify({type:"spam",targetType:"user",targetId:String(e.id),reason:t})}),l=await a.json().catch(()=>null);if(!a.ok)throw new Error((null==l?void 0:l.message)||`Flag oluşturulamadı (HTTP ${a.status})`);E("Flag oluşturuldu"),Q(),await Z(e)}catch(s){i((null==s?void 0:s.message)||"Flag oluşturulamadı")}finally{T(!1)}}:async()=>{var e,t;const s=N;if(!s)return;const a=w.trim();if(a.length<3)i("Sebep en az 3 karakter olmalı");else try{T(!0),i("");const l=localStorage.getItem("authToken"),r=!!(!1===s.isActive),n=await fetch(Zs(`/api/admin/users/${encodeURIComponent(String(s.id))}/active`),{method:"PATCH",headers:{Authorization:`Bearer ${l||""}`,"Content-Type":"application/json"},body:JSON.stringify({isActive:r,reason:a})}),d=await n.json().catch(()=>null);if(!n.ok){const e=(null==d?void 0:d.message)||`İşlem başarısız (HTTP ${n.status})`;throw new Error(e)}if(r||!1!==(null==(e=null==d?void 0:d.data)?void 0:e.createdFlag))E(r?"Kullanıcı açıldı":"Kullanıcı banlandı");else{const e=(null==(t=null==d?void 0:d.data)?void 0:t.flagError)?` (flag: ${String(d.data.flagError)})`:"";E(`Kullanıcı banlandı${e}`)}Q(),await V(),I&&(null==M?void 0:M.id)===s.id&&await Z({...M,isActive:r})}catch(l){i((null==l?void 0:l.message)||"İşlem başarısız")}finally{T(!1)}},disabled:z,children:z?"İşleniyor...":"Onayla"})]})]})]}),I&&M&&Ot.jsxs("div",{className:"fixed inset-0 z-40",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:X}),Ot.jsx("div",{className:"absolute right-0 top-0 h-full w-full max-w-xl bg-white border-l border-gray-200 shadow-2xl",children:Ot.jsxs("div",{className:"h-full flex flex-col",children:[Ot.jsxs("div",{className:"p-5 border-b border-gray-200 flex items-start justify-between gap-4 sticky top-0 bg-white z-10",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Kullanıcı Detayı"}),Ot.jsx("div",{className:"text-xl font-bold tracking-tight text-slate-900 mt-1",children:M.email||M.id}),Ot.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["Rol: ",M.role||"-"]})]}),Ot.jsx("button",{className:"btn-secondary",onClick:X,children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(_,{className:"w-4 h-4"})," Kapat"]})})]}),Ot.jsx("div",{className:"px-5 pt-4 pb-4 border-b border-gray-200 bg-white sticky top-[92px] z-10",children:Ot.jsxs("div",{className:"flex flex-col gap-3",children:[Ot.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ot.jsx("button",{className:!1===M.isActive?"btn-primary":"btn-secondary",onClick:()=>J(M),disabled:z||B,children:Ot.jsx("span",{className:"inline-flex items-center gap-2",children:!1===M.isActive?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Nt,{className:"w-4 h-4"})," Aç"]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(St,{className:"w-4 h-4"})," Ban"]})})}),Ot.jsx("button",{className:"btn-secondary",onClick:()=>W(M),disabled:z||B,children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(wt,{className:"w-4 h-4"})," Flag"]})})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+("summary"===q?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>H("summary"),children:"Özet"}),Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+("activity"===q?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>H("activity"),children:"Aktivite"}),Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+("related"===q?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>H("related"),children:"İlişkili"})]}),Ot.jsx("div",{className:"text-xs text-slate-600",children:"Kritik aksiyonlarda sebep zorunlu ve audit kaydı tutulur."})]})}),Ot.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[O&&Ot.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:O}),"summary"===q&&Ot.jsxs("div",{className:"card p-5",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Özet"}),Ot.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Durum"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:!1===M.isActive?"Pasif (Ban)":"Aktif"})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Risk"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:((null==L?void 0:L.flagsOpen)??0)>0||((null==L?void 0:L.complaintsOpen)??0)>0?"İzleme":"Normal"})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Açık Flag"}),Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:(null==L?void 0:L.flagsOpen)??0})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Açık Şikayet"}),Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:(null==L?void 0:L.complaintsOpen)??0})]})]}),Ot.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Not"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Bu bölümde ileride doğrulama bilgileri ve kullanıcı sinyalleri toplanacak."})]})]}),"activity"===q&&Ot.jsxs("div",{className:"card p-5",children:[Ot.jsx("div",{className:"flex items-center justify-between",children:Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Aktivite"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Son 25 aksiyon"})]})}),B?Ot.jsx("div",{className:"text-sm text-slate-600 mt-3",children:"Yükleniyor..."}):0===F.length?Ot.jsxs("div",{className:"mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Bu kullanıcı için henüz audit kaydı oluşmamış."})]}):Ot.jsx("div",{className:"mt-4 space-y-3",children:F.map((e,t)=>Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsxs("div",{className:"flex flex-col items-center pt-1",children:[Ot.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),Ot.jsx("div",{className:"w-px flex-1 bg-gray-200 mt-2"})]}),Ot.jsxs("div",{className:"flex-1 p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.action}),Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 whitespace-nowrap",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"})]}),e.resourceType&&Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[e.resourceType,e.resourceId?`:${e.resourceId}`:""]})]})]},(null==e?void 0:e.id)||t))})]}),"related"===q&&Ot.jsxs("div",{className:"card p-5",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"İlişkili"}),Ot.jsxs("div",{className:"mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Hazırlanıyor"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"İlişkili gönderiler/teklifler/mesajlar backend onayı sonrası burada görünecek."})]}),F.map((e,t)=>Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsxs("div",{className:"flex flex-col items-center pt-1",children:[Ot.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),Ot.jsx("div",{className:"w-px flex-1 bg-gray-200 mt-2"})]}),Ot.jsxs("div",{className:"flex-1 p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.action}),Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 whitespace-nowrap",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"})]}),e.resourceType&&Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[e.resourceType,e.resourceId?`:${e.resourceId}`:""]})]})]},(null==e?void 0:e.id)||t))]})]})]})})]})]})]})]})},Kn=()=>Ot.jsx(u,{to:`${Aa()}/ops`,replace:!0}),Mn=()=>{const[e,t]=l.useState("audit"),[s,a]=l.useState(!0),[i,r]=l.useState(""),[n,d]=l.useState([]),[o,c]=l.useState([]),[m,x]=l.useState([]),u=l.useRef(0),h=l.useRef(null),p=()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"",g=async e=>{const t=++u.current;h.current&&h.current.abort();const s=new AbortController;h.current=s;try{if(a(!0),r(""),"audit"===e){const e=await fetch(Zs("/api/admin/audit?limit=50"),{headers:{Authorization:`Bearer ${p()}`,"Content-Type":"application/json"},signal:s.signal}),a=await e.json().catch(()=>null);if(!e.ok)throw new Error((null==a?void 0:a.message)||`Audit yüklenemedi (HTTP ${e.status})`);t===u.current&&d(Array.isArray(null==a?void 0:a.data)?a.data:[])}if("flags"===e){const e=await fetch(Zs("/api/admin/flags?limit=50"),{headers:{Authorization:`Bearer ${p()}`,"Content-Type":"application/json"},signal:s.signal}),a=await e.json().catch(()=>null);if(!e.ok)throw new Error((null==a?void 0:a.message)||`Flag kayıtları yüklenemedi (HTTP ${e.status})`);t===u.current&&c(Array.isArray(null==a?void 0:a.data)?a.data:[])}if("complaints"===e){const e=await fetch(Zs("/api/admin/complaints?limit=50"),{headers:{Authorization:`Bearer ${p()}`,"Content-Type":"application/json"},signal:s.signal}),a=await e.json().catch(()=>null);if(!e.ok)throw new Error((null==a?void 0:a.message)||`Şikayetler yüklenemedi (HTTP ${e.status})`);t===u.current&&x(Array.isArray(null==a?void 0:a.data)?a.data:[])}}catch(l){"AbortError"!==(null==l?void 0:l.name)&&t===u.current&&r((null==l?void 0:l.message)||"Ops yüklenemedi")}finally{t===u.current&&a(!1)}};l.useEffect(()=>{g(e)},[e]),l.useEffect(()=>()=>{h.current&&h.current.abort()},[]);const b=({k:a,label:l})=>Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+(e===a?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>t(a),disabled:s,children:l});return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Sistem - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-10",children:[Ot.jsxs("div",{className:"mb-6 lg:mb-8 flex items-start justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Sistem"}),Ot.jsx("p",{className:"text-slate-600 mt-1",children:"Audit, flag, şikayet kayıtları"})]}),Ot.jsx("button",{className:"btn-secondary",onClick:()=>g(e),disabled:s,children:"Yenile"})]}),Ot.jsxs("div",{className:"mb-5 flex flex-wrap gap-2",children:[Ot.jsx(b,{k:"audit",label:"Denetim"}),Ot.jsx(b,{k:"flags",label:"İşaretler"}),Ot.jsx(b,{k:"complaints",label:"Şikayet"})]}),i&&Ot.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-red-700",children:i}),Ot.jsx("div",{className:"mt-3 flex justify-end",children:Ot.jsx("button",{className:"btn-secondary",onClick:()=>g(e),disabled:s,children:"Tekrar dene"})})]}),s?Ot.jsx("div",{className:"flex items-center justify-center py-10",children:Ot.jsx(Pl,{message:"Yükleniyor..."})}):Ot.jsxs("div",{className:"card p-0 overflow-hidden",children:["audit"===e&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"hidden md:block",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-left",children:[Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Zaman"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Aksiyon"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Kaynak"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Kullanıcı"})]})}),Ot.jsx("tbody",{children:0===n.length?Ot.jsx("tr",{children:Ot.jsx("td",{className:"p-6 text-slate-600",colSpan:4,children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz audit kaydı oluşmamış."})]})})}):n.map((e,t)=>Ot.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/70 transition-colors "+(t%2==1?"bg-white":"bg-gray-50/30"),children:[Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("td",{className:"p-4 text-slate-900 font-semibold",children:(null==e?void 0:e.action)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.resource_type)?`${e.resource_type}:${e.resource_id||"-"}`:"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.user_id)??"-"})]},(null==e?void 0:e.id)||t))})]})})}),Ot.jsx("div",{className:"md:hidden",children:0===n.length?Ot.jsx("div",{className:"p-6 text-center",children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz audit kaydı oluşmamış."})]})}):Ot.jsx("div",{className:"space-y-4 p-4",children:n.map((e,t)=>Ot.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[Ot.jsx("div",{className:"flex items-start justify-between mb-3",children:Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900 mb-1",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.action)||"-"})]})}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Kaynak"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.resource_type)?`${e.resource_type}:${e.resource_id||"-"}`:"-"})]}),Ot.jsxs("div",{className:"text-xs text-slate-500 pt-2 border-t border-gray-100",children:["User ID: ",(null==e?void 0:e.user_id)??"-"]})]},(null==e?void 0:e.id)||t))})})]}),"flags"===e&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"hidden md:block",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-left",children:[Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Zaman"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Type"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Target"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Status"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Reason"})]})}),Ot.jsx("tbody",{children:0===o.length?Ot.jsx("tr",{children:Ot.jsx("td",{className:"p-6 text-slate-600",colSpan:5,children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz flag kaydı yok."})]})})}):o.map((e,t)=>Ot.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/70 transition-colors "+(t%2==1?"bg-white":"bg-gray-50/30"),children:[Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("td",{className:"p-4 text-slate-900 font-semibold",children:(null==e?void 0:e.type)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.target_type)?`${e.target_type}:${e.target_id||"-"}`:"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.status)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.reason)||"-"})]},(null==e?void 0:e.id)||t))})]})})}),Ot.jsx("div",{className:"md:hidden",children:0===o.length?Ot.jsx("div",{className:"p-6 text-center",children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz flag kaydı yok."})]})}):Ot.jsx("div",{className:"space-y-4 p-4",children:o.map((e,t)=>Ot.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900 mb-1",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.type)||"-"})]}),Ot.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 flex-shrink-0",children:(null==e?void 0:e.status)||"-"})]}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Target"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.target_type)?`${e.target_type}:${e.target_id||"-"}`:"-"})]}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Sebep"}),Ot.jsx("div",{className:"text-sm text-slate-900 bg-gray-50 p-2 rounded-lg",children:(null==e?void 0:e.reason)||"-"})]}),Ot.jsxs("div",{className:"text-xs text-slate-500 pt-2 border-t border-gray-100",children:["ID: ",(null==e?void 0:e.id)||"-"]})]},(null==e?void 0:e.id)||t))})})]}),"complaints"===e&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"hidden md:block",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-left",children:[Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Zaman"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Başlık"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Durum"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Kullanıcı"})]})}),Ot.jsx("tbody",{children:0===m.length?Ot.jsx("tr",{children:Ot.jsx("td",{className:"p-6 text-slate-600",colSpan:4,children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz şikayet kaydı yok."})]})})}):m.map((e,t)=>Ot.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/70 transition-colors "+(t%2==1?"bg-white":"bg-gray-50/30"),children:[Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("td",{className:"p-4 text-slate-900 font-semibold",children:(null==e?void 0:e.title)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.status)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.user_id)??"-"})]},(null==e?void 0:e.id)||t))})]})})}),Ot.jsx("div",{className:"md:hidden",children:0===m.length?Ot.jsx("div",{className:"p-6 text-center",children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz şikayet kaydı yok."})]})}):Ot.jsx("div",{className:"space-y-4 p-4",children:m.map((e,t)=>Ot.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900 mb-1",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.title)||"-"})]}),Ot.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 flex-shrink-0",children:(null==e?void 0:e.status)||"-"})]}),Ot.jsxs("div",{className:"text-xs text-slate-500 pt-2 border-t border-gray-100",children:["User ID: ",(null==e?void 0:e.user_id)??"-"," | ID: ",(null==e?void 0:e.id)||"-"]})]},(null==e?void 0:e.id)||t))})})]})]})]})]})},$n=()=>{var e,t;const[s,a]=l.useState(!0),[i,r]=l.useState(""),[n,d]=l.useState(null),[c,x]=l.useState([]),[u,h]=l.useState(null),[p,g]=l.useState(null),[b,f]=l.useState([]),[y,j]=l.useState(!0),[v,N]=l.useState(""),[k,w]=l.useState("operasyon"),[S,z]=l.useState(""),[T,C]=l.useState(!1),[A,D]=l.useState([]),[E,I]=l.useState("all"),[K,M]=l.useState(!1),[$,B]=l.useState(""),[R,O]=l.useState(!1),[P,L]=l.useState([]),[G,F]=l.useState(!1),[Y,q]=l.useState(""),[H,V]=l.useState(null),[J,W]=l.useState(null),Z=l.useMemo(()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"",[]),X=m(),Q=o(),ee=Aa(),te=async()=>{var e,t,s;try{a(!0),r("");const[l,i]=await Promise.all([fetch(Zs("/api/admin/planner/briefing"),{headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}}),fetch(Zs("/api/admin/inbox"),{headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}})]),n=await l.json().catch(()=>null),o=await i.json().catch(()=>null);if(!l.ok)throw new Error((null==n?void 0:n.message)||`Briefing yüklenemedi (HTTP ${l.status})`);if(!i.ok)throw new Error((null==o?void 0:o.message)||`Triage yüklenemedi (HTTP ${i.status})`);const c=(null==(e=null==n?void 0:n.data)?void 0:e.briefing)||(null==n?void 0:n.briefing)||(null==n?void 0:n.data)||null;d(c);const m=(null==(t=null==o?void 0:o.data)?void 0:t.items)||[];x(Array.isArray(m)?m:[]),h(e=>e||(Array.isArray(m)&&m.length?m[0]:null)),g((null==(s=null==o?void 0:o.data)?void 0:s.counts)||null)}catch(l){r((null==l?void 0:l.message)||"Operasyon masası yüklenemedi")}finally{a(!1)}};l.useEffect(()=>{const e=e=>{!(navigator.platform.toLowerCase().includes("mac")?e.metaKey:e.ctrlKey)||"k"!==e.key&&"K"!==e.key||(e.preventDefault(),M(!0)),"Escape"===e.key&&M(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),l.useEffect(()=>{const e=(null==u?void 0:u.relatedUserId)||(null==u?void 0:u.userId)||null;if(!e)return V(null),W(null),q(""),void F(!1);(async e=>{var t,s;try{F(!0),q(""),V(null),W(null);const a=await fetch(Zs(`/api/admin/users/${encodeURIComponent(e)}/summary`),{headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}}),l=await a.json().catch(()=>null);if(!a.ok)throw new Error((null==l?void 0:l.message)||`Kullanıcı özeti alınamadı (HTTP ${a.status})`);V((null==(t=null==l?void 0:l.data)?void 0:t.user)||null),W((null==(s=null==l?void 0:l.data)?void 0:s.summary)||null)}catch(a){q((null==a?void 0:a.message)||"Kullanıcı detayı yüklenemedi")}finally{F(!1)}})(String(e))},[null==u?void 0:u.userId,null==u?void 0:u.relatedUserId]),l.useEffect(()=>{te()},[]);const se=l.useRef(E);l.useEffect(()=>{se.current=E},[E]);const ae=l.useRef(S);l.useEffect(()=>{ae.current=S},[S]);const le=l.useCallback(async e=>{try{j(!0),N("");const t=new URLSearchParams,s=(null==e?void 0:e.status)??se.current??"all",a=String((null==e?void 0:e.q)??ae.current??"").trim();"all"!==s&&t.set("status",s),a&&t.set("q",a),t.set("limit","100");const l=localStorage.getItem("token")||localStorage.getItem("authToken")||"",i=await fetch(Zs(`/api/admin/shipments?${t.toString()}`),{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}}),r=await i.json().catch(()=>null);if(!i.ok)throw new Error((null==r?void 0:r.message)||`Shipments yüklenemedi (HTTP ${i.status})`);f(Array.isArray(null==r?void 0:r.data)?r.data:[])}catch(t){N((null==t?void 0:t.message)||"Shipments yüklenemedi"),f([])}finally{j(!1)}},[]);l.useEffect(()=>{le({status:E,q:S})},[E,le,S]),l.useEffect(()=>{const e=setTimeout(()=>{le({status:se.current,q:ae.current})},300);return()=>clearTimeout(e)},[S,le]),l.useEffect(()=>{const e=(new URLSearchParams(X.search).get("focus")||"").trim();e&&(z(e),ie(e))},[X.search]);const ie=async e=>{var t;const s=e.trim();if(s.length<2)D([]);else try{C(!0);const e=await fetch(Zs(`/api/admin/search?q=${encodeURIComponent(s)}`),{headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}}),a=await e.json().catch(()=>null);if(!e.ok)throw new Error((null==a?void 0:a.message)||`Arama başarısız (HTTP ${e.status})`);D(Array.isArray(null==(t=null==a?void 0:a.data)?void 0:t.users)?a.data.users:[])}catch{D([])}finally{C(!1)}},re=e=>"operasyon"===e?"Operasyon":"guvenlik"===e?"Güvenlik":"Şikayet",ne=l.useMemo(()=>{const e=null!=(null==p?void 0:p.complaintOpen)?Number(p.complaintOpen):c.filter(e=>"complaint"===(null==e?void 0:e.type)).length,t=null!=(null==p?void 0:p.disputeOpen)?Number(p.disputeOpen):c.filter(e=>"dispute"===(null==e?void 0:e.type)).length,s=null!=(null==p?void 0:p.flagOpen)?Number(p.flagOpen):c.filter(e=>"flag"===(null==e?void 0:e.type)||"audit"===(null==e?void 0:e.type)).length;return{operasyon:null!=(null==p?void 0:p.totalOpen)?Number(p.totalOpen):c.length,guvenlik:s,sikayet:e+t}},[c,p]),de=l.useMemo(()=>"all"===E?b:b.filter(e=>{const t=String((null==e?void 0:e.status)||(null==e?void 0:e.state)||"").toLowerCase();return"active"===E?["active","in_transit","ongoing","yolda","pending","waiting","open","waiting_for_offers","dispatched"].includes(t):"done"===E?["delivered","completed","teslim"].includes(t):"cancelled"===E?["cancelled","iptal","failed"].includes(t):"dispute"!==E||(["dispute","anlasmazlik","flag","complaint","escalated"].includes(t)||"complaint"===(null==e?void 0:e.type)||"flag"===(null==e?void 0:e.type))}),[b,E]),oe=e=>{const t=(e||"").toLowerCase();return["pending","waiting","open"].includes(t)?{text:"Teklif Bekliyor",className:"bg-yellow-100 text-yellow-800"}:["in_transit","active","ongoing","yolda"].includes(t)?{text:"Yolda",className:"bg-blue-100 text-blue-800"}:["delivered","completed","teslim"].includes(t)?{text:"Teslim Edildi",className:"bg-green-100 text-green-800"}:["cancelled","iptal","failed"].includes(t)?{text:"İptal",className:"bg-red-100 text-red-800"}:["dispute","anlasmazlik"].includes(t)?{text:"Sorunlu",className:"bg-amber-100 text-amber-800"}:{text:t||"Bilinmiyor",className:"bg-slate-100 text-slate-700"}},ce=e=>{const t=Number(e||0);return Number.isFinite(t)&&0!==t?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:0}).format(t):"—"},xe=e=>{if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString("tr-TR")},ue=e=>{const t=String((null==e?void 0:e.type)||"").toLowerCase();return"complaint"===t?{label:"Dikkat",className:"inline-flex items-center px-2 py-1 rounded-md bg-amber-50 text-amber-800 border border-amber-200 text-[11px] font-semibold"}:"dispute"===t?{label:"Anlaşmazlık",className:"inline-flex items-center px-2 py-1 rounded-md bg-amber-50 text-amber-800 border border-amber-200 text-[11px] font-semibold"}:"flag"===t?{label:"Kritik",className:"inline-flex items-center px-2 py-1 rounded-md bg-red-50 text-red-700 border border-red-200 text-[11px] font-semibold"}:"audit"===t?{label:"Normal",className:"inline-flex items-center px-2 py-1 rounded-md bg-slate-50 text-slate-700 border border-slate-200 text-[11px] font-semibold"}:"info"===t?{label:"Temiz",className:"inline-flex items-center px-2 py-1 rounded-md bg-gray-50 text-gray-700 border border-gray-200 text-[11px] font-semibold"}:{label:"Normal",className:"inline-flex items-center px-2 py-1 rounded-md bg-slate-50 text-slate-700 border border-slate-200 text-[11px] font-semibold"}},he=l.useMemo(()=>"sikayet"===k?c.filter(e=>"complaint"===(null==e?void 0:e.type)||"dispute"===(null==e?void 0:e.type)):"guvenlik"===k?c.filter(e=>"flag"===(null==e?void 0:e.type)||"audit"===(null==e?void 0:e.type)):c,[c,k]);l.useMemo(()=>{const e=Array.isArray(c)?c.slice():[],t=e=>{const t=(null==e?void 0:e.createdAt)||(null==e?void 0:e.created_at)||null,s=t?new Date(t):null;return s&&!Number.isNaN(s.valueOf())?s.valueOf():0};return e.sort((e,s)=>t(s)-t(e)),e.slice(0,6)},[c]);const pe=l.useMemo(()=>{const e=String((null==u?void 0:u.type)||"").toLowerCase();if(!u)return{title:"Başla",desc:"Soldan bir kuyruk kaydı seç. Sonra detay panelinden tek aksiyonla ilerle.",primary:null};if("complaint"===e){return{title:"Şikayet incele",desc:Boolean((null==u?void 0:u.relatedUserId)||(null==u?void 0:u.userId))?"Şikayetler ekranından kaydı açıp detayları incele. Gerekirse kullanıcı panelinden hızlı aksiyon al.":"Şikayetler ekranından kaydı açıp detayları incele. Kullanıcı bağlantısı yoksa arama ile ilerle.",primary:{label:"Şikayetleri aç",onClick:()=>{const e=String((null==u?void 0:u.id)||"").match(/^complaint-(.+)$/),t=((null==e?void 0:e[1])||"").trim(),s=t?`?openComplaintId=${encodeURIComponent(t)}`:"";Q(`${ee}/complaints${s}`)}}}}if("dispute"===e)return{title:"Anlaşmazlık incele",desc:"Detay için “Vakalar” ekranını açabilir veya arama ile dispute_ref üzerinden ilerleyebilirsin.",primary:{label:"Vakaları aç",onClick:()=>{const e=String((null==u?void 0:u.disputeRef)||"").trim(),t=String((null==u?void 0:u.id)||"").match(/^dispute-(.+)$/),s=(e||(null==t?void 0:t[1])||"").trim(),a=s?`?openDisputeRef=${encodeURIComponent(s)}`:"";Q(`${ee}/cases${a}`)}}};if("flag"===e){const e=Boolean(null==u?void 0:u.userId);return{title:"Risk/Flag incele",desc:e?"Kullanıcı profilinde risk sinyallerini ve audit geçmişini kontrol et. Gerekirse ban/flag aksiyonu al.":"Hedef bilgisi sınırlı. Sistem ekranında kayıtları inceleyebilirsin.",primary:e?{label:"Kullanıcıyı aç",onClick:()=>Q(`${ee}/users?openUserId=${encodeURIComponent(String(u.userId))}`)}:{label:"Sistem kayıtlarını aç",onClick:()=>Q(`${ee}/system`)}}}if("audit"===e){const e=Boolean(null==u?void 0:u.userId);return{title:"Audit kontrolü",desc:e?"Bu aksiyonun hangi kullanıcıyla ilişkili olduğunu kontrol et. Gerekirse kullanıcı profilinden devam et.":"Detaylı inceleme için sistem kayıtlarına geçebilirsin.",primary:e?{label:"Kullanıcıyı aç",onClick:()=>Q(`${ee}/users?openUserId=${encodeURIComponent(String(u.userId))}`)}:{label:"Sistem kayıtlarını aç",onClick:()=>Q(`${ee}/system`)}}}return{title:"İlerle",desc:"Detay panelinden ilgili sayfaya geçip aksiyon al.",primary:{label:"Kullanıcılara git",onClick:()=>Q(`${ee}/users`)}}},[ee,Q,u]),ge=({k:e})=>Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+(k===e?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>w(e),children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx("span",{children:re(e)}),Ot.jsx("span",{className:"inline-flex items-center justify-center min-w-6 px-2 h-5 rounded-full text-[11px] font-bold "+(k===e?"bg-white/15 text-white":"bg-gray-100 text-slate-700"),children:ne[e]??0})]})});return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Operasyon Masası - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-10",children:[Ot.jsxs("div",{className:"mb-6 lg:mb-8 flex items-start justify-between gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center",children:Ot.jsx(U,{className:"w-5 h-5"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Operasyon Masası"}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Sistem yönetimi"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{className:"btn-secondary",onClick:()=>M(!0),title:"Komut Paleti (Ctrl+K)",children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(zt,{className:"w-4 h-4"}),"Ctrl+K"]})}),Ot.jsx("button",{className:"btn-secondary",onClick:te,disabled:s,children:"Yenile"})]})]}),i&&Ot.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:i}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[Ot.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[Ot.jsxs("div",{className:"card p-6",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Komut Araması"}),Ot.jsx("div",{className:"text-sm text-slate-700 font-semibold mt-1",children:"Bir hedef yaz, direkt aksiyona git"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Örn: e-posta, kullanıcı ID, adminRef"})]}),Ot.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Enter: kullanıcı listesi"})]}),Ot.jsxs("div",{className:"mt-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),Ot.jsx("input",{className:"input pl-10",value:S,placeholder:"AdminRef / e-posta / telefon / kullanıcı ID / gönderi ID",onChange:e=>{const t=e.target.value;z(t),ie(t)},onKeyDown:e=>{if("Enter"===e.key){const t=(e.currentTarget.value||"").trim();if(!t)return;Q(`${ee}/users?search=${encodeURIComponent(t)}`)}}})]}),T?Ot.jsx("div",{className:"text-sm text-slate-600 mt-3",children:"Aranıyor..."}):0===A.length?Ot.jsxs("div",{className:"mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sonuç yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"İpucu: e-posta veya kullanıcı ID ile dene."})]}):Ot.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:A.slice(0,6).map((e,t)=>Ot.jsxs("button",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl text-left hover:bg-white transition-colors",onClick:()=>Q(`${ee}/users?openUserId=${encodeURIComponent(String(e.id))}`),children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.email||e.id}),Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Rol: ",e.role||"-"]})]},(null==e?void 0:e.id)||t))})]})]}),Ot.jsxs("div",{className:"card p-6",children:[Ot.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3 lg:gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Ot.jsx(me,{className:"w-4 h-4 text-slate-400"}),Ot.jsx("input",{className:"input flex-1",placeholder:"İlan ID / Nakliyeci / Taşıyıcı / rota",value:S,onChange:e=>{const t=e.target.value;z(t),ie(t)}})]}),Ot.jsxs("select",{value:E,onChange:e=>I(e.target.value),className:"input w-full lg:w-52",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"active",children:"Aktif"}),Ot.jsx("option",{value:"done",children:"Tamamlandı"}),Ot.jsx("option",{value:"cancelled",children:"İptal"}),Ot.jsx("option",{value:"dispute",children:"Anlaşmazlık"})]})]}),Ot.jsx("div",{className:"mt-4 overflow-x-auto",children:Ot.jsxs("table",{className:"w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[Ot.jsx("th",{className:"py-3 font-semibold",children:"İlan ID"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Güzergah"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Nakliyeci"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Taşıyıcı"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Tarih"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Anlaşılan Fiyat"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"Durum"}),Ot.jsx("th",{className:"py-3 font-semibold",children:"İşlemler"})]})}),Ot.jsx("tbody",{children:y?Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"Yükleniyor..."})}):v?Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,className:"py-6 text-center text-red-600",children:v})}):0===de.length?Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"Kayıt bulunamadı"})}):de.map(e=>{const t=oe(e.status||e.state||""),s=ue(e);return Ot.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[Ot.jsx("td",{className:"py-3",children:Ot.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900",children:e.trackingCode||e.id||"-"})}),Ot.jsx("td",{className:"py-3",children:Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.route||e.path||`${e.from||"-"} → ${e.to||"-"}`})}),Ot.jsx("td",{className:"py-3 text-slate-700",children:e.shipperName||e.nakliyeci||"-"}),Ot.jsx("td",{className:"py-3 text-slate-700",children:e.carrierName||e.tasiyici||"-"}),Ot.jsx("td",{className:"py-3 text-slate-700",children:xe(e.date||e.createdAt||e.created_at)}),Ot.jsx("td",{className:"py-3 text-slate-900 font-semibold",children:ce(e.price||e.agreedPrice||e.offerPrice)}),Ot.jsx("td",{className:"py-3",children:Ot.jsxs("div",{className:"flex flex-col gap-1",children:[Ot.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${t.className}`,children:t.text}),Ot.jsx("span",{className:s.className,children:s.label})]})}),Ot.jsx("td",{className:"py-3",children:Ot.jsx("button",{onClick:()=>h(e),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-50 hover:bg-blue-100 text-blue-700 font-semibold",children:"Detayları İncele"})})]},e.id||e.trackingCode||e.shipmentId)})})]})})]}),Ot.jsxs("div",{className:"card p-6",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Kuyruklar"}),Ot.jsx("div",{className:"text-xl font-bold tracking-tight text-slate-900 mt-1",children:"Bugün neyi çözüyoruz?"}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Kuyruk seç, kayıt seç, detay panelinden ilerle."})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ot.jsx(ge,{k:"operasyon"}),Ot.jsx(ge,{k:"guvenlik"}),Ot.jsx(ge,{k:"sikayet"})]})]}),s?Ot.jsx("div",{className:"text-sm text-slate-600 mt-4",children:"Yükleniyor..."}):0===he.length?Ot.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kuyruk boş"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Bu alanda bekleyen iş yok."})]}):Ot.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-2",children:he.slice(0,8).map((e,t)=>{const s=ue(e),a=(null==u?void 0:u.id)===(null==e?void 0:e.id);return Ot.jsx("button",{className:"p-4 rounded-xl border text-left transition-colors "+(a?"bg-white border-slate-900":"bg-gray-50 border-gray-200 hover:bg-white"),onClick:()=>h(e),children:Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:(null==e?void 0:e.title)||(null==e?void 0:e.type)||"Kayıt"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:(null==e?void 0:e.summary)||"Detay yok"})]}),Ot.jsx("span",{className:s.className,children:s.label})]})},(null==e?void 0:e.id)||t)})})]})]}),Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"card p-6",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Sonraki Adım"}),Ot.jsx("div",{className:"text-xl font-bold tracking-tight text-slate-900 mt-2",children:pe.title}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-2",children:pe.desc}),pe.primary&&Ot.jsx("div",{className:"mt-4",children:Ot.jsx("button",{className:"btn-primary w-full",onClick:pe.primary.onClick,children:pe.primary.label})})]}),Ot.jsxs("div",{className:"card p-6",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"İlgili Kullanıcı"}),Y?Ot.jsx("div",{className:"mt-3 text-sm text-red-700",children:Y}):G?Ot.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"Yükleniyor..."}):H?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:H.email||String(H.id)}),Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Rol: ",H.role||"-"]}),Ot.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2",children:Ot.jsx("button",{className:"btn-secondary",onClick:()=>Q(`${ee}/users?openUserId=${encodeURIComponent(String(H.id))}`),children:"Kullanıcı detayına git"})}),J&&Ot.jsxs("div",{className:"mt-4 text-xs text-slate-600",children:["Son 24s: teklif ",(null==(e=null==J?void 0:J.last24h)?void 0:e.offers)??"-"," • gönderi ",(null==(t=null==J?void 0:J.last24h)?void 0:t.shipments)??"-"]})]}):Ot.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"Seçili kayıtta kullanıcı yok."})]})]})]})]}),K&&Ot.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:()=>M(!1),children:Ot.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl shadow-xl border border-gray-200",onClick:e=>e.stopPropagation(),children:[Ot.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-bold text-slate-900",children:"Komut Paleti"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Kullanıcı ara ve hızlı git"})]}),Ot.jsx("button",{className:"btn-secondary",onClick:()=>M(!1),children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(_,{className:"w-4 h-4"})," Kapat"]})})]}),Ot.jsxs("div",{className:"p-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),Ot.jsx("input",{autoFocus:!0,className:"input pl-10",value:$,placeholder:"kullanıcı e-posta / ID / adminRef (2+ karakter)",onChange:e=>{const t=e.target.value;B(t),(async e=>{var t;const s=e.trim();if(s.length<2)L([]);else try{O(!0);const e=await fetch(Zs(`/api/admin/search?q=${encodeURIComponent(s)}`),{headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}}),a=await e.json().catch(()=>null);if(!e.ok)throw new Error((null==a?void 0:a.message)||`Arama başarısız (HTTP ${e.status})`);L(Array.isArray(null==(t=null==a?void 0:a.data)?void 0:t.users)?a.data.users:[])}catch{L([])}finally{O(!1)}})(t)}})]}),R?Ot.jsx("div",{className:"text-sm text-slate-600 mt-3",children:"Aranıyor..."}):0===P.length?Ot.jsxs("div",{className:"mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sonuç yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"İpucu: e-posta veya kullanıcı ID ile dene."})]}):Ot.jsx("div",{className:"mt-3 space-y-2",children:P.slice(0,10).map((e,t)=>Ot.jsx("button",{className:"w-full text-left p-3 bg-gray-50 border border-gray-200 rounded-xl hover:bg-white transition-colors",onClick:()=>{M(!1),Q(`${ee}/users?openUserId=${encodeURIComponent(String(e.id))}`)},children:Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.email||e.id}),Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Rol: ",e.role||"-"]})]}),Ot.jsxs("div",{className:"text-[11px] font-semibold text-slate-500",children:["ID: ",String(e.id)]})]})},(null==e?void 0:e.id)||t))}),Ot.jsx("div",{className:"mt-4 text-[11px] text-slate-500",children:"Kısayol: Ctrl+K aç/kapat • Esc kapat"})]})]})}),u&&Ot.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>h(null)}),Ot.jsxs("div",{className:"relative w-full max-w-3xl bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 max-h-[90vh] overflow-y-auto",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Taşıma Detayı"}),Ot.jsx("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:u.trackingCode||u.id||"İlan"}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:u.route||u.path||`${u.from||"-"} → ${u.to||"-"}`})]}),Ot.jsx("button",{className:"btn-secondary",onClick:()=>h(null),children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(_,{className:"w-4 h-4"})," Kapat"]})})]}),Ot.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Nakliyeci"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:u.shipperName||u.nakliyeci||"-"})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Taşıyıcı"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:u.carrierName||u.tasiyici||"-"})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Tarih"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:xe(u.date||u.createdAt||u.created_at)})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Anlaşılan Fiyat"}),Ot.jsx("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:ce(u.price||u.agreedPrice||u.offerPrice)})]}),Ot.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Durum"}),Ot.jsxs("div",{className:"mt-1 inline-flex items-center gap-2",children:[Ot.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${oe(u.status||u.state||"").className}`,children:oe(u.status||u.state||"").text}),Ot.jsx("span",{className:ue(u).className,children:ue(u).label})]})]})]}),Ot.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-xl text-xs text-slate-600",children:"Detaylı süreç (teklif geçmişi, mesajlar, konum) sonraki iterasyonda bağlanacak."})]})]})]})},Bn=()=>{const[e,t]=l.useState(!0),[s,a]=l.useState(""),[i,r]=l.useState({totalUsers:0,approvedCarriers:0,totalShippers:0,pendingCarriers:0,activeListings:0,activeShipments:0,inTransitShipments:0,totalShipments:0,totalOffers:0,todayCommission:0,openFlags:0,openComplaints:0});l.useEffect(()=>{(async()=>{try{t(!0),a("");const e=localStorage.getItem("token")||localStorage.getItem("authToken"),s=await fetch(Zs("/api/admin/overview"),{headers:{Authorization:`Bearer ${e||""}`,"Content-Type":"application/json"}}),l=await s.json().catch(()=>null);if(!s.ok){const e=(null==l?void 0:l.message)||`Admin overview yüklenemedi (HTTP ${s.status})`;throw new Error(e)}const i=(null==l?void 0:l.data)||(null==l?void 0:l.overview)||l||{},n=i.stats||i;r({totalUsers:Number(n.totalUsers||0),approvedCarriers:Number(n.approvedCarriers||0),totalShippers:Number(n.totalShippers||0),pendingCarriers:Number(n.pendingCarriers||0),activeListings:Number(n.activeListings||0),activeShipments:Number(n.activeShipments||0),inTransitShipments:Number(n.inTransitShipments||0),totalShipments:Number(n.totalShipments||0),totalOffers:Number(n.totalOffers||0),todayCommission:Number(n.todayCommission||0),openFlags:Number(n.openFlags||0),openComplaints:Number(n.openComplaints||0)})}catch(e){a((null==e?void 0:e.message)||"Admin overview yüklenemedi")}finally{t(!1)}})()},[]);const n=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:0}).format(e||0),d=l.useMemo(()=>[{title:"Toplam Kullanıcı",value:i.totalUsers,icon:C},{title:"Onaylı Taşıyıcı",value:i.approvedCarriers,icon:Nt},{title:"Nakliyeci Sayısı",value:i.totalShippers,icon:E},{title:"Onay Bekleyen Taşıyıcı",value:i.pendingCarriers,icon:L}],[i]),o=l.useMemo(()=>[{title:"Aktif İlan",value:i.activeListings,icon:ge},{title:"Yolda Taşıma",value:i.inTransitShipments,icon:ke},{title:"Aktif Taşıma",value:i.activeShipments,icon:wt},{title:"Toplam Gönderi",value:i.totalShipments,icon:R}],[i]),c=l.useMemo(()=>[{title:"Çözüm Bekleyen Anlaşmazlık",value:i.openComplaints,icon:f},{title:"Açık Flag",value:i.openFlags,icon:wt},{title:"Teklifler",value:i.totalOffers,icon:ge},{title:"Bugün Komisyon",value:n(i.todayCommission),icon:Tt}],[i]),m=({title:e,value:t,icon:s})=>Ot.jsx("div",{className:"p-5 rounded-2xl bg-white border border-slate-100 shadow-sm hover:shadow-md transition-all duration-200",children:Ot.jsxs("div",{className:"flex items-center justify-between gap-3",children:[Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 uppercase tracking-wider",children:e}),Ot.jsx("div",{className:"text-3xl font-bold text-slate-900",children:t})]}),Ot.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-800 to-blue-900 text-white rounded-xl flex items-center justify-center shadow-inner",children:Ot.jsx(s,{className:"w-6 h-6"})})]})}),x=({label:e,value:t,trend:s})=>Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[Ot.jsx("div",{className:"text-sm text-slate-600",children:e}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t,"up"===s&&Ot.jsx(Ct,{className:"w-4 h-4 text-emerald-500"}),"down"===s&&Ot.jsx(At,{className:"w-4 h-4 text-rose-500"})]})]});return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Dashboard - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-10 space-y-6",children:[Ot.jsxs("div",{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-blue-900 text-white rounded-3xl p-6 lg:p-8 shadow-xl border border-slate-900 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-15 bg-[radial-gradient(circle_at_top_right,#1e3a8a,transparent_38%),radial-gradient(circle_at_bottom_left,#1e40af,transparent_38%)]"}),Ot.jsxs("div",{className:"relative flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[Ot.jsxs("div",{className:"space-y-3 max-w-2xl",children:[Ot.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-white/10 text-xs font-semibold uppercase tracking-wider border border-white/15",children:"Yönetim Özeti"}),Ot.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",children:"YolNext Yönetim Kontrol Merkezi"}),Ot.jsx("p",{className:"text-sm lg:text-base text-slate-200",children:"Gerçek zamanlı görünürlük, güven ve performans için optimize edilmiş kurumsal pano."})]}),Ot.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-2xl p-4 min-w-[220px] shadow-lg backdrop-blur",children:[Ot.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-200 mb-1 font-semibold",children:"Finansal Nabız"}),Ot.jsx("div",{className:"text-3xl font-bold",children:n(i.todayCommission)}),Ot.jsx("div",{className:"text-xs text-slate-200 mt-1",children:"Bugün tahsil edilen platform komisyonu"})]})]})]}),s&&Ot.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700 shadow-sm",children:s}),e?Ot.jsx("div",{className:"text-sm text-slate-600",children:"Yükleniyor..."}):Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:d.map(e=>Ot.jsx(m,{title:e.title,value:e.value,icon:e.icon},e.title))}),Ot.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"xl:col-span-2 p-5 rounded-2xl bg-white border border-slate-100 shadow-sm",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 uppercase tracking-wider",children:"Operasyon Akışı"}),Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mt-1",children:"Aktif iş yükü ve taşıma görünümü"})]}),Ot.jsx("div",{className:"text-xs text-slate-500",children:"Gerçek zamanlı snapshot"})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:o.map(e=>Ot.jsx(m,{title:e.title,value:e.value,icon:e.icon},e.title))})]}),Ot.jsxs("div",{className:"p-5 rounded-2xl bg-white border border-slate-100 shadow-sm flex flex-col gap-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 uppercase tracking-wider",children:"Risk & Alarm"}),Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mt-1",children:"Denetim ve güvenlik"})]}),Ot.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:c.map(e=>Ot.jsx(m,{title:e.title,value:e.value,icon:e.icon},e.title))})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"p-5 rounded-2xl bg-white border border-slate-100 shadow-sm",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-3",children:Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 uppercase tracking-wider",children:"Kaynak Sağlığı"}),Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mt-1",children:"Platform kapasite özeti"})]})}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(x,{label:"Taşıyıcılar",value:`${i.approvedCarriers} aktif`,trend:"up"}),Ot.jsx(x,{label:"Nakliyeciler",value:`${i.totalShippers} kayıtlı`}),Ot.jsx(x,{label:"Onay bekleyen",value:`${i.pendingCarriers} süreçte`,trend:"down"})]})]}),Ot.jsxs("div",{className:"p-5 rounded-2xl bg-white border border-slate-100 shadow-sm",children:[Ot.jsx("div",{className:"flex items-center justify-between mb-3",children:Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-[11px] font-semibold text-slate-500 uppercase tracking-wider",children:"Vaka & Bayrak"}),Ot.jsx("div",{className:"text-lg font-bold text-slate-900 mt-1",children:"İnceleme gerektiren durumlar"})]})}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(x,{label:"Açık flag",value:`${i.openFlags}`,trend:i.openFlags>0?"up":void 0}),Ot.jsx(x,{label:"Açık anlaşmazlık",value:`${i.openComplaints}`,trend:i.openComplaints>0?"up":void 0}),Ot.jsx(x,{label:"Toplam teklif",value:`${i.totalOffers}`})]})]})]})]})]})]})},Rn=()=>{const[e,t]=l.useState("acik"),s=o(),a=m(),i=Aa(),r=l.useMemo(()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"",[]),n=l.useRef(null),d=l.useMemo(()=>{try{const e=new URLSearchParams(a.search||"");return String(e.get("openDisputeRef")||"").trim()}catch{return""}},[a.search]),[c,x]=l.useState(!0),[u,h]=l.useState(""),[p,g]=l.useState([]),[b,f]=l.useState(""),y=async()=>{try{x(!0),h("");const e=new URLSearchParams;e.set("limit","50"),e.set("page","1");const t=await fetch(Zs(`/api/disputes?${e.toString()}`),{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}),s=await t.json().catch(()=>null);if(!t.ok)throw new Error((null==s?void 0:s.message)||`Disputes yüklenemedi (HTTP ${t.status})`);g(Array.isArray(null==s?void 0:s.data)?s.data:[])}catch(e){g([]),h((null==e?void 0:e.message)||"Disputes yüklenemedi")}finally{x(!1)}};l.useEffect(()=>{y()},[]);const j=l.useMemo(()=>{if("tum"===e)return p;const t=new Set(["pending","investigating","escalated","assigned"]);return p.filter(e=>t.has(String(e.status||"").trim()))},[p,e]),v=l.useMemo(()=>b&&j.find(e=>String(e.dispute_ref||e.disputeRef||e.id||"").trim()===b)||null,[j,b]);l.useEffect(()=>{c||d&&n.current&&n.current.scrollIntoView({behavior:"smooth",block:"center"})},[c,d,j.length]),l.useEffect(()=>{d&&f(d)},[d]);const N=e=>{const t=new URLSearchParams(a.search||"");e?t.set("openDisputeRef",e):t.delete("openDisputeRef");const l=t.toString();s(`${i}/cases${l?`?${l}`:""}`,{replace:!0})};return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Vakalar - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-10",children:[Ot.jsx("div",{className:"mb-6 lg:mb-8 flex items-start justify-between gap-4",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center",children:Ot.jsx(W,{className:"w-5 h-5"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Vakalar"}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Şikayet / itiraz / inceleme dosyaları"})]})]})}),Ot.jsxs("div",{className:"mb-5 flex flex-wrap gap-2",children:[Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+("acik"===e?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>t("acik"),children:"Açık Vakalar"}),Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+("tum"===e?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>t("tum"),children:"Tümü"})]}),Ot.jsxs("div",{className:"card p-6 lg:p-7",children:[Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Disputes"}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx("button",{type:"button",onClick:()=>s(`${i}/ops`,{replace:!1}),className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800",children:"Operasyon Masası"}),Ot.jsx("button",{type:"button",onClick:()=>y(),className:"px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-gray-50",children:"Yenile"})]})]}),u&&Ot.jsx("div",{className:"mt-4 p-3 rounded-lg border border-red-200 bg-red-50 text-sm text-red-700",children:u}),c?Ot.jsx("div",{className:"mt-6 text-sm text-slate-600",children:"Yükleniyor…"}):0===j.length?Ot.jsx("div",{className:"mt-6 text-sm text-slate-600",children:"Kayıt yok."}):Ot.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[Ot.jsx("div",{className:"lg:col-span-2 overflow-x-auto",children:Ot.jsxs("table",{className:"min-w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500 border-b",children:[Ot.jsx("th",{className:"py-2 pr-4",children:"Ref"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Başlık"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Durum"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Öncelik"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Oluşturma"}),Ot.jsx("th",{className:"py-2 pr-0"})]})}),Ot.jsx("tbody",{className:"divide-y",children:j.map(e=>{const t=String(e.dispute_ref||e.disputeRef||e.id||"").trim(),s=d&&t===d,a=b&&t===b;return Ot.jsxs("tr",{ref:s?n:void 0,className:"cursor-pointer hover:bg-slate-50 "+(s?"bg-amber-50 ring-1 ring-amber-200 ":"")+(a?"bg-slate-50 ring-1 ring-slate-200 ":""),onClick:()=>{f(t),N(t)},children:[Ot.jsx("td",{className:"py-3 pr-4 font-mono text-xs text-slate-700",children:t}),Ot.jsx("td",{className:"py-3 pr-4 font-semibold text-slate-900",children:e.title||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.status||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.priority||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:String(e.created_at||e.createdAt||"").replace("T"," ").slice(0,16)||"—"}),Ot.jsx("td",{className:"py-3 pr-0 text-right",children:Ot.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(t),N(t)},className:"px-3 py-1.5 rounded-lg bg-white border border-slate-200 text-slate-700 text-xs font-semibold hover:bg-gray-50",children:"İncele"})})]},String(e.id))})})]})}),Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsx("div",{className:"lg:sticky lg:top-24 border border-slate-200 rounded-xl bg-white p-4",children:v?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsxs("div",{className:"min-w-0",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Vaka"}),Ot.jsx("div",{className:"text-base font-bold text-slate-900 mt-1 truncate",children:v.title||"—"}),Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Ref: ",Ot.jsx("span",{className:"font-mono",children:b})]})]}),Ot.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg bg-white border border-slate-200 text-slate-700 text-xs font-semibold hover:bg-gray-50",onClick:()=>{f(""),N("")},children:"Kapat"})]}),Ot.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Durum"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:v.status||"—"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Öncelik"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:v.priority||"—"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Respondent"}),Ot.jsx("div",{className:"font-mono text-xs text-slate-900",children:v.respondent_id??v.respondentId??"—"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Complainant"}),Ot.jsx("div",{className:"font-mono text-xs text-slate-900",children:v.complainant_id??v.complainantId??"—"})]})]}),Ot.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[Ot.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800",onClick:()=>s(`${i}/ops`,{replace:!1}),children:"Operasyon Masası"}),v.respondent_id||v.complainant_id?Ot.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[v.respondent_id&&Ot.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-gray-50",onClick:()=>s(`${i}/users?openUserId=${encodeURIComponent(String(v.respondent_id))}`),children:"Respondent kullanıcı"}),v.complainant_id&&Ot.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-gray-50",onClick:()=>s(`${i}/users?openUserId=${encodeURIComponent(String(v.complainant_id))}`),children:"Complainant kullanıcı"})]}):null]})]}):Ot.jsx("div",{className:"text-sm text-slate-600",children:"Bir vaka seç. Sağ panelde hızlı aksiyonlar burada görünecek."})})})]})]})]})]})},On=()=>{const[e,t]=l.useState("open"),[s,a]=l.useState(!0),[i,r]=l.useState(""),[n,d]=l.useState(""),[o,c]=l.useState([]),m=l.useRef(0),x=l.useRef(null),[u,h]=l.useState(!1),[p,g]=l.useState(!1),[b,f]=l.useState("spam"),[y,j]=l.useState("user"),[v,N]=l.useState(""),[k,w]=l.useState(""),S=()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"";l.useEffect(()=>{if(!n)return;const e=setTimeout(()=>d(""),2500);return()=>clearTimeout(e)},[n]);const z=async()=>{const t=++m.current;x.current&&x.current.abort();const s=new AbortController;x.current=s;try{a(!0),r("");const l="open"===e?"open":"",i=l?`?status=${encodeURIComponent(l)}&limit=200`:"?limit=200",n=await fetch(Zs(`/api/admin/flags${i}`),{headers:{Authorization:`Bearer ${S()}`,"Content-Type":"application/json"},signal:s.signal}),d=await n.json().catch(()=>null);if(!n.ok)throw new Error((null==d?void 0:d.message)||`Flag kayıtları yüklenemedi (HTTP ${n.status})`);t===m.current&&c(Array.isArray(null==d?void 0:d.data)?d.data:[])}catch(l){"AbortError"!==(null==l?void 0:l.name)&&t===m.current&&r((null==l?void 0:l.message)||"Flag kayıtları yüklenemedi")}finally{t===m.current&&a(!1)}};l.useEffect(()=>{z()},[e]),l.useEffect(()=>()=>{x.current&&x.current.abort()},[]);const T=()=>{p||(h(!1),f("spam"),j("user"),N(""),w(""))},C=({k:a,label:l})=>Ot.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold border transition-colors "+(e===a?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-gray-200 hover:bg-gray-50"),onClick:()=>t(a),disabled:s,children:l});return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Flag - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-10",children:[Ot.jsxs("div",{className:"mb-6 lg:mb-8 flex items-start justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Flag"}),Ot.jsx("p",{className:"text-slate-600 mt-1",children:"spam/dispute flag yönetimi"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("button",{className:"btn-secondary",onClick:()=>z(),disabled:s,children:"Yenile"}),Ot.jsx("button",{className:"btn-primary",onClick:()=>h(!0),disabled:s,children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(ue,{className:"w-4 h-4"})," Yeni Flag"]})})]})]}),n&&Ot.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:n}),i&&Ot.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:i}),Ot.jsxs("div",{className:"mb-5 flex flex-wrap gap-2",children:[Ot.jsx(C,{k:"open",label:"Açık"}),Ot.jsx(C,{k:"all",label:"Tümü"})]}),s?Ot.jsx("div",{className:"text-sm text-slate-600",children:"Yükleniyor..."}):Ot.jsxs("div",{className:"card p-0 overflow-hidden",children:[Ot.jsx("div",{className:"hidden md:block",children:Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-left",children:[Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Zaman"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Type"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Target"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Status"}),Ot.jsx("th",{className:"p-4 font-semibold text-slate-700",children:"Reason"})]})}),Ot.jsx("tbody",{children:0===o.length?Ot.jsx("tr",{children:Ot.jsx("td",{className:"p-6 text-slate-600",colSpan:5,children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz flag kaydı yok."})]})})}):o.map((e,t)=>Ot.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/70 transition-colors "+(t%2==1?"bg-white":"bg-gray-50/30"),children:[Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("td",{className:"p-4 text-slate-900 font-semibold",children:(null==e?void 0:e.type)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.target_type)?`${e.target_type}:${e.target_id||"-"}`:"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.status)||"-"}),Ot.jsx("td",{className:"p-4 text-slate-700",children:(null==e?void 0:e.reason)||"-"})]},(null==e?void 0:e.id)||t))})]})})}),Ot.jsx("div",{className:"md:hidden",children:0===o.length?Ot.jsx("div",{className:"p-6 text-center",children:Ot.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[Ot.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Kayıt yok"}),Ot.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Henüz flag kaydı yok."})]})}):Ot.jsx("div",{className:"space-y-4 p-4",children:o.map((e,t)=>Ot.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900 mb-1",children:(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleString():"-"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.type)||"-"})]}),Ot.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 flex-shrink-0",children:(null==e?void 0:e.status)||"-"})]}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Target"}),Ot.jsx("div",{className:"text-sm font-medium text-slate-900",children:(null==e?void 0:e.target_type)?`${e.target_type}:${e.target_id||"-"}`:"-"})]}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Sebep"}),Ot.jsx("div",{className:"text-sm text-slate-900 bg-gray-50 p-2 rounded-lg",children:(null==e?void 0:e.reason)||"-"})]}),Ot.jsxs("div",{className:"text-xs text-slate-500 pt-2 border-t border-gray-100",children:["ID: ",(null==e?void 0:e.id)||"-"]})]},(null==e?void 0:e.id)||t))})})]})]}),u&&Ot.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[Ot.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:T}),Ot.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-2xl shadow-xl border border-gray-200 p-6",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-lg font-bold text-slate-900",children:"Yeni Flag"}),Ot.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Sebep zorunlu; audit kaydı tutulur."})]}),Ot.jsx("button",{className:"btn-secondary",onClick:T,disabled:p,children:Ot.jsxs("span",{className:"inline-flex items-center gap-2",children:[Ot.jsx(_,{className:"w-4 h-4"})," Kapat"]})})]}),Ot.jsxs("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Type"}),Ot.jsx("input",{className:"input mt-2",value:b,onChange:e=>f(e.target.value)})]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Target Type"}),Ot.jsx("input",{className:"input mt-2",value:y,onChange:e=>j(e.target.value)})]})]}),Ot.jsxs("div",{className:"mt-4",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Hedef ID"}),Ot.jsx("input",{className:"input mt-2",value:v,onChange:e=>N(e.target.value),placeholder:"Örn: kullanıcı ID"})]}),Ot.jsxs("div",{className:"mt-4",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Sebep"}),Ot.jsx("textarea",{className:"input mt-2 min-h-[110px]",value:k,onChange:e=>w(e.target.value),placeholder:"Sebep yaz (zorunlu)"})]}),Ot.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[Ot.jsx("button",{className:"btn-secondary",onClick:T,disabled:p,children:"Vazgeç"}),Ot.jsx("button",{className:"btn-primary",onClick:async()=>{const e=v.trim(),t=k.trim();if(e)if(t.length<3)r("Sebep en az 3 karakter olmalı");else try{g(!0),r("");const s=await fetch(Zs("/api/admin/flags"),{method:"POST",headers:{Authorization:`Bearer ${S()}`,"Content-Type":"application/json"},body:JSON.stringify({type:b,targetType:y,targetId:e,reason:t})}),a=await s.json().catch(()=>null);if(!s.ok)throw new Error((null==a?void 0:a.message)||`Flag oluşturulamadı (HTTP ${s.status})`);d("Flag oluşturuldu"),T(),await z()}catch(s){r((null==s?void 0:s.message)||"Flag oluşturulamadı")}finally{g(!1)}else r("Hedef ID zorunlu")},disabled:p,children:p?"İşleniyor...":"Oluştur"})]})]})]})]})},Pn=()=>{const[e,t]=l.useState([]),[s,a]=l.useState(null),[i,r]=l.useState(!0),[n,d]=l.useState({}),[o,c]=l.useState([]),[m,x]=l.useState({status:"all",category:"all",priority:"all",assignedTo:"all",search:""}),[u,h]=l.useState({message:"",isInternal:!1,files:[]});l.useEffect(()=>{p(),g()},[m]);const p=async()=>{var e,s;try{const a=localStorage.getItem("authToken"),l=new URLSearchParams;Object.entries(m).forEach(([e,t])=>{t&&"all"!==t&&l.append(e,t)});const i=await fetch(Zs(`/api/admin/support/tickets?${l}`),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(i.ok){const a=await i.json();t((null==(e=a.data)?void 0:e.tickets)||[]),d((null==(s=a.data)?void 0:s.statistics)||{})}}catch(a){}finally{r(!1)}},g=async()=>{try{const e=localStorage.getItem("authToken"),t=await fetch(Zs("/api/admin/support/admins"),{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();c(e.data||[])}}catch(e){}},b=async e=>{try{const t=localStorage.getItem("authToken"),s=await fetch(Zs(`/api/admin/support/tickets/${e}`),{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const e=await s.json();a(e.data)}}catch(t){}},f=async(e,t)=>{try{const a=localStorage.getItem("authToken");(await fetch(Zs(`/api/admin/support/tickets/${e}`),{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(p(),s&&b(e))}catch(a){}};return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Destek Yönetimi - Admin Panel - YolNext"})}),Ot.jsx("div",{className:"min-h-screen bg-gray-50",children:Ot.jsxs("div",{className:"flex h-screen",children:[Ot.jsxs("div",{className:"w-1/2 bg-white border-r border-gray-200 flex flex-col",children:[Ot.jsxs("div",{className:"p-6 border-b border-gray-200",children:[Ot.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Destek Yönetimi"}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[Ot.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-blue-600",children:"Açık Talepler"}),Ot.jsx("div",{className:"text-xl font-bold text-blue-900",children:n.open_tickets||0})]}),Ot.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-orange-600",children:"Atanmamış"}),Ot.jsx("div",{className:"text-xl font-bold text-orange-900",children:n.unassigned_tickets||0})]})]}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),Ot.jsx("input",{type:"text",placeholder:"Destek taleplerinde ara...",value:m.search,onChange:e=>x({...m,search:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ot.jsxs("select",{value:m.status,onChange:e=>x({...m,status:e.target.value}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Durumlar"}),Ot.jsx("option",{value:"open",children:"Açık"}),Ot.jsx("option",{value:"in_progress",children:"İşlemde"}),Ot.jsx("option",{value:"waiting_user",children:"Kullanıcı Bekliyor"}),Ot.jsx("option",{value:"resolved",children:"Çözüldü"})]}),Ot.jsxs("select",{value:m.priority,onChange:e=>x({...m,priority:e.target.value}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[Ot.jsx("option",{value:"all",children:"Tüm Öncelikler"}),Ot.jsx("option",{value:"urgent",children:"Acil"}),Ot.jsx("option",{value:"high",children:"Yüksek"}),Ot.jsx("option",{value:"medium",children:"Orta"}),Ot.jsx("option",{value:"low",children:"Düşük"})]})]})]})]}),Ot.jsx("div",{className:"flex-1 overflow-y-auto",children:i?Ot.jsxs("div",{className:"p-8 text-center",children:[Ot.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ot.jsx("p",{className:"text-gray-500 mt-2",children:"Yükleniyor..."})]}):0===e.length?Ot.jsxs("div",{className:"p-8 text-center",children:[Ot.jsx(G,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Ot.jsx("p",{className:"text-gray-500",children:"Destek talebi bulunamadı"})]}):Ot.jsx("div",{className:"divide-y divide-gray-200",children:e.map(e=>{return Ot.jsxs("div",{onClick:()=>b(e.id),className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors "+((null==s?void 0:s.ticket.id)===e.id?"bg-blue-50 border-r-4 border-blue-500":""),children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a=e.status,{open:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",waiting_user:"bg-orange-100 text-orange-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}`,children:e.status}),Ot.jsx("span",{className:`text-xs font-medium ${t=e.priority,{urgent:"text-red-600",high:"text-orange-600",medium:"text-yellow-600",low:"text-green-600"}[t]||"text-gray-600"}`,children:e.priority})]}),Ot.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("tr-TR")})]}),Ot.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1 line-clamp-2",children:e.subject}),Ot.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[Ot.jsxs("span",{children:["#",e.ticket_number]}),Ot.jsx("span",{children:"•"}),Ot.jsx("span",{children:e.user_name})]}),Ot.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Ot.jsx("span",{className:"text-gray-600",children:e.category}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[e.assigned_admin_name&&Ot.jsxs("span",{className:"text-blue-600",children:[Ot.jsx(yt,{className:"w-3 h-3 inline mr-1"}),e.assigned_admin_name]}),Ot.jsxs("span",{className:"text-gray-500",children:[e.user_message_count+e.admin_message_count," mesaj"]})]})]})]},e.id);var t,a})})})]}),Ot.jsx("div",{className:"flex-1 flex flex-col",children:s?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s.ticket.subject}),Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[Ot.jsxs("span",{children:["#",s.ticket.ticket_number]}),Ot.jsx("span",{children:"•"}),Ot.jsx("span",{children:s.ticket.user_name}),Ot.jsx("span",{children:"•"}),Ot.jsx("span",{children:s.ticket.category})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs("select",{value:s.ticket.status,onChange:e=>f(s.ticket.id,{status:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[Ot.jsx("option",{value:"open",children:"Açık"}),Ot.jsx("option",{value:"in_progress",children:"İşlemde"}),Ot.jsx("option",{value:"waiting_user",children:"Kullanıcı Bekliyor"}),Ot.jsx("option",{value:"resolved",children:"Çözüldü"}),Ot.jsx("option",{value:"closed",children:"Kapatıldı"})]}),Ot.jsxs("select",{value:s.ticket.assigned_admin_id||"",onChange:e=>f(s.ticket.id,{assignedAdminId:e.target.value||null}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[Ot.jsx("option",{value:"",children:"Atanmamış"}),o.map(e=>Ot.jsxs("option",{value:e.id,children:[e.name," (",e.active_tickets,")"]},e.id))]})]})]}),Ot.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Ot.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"İlk Açıklama:"}),Ot.jsx("p",{className:"text-gray-700",children:s.ticket.description})]})]}),Ot.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:Ot.jsx("div",{className:"space-y-4",children:s.messages.map((e,t)=>Ot.jsxs("div",{className:"p-4 rounded-lg "+("user"===e.sender_type?"bg-white border-l-4 border-blue-500":e.is_internal?"bg-yellow-50 border-l-4 border-yellow-500":"bg-green-50 border-l-4 border-green-500"),children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"font-semibold text-gray-900",children:e.sender_name}),Ot.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("user"===e.sender_type?"bg-blue-100 text-blue-800":e.is_internal?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"user"===e.sender_type?"Kullanıcı":e.is_internal?"Dahili Not":"Admin"})]}),Ot.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString("tr-TR")})]}),Ot.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.message_content})]},e.id))})}),Ot.jsx("div",{className:"p-6 bg-white border-t border-gray-200",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("div",{className:"flex items-center gap-4",children:Ot.jsxs("label",{className:"flex items-center",children:[Ot.jsx("input",{type:"checkbox",checked:u.isInternal,onChange:e=>h({...u,isInternal:e.target.checked}),className:"mr-2"}),Ot.jsx("span",{className:"text-sm text-gray-700",children:"Dahili not (sadece adminler görebilir)"})]})}),Ot.jsx("textarea",{value:u.message,onChange:e=>h({...u,message:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Yanıtınızı yazınız..."}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("input",{type:"file",multiple:!0,onChange:e=>{const t=Array.from(e.target.files||[]);h({...u,files:t})},className:"text-sm"}),Ot.jsxs("button",{onClick:async()=>{if(s&&u.message.trim())try{const e=localStorage.getItem("authToken"),t=new FormData;t.append("message",u.message),t.append("isInternal",u.isInternal.toString()),u.files.forEach(e=>{t.append("attachments",e)});(await fetch(Zs(`/api/admin/support/tickets/${s.ticket.id}/messages`),{method:"POST",headers:{Authorization:`Bearer ${e}`},body:t})).ok&&(h({message:"",isInternal:!1,files:[]}),b(s.ticket.id),p())}catch(e){}},disabled:!u.message.trim(),className:"bg-gradient-to-r from-slate-800 to-blue-900 text-white px-6 py-2 rounded-lg hover:from-blue-900 hover:to-slate-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Ot.jsx(ne,{className:"w-4 h-4"}),"Gönder"]})]})]})})]}):Ot.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(G,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Destek Talebi Seçiniz"}),Ot.jsx("p",{className:"text-gray-500",children:"Detayları görüntülemek için soldaki listeden bir destek talebi seçiniz."})]})})})]})})]})},Ln=()=>{const e=o(),t=m(),s=Aa(),a=l.useMemo(()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"",[]),i=l.useRef(null),r=l.useMemo(()=>{try{const e=new URLSearchParams(t.search||"");return String(e.get("openComplaintId")||"").trim()}catch{return""}},[t.search]),[n,d]=l.useState(!0),[c,x]=l.useState(""),[u,h]=l.useState(""),[p,g]=l.useState([]),[b,f]=l.useState(""),y=l.useMemo(()=>b&&p.find(e=>String(null==e?void 0:e.id)===String(b))||null,[p,b]),j=async()=>{try{d(!0),x("");const e=new URLSearchParams;u&&e.set("status",u),e.set("limit","200");const t=await fetch(Zs(`/api/admin/complaints?${e.toString()}`),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),s=await t.json().catch(()=>null);if(!t.ok)throw new Error((null==s?void 0:s.message)||`Şikayetler yüklenemedi (HTTP ${t.status})`);g(Array.isArray(null==s?void 0:s.data)?s.data:[])}catch(e){g([]),x((null==e?void 0:e.message)||"Şikayetler yüklenemedi")}finally{d(!1)}};l.useEffect(()=>{j()},[u]),l.useEffect(()=>{r&&f(r)},[r]),l.useEffect(()=>{n||r&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"center"})},[n,r,p.length]);const v=a=>{const l=new URLSearchParams(t.search||"");a?l.set("openComplaintId",a):l.delete("openComplaintId");const i=l.toString();e(`${s}/complaints${i?`?${i}`:""}`,{replace:!0})};return Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Şikayetler - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-8",children:[Ot.jsxs("div",{className:"mb-6",children:[Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Şikayetler"}),Ot.jsx("p",{className:"text-slate-600",children:"beklemede / inceleniyor / çözüldü"})]}),Ot.jsxs("div",{className:"card p-6",children:[Ot.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Durum"}),Ot.jsxs("select",{value:u,onChange:e=>h(String(e.target.value||"")),className:"px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm",children:[Ot.jsx("option",{value:"",children:"Tümü"}),Ot.jsx("option",{value:"pending",children:"Beklemede"}),Ot.jsx("option",{value:"reviewing",children:"İnceleniyor"}),Ot.jsx("option",{value:"resolved",children:"Çözüldü"}),Ot.jsx("option",{value:"rejected",children:"Reddedildi"})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx("button",{type:"button",onClick:()=>e(`${s}/ops`,{replace:!1}),className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800",children:"Operasyon Masası"}),Ot.jsx("button",{type:"button",onClick:()=>j(),className:"px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-gray-50",children:"Yenile"})]})]}),c&&Ot.jsx("div",{className:"mt-4 p-3 rounded-lg border border-red-200 bg-red-50 text-sm text-red-700",children:c}),n?Ot.jsx("div",{className:"mt-6 text-sm text-slate-600",children:"Yükleniyor…"}):0===p.length?Ot.jsx("div",{className:"mt-6 text-sm text-slate-600",children:"Kayıt yok."}):Ot.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[Ot.jsx("div",{className:"lg:col-span-2 overflow-x-auto",children:Ot.jsxs("table",{className:"min-w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500 border-b",children:[Ot.jsx("th",{className:"py-2 pr-4",children:"ID"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Başlık"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Durum"}),Ot.jsx("th",{className:"py-2 pr-4",children:"User"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Related"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Güncellendi"}),Ot.jsx("th",{className:"py-2 pr-0"})]})}),Ot.jsx("tbody",{className:"divide-y",children:p.map(e=>{const t=String(e.id),s=r&&t===r,a=b&&t===b;return Ot.jsxs("tr",{ref:s?i:void 0,className:"cursor-pointer hover:bg-slate-50 "+(s?"bg-amber-50 ring-1 ring-amber-200 ":"")+(a?"bg-slate-50 ring-1 ring-slate-200 ":""),onClick:()=>{f(t),v(t)},children:[Ot.jsx("td",{className:"py-3 pr-4 font-mono text-xs text-slate-700",children:e.id}),Ot.jsx("td",{className:"py-3 pr-4 font-semibold text-slate-900",children:e.title||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.status||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.user_id??"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.related_user_id??"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:String(e.updated_at||e.created_at||"").replace("T"," ").slice(0,16)||"—"}),Ot.jsx("td",{className:"py-3 pr-0 text-right",children:Ot.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(t),v(t)},className:"px-3 py-1.5 rounded-lg bg-white border border-slate-200 text-slate-700 text-xs font-semibold hover:bg-gray-50",children:"İncele"})})]},t)})})]})}),Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsx("div",{className:"lg:sticky lg:top-24 border border-slate-200 rounded-xl bg-white p-4",children:y?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Ot.jsxs("div",{className:"min-w-0",children:[Ot.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Şikayet"}),Ot.jsx("div",{className:"text-base font-bold text-slate-900 mt-1 truncate",children:y.title||"—"}),Ot.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["ID: ",Ot.jsx("span",{className:"font-mono",children:String(y.id)})]})]}),Ot.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg bg-white border border-slate-200 text-slate-700 text-xs font-semibold hover:bg-gray-50",onClick:()=>{f(""),v("")},children:"Kapat"})]}),Ot.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Durum"}),Ot.jsx("div",{className:"font-semibold text-slate-900",children:y.status||"—"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Shipment"}),Ot.jsx("div",{className:"font-mono text-xs text-slate-900",children:y.shipment_id??y.shipmentId??"—"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"User"}),Ot.jsx("div",{className:"font-mono text-xs text-slate-900",children:y.user_id??"—"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:"text-slate-600",children:"Related"}),Ot.jsx("div",{className:"font-mono text-xs text-slate-900",children:y.related_user_id??"—"})]})]}),Ot.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[Ot.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800",onClick:()=>e(`${s}/ops`,{replace:!1}),children:"Operasyon Masası"}),y.user_id||y.related_user_id?Ot.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[y.user_id&&Ot.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-gray-50",onClick:()=>e(`${s}/users?openUserId=${encodeURIComponent(String(y.user_id))}`),children:"Şikayet eden kullanıcı"}),y.related_user_id&&Ot.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-gray-50",onClick:()=>e(`${s}/users?openUserId=${encodeURIComponent(String(y.related_user_id))}`),children:"İlgili kullanıcı"})]}):null]})]}):Ot.jsx("div",{className:"text-sm text-slate-600",children:"Bir şikayet seç. Sağ panelde hızlı aksiyonlar burada görünecek."})})})]})]})]})]})},Gn=()=>{const e=l.useMemo(()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"",[]),[t,s]=l.useState(!0),[a,i]=l.useState(""),[r,n]=l.useState([]);return l.useEffect(()=>{(async()=>{try{s(!0),i("");const t=new URLSearchParams;t.set("limit","200");const a=await fetch(Zs(`/api/admin/tasks?${t.toString()}`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),l=await a.json().catch(()=>null);if(!a.ok)throw new Error((null==l?void 0:l.message)||`Görevler yüklenemedi (HTTP ${a.status})`);n(Array.isArray(null==l?void 0:l.data)?l.data:[])}catch(t){n([]),i((null==t?void 0:t.message)||"Görevler yüklenemedi")}finally{s(!1)}})()},[]),Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Görevler - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-8",children:[Ot.jsxs("div",{className:"mb-6",children:[Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Görevler"}),Ot.jsx("p",{className:"text-slate-600",children:"Atama + öncelik + SLA"})]}),Ot.jsxs("div",{className:"card p-6",children:[a&&Ot.jsx("div",{className:"mb-4 p-3 rounded-lg border border-red-200 bg-red-50 text-sm text-red-700",children:a}),t?Ot.jsx("div",{className:"text-sm text-slate-600",children:"Yükleniyor…"}):0===r.length?Ot.jsx("div",{className:"text-sm text-slate-600",children:"Kayıt yok."}):Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"min-w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500 border-b",children:[Ot.jsx("th",{className:"py-2 pr-4",children:"ID"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Başlık"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Durum"}),Ot.jsx("th",{className:"py-2 pr-0",children:"Tarih"})]})}),Ot.jsx("tbody",{className:"divide-y",children:r.map((e,t)=>Ot.jsxs("tr",{className:"hover:bg-slate-50",children:[Ot.jsx("td",{className:"py-3 pr-4 font-mono text-xs text-slate-700",children:e.id??"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-900 font-semibold",children:e.title||e.name||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.status||"—"}),Ot.jsx("td",{className:"py-3 pr-0 text-slate-700",children:String(e.created_at||e.createdAt||"").replace("T"," ").slice(0,16)||"—"})]},String(e.id||t)))})]})})]})]})]})},Fn=()=>{const e=l.useMemo(()=>localStorage.getItem("token")||localStorage.getItem("authToken")||"",[]),[t,s]=l.useState(!0),[a,i]=l.useState(""),[r,n]=l.useState([]);return l.useEffect(()=>{(async()=>{try{s(!0),i("");const t=new URLSearchParams;t.set("limit","200");const a=await fetch(Zs(`/api/admin/audit?${t.toString()}`),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),l=await a.json().catch(()=>null);if(!a.ok)throw new Error((null==l?void 0:l.message)||`Audit yüklenemedi (HTTP ${a.status})`);n(Array.isArray(null==l?void 0:l.data)?l.data:[])}catch(t){n([]),i((null==t?void 0:t.message)||"Audit yüklenemedi")}finally{s(!1)}})()},[]),Ot.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gray-50",children:[Ot.jsx(Rs,{children:Ot.jsx("title",{children:"Audit - Admin"})}),Ot.jsxs("div",{className:"container-custom py-6 lg:py-8",children:[Ot.jsxs("div",{className:"mb-6",children:[Ot.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Audit"}),Ot.jsx("p",{className:"text-slate-600",children:"Kim ne yaptı (okuma ekranı)"})]}),Ot.jsxs("div",{className:"card p-6",children:[a&&Ot.jsx("div",{className:"mb-4 p-3 rounded-lg border border-red-200 bg-red-50 text-sm text-red-700",children:a}),t?Ot.jsx("div",{className:"text-sm text-slate-600",children:"Yükleniyor…"}):0===r.length?Ot.jsx("div",{className:"text-sm text-slate-600",children:"Kayıt yok."}):Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"min-w-full text-sm",children:[Ot.jsx("thead",{children:Ot.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500 border-b",children:[Ot.jsx("th",{className:"py-2 pr-4",children:"Tarih"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Action"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Kullanıcı"}),Ot.jsx("th",{className:"py-2 pr-4",children:"Kaynak"}),Ot.jsx("th",{className:"py-2 pr-0",children:"Detay"})]})}),Ot.jsx("tbody",{className:"divide-y",children:r.map((e,t)=>Ot.jsxs("tr",{className:"hover:bg-slate-50",children:[Ot.jsx("td",{className:"py-3 pr-4 text-slate-700 font-mono text-xs",children:String(e.created_at||e.createdAt||"").replace("T"," ").slice(0,16)||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-900 font-semibold",children:e.action||"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:e.user_id??e.userId??"—"}),Ot.jsx("td",{className:"py-3 pr-4 text-slate-700",children:(e.resource_type||e.resourceType||"—")+(e.resource_id?`:${e.resource_id}`:"")}),Ot.jsx("td",{className:"py-3 pr-0 text-slate-700",children:Ot.jsx("span",{className:"text-xs text-slate-500",children:e.details?String(e.details).slice(0,80):"—"})})]},String(e.id||t)))})]})})]})]})]})},Yn=()=>{const{id:e}=h(),t=e?encodeURIComponent(String(e)):"";return Ot.jsx(u,{to:`/individual/my-shipments?shipmentId=${t}`,replace:!0})},qn=()=>{const e=`/${Ca}`;return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Di,{}),Ot.jsxs(p,{children:[Ot.jsx(g,{path:"/",element:Ot.jsx(Ja,{})}),Ot.jsx(g,{path:"/login",element:Ot.jsx(Wa,{})}),Ot.jsx(g,{path:"/register",element:Ot.jsx(Za,{})}),Ot.jsx(g,{path:"/forgot-password",element:Ot.jsx(gl,{})}),Ot.jsx(g,{path:"/reset-password",element:Ot.jsx(fl,{})}),Ot.jsx(g,{path:"/email-verification",element:Ot.jsx(yl,{})}),Ot.jsx(g,{path:"/about",element:Ot.jsx(jl,{})}),Ot.jsx(g,{path:"/contact",element:Ot.jsx(vl,{})}),Ot.jsx(g,{path:"/terms",element:Ot.jsx(Nl,{})}),Ot.jsx(g,{path:"/privacy",element:Ot.jsx(kl,{})}),Ot.jsx(g,{path:"/cookie-policy",element:Ot.jsx(wl,{})}),Ot.jsx(g,{path:"/kvkk-aydinlatma",element:Ot.jsx(Sl,{})}),Ot.jsx(g,{path:"/consumer-rights",element:Ot.jsx(zl,{})}),Ot.jsx(g,{path:"/distance-selling-contract",element:Ot.jsx(Tl,{})}),Ot.jsx(g,{path:"/dashboard",element:Ot.jsx(Pi,{})}),Ot.jsx(g,{path:"/individual/tracking",element:Ot.jsx(u,{to:"/individual/live-tracking",replace:!0})}),Ot.jsx(g,{path:"/tasiyici/jobs",element:Ot.jsx(u,{to:"/tasiyici/islerim",replace:!0})}),Ot.jsx(g,{path:"/onboarding",element:Ot.jsx(Ei,{})}),Ot.jsx(g,{path:"/cost-calculator",element:Ot.jsx(_i,{})}),Ot.jsx(g,{path:"/case-studies",element:Ot.jsx(Ii,{})}),Ot.jsx(g,{path:"/commission-calculator",element:Ot.jsx(Ki,{})}),Ot.jsx(g,{path:"/mobile",element:Ot.jsx(Si,{userType:"individual",title:"Mobil Panel",children:Ot.jsx("div",{children:"Mobil Panel İçeriği"})})}),Ot.jsx(g,{path:`${e}/login`,element:Ot.jsx(_n,{})}),Ot.jsxs(g,{path:e,element:Ot.jsx(Ti,{children:Ot.jsx(Ai,{})}),children:[Ot.jsx(g,{index:!0,element:Ot.jsx(Kn,{})}),Ot.jsx(g,{path:"command-center",element:Ot.jsx(u,{to:`${e}/ops`,replace:!0})}),Ot.jsx(g,{path:"assistant",element:Ot.jsx(u,{to:`${e}/ops`,replace:!0})}),Ot.jsx(g,{path:"inbox",element:Ot.jsx(u,{to:`${e}/ops`,replace:!0})}),Ot.jsx(g,{path:"dashboard",element:Ot.jsx(Bn,{})}),Ot.jsx(g,{path:"search",element:Ot.jsx(u,{to:`${e}/ops`,replace:!0})}),Ot.jsx(g,{path:"users",element:Ot.jsx(In,{})}),Ot.jsx(g,{path:"ops",element:Ot.jsx($n,{})}),Ot.jsx(g,{path:"system",element:Ot.jsx(Mn,{})}),Ot.jsx(g,{path:"cases",element:Ot.jsx(Rn,{})}),Ot.jsx(g,{path:"complaints",element:Ot.jsx(Ln,{})}),Ot.jsx(g,{path:"flags",element:Ot.jsx(On,{})}),Ot.jsx(g,{path:"support",element:Ot.jsx(Pn,{})}),Ot.jsx(g,{path:"planner",element:Ot.jsx(Gn,{})}),Ot.jsx(g,{path:"audit",element:Ot.jsx(Fn,{})})]}),Ot.jsxs(g,{path:"/individual",element:Ot.jsx(zi,{requiredRole:"individual",children:Ot.jsx(El,{})}),children:[Ot.jsx(g,{path:"dashboard",element:Ot.jsx(Pi,{})}),Ot.jsx(g,{path:"create-shipment",element:Ot.jsx(Hi,{})}),Ot.jsx(g,{path:"offers",element:Ot.jsx(lr,{})}),Ot.jsx(g,{path:"my-shipments",element:Ot.jsx(ur,{})}),Ot.jsx(g,{path:"complaint",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"complaint/:shipmentId",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"shipment-detail/:id",element:Ot.jsx(Yn,{})}),Ot.jsx(g,{path:"shipments/:id",element:Ot.jsx(Yn,{})}),Ot.jsx(g,{path:"history",element:Ot.jsx(pr,{})}),Ot.jsx(g,{path:"live-tracking",element:Ot.jsx(br,{})}),Ot.jsx(g,{path:"messages",element:Ot.jsx(Xi,{})}),Ot.jsx(g,{path:"settings",element:Ot.jsx(vr,{})}),Ot.jsx(g,{path:"help",element:Ot.jsx(Nr,{})})]}),Ot.jsxs(g,{path:"/corporate",element:Ot.jsx(zi,{requiredRole:"corporate",children:Ot.jsx(ji,{})}),children:[Ot.jsx(g,{path:"dashboard",element:Ot.jsx(yi,{})}),Ot.jsx(g,{path:"shipments/new",element:Ot.jsx(u,{to:"/corporate/create-shipment",replace:!0})}),Ot.jsx(g,{path:"shipments/:id",element:Ot.jsx(u,{to:"/corporate/shipments",replace:!0})}),Ot.jsx(g,{path:"create-shipment",element:Ot.jsx(Cr,{})}),Ot.jsx(g,{path:"shipments",element:Ot.jsx(ur,{basePath:"/corporate"})}),Ot.jsx(g,{path:"offers",element:Ot.jsx(Br,{})}),Ot.jsx(g,{path:"complaint",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"complaint/:shipmentId",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"analytics",element:Ot.jsx(Ar,{})}),Ot.jsx(g,{path:"live-tracking",element:Ot.jsx(br,{})}),Ot.jsx(g,{path:"tracking",element:Ot.jsx(u,{to:"/corporate/live-tracking",replace:!0})}),Ot.jsx(g,{path:"messages",element:Ot.jsx(Dr,{})}),Ot.jsx(g,{path:"settings",element:Ot.jsx(Er,{})}),Ot.jsx(g,{path:"carriers",element:Ot.jsx(Mr,{})}),Ot.jsx(g,{path:"help",element:Ot.jsx($r,{})})]}),Ot.jsxs(g,{path:"/nakliyeci",element:Ot.jsx(zi,{requiredRole:"nakliyeci",children:Ot.jsx(Ni,{})}),children:[Ot.jsx(g,{path:"dashboard",element:Ot.jsx(Or,{})}),Ot.jsx(g,{path:"jobs",element:Ot.jsx(Wr,{})}),Ot.jsx(g,{path:"route-planner",element:Ot.jsx(sn,{})}),Ot.jsx(g,{path:"offers",element:Ot.jsx(Pr,{})}),Ot.jsx(g,{path:"listings",element:Ot.jsx(un,{})}),Ot.jsx(g,{path:"drivers",element:Ot.jsx(nn,{})}),Ot.jsx(g,{path:"active-shipments",element:Ot.jsx(xn,{})}),Ot.jsx(g,{path:"complaint",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"complaint/:shipmentId",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"analytics",element:Ot.jsx(Yr,{})}),Ot.jsx(g,{path:"messages",element:Ot.jsx(qr,{})}),Ot.jsx(g,{path:"wallet",element:Ot.jsx(dn,{})}),Ot.jsx(g,{path:"settings",element:Ot.jsx(Ur,{})}),Ot.jsx(g,{path:"help",element:Ot.jsx(Vr,{})})]}),Ot.jsxs(g,{path:"/tasiyici",element:Ot.jsx(zi,{requiredRole:"tasiyici",children:Ot.jsx(wi,{})}),children:[Ot.jsx(g,{path:"dashboard",element:Ot.jsx(hn,{})}),Ot.jsx(g,{path:"jobs/:id",element:Ot.jsx(fn,{})}),Ot.jsx(g,{path:"market",element:Ot.jsx(Sn,{})}),Ot.jsx(g,{path:"islerim",element:Ot.jsx(Dn,{})}),Ot.jsx(g,{path:"my-offers",element:Ot.jsx(yn,{})}),Ot.jsx(g,{path:"active-jobs",element:Ot.jsx(u,{to:"/tasiyici/islerim",replace:!0})}),Ot.jsx(g,{path:"completed-jobs",element:Ot.jsx(wn,{})}),Ot.jsx(g,{path:"complaint",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"complaint/:shipmentId",element:Ot.jsx(kr,{})}),Ot.jsx(g,{path:"messages",element:Ot.jsx(jn,{})}),Ot.jsx(g,{path:"settings",element:Ot.jsx(Nn,{})}),Ot.jsx(g,{path:"help",element:Ot.jsx(En,{})})]}),Ot.jsx(g,{path:"*",element:Ot.jsx(Cl,{})})]})]})};function Hn(){return Ot.jsx(Ta,{children:Ot.jsx(Es,{children:Ot.jsx(ia,{children:Ot.jsx(aa,{children:Ot.jsx(ha,{children:Ot.jsx(wa,{children:Ot.jsx("div",{className:"App",children:Ot.jsx(qn,{})})})})})})})})}const Un=document.getElementById("root");if(!Un)throw new Error("Root element not found");Pt.createRoot(Un).render(Ot.jsx(n.StrictMode,{children:Ot.jsx(b,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:Ot.jsx(Hn,{})})}));
